System.register("chunks:///_virtual/_template.ts", ['cc', './ViewModel.ts'], function (exports) {
  var cclegacy, ViewModel;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      ViewModel = module.default;
    }],
    execute: function () {
      cclegacy._RF.push({}, "a2c29CGt0RN5ov7MepeEtvE", "_template", undefined);
      class PersonCenterViewModel extends ViewModel {
        constructor() {
          super('Hall_PcMainPanel');
        }
        begin() {}
        connect() {
          this.inject({}, state => {
            return {
              memberInfo: null
            };
          });
          return this;
        }
      }
      exports('default', PersonCenterViewModel);
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/ActivityViewModel.ts", ['cc', './ViewModel.ts', './Hall_ActivityPanel.ts', './apiUrl.ts', './globals.ts', './memberInfo2.ts', './socketConnect.ts'], function (exports) {
  var cclegacy, ViewModel, ActivityType, ApiUrl, fetcher, updateActivityStatus, hallWebSocketDriver, SKT_MAG_TYPE;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      ViewModel = module.default;
    }, function (module) {
      ActivityType = module.ActivityType;
    }, function (module) {
      ApiUrl = module.ApiUrl;
    }, function (module) {
      fetcher = module.fetcher;
    }, function (module) {
      updateActivityStatus = module.updateActivityStatus;
    }, function (module) {
      hallWebSocketDriver = module.hallWebSocketDriver;
      SKT_MAG_TYPE = module.SKT_MAG_TYPE;
    }],
    execute: function () {
      cclegacy._RF.push({}, "eedd6nrA79FcYldjCW+ZpJb", "ActivityViewModel", undefined);
      class ActivityViewModel extends ViewModel {
        constructor() {
          super("Hall_ActivityPanel");
        }
        begin() {
          fetcher.send(ApiUrl.ACTIVITY_LIST, {}, "get").then(rsp => {
            this.setActivityItemId(rsp);
            this.setProps({
              activityList: rsp
            });
          }).catch(e => {
            //this.dispatch(addToastAction({ content: e }))
          });
          this.setEvent({
            setReadStatus: value => {
              this.setReadStatus(this.comp.props.activityList, value);
            },
            getItemUnreadStatus: value => {
              return this.getItemUnreadStatus(value);
            },
            deleteReadStatus: value => {
              this.deleteReadStatus(value);
            }
          });
        }
        initReadStatus() {
          const url = `${ApiUrl.ACTIVITY_LIST}?t=${Date.parse(new Date())}`;
          fetcher.send(url, {}, "get").then(rsp => {
            const activityList = rsp;
            this.setActivityItemId(activityList);
            const status = this.getUnreadStatus(activityList);
            this.dispatch(updateActivityStatus(status));
            if (activityList && activityList.find(v => v.gameId === ActivityType.TURNPLATE)) {
              this.initTurntabledateStatus(activityList);
            }
          }).catch(e => {
            //this.dispatch(addToastAction({ content: e }))
          });
        }
        setActivityItemId(activityList) {
          activityList && activityList.forEach(v => v.id = v.name);
        }

        /**
         * 获得活动未读状态
         * @param activityList 
         * @returns 
         */
        getUnreadStatus(activityList, actIds = undefined) {
          if (!actIds) {
            actIds = this.getCacheActIds();
            if (actIds.length === 0) {
              return true;
            }
          }
          for (let i = 0; i < activityList.length; i++) {
            const element = activityList[i];
            if (!actIds.find(v => v === element.id)) {
              return true;
            }
          }

          // 把已经关闭的活动已读标识删掉
          for (let i = 0; i < actIds.length; i++) {
            const actId = actIds[i];
            if (!activityList.find(v => v.id === actId)) {
              actIds.splice(i, 1);
              i--;
            }
          }
          localStorage.setItem("actIds", JSON.stringify(actIds));
          return false;
        }
        getItemUnreadStatus(value) {
          return !this.getCacheActIds().find(v => v === value);
        }
        setReadStatus(activityList, value) {
          let actIds = this.getCacheActIds();
          if (!actIds.find(v => v === value)) {
            actIds.push(value);
          }
          localStorage.setItem("actIds", JSON.stringify(actIds));
          const status = this.getUnreadStatus(activityList, actIds);
          this.dispatch(updateActivityStatus(status));
        }

        /**删除已读状态 */
        deleteReadStatus(value) {
          let actIds = this.getCacheActIds();
          if (actIds.length > 0) {
            actIds = actIds.filter(v => v !== value);
            localStorage.setItem("actIds", JSON.stringify(actIds));
          }
        }

        /**初始化转盘数据 */
        initTurntabledateStatus(activityList) {
          const turntableData = activityList.find(v => v.gameId === ActivityType.TURNPLATE);
          hallWebSocketDriver.sktMsgListener.addOnce(SKT_MAG_TYPE.TURNTABLEDATA, "main", (data, error) => {
            if (error) return;
            if (data[0]) {
              if (data[0].count > 0) {
                this.deleteReadStatus(turntableData.id);
              } else {
                this.setReadStatus(activityList, turntableData.id);
              }
            } else {
              this.setReadStatus(activityList, turntableData.id);
            }
          });
          hallWebSocketDriver.sendSktMessage(SKT_MAG_TYPE.TURNTABLEDATA);
        }
        getCacheActIds() {
          const value = localStorage.getItem("actIds");
          let actIds = [];
          if (value) {
            actIds = JSON.parse(value);
          }
          return actIds;
        }
        connect() {
          this.inject({}, state => {
            return {};
          });
          return this;
        }
      }
      exports('default', ActivityViewModel);
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/apiUrl.ts", ['cc'], function (exports) {
  var cclegacy;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }],
    execute: function () {
      cclegacy._RF.push({}, "53800++849JDpZ0zkHdbVfK", "apiUrl", undefined);
      let ApiUrl = exports('ApiUrl', /*#__PURE__*/function (ApiUrl) {
        ApiUrl["NOTICE"] = "/global/api/appNotice";
        ApiUrl["LOGIN_PWD"] = "/user/api/memberLogin";
        ApiUrl["LOGIN_OUT"] = "/hall/api/member/loginOut";
        ApiUrl["SEND_SMS"] = "/user/api/sendLoginSms";
        ApiUrl["RESET_PASSWORD"] = "/user/api/resetLoginPassword";
        ApiUrl["MEMBER_UPGRADES"] = "/user/api/memberUpgrades";
        ApiUrl["LOGIN_FAST"] = "/user/api/memberLoginF";
        ApiUrl["REG"] = "/user/api/memberRegister";
        ApiUrl["IS_SET_PWD"] = "/hall/api/member/querySafePassword";
        ApiUrl["VERIFY_BANK_PWD"] = "/hall/api/member/authAccessSafe";
        ApiUrl["SET_BANK_PWD"] = "/hall/api/member/setSafePassword";
        ApiUrl["TRASFER_BANK_GLOD"] = "/hall/api/member/accessSafe";
        ApiUrl["WITHDRAW_BANK_CHANNEL_LIST"] = "/hall/api/transfer/list";
        ApiUrl["WITHDRAW_BIND_CARD"] = "/hall/api/transfer/bindBank";
        ApiUrl["WITHDRAW_ORDER"] = "/hall/api/transfer/transferOrder";
        ApiUrl["USER_ORDER_LIST"] = "/hall/api/order/list";
        ApiUrl["EMAIL_LIST"] = "/hall/api/member/emailPage";
        ApiUrl["CHECK_EMAIL"] = "/hall/api/member/emailCheck";
        ApiUrl["DELETE_EMAIL"] = "/hall/api/member/emailDel";
        ApiUrl["GET_MEMBER_SIGN_IN_LIST"] = "/hall/api/member/getMemberSignInList";
        ApiUrl["SIGN_IN"] = "/hall/api/member/signIn";
        ApiUrl["ACTIVITY_LIST"] = "/hall/api/activity/list";
        ApiUrl["RECOMMEND_DATA"] = "/hall/api/member/recommendData";
        ApiUrl["RECOMMENDDATATOTODAY"] = "/hall/api/member/recommendDataToToday";
        ApiUrl["RECOMMEND_MEMBER_INFO"] = "/hall/api/member/recommendMemberInfo";
        ApiUrl["MYRECOMMENDINFO"] = "/hall/api/member/myRecommendInfo";
        ApiUrl["RECOMMEND_BIND"] = "/hall/api/member/recommendBind";
        ApiUrl["CODE_CONVER"] = "/hall/api/member/redeemGiftPackage";
        ApiUrl["BENEFIT"] = "/hall/api/member/benefit";
        ApiUrl["DRAW_WATER"] = "/hall/api/member/withdrawCommissionOrWater";
        ApiUrl["INVITE"] = "/hall/api/invite";
        ApiUrl["GAME_SWIPE"] = "/hall/api/swipe/list";
        ApiUrl["CHANNEL_PACKAGE"] = "/hall/channelPackage/thirdEvent";
        ApiUrl["FCM_TOKEN_BIND"] = "/hall/api/fcm/bind";
        ApiUrl["GET_BIND_PHONE_GOLD"] = "/hall/api/invite/getBindPoneGold";
        ApiUrl["ADJUST_ACCEPT"] = "/user/adjust/accept";
        ApiUrl["GET_VIP_BONUS"] = "/hall/api/member/vipBonus";
        ApiUrl["GET_RECHARGE_LIST"] = "/hall/api/channel/rechargeList";
        ApiUrl["RECEIVE_EMAIL_ANNEX"] = "/hall/api/member/receiveEmailAnnex";
        ApiUrl["GET_DAILY_TASK_LIST"] = "/api/dailyTask/accumulatedDeposits/getList";
        ApiUrl["DAILY_TASK_RECEIVE"] = "/api/dailyTask/accumulatedDeposits/receive";
        return ApiUrl;
      }({}));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/App.ts", ['cc', './index4.ts', './Singleton.ts', './extend.ts'], function (exports) {
  var find, cclegacy, assetManager, startUp, Singleton;
  return {
    setters: [function (module) {
      find = module.find;
      cclegacy = module.cclegacy;
      assetManager = module.assetManager;
    }, function (module) {
      startUp = module.startUp;
    }, function (module) {
      Singleton = module.default;
    }, null],
    execute: function () {
      cclegacy._RF.push({}, "a8b186DlXdEjKuWtVl9uCOO", "App", undefined);
      // import { sendMixpanelEvents } from './common/bridge';

      assetManager.downloader.maxConcurrency = 1000;
      assetManager.downloader.maxRequestsPerFrame = 1000;
      class App extends Singleton {
        start() {
          startUp(find('Canvas'));
          // sendMixpanelEvents("test_event", { "test_key": "test_value" });
        }
      }

      exports('default', App);
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/AudioMgr.ts", ['cc', './UseSetOption.ts'], function (exports) {
  var cclegacy, Node, director, AudioSource, AudioClip, UseSetOption;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      Node = module.Node;
      director = module.director;
      AudioSource = module.AudioSource;
      AudioClip = module.AudioClip;
    }, function (module) {
      UseSetOption = module.default;
    }],
    execute: function () {
      cclegacy._RF.push({}, "47834m/vD9CzZNQE2oT77EH", "AudioMgr", undefined);
      /**
       * @en
       * this is a sington class for audio play, can be easily called from anywhere in you project.
       * @zh
       * 这是一个用于播放音频的单件类，可以很方便地在项目的任何地方调用。
       */
      class AudioMgr {
        constructor(sourceManage) {
          /**背景音乐 */
          this._audioSource = void 0;
          /**长音效 */
          this._longSoundSource = void 0;
          /**短音效 */
          this._shortSoundSource = void 0;
          this.sourceManage = void 0;
          // private audioMgr: Node
          this.nodes = [];
          this.disable = false;
          console.log('[AudioMgr] constructor called');
          this.sourceManage = sourceManage;
          console.log('[AudioMgr] creating bgm music node');
          this._audioSource = this.createNode("__bgm_music__");
          console.log('[AudioMgr] creating long sound node');
          this._longSoundSource = this.createNode("__long_sound__");
          console.log('[AudioMgr] creating short sound node');
          this._shortSoundSource = this.createNode("__short_sound__");
          console.log('[AudioMgr] constructor finished');
        }
        get audioSource() {
          return this._audioSource;
        }
        getAudioInstance() {
          return this._audioSource;
        }
        createNode(name) {
          // console.log(`[AudioMgr] createNode: ${name}`);
          const audioMgr = new Node();
          audioMgr.name = name;

          //@en add to the scene.
          //@zh 添加节点到场景
          const scene = director.getScene();
          // console.log(`[AudioMgr] director.getScene():`, scene);
          if (!scene) {
            console.error(`[AudioMgr] Scene is null! Cannot add child.`);
            return null;
          }
          director.getScene().addChild(audioMgr);

          //@en make it as a persistent node, so it won't be destroied when scene change.
          //@zh 标记为常驻节点，这样场景切换的时候就不会被销毁了
          director.addPersistRootNode(audioMgr);
          this.nodes.push(audioMgr);

          //@en add AudioSource componrnt to play audios.
          //@zh 添加 AudioSource 组件，用于播放音频。
          return audioMgr.addComponent(AudioSource);
        }

        /**
         * @en
         * play short audio, such as strikes,explosions
         * @zh
         * 播放短音频,比如 打击音效，爆炸音效等
         * @param sound clip or url for the audio
         * @param volume 
         */
        playOneShot(sound, volume = 1.0, isReplace = true) {
          if (!UseSetOption.Instance().option.sound) return;
          if (this.disable) return;
          const source = this.sourceManage.getFile(sound).source;
          if (source instanceof AudioClip) {
            // this._audioSource.playOneShot(source, volume);
            isReplace ? this.playSound(source, volume) : this._audioSource.playOneShot(source, volume);
            // this.playSound(source);
          } else {
            const bundler = this.sourceManage.bundle;
            bundler.load(source, (err, clip) => {
              if (err) {
                console.log(err);
              } else {
                // this._audioSource.playOneShot(clip, volume);
                this.playSound(clip, volume);
              }
            });
          }
        }
        isNotValid(source) {
          return !source || !source.isValid;
        }
        playSound(clip, volume = 1.0) {
          const audioSource = clip.getDuration() > 1 ? this._longSoundSource : this._shortSoundSource;
          if (this.isNotValid(audioSource)) return;
          audioSource.volume = volume;
          audioSource.clip = clip;
          audioSource.loop = false;
          audioSource.play();
        }
        getPlayingVolume() {
          return this.audioSource.volume;
        }
        /**
         * @en
         * play long audio, such as the bg music
         * @zh
         * 播放长音频，比如 背景音乐
         * @param sound clip or url for the sound
         * @param volume 
         */
        play(sound, isLoop = false, volume = 1.0) {
          if (!UseSetOption.Instance().option.music) return;
          if (this.disable) return;
          if (this._audioSource.playing) return;
          if (this.isNotValid(this.audioSource)) return;
          // console.log('play:' + sound)
          const source = this.sourceManage.getFile(sound).source;
          if (source instanceof AudioClip) {
            this._audioSource.clip = source;
            this._audioSource.loop = isLoop;
            // this._audioSource.playOnAwake = true
            this.audioSource.volume = volume;
            this._audioSource.play();
          } else {
            const bundler = this.sourceManage.bundle;
            bundler.load(source, (err, clip) => {
              if (this.isNotValid(this.audioSource)) return;
              if (err) {
                console.log(err);
              } else {
                this._audioSource.clip = clip;
                this._audioSource.loop = isLoop;
                this.audioSource.volume = volume;
                this._audioSource.play();
              }
            });
          }
        }
        setMusicVolume(volume) {
          this.audioSource.volume = volume;
        }

        /**
         * stop the audio play
         */
        stop() {
          this._audioSource.stop();
        }
        longStop() {
          this._longSoundSource.stop();
        }
        /**
         * pause the audio play
         */
        pause() {
          this._audioSource.pause();
        }

        /**
         * resume the audio play
         */
        resume() {
          if (!UseSetOption.Instance().option.music) return;
          this._audioSource.play();
        }
        remove() {
          // this.audioMgr.destroy()
          this.nodes.forEach(v => v.destroy());
          this.nodes = [];
        }
      }
      exports('AudioMgr', AudioMgr);
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/BankViewModel.ts", ['cc', './ViewModel.ts', './socketConnect.ts', './apiUrl.ts', './baseBoard.ts', './globals.ts'], function (exports) {
  var cclegacy, ViewModel, hallWebSocketDriver, SKT_MAG_TYPE, ApiUrl, addToastAction, fetcher, lang;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      ViewModel = module.default;
    }, function (module) {
      hallWebSocketDriver = module.hallWebSocketDriver;
      SKT_MAG_TYPE = module.SKT_MAG_TYPE;
    }, function (module) {
      ApiUrl = module.ApiUrl;
    }, function (module) {
      addToastAction = module.addToastAction;
    }, function (module) {
      fetcher = module.fetcher;
      lang = module.lang;
    }],
    execute: function () {
      cclegacy._RF.push({}, "221575NTGFEVq0ls3fE2rtT", "BankViewModel", undefined);
      class BankViewModel extends ViewModel {
        constructor() {
          super('Hall_BankPanel');
        }
        begin() {
          this.setEvent({
            verifyPwd: pwd => {
              return new Promise((resolve, reject) => {
                fetcher.send(ApiUrl.VERIFY_BANK_PWD, {
                  data: pwd
                }).then(rsp => {
                  resolve(true);
                }).catch(e => {
                  reject(e);
                });
              });
            },
            setBankPassword: (loginPassword, safePassword) => {
              return new Promise((resolve, reject) => {
                fetcher.send(ApiUrl.SET_BANK_PWD, {
                  loginPassword,
                  safePassword
                }).then(rsp => {
                  this.dispatch(addToastAction({
                    content: lang.write(k => k.BankModule.BankPassword, {}, {
                      placeStr: "设置银行保险箱密码完成~"
                    })
                  }));
                  resolve(true);
                }).catch(e => {
                  reject(e);
                });
              });
            },
            transferCapital: (amount, direction) => {
              return new Promise((resolve, reject) => {
                fetcher.send(ApiUrl.TRASFER_BANK_GLOD, {
                  assetGold: amount,
                  type: direction
                }).then(rsp => {
                  this.dispatch(addToastAction({
                    content: lang.write(k => k.BankModule.BankTransfer, {}, {
                      placeStr: "保险箱金币转移完成~"
                    })
                  }));
                  hallWebSocketDriver.sendSktMessage(SKT_MAG_TYPE.MEMBER_INFO, {}, {
                    isLoading: true
                  });
                  resolve(true);
                }).catch(e => {
                  reject(e);
                });
              });
            }
          });
        }
        connect() {
          this.inject({}, state => {
            return {
              memberAssetGoldPieces: state.memberInfo.memberAssetGoldPieces,
              memberAssetSafeGoldPieces: state.memberInfo.memberAssetSafeGoldPieces
            };
          });
          return this;
        }
      }
      exports('default', BankViewModel);
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/baseBoard.ts", ['cc', './index.mjs_cjs=&original=.js', './types.ts', './index.js'], function (exports) {
  var cclegacy, ToastType, ToastPosition, _cjsExports;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, null, function (module) {
      ToastType = module.ToastType;
      ToastPosition = module.ToastPosition;
      var _setter = {};
      _setter.ToastPosition = module.ToastPosition;
      _setter.ToastType = module.ToastType;
      exports(_setter);
    }, function (module) {
      _cjsExports = module.default;
    }],
    execute: function () {
      cclegacy._RF.push({}, "9e49eaZSKBJzb7NvdNVoAhf", "baseBoard", undefined);
      /**必须大写，不然redux-act这狗日的要自动加序列号 */
      let ActionTypes = exports('ActionTypes', /*#__PURE__*/function (ActionTypes) {
        ActionTypes["ADD_TOAST"] = "ADD_TOAST";
        ActionTypes["SET_LOADING"] = "SET_LOADING";
        ActionTypes["SET_ACTIVE_SUBGAME"] = "SET_ACTIVE_SUBGAME";
        ActionTypes["SET_SUBGAME_STATE"] = "SET_SUBGAME_STATE";
        ActionTypes["RESET_DATA_BOARD"] = "RESET_DATA_BOARD";
        ActionTypes["CHANGE_WEB_VIEW"] = "CHANGE_WEB_VIEW";
        ActionTypes["LOAD_RECOMMEND_DATA"] = "LOAD_RECOMMEND_DATA";
        ActionTypes["SOCKET_CONNECT"] = "SOCKET_CONNECT";
        ActionTypes["APP_DOWNLOAD_GUIDE"] = "APP_DOWNLOAD_GUIDE";
        ActionTypes["UPDATE_MAIL_STATUS"] = "UPDATE_MAIL_STATUS";
        ActionTypes["UPDATE_VIP_BONUSINFO"] = "UPDATE_VIP_BONUSINFO";
        ActionTypes["TOP_UP_CHOOSE_AMOUNT"] = "TOP_UP_CHOOSE_AMOUNT";
        return ActionTypes;
      }({}));

      /**定义action的payLoad类型 */

      /**
       * 添加toast消息，forceLandscape：是否强制横向，默认强制，若设为false，则根据游戏的方向自动适应展示
       */
      const addToastAction = exports('addToastAction', _cjsExports.createAction(ActionTypes.ADD_TOAST, toastData => {
        console.log(toastData.content);
        return {
          toastData: {
            ...toastData,
            type: toastData.type || ToastType.NORMAL,
            position: toastData.position || ToastPosition.BOTTOM,
            forceLandscape: toastData.forceLandscape === undefined ? true : toastData.forceLandscape
          }
        };
      }));
      const setLoadingAction = exports('setLoadingAction', _cjsExports.createAction(ActionTypes.SET_LOADING, isLoadPayload => {
        return {
          isLoadPayload
        };
      }));
      const setSubGameInfoAction = exports('setSubGameInfoAction', _cjsExports.createAction(ActionTypes.SET_ACTIVE_SUBGAME, subGameInfo => {
        return {
          subGameInfo
        };
      }));
      const setSubGameRunState = exports('setSubGameRunState', _cjsExports.createAction(ActionTypes.SET_SUBGAME_STATE, subGameRunState => {
        return {
          subGameRunState
        };
      }));
      const changeWebView = exports('changeWebView', _cjsExports.createAction(ActionTypes.CHANGE_WEB_VIEW, value => {
        return {
          value
        };
      }));
      const loadRecommendData = exports('loadRecommendData', _cjsExports.createAction(ActionTypes.LOAD_RECOMMEND_DATA, () => {
        return {};
      }));
      const setSocketConnectStatus = exports('setSocketConnectStatus', _cjsExports.createAction(ActionTypes.SOCKET_CONNECT, connectData => {
        return {
          connectData
        };
      }));
      const setAppDownLoadGuide = exports('setAppDownLoadGuide', _cjsExports.createAction(ActionTypes.APP_DOWNLOAD_GUIDE, appDownLoadGuide => {
        return {
          appDownLoadGuide
        };
      }));
      const resetDataBaseBoard = exports('resetDataBaseBoard', _cjsExports.createAction(ActionTypes.RESET_DATA_BOARD, () => {}));
      const updateMailStatus = exports('updateMailStatus', _cjsExports.createAction(ActionTypes.UPDATE_MAIL_STATUS, UnreadMailNum => {
        return {
          UnreadMailNum
        };
      }));
      const updateVipBonusInfo = exports('updateVipBonusInfo', _cjsExports.createAction(ActionTypes.UPDATE_VIP_BONUSINFO, vipBonusInfo => {
        return {
          vipBonusInfo
        };
      }));
      const changeChooseAmount = exports('changeChooseAmount', _cjsExports.createAction(ActionTypes.TOP_UP_CHOOSE_AMOUNT, chooseAmount => {
        return {
          chooseAmount
        };
      }));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/baseBoard2.ts", ['cc', './baseBoard.ts', './types.ts', './index.mjs_cjs=&original=.js', './index.js'], function (exports) {
  var instantiate, cclegacy, ActionTypes, ToastType, ToastPosition, _cjsExports;
  return {
    setters: [function (module) {
      instantiate = module.instantiate;
      cclegacy = module.cclegacy;
    }, function (module) {
      ActionTypes = module.ActionTypes;
    }, function (module) {
      ToastType = module.ToastType;
      ToastPosition = module.ToastPosition;
    }, null, function (module) {
      _cjsExports = module.default;
    }],
    execute: function () {
      cclegacy._RF.push({}, "c8d040FXJ1HgpwVoexLQnjW", "baseBoard", undefined);
      const initState = {
        toastData: {
          content: "",
          type: ToastType.NORMAL,
          position: ToastPosition.MIDDLE,
          forceLandscape: false
        },
        loadPayload: {
          isShow: false,
          isAllowCloseLoading: false,
          flagId: '_'
        },
        subGameInfo: null,
        isShowWebView: true,
        isLoadRecommendData: '',
        isConnect: true,
        remainRetryCount: 0,
        appDownLoadGuide: true,
        UnreadMailNum: -1,
        vipBonusInfo: null,
        chooseAmount: null
      };
      var baseBoardReducer = exports('default', _cjsExports.createReducer({
        [ActionTypes.ADD_TOAST]: (state, payload) => {
          return {
            ...state,
            toastData: payload.toastData
          };
          // state.toastData = { content: "", type: state.toastData.type }
          // return result

          // const _state = instantiate(state)
          // _state.toastData = { ...payload.toastData }
          // console.log('reducer',_state)
          // return _state
        },

        [ActionTypes.SET_LOADING]: (state, payload) => {
          return {
            ...state,
            loadPayload: Object.assign({
              isLoadPayload: false,
              flagId: '_',
              isAllowCloseLoading: false
            }, payload.isLoadPayload)
          };
        },
        [ActionTypes.SET_ACTIVE_SUBGAME]: (state, payload) => {
          return {
            ...state,
            subGameInfo: payload.subGameInfo
          };
        },
        [ActionTypes.SET_SUBGAME_STATE]: (state, payload) => {
          const _state = instantiate(state);
          _state.subGameInfo && (_state.subGameInfo.runState = payload.subGameRunState);
          return _state;
        },
        [ActionTypes.CHANGE_WEB_VIEW]: (state, payload) => {
          return {
            ...state,
            isShowWebView: payload.value
          };
        },
        [ActionTypes.LOAD_RECOMMEND_DATA]: (state, payload) => {
          return {
            ...state,
            isLoadRecommendData: Date.parse(new Date().toString()).toString()
          };
        },
        [ActionTypes.APP_DOWNLOAD_GUIDE]: (state, payload) => {
          return {
            ...state,
            appDownLoadGuide: payload.appDownLoadGuide
          };
        },
        [ActionTypes.SOCKET_CONNECT]: (state, payload) => {
          if (state.remainRetryCount === undefined) ;
          return {
            ...state,
            isConnect: payload.connectData.isConnect,
            remainRetryCount: payload.connectData.remainRetryCount
            // remainRetryCount: (payload.connectData.remainRetryCount === undefined ? (state.remainRetryCount + 1) : payload.connectData.remainRetryCount)
          };
        },

        [ActionTypes.RESET_DATA_BOARD]: () => instantiate(initState),
        [ActionTypes.UPDATE_MAIL_STATUS]: (state, payload) => {
          return {
            ...state,
            UnreadMailNum: payload.UnreadMailNum
          };
        },
        [ActionTypes.UPDATE_VIP_BONUSINFO]: (state, payload) => {
          return {
            ...state,
            vipBonusInfo: payload.vipBonusInfo
          };
        },
        [ActionTypes.TOP_UP_CHOOSE_AMOUNT]: (state, payload) => {
          return {
            ...state,
            chooseAmount: payload.chooseAmount
          };
        }
      }, initState));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/BaseBoardViewModel.ts", ['cc', './ViewModel.ts', './globals.ts', './prefabDefine2.ts', './baseBoard.ts', './socketConnect.ts', './WebSocketStarter.ts', './NodeIOEffect.ts', './MainPanelViewModel.ts', './hallConfig.ts', './config.ts', './apiUrl.ts', './memberInfo2.ts', './withdraw2.ts', './bridge.ts', './mockData.ts', './LoginPageV2ViewModel.ts', './BaseViewModel.ts', './ModalBox.ts', './hallType2.ts', './types.ts'], function (exports) {
  var cclegacy, Prefab, native, sys, ViewModel, sourceManageSeletor, lang, fetcher, PrefabPathDefine, addToastAction, setLoadingAction, setSubGameInfoAction, hallWebSocketDriver, SKT_MAG_TYPE, socketConnect, WebSocketStarter, EffectType, MainPanelViewModel, subGameList, deviceInfo, ApiUrl, resetMemberInfo, resetWithDrawInfo, getDeviceUniqueId, BridgeCode, LoginPageV2ViewModel, BaseViewModel, ModalBox, SubGameRunState, ToastType, ToastPosition;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      Prefab = module.Prefab;
      native = module.native;
      sys = module.sys;
    }, function (module) {
      ViewModel = module.default;
    }, function (module) {
      sourceManageSeletor = module.sourceManageSeletor;
      lang = module.lang;
      fetcher = module.fetcher;
    }, function (module) {
      PrefabPathDefine = module.PrefabPathDefine;
    }, function (module) {
      addToastAction = module.addToastAction;
      setLoadingAction = module.setLoadingAction;
      setSubGameInfoAction = module.setSubGameInfoAction;
    }, function (module) {
      hallWebSocketDriver = module.hallWebSocketDriver;
      SKT_MAG_TYPE = module.SKT_MAG_TYPE;
      socketConnect = module.default;
    }, function (module) {
      WebSocketStarter = module.default;
    }, function (module) {
      EffectType = module.EffectType;
    }, function (module) {
      MainPanelViewModel = module.default;
    }, null, function (module) {
      subGameList = module.subGameList;
      deviceInfo = module.deviceInfo;
    }, function (module) {
      ApiUrl = module.ApiUrl;
    }, function (module) {
      resetMemberInfo = module.resetMemberInfo;
    }, function (module) {
      resetWithDrawInfo = module.resetWithDrawInfo;
    }, function (module) {
      getDeviceUniqueId = module.getDeviceUniqueId;
      BridgeCode = module.BridgeCode;
    }, null, function (module) {
      LoginPageV2ViewModel = module.default;
    }, function (module) {
      BaseViewModel = module.default;
    }, function (module) {
      ModalBox = module.default;
    }, function (module) {
      SubGameRunState = module.SubGameRunState;
    }, function (module) {
      ToastType = module.ToastType;
      ToastPosition = module.ToastPosition;
    }],
    execute: function () {
      cclegacy._RF.push({}, "3e1ef61PFxHqqra7AtNZo0n", "BaseBoardViewModel", undefined);
      class BaseBoardViewModel extends ViewModel {
        constructor() {
          super('Hall_Baseboard');
          this.loginPageV2ViewModel = void 0;
          this.mainPanelViewModel = void 0;
        }
        // private personCanterMainPanel:
        begin() {
          this.initInvite();
          this.listenerBridge();
          getDeviceUniqueId();
          this.setProps({
            toastData: {
              content: "",
              type: ToastType.NORMAL,
              forceLandscape: false,
              position: ToastPosition.MIDDLE
            },
            loadPayload: {
              isShow: false,
              flagId: '_',
              isAllowCloseLoading: false
            }
            // isLoading: false,
            // loadingFlagId: '_',
            // isAllowCloseLoading: false
          });

          this.setEvent({
            onGameClose: () => {
              // this.setProps({ openGameInfo: null })
              // this.dispatch(setSubGameInfoAction(null))
              //看有没有礼包需要弹出
              hallWebSocketDriver.sendSktMessage(SKT_MAG_TYPE.GIFT_LIST, {});
            },
            toastDone: () => {
              //这里重置下toast的内容，不然下次其他数据触发更新，会将之前的数据带过去，然后显示旧信息，因为内容为空的时候信息不会显示
              this.dispatch(addToastAction({
                content: ""
              }));
            }
          });

          // hallWebSocketDriver.sktMsgListener.addOnce(SKT_MAG_TYPE.AUTH, "auth", () => {
          //   this.dispatch(addToastAction({ content: lang.write(k => k.BaseBoardModule.BaseBoardBeat, {}, { placeStr: "认证成功~" }) }))
          // })
          hallWebSocketDriver.sktMsgListener.addOnce(SKT_MAG_TYPE.GIVE_GLOD, "give", (data, error) => {
            if (error) return;
            sourceManageSeletor().getFileAsync(PrefabPathDefine._HELL_WELCOME, Prefab).then(file => {
              const givePanel = new BaseViewModel('Hall_GivePanel').mountView(file.source).appendTo(this.parentNode, {
                effectType: EffectType.EFFECT1,
                isModal: true
              }).setEvent({
                onClosePanel: () => {
                  givePanel.unMount(EffectType.EFFECT2);
                }
              }).setProps({
                amount: data.coins
              });
            });
          });
          const baseBoard = this.comp.getPropertyNode().props_mainBoard;
          this.initLoginPanel(baseBoard, false);
        }
        initMainPanel(baseBoard) {
          this.mainPanelViewModel = new MainPanelViewModel().mountView(sourceManageSeletor().getFile(PrefabPathDefine.MAIN_PANEL).source).appendTo(baseBoard).setEvent({
            onTouchIntoHandler: gameInfo => {
              // this.dispatch(setSubGameInfoAction(gameInfo))
              // this.mainPanelViewModel.viewNode.active = false
            }
          }).connect();
          this.mainPanelViewModel.logOut = (isForce = false) => {
            const exit = () => {
              if (!sys.localStorage.getItem("token")) return;
              this.comp.props.openGameInfo && this.comp.closeSubGame();
              sys.localStorage.removeItem("token");
              // this.comp.getMainBoardNode().destroyAllChildren()
              this.initLoginPanel(baseBoard, false);
              // hallWebSocketDriver.remove()
              // removeInstance()
              WebSocketStarter.Instance().exit();
              this.dispatch(resetMemberInfo(undefined));
              this.dispatch(resetWithDrawInfo(undefined));
              this.comp.scheduleOnce(() => {
                // 踏马的，这里有点诡异
                this.mainPanelViewModel.unMount().then(() => {
                  this.mainPanelViewModel = null;
                });
              }, 0.3);
            };
            if (isForce) {
              // this.dispatch(addToastAction({ content: lang.write(k => k.BaseBoardModule.BaseBoardLogin, {}, { placeStr: "抱歉，您的登录信息变更，已自动退出~" }) }))
              exit();
              this.comp.scheduleOnce(() => {
                ModalBox.Instance().show({
                  content: lang.write(k => k.BaseBoardModule.BaseBoardLogin, {}, {
                    placeStr: "抱歉，您的登录信息变更，已自动退出~"
                  }),
                  type: "Prompt"
                }, () => {
                  return true;
                });
              }, 0.5);
            } else {
              fetcher.send(ApiUrl.LOGIN_OUT).then(data => exit()).catch(e => {
                !isForce && this.dispatch(addToastAction({
                  content: lang.write(k => k.BaseBoardModule.BaseBoardExit, {}, {
                    placeStr: "退出失败~"
                  }),
                  forceLandscape: false
                }));
              });
            }
          };
        }
        /**
         * 初始化加载框
         * @param baseBoard 加载到的底板
         * @param isAutoLogin 是否自动登录
         */
        async initLoginPanel(baseBoard, isAutoLogin = true) {
          // this.loginPageViewModel = new LoginPageViewModel()
          this.loginPageV2ViewModel = new LoginPageV2ViewModel().mountView((await sourceManageSeletor().getFileAsync(PrefabPathDefine._LOGIN_PAGE_V2, Prefab)).source).appendTo(baseBoard).setEvent({
            onLoginSuccess: () => {
              this.dispatch(setLoadingAction({
                isShow: true,
                flagId: 'initLogin'
              }));
              //初始化通信
              socketConnect().then(() => {
                // if (config.appLocalVersion < config.appOnlineVersion) {
                //   //弹出更新提示
                //   this.dispatch(addToastAction({ content: "请更新App至最新版" }))
                // } else {
                //   this.loginPageViewModel.unMount(EffectType.EFFECT1)
                //   sktInstance.sendSktMessage(SKT_MAG_TYPE.AUTH, sys.localStorage.getItem("token"))
                //   // 打开大厅页面
                //   this.initMainPanel(baseBoard)
                // }
                this.dispatch(setLoadingAction({
                  isShow: false,
                  flagId: 'initLogin'
                }));
                this.loginPageV2ViewModel.unMount(EffectType.EFFECT1);
                // sktInstance.sendSktMessage(SKT_MAG_TYPE.AUTH, {
                //   token: sys.localStorage.getItem("token"),
                //   gameId: 0
                // })
                // 打开大厅页面
                this.initMainPanel(baseBoard);
              }).catch(e => {
                // hallWebSocketDriver.remove()
                this.dispatch(setLoadingAction({
                  isShow: false,
                  flagId: 'initLogin'
                }));
              });
            }
          }).setProps({
            isAutoLogin
          }).connect();
        }
        /**是否允许打开子游戏,一般用于子游戏的第一个首预制体已经加载完毕 */
        isAllowOpenSubGame(gameId) {
          if (this.comp.props.openGameInfo) {
            this.mainPanelViewModel.comp.setSubGameGate(gameId, 0, false);
            return false;
          } else {
            //先取得
            //const gateViewModel = this.mainPanelViewModel.comp.gateViewModelList.find(item => item.comp.props.gamesId.indexOf(gameId) !== -1)
            const hallGameGate = subGameList.find(i => i.gameId === gameId);
            if (hallGameGate.runState === SubGameRunState.CANCEL) {
              return false;
            }
            this.dispatch(setSubGameInfoAction(subGameList.find(i => i.gameId === gameId)));
            return true;
          }
        }

        // public connect(initProps: Partial<IProps> = {}) {
        connect(initProps = {}) {
          this.inject(initProps, state => {
            // console.log(state.baseBoard.toastData)
            if (state.baseBoard.subGameInfo === null) {
              this.mainPanelViewModel && (this.mainPanelViewModel.viewNode.active = true);
            }
            return {
              toastData: state.baseBoard.toastData,
              loadPayload: state.baseBoard.loadPayload,
              // isLoading: state.baseBoard.loadPayload.isShow,
              // isAllowCloseLoading: state.baseBoard.loadPayload.isAllowCloseLoading,
              openGameInfo: state.baseBoard.subGameInfo,
              isConnect: state.baseBoard.isConnect,
              remainRetryCount: state.baseBoard.remainRetryCount
            };
          }, false);
        }

        /**监听原生发来的数据 */
        listenerBridge() {
          {
            native.bridge.onNative = (arg0, arg1) => {
              // const bridgeData = JSON.parse(arg1) as BridgeData;
              if (BridgeCode.COPY_CLIPBOARD === arg0) ;else if (BridgeCode.UNIQUE_ID === arg0) {
                // deviceInfo.uniqueId = arg1;
                deviceInfo.setUniqueId(arg1);
              } else if (BridgeCode.APP_VERSION === arg0) {
                console.log(arg1);
              } else if (BridgeCode.ADJUST_ATTRIBUTION === arg0) {
                deviceInfo.setAdjustAttribution(JSON.parse(arg1));
              }
            };
          }
        }
        initInvite() {}
        getMainBoardPanel() {
          return this.comp.getPropertyNode().props_mainBoard;
        }
      }
      exports('default', BaseBoardViewModel);
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/BaseComponent.ts", ['cc', './ViewModel.ts', './tool.ts'], function (exports) {
  var cclegacy, Component, find, viewModelMap, copy, equalValue;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      Component = module.Component;
      find = module.find;
    }, function (module) {
      viewModelMap = module.viewModelMap;
    }, function (module) {
      copy = module.copy;
      equalValue = module.equalValue;
    }],
    execute: function () {
      cclegacy._RF.push({}, "fd5d1hpu5NFOYzG1URruTHB", "BaseComponent", undefined);
      class BaseComponent extends Component {
        constructor() {
          super();
          this.root = void 0;
          this.renderQueue = [{
            key: "*",
            renderHandlerMap: []
          }, {
            key: "state",
            renderHandlerMap: []
          }];
          this.nodeMap = {};
          this.state = void 0;
          this.dispatch = void 0;
          /**是否强制触发，不进行props数据对比 */
          this.forceListen = false;
          this.proxyProps = void 0;
          this.root = find("Canvas");
          this.setState = this.setState.bind(this);
        }

        /**在这里绑定节点事件 */

        /**初始化state数据 */

        /**当传入的props发生变化，要执行的函数(key=_setDone表示一次setProps执行完毕且数据有变更的时候执行) */

        /**绑定UI，界面的初始化工作，也可以在这里做一些useState等操作 */

        /**脚本需要实例化的节点或者节点挂载的组件，这里的key名，必须在被挂载的预制体中存在，否则会异常 */

        /**销毁之前的回调 */
        destroyCallBack() {}
        /**初始化需要用的节点变量 */
        iniProperty() {
          // console.log('iniProperty', this.propertyNode);
          for (let key in this.propertyNode) {
            // console.log('keys', Object.keys(this.propertyNode))
            // console.log('iniProperty key', key)
            // console.log('iniProperty this.nodeMap[key]', this.nodeMap[key])
            if (this.nodeMap[key]) {
              // 打包web桌面版同时release版本时，引擎会替换 Node 这些函数名，Node替换为i,非node替换为了e
              // 节点
              if (this.propertyNode[key].constructor.name === "Node" || this.propertyNode[key].constructor.name === "i") {
                this.propertyNode[key] = this.nodeMap[key];
              } else {
                const comp = this.nodeMap[key].getComponent(this.propertyNode[key].constructor);
                if (comp) {
                  this.propertyNode[key] = comp;
                } else {
                  console.error(`${this.node.name}的节点${key}未找到对对应的组件${this.propertyNode[key].constructor.name}`);
                }
              }
            } else {
              console.error(`${this.node.name}未找到脚本需要的成员节点${key}`);
            }
          }
        }

        /**
         * 订阅值变更的渲染
         * @param render 订阅变化的回调函数
         * @param keyArr 需要订阅的键
         * @param isLoop 是否循环，当keyArr=[]的时候，此值有效，若=true，state有几个值变化，rander函数就会触发几次，并给予更新前后相应的值，若=false，无论多少个state值有多少个值变化，只会在完成后调用一次，并给予更新前后的state，且key=state
         */
        useState(render, keyArr = [], isLoop = true) {
          const _keyArr = Array.from(new Set(keyArr));
          if (_keyArr.length) {
            _keyArr.forEach(key => {
              const renderItem = this.renderQueue.find(i => i.key === key);
              renderItem ? renderItem.renderHandlerMap.push(render) : this.renderQueue.push({
                key: key,
                renderHandlerMap: [render]
              });
            });
          } else {
            this.renderQueue.find(i => i.key === (isLoop ? "*" : "state")).renderHandlerMap.push(render);
          }
          // console.log(this.renderQueue)
        }
        /**
         * 配置state
         * @param newState 新值
         * @param isDeep 是否深度对比（属性有数组才用）
         * @returns 
         */
        setState(newState, isDeep = false) {
          if (!this.state) return;
          const compos = [];
          const oldState = copy(this.state || {});
          for (const key in newState) {
            if (this.state.hasOwnProperty(key)) {
              let preValue = this.state[key];
              if (this.state[key] !== undefined && this.state[key] !== null) {
                preValue = ["object", "function"].indexOf(typeof this.state[key]) !== -1 ? copy(this.state[key]) : this.state[key];
              }
              if (!equalValue(preValue, newState[key], isDeep)) {
                this.state[key] = newState[key];
                compos.push({
                  key,
                  preValue,
                  newValue: newState[key]
                });
              }
            } else {
              throw new Error(`Invalid key: ${key}`);
            }
          }
          compos.forEach(({
            key,
            preValue,
            newValue
          }) => {
            this.renderQueue.filter(item => item.key === key || item.key === "*").forEach(item => item.renderHandlerMap.forEach(render => render(key, {
              pre: preValue,
              cur: newValue
            })));
          });
          compos.length && this.renderQueue.filter(item => item.key === "state").forEach(item => item.renderHandlerMap.forEach(render => render("state", {
            pre: oldState,
            cur: this.state
          })));
        }
        propsProxy() {
          const self = this;
          let proxy = new Proxy(this.props, {
            get(target, key) {
              return target[key];
            },
            set(target, key, value) {
              // if (!this.forceListen) return true
              // const oldValue = ["object", "function"].indexOf(typeof (target[key])) !== -1 ? instantiate(target[key]) : target[key]
              const oldValue = target[key];
              if (!equalValue(oldValue, value) || self.forceListen) {
                target[key] = value;
                try {
                  self.useProps(key, {
                    pre: oldValue,
                    cur: value
                  });
                } catch (e) {
                  console.error(e);
                }
              }
              return true;
            }
          });
          this.proxyProps = proxy;
        }
        onLoad() {
          this.tiledNode();
          this.iniProperty();
          this.state = this.initState(this.props);
          this.bindUI();
          this.bindEvent();
          this.propsProxy();
          // this.setState({ ...this.state })
        }

        /**
         * 初始化props，此函数在节点被挂载后调用才会触发订阅事件
         * @param props 新的props
         * @param force 是否强制触发更新（新旧数据不一致也要触发useProps函数）
         * @param isDeep 是否深度对比（属性有数组才用）
         */
        setProps(props, force = false, isDeep = false) {
          this.forceListen = force;
          if (this.proxyProps) {
            const oldValue = copy(this.props);
            for (let key in props) {
              if (this.proxyProps.hasOwnProperty(key)) {
                this.proxyProps[key] = props[key];
              }
            }
            !equalValue(oldValue, this.props, isDeep) && this.useProps('_setDone', {
              pre: oldValue,
              cur: this.props
            });
          } else {
            this.props = Object.assign({}, this.props, props);
          }
          this.forceListen && (this.forceListen = false);
        }

        /**
         * 配置事件列表
         * @param events 事件列表
         */
        setEvent(events) {
          if (!this.events) return;
          for (let key in events) {
            if (this.events.hasOwnProperty(key)) {
              this.events[key] = events[key];
            }
          }
        }

        /**获取挂载的节点列表 */
        getPropertyNode() {
          return this.propertyNode;
        }

        /**平铺节点 */
        tiledNode(parent = this.node) {
          // console.log('tiledNode parent', parent.name)
          let isPropsNode = parent.name.indexOf("props_") !== -1;
          this.nodeMap[parent.name] && isPropsNode && console.warn(`${this.node.name}在初始化nodeMap时发现同名节点${parent.name}，将覆盖为最后一个`);
          isPropsNode && (this.nodeMap[parent.name] = parent);
          parent.children.length && parent.children.forEach(node => this.tiledNode(node));
        }
        onDestroy() {
          this.destroyCallBack();
          if (viewModelMap[this.node.uuid]) {
            viewModelMap[this.node.uuid].unMount();
          }
        }
      }
      exports('BaseComponent', BaseComponent);
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/BaseViewModel.ts", ['cc', './ViewModel.ts'], function (exports) {
  var cclegacy, ViewModel;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      ViewModel = module.default;
    }],
    execute: function () {
      cclegacy._RF.push({}, "32fcblAMSlKC4V/rhEX6sxR", "BaseViewModel", undefined);
      /**此类作为基础的实例化工具，用于不需要大量业务逻辑的组件，亦不需要接入redux */
      class BaseViewModel extends ViewModel {
        constructor(componentStr) {
          super(componentStr);
        }
        begin() {
          /**公用的基本viewmodel，不要在这里添加代码 */
        }

        /**
         * @deprecated
         * BaseViewModel类的connect无效
         */
        connect() {
          this.inject({}, state => {
            return {};
          });
        }
      }
      exports('default', BaseViewModel);
      // class BaseViewModel<S, P, E> extends ViewModel<BaseComponent<S, P, E>, P, E> {
      //   constructor(componentStr: string) {
      //     super(componentStr)
      //   }
      //   protected begin() {
      //     /**公用的基本viewmodel，不要在这里添加代码 */
      //   }

      //   /**
      //    * @deprecated
      //    * BaseViewModel类的connect无效
      //    */
      //   public connect() {
      //     this.inject({}, (state: StateType) => {
      //       return {} as any
      //     })
      //   }
      // }

      // export default BaseViewModel
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/BaseViewModel2.ts", ['cc', './ViewModel.ts'], function (exports) {
  var cclegacy, ViewModel;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      ViewModel = module.default;
    }],
    execute: function () {
      cclegacy._RF.push({}, "7cc443+LONJTbKi5mfdNSUF", "BaseViewModel", undefined);
      /**此类作为基础的实例化工具，用于不需要大量业务逻辑的组件，亦不需要接入redux */

      class BaseViewModel extends ViewModel {
        constructor(componentStr) {
          super(componentStr);
        }
        begin() {
          /**公用的基本viewmodel，不要在这里添加代码 */
        }

        /**
         * @deprecated
         * BaseViewModel类的connect无效
         */
        connect() {
          this.inject({}, () => {
            return {};
          });
        }
      }
      exports('default', BaseViewModel);
      // class BaseViewModel<S, P, E> extends ViewModel<BaseComponent<S, P, E>, P, E> {
      //   constructor(componentStr: string) {
      //     super(componentStr)
      //   }
      //   protected begin() {
      //     /**公用的基本viewmodel，不要在这里添加代码 */
      //   }

      //   /**
      //    * @deprecated
      //    * BaseViewModel类的connect无效
      //    */
      //   public connect() {
      //     this.inject({}, () => {
      //       return {} as any
      //     })
      //   }
      // }

      // export default BaseViewModel
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/BG.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc'], function (exports) {
  var _applyDecoratedDescriptor, _initializerDefineProperty, cclegacy, Node, _decorator, Component, Label;
  return {
    setters: [function (module) {
      _applyDecoratedDescriptor = module.applyDecoratedDescriptor;
      _initializerDefineProperty = module.initializerDefineProperty;
    }, function (module) {
      cclegacy = module.cclegacy;
      Node = module.Node;
      _decorator = module._decorator;
      Component = module.Component;
      Label = module.Label;
    }],
    execute: function () {
      var _dec, _dec2, _class, _class2, _descriptor;
      cclegacy._RF.push({}, "d6dbf74nAhANJdQi1f/UytB", "BG", undefined);
      const {
        ccclass,
        property
      } = _decorator;
      let BG = exports('BG', (_dec = ccclass('BG'), _dec2 = property(Node), _dec(_class = (_class2 = class BG extends Component {
        constructor(...args) {
          super(...args);
          _initializerDefineProperty(this, "isLaunch", _descriptor, this);
        }
        start() {
          this.isLaunch.getComponent(Label).string = "子游戏的脚本开始执行";
          console.log("子游戏的脚本开始执行");
          // App.startUp(this.node)
        }

        update(deltaTime) {}
      }, _descriptor = _applyDecoratedDescriptor(_class2.prototype, "isLaunch", [_dec2], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function () {
          return null;
        }
      }), _class2)) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/BindPhoneViewModel.ts", ['cc', './ViewModel.ts', './apiUrl.ts', './baseBoard.ts', './socketConnect.ts', './globals.ts', './types.ts'], function (exports) {
  var cclegacy, ViewModel, ApiUrl, addToastAction, hallWebSocketDriver, SKT_MAG_TYPE, lang, fetcher, ToastType;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      ViewModel = module.default;
    }, function (module) {
      ApiUrl = module.ApiUrl;
    }, function (module) {
      addToastAction = module.addToastAction;
    }, function (module) {
      hallWebSocketDriver = module.hallWebSocketDriver;
      SKT_MAG_TYPE = module.SKT_MAG_TYPE;
    }, function (module) {
      lang = module.lang;
      fetcher = module.fetcher;
    }, function (module) {
      ToastType = module.ToastType;
    }],
    execute: function () {
      cclegacy._RF.push({}, "6e164PqHitKPaRDBkcT63ff", "BindPhoneViewModel", undefined);
      class BindPhoneViewModel extends ViewModel {
        constructor() {
          super('Hall_BindPhonePanel');
        }
        begin() {
          hallWebSocketDriver.sktMsgListener.add(SKT_MAG_TYPE.MODIFY_BIND_PHONE, 'bindPhone', (data, error) => {
            if (error) return;
            this.dispatch(addToastAction({
              content: lang.write(k => k.BindPhoneModule.BindPhoneChange, {}, {
                placeStr: "修改成功~"
              }),
              type: ToastType.SUCCESS
            }));
            this.comp.events.onClosePanel();
          });
          this.setEvent({
            sendSmsCode: phoneNumber => {
              return new Promise((reslove, reject) => {
                fetcher.send(ApiUrl.SEND_SMS, {
                  phone: phoneNumber
                }).then(rsp => {
                  this.dispatch(addToastAction({
                    content: lang.write(k => k.BindPhoneModule.BindPhoneSend, {}, {
                      placeStr: "验证信息已经发送，请注意查收"
                    })
                  }));
                  reslove(rsp);
                }).catch(e => {
                  this.dispatch(addToastAction({
                    content: lang.write(k => k.BindPhoneModule.BindPhonesSendError, {}, {
                      placeStr: "请求失败：${e}"
                    })
                  }));
                  reject(e);
                });
              });
            },
            modifyPhoneDone: (phoneNumber, verificationCode) => {
              hallWebSocketDriver.sendSktMessage(SKT_MAG_TYPE.MODIFY_BIND_PHONE, {
                phone: phoneNumber,
                verificationCode
              });
            }
          });
        }
        unMountCallBack() {
          hallWebSocketDriver.sktMsgListener.removeById("bindPhone");
        }
        connect() {
          const storeState = this.store.getState();
          this.inject({
            phone: storeState.memberInfo.phone
          }, state => {
            return {
              phone: state.memberInfo.phone
            };
          });
          return this;
        }
      }
      exports('default', BindPhoneViewModel);
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/bridge.ts", ['cc', './env', './UseSetOption.ts'], function (exports) {
  var cclegacy, native, sys, NATIVE, UseSetOption;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      native = module.native;
      sys = module.sys;
    }, function (module) {
      NATIVE = module.NATIVE;
    }, function (module) {
      UseSetOption = module.default;
    }],
    execute: function () {
      cclegacy._RF.push({}, "612bcF5JK5MF6EAQagASWl0", "bridge", undefined);
      let BridgeCode = exports('BridgeCode', /*#__PURE__*/function (BridgeCode) {
        BridgeCode["COPY_CLIPBOARD"] = "copyclipboard";
        BridgeCode["IN_APP_EVENTS"] = "inAppEvents";
        BridgeCode["VIBRATE"] = "VIBRATE";
        BridgeCode["UNIQUE_ID"] = "UNIQUE_ID";
        BridgeCode["APP_VERSION"] = "APP_VERSION";
        BridgeCode["DOWNLOAD_APK"] = "downloadApk";
        BridgeCode["ADJUST_ATTRIBUTION"] = "adjustAttribution";
        BridgeCode["SENTRY_EVENTS"] = "sentryEvents";
        BridgeCode["MIXPANEL_EVENTS"] = "mixpanelEvents";
        return BridgeCode;
      }({}));
      let EventChannel = exports('EventChannel', /*#__PURE__*/function (EventChannel) {
        EventChannel["APPS_FLYER"] = "appsflyer";
        EventChannel["ADJUST"] = "adjust";
        EventChannel["SENTRY"] = "sentry";
        EventChannel["ENGAGE"] = "engage";
        EventChannel["MIXPANEL"] = "mixpanel";
        return EventChannel;
      }({}));
      let EventType = exports('EventType', /*#__PURE__*/function (EventType) {
        EventType["PRICE"] = "af_price";
        return EventType;
      }({}));
      let WebEventType = exports('WebEventType', /*#__PURE__*/function (WebEventType) {
        WebEventType[WebEventType["REGISTER"] = 1] = "REGISTER";
        WebEventType[WebEventType["LOGIN"] = 2] = "LOGIN";
        WebEventType[WebEventType["FIRST_PURCHASE"] = 3] = "FIRST_PURCHASE";
        WebEventType[WebEventType["PURCHASE"] = 4] = "PURCHASE";
        WebEventType[WebEventType["FIRST_PULL_PURCHASE"] = 5] = "FIRST_PULL_PURCHASE";
        WebEventType[WebEventType["PULL_PURCHASE"] = 6] = "PULL_PURCHASE";
        return WebEventType;
      }({}));
      /**adjust的web事件配置 */
      const adjustWebEventConfig = exports('adjustWebEventConfig', {
        register: '',
        login: '',
        /**首次充值 */
        firstPurchase: '',
        /**重复充值 */
        purchase: '',
        /**首次拉取充值 */
        firstPullPurchase: '',
        /**拉取充值 */
        pullPurchase: ''
      });

      /**
       * 发送震动
       * @param milliseconds 震动时长 单位/毫秒
       */
      const sendNativeVibrate = exports('sendNativeVibrate', milliseconds => {
        if (!UseSetOption.Instance().option.vibration) return;
        if (milliseconds > 0 && NATIVE) {
          native.bridge.sendToNative(BridgeCode.VIBRATE, milliseconds + "");
        }
      });

      /**发送登录埋点事件 */
      const loginEvents = exports('loginEvents', uid => {
        {
          loginAppsflyerEvents(uid);
          loginAdjustEvents();
        }
      });
      const loginAppsflyerEvents = uid => {
        const data = {
          type: EventChannel.APPS_FLYER,
          name: 'af_login',
          value: '',
          eventParams: []
        };
        data.eventParams.push({
          type: EventChannel.APPS_FLYER,
          name: 'af_customer_user_id',
          value: uid
        });
        native.bridge.sendToNative(BridgeCode.IN_APP_EVENTS, JSON.stringify(data));
      };
      const loginAdjustEvents = uid => {
        const data = {
          type: EventChannel.ADJUST,
          name: 'login',
          value: 'qzo3bf',
          //adjust的event token，这个在adjust后台是不能修改的，event name是可以随便修改的
          eventParams: []
        };
        // data.eventParams.push({
        //     name: 'productId',
        //     value: uid,
        //     type: '',
        // })

        native.bridge.sendToNative(BridgeCode.IN_APP_EVENTS, JSON.stringify(data));
      };

      /**
       * 注册
       * @param uid 账号id
       * @param pwd 密码
       */
      const registerAppsflyerEvents = exports('registerAppsflyerEvents', (uid, pwd) => {
        {
          const data = {
            type: EventChannel.APPS_FLYER,
            // name: 'register',
            name: 'af_complete_registration',
            value: '',
            eventParams: []
          };
          data.eventParams.push({
            type: EventChannel.APPS_FLYER,
            name: 'af_param_1',
            value: 'af_complete_registration'
          });
          data.eventParams.push({
            type: EventChannel.APPS_FLYER,
            name: 'af_param_2',
            value: uid
          });
          data.eventParams.push({
            type: EventChannel.APPS_FLYER,
            name: 'af_param_3',
            value: pwd
          });
          native.bridge.sendToNative(BridgeCode.IN_APP_EVENTS, JSON.stringify(data));
          // adjust注册事件
          registerAdjustEvents();
        }
      });
      const registerAdjustEvents = exports('registerAdjustEvents', (uid, pwd) => {
        {
          const data = {
            type: EventChannel.ADJUST,
            name: 'register',
            value: 'sc7bef',
            //adjust的event token，这个在adjust后台是不能修改的，event name是可以随便修改的
            eventParams: []
          };
          // data.eventParams.push({
          //     name: 'productId',
          //     value: uid,
          //     type: '',
          // })
          // data.eventParams.push({
          //     name: 'pwd',
          //     value: pwd,
          //     type: '',
          // })

          native.bridge.sendToNative(BridgeCode.IN_APP_EVENTS, JSON.stringify(data));
        }
      });

      /**
       * 充值成功发送事件
       * @param revenue 充值金额
       * @param currency 货币类型
       * @param first 是否首次
       */
      const purchaseAppsflyerEvents = exports('purchaseAppsflyerEvents', (revenue, currency, first, id) => {
        currency && (currency = currency.toUpperCase());
        if (Number(revenue) > 0) {
          const data = {
            type: EventChannel.APPS_FLYER,
            // name: 'purchase',
            name: first ? 'af_purchase' : 'af_purchase_success',
            value: '',
            eventParams: []
          };
          data.eventParams.push({
            type: EventChannel.APPS_FLYER,
            name: 'af_param_1',
            value: first ? 'af_purchase' : 'af_purchase_success'
          });
          data.eventParams.push({
            type: EventChannel.APPS_FLYER,
            name: 'af_revenue',
            value: revenue
          });
          data.eventParams.push({
            type: EventChannel.APPS_FLYER,
            name: 'af_currency',
            value: currency
          });
          native.bridge.sendToNative(BridgeCode.IN_APP_EVENTS, JSON.stringify(data));
          //adjust充值事件
          purchaseAdjustEvents(revenue, currency, first, id);
        } else {
          callAndroid(first ? WebEventType.FIRST_PURCHASE : WebEventType.PURCHASE);
          // facebookWebEveht(first ? WebEventType.FIRST_PURCHASE : WebEventType.PURCHASE, revenue, currency);
        }
      });

      /**充值成功发送事件 */
      const purchaseAdjustEvents = exports('purchaseAdjustEvents', (revenue, currency, first, id) => {
        if (Number(revenue) > 0) {
          const data = {
            type: EventChannel.ADJUST,
            name: first ? 'first-purchase' : 'purchase',
            value: first ? 'jv5em7' : 'am05m5',
            //adjust的event token，这个在adjust后台是不能修改的，event name是可以随便修改的
            eventParams: []
          };
          data.eventParams.push({
            name: 'revenue',
            value: revenue,
            type: currency
          });
          data.eventParams.push({
            name: 'orderId',
            value: id,
            type: ''
          });
          native.bridge.sendToNative(BridgeCode.IN_APP_EVENTS, JSON.stringify(data));
        }
      });

      /**拉取充值事件 */
      const pullPurchaseEvents = exports('pullPurchaseEvents', (revenue, currency, first, id) => {
        if (Number(revenue) > 0) {
          pullPurchaseAppsflyerEvents(revenue, currency, first);
          pullPurchaseAdjustEvents(revenue, currency, first, id);
        } else {
          callAndroid(first ? WebEventType.FIRST_PULL_PURCHASE : WebEventType.PULL_PURCHASE);
          // facebookWebEveht(first ? WebEventType.FIRST_PULL_PURCHASE : WebEventType.PULL_PURCHASE, revenue, currency);
        }
      });

      /**appsflyer拉取充值事件 */
      const pullPurchaseAppsflyerEvents = (revenue, currency, first, id) => {
        const data = {
          type: EventChannel.APPS_FLYER,
          // name: 'purchase',
          name: first ? 'af_initiated_checkout' : 'af_initiated_checkout_success',
          value: '',
          eventParams: []
        };
        data.eventParams.push({
          type: EventChannel.APPS_FLYER,
          name: 'af_param_1',
          value: first ? 'af_initiated_checkout' : 'af_initiated_checkout_success'
        });
        data.eventParams.push({
          type: EventChannel.APPS_FLYER,
          name: 'af_revenue',
          value: revenue
        });
        data.eventParams.push({
          type: EventChannel.APPS_FLYER,
          name: 'af_currency',
          value: currency
        });
        native.bridge.sendToNative(BridgeCode.IN_APP_EVENTS, JSON.stringify(data));
      };

      /**
       * adjust 拉取充值事件
       * @param revenue 
       * @param currency 
       * @param first 
       */
      const pullPurchaseAdjustEvents = (revenue, currency, first, id) => {
        if (Number(revenue) > 0) {
          const data = {
            type: EventChannel.ADJUST,
            name: first ? 'first-pull-purchase' : 'pull-purchase',
            value: first ? 't9am42' : '45qr0q',
            //adjust的event token，这个在adjust后台是不能修改的，event name是可以随便修改的
            eventParams: []
          };
          data.eventParams.push({
            name: 'revenue',
            value: revenue,
            type: currency
          });
          data.eventParams.push({
            name: 'orderId',
            value: id,
            type: ''
          });
          native.bridge.sendToNative(BridgeCode.IN_APP_EVENTS, JSON.stringify(data));
        }
      };

      /**
       * 发送应用内事件
       * @param eventType 
       * @param value 
       */
      const sendAppsflyerEvents = exports('sendAppsflyerEvents', (name, value) => {
        {
          const data = {
            type: EventChannel.APPS_FLYER,
            name: name,
            value: value
          };
          native.bridge.sendToNative(BridgeCode.IN_APP_EVENTS, JSON.stringify(data));
        }
      });

      // export const sendFacebookEvents = (name: string, value: any) => {
      //     if (NATIVE) {
      //         const data: EventData = {
      //             type: EventChannel.FACEBOOK,
      //             name: name,
      //             value: value,
      //         }
      //         native.bridge.sendToNative(BridgeCode.IN_APP_EVENTS, JSON.stringify(data));
      //     }
      // }

      /**
       * 获得设备唯一id
       */
      const getDeviceUniqueId = exports('getDeviceUniqueId', () => {
        {
          native.bridge.sendToNative(BridgeCode.UNIQUE_ID, '');
        }
      });
      const getAppVersionName = exports('getAppVersionName', () => {
        {
          native.bridge.sendToNative(BridgeCode.APP_VERSION, '');
        }
      });
      const sendSentryEvents = exports('sendSentryEvents', reason => {
        {
          native.bridge.sendToNative(BridgeCode.SENTRY_EVENTS, reason);
        }
      });
      const sendMixpanelEvents = exports('sendMixpanelEvents', (name, value) => {
        {
          const data = {
            type: EventChannel.MIXPANEL,
            name: name,
            value: value,
            eventParams: []
          };

          // If value is an object, we can treat its keys as event params
          if (typeof value === 'object' && value !== null) {
            for (const key in value) {
              if (Object.prototype.hasOwnProperty.call(value, key)) {
                data.eventParams.push({
                  type: EventChannel.MIXPANEL,
                  name: key,
                  value: value[key]
                });
              }
            }
          }
          console.log('Mixpanel events: Start', JSON.stringify(data));
          native.bridge.sendToNative(BridgeCode.MIXPANEL_EVENTS, JSON.stringify(data));
        }
      });
      const getPackageName = exports('getPackageName', () => {
        if (sys.os === sys.OS.OSX) return 'development';
        if (native.reflection) {
          if (sys.os === sys.OS.IOS) {
            return native.reflection.callStaticMethod("AppDelegate", "getPackageCode:", "");
          }
          return native.reflection.callStaticMethod("com.cocos.game.AppActivity", 'getPackageCode', '()Ljava/lang/String;');
        }
        return 'web';
      });

      /**获得firebase通知令牌 */
      const getFirebaseToken = exports('getFirebaseToken', () => {
        // Firebase 相关原生逻辑已关闭，统一返回空字符串
        // if (NATIVE && native.reflection) {
        //     return native.reflection.callStaticMethod("com.cocos.game.AppActivity", 'getFirebaseToken', '()Ljava/lang/String;')
        // }
        return '';
      });
      const installApk = exports('installApk', apkPath => {
        if (native.reflection) {
          native.reflection.callStaticMethod("com.cocos.game.AppActivity", 'installApk', '(Ljava/lang/String;)V', apkPath);
        }
      });
      const getRedirectUrl = exports('getRedirectUrl', apkUrl => {
        if (native.reflection) {
          return native.reflection.callStaticMethod("com.cocos.game.AppActivity", 'getRedirectUrl', '(Ljava/lang/String;)Ljava/lang/String;', apkUrl);
        }
      });
      const hideNativeSplash = exports('hideNativeSplash', () => {
        if (native.reflection) {
          if (sys.os === sys.OS.IOS) return;
          native.reflection.callStaticMethod("com.cocos.game.AppActivity", 'hideSplash', '()V');
        }
      });
      const showNativeSplash = exports('showNativeSplash', () => {
        if (native.reflection) {
          if (sys.os === sys.OS.IOS) return;
          native.reflection.callStaticMethod("com.cocos.game.AppActivity", 'showSpl', '()V');
        }
      });
      const callAndroid = exports('callAndroid', (type, eventToken, revenue, currency, id) => {
        {
          return;
        }
      });

      // /**
      //  * facebook Web事件发送
      //  * @param type
      //  * @param values
      //  * @returns
      //  */
      // export const facebookWebEveht = (type, ...values) => {
      //     if (NATIVE) {
      //         return;
      //     }
      //
      //     if (typeof window.fbq !== 'undefined' && window.fbq !== null) {
      //         if (type === WebEventType.REGISTER) {
      //             window.fbq('track', 'CompleteRegistration');
      //         } else if (type === WebEventType.LOGIN) {
      //             window.fbq('track', 'Login');
      //         } else if (type === WebEventType.FIRST_PURCHASE) {
      //             window.fbq('track', 'Purchase', { currency: values[1], value: values[0] });
      //         } else if (type === WebEventType.PURCHASE) {
      //             window.fbq('track', 'Purchase_success', { currency: values[1], value: values[0] });
      //         } else if (type === WebEventType.FIRST_PULL_PURCHASE) {
      //             window.fbq('track', 'InitiateCheckout', { currency: values[1], value: values[0] });
      //         } else if (type === WebEventType.PULL_PURCHASE) {
      //             window.fbq('track', 'InitiateCheckout_success', { currency: values[1], value: values[0] });
      //         }
      //         // document.getElementById("ddd").innerHTML = '执行成功，类型：' + type;
      //         console.log('fbq 执行成功，类型：' + type);
      //     } else {
      //         // document.getElementById("ddd").innerHTML = "Android界面不可用";
      //         console.log('fbq facebook不可用');
      //     }
      // }
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/bundle.js", ['./cjs-loader.mjs'], function (exports, module) {
  var loader;
  return {
    setters: [function (module) {
      loader = module.default;
    }],
    execute: function () {
      exports('default', void 0);
      let _cjsExports;
      const __cjsMetaURL = exports('__cjsMetaURL', module.meta.url);
      loader.define(__cjsMetaURL, function (exports$1, require, module, __filename, __dirname) {
        // #region ORIGINAL CODE

        System.register("chunks:///_virtual/bundle.js", [], function (_export, _context) {
          return {
            execute: function () {
              System.register("chunks:///_virtual/rollupPluginModLoBabelHelpers.js", [], function (e) {
                return {
                  execute: function () {
                    function i(t, r) {
                      return (i = e("setPrototypeOf", Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, i) {
                        return e.__proto__ = i, e;
                      }))(t, r);
                    }
                    e({
                      applyDecoratedDescriptor: function (e, i, t, r, n) {
                        var o = {};
                        Object.keys(r).forEach(function (e) {
                          o[e] = r[e];
                        }), o.enumerable = !!o.enumerable, o.configurable = !!o.configurable, ("value" in o || o.initializer) && (o.writable = !0);
                        o = t.slice().reverse().reduce(function (t, r) {
                          return r(e, i, t) || t;
                        }, o), n && void 0 !== o.initializer && (o.value = o.initializer ? o.initializer.call(n) : void 0, o.initializer = void 0);
                        void 0 === o.initializer && (Object.defineProperty(e, i, o), o = null);
                        return o;
                      },
                      assertThisInitialized: function (e) {
                        if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                        return e;
                      },
                      inheritsLoose: function (e, t) {
                        e.prototype = Object.create(t.prototype), e.prototype.constructor = e, i(e, t);
                      },
                      initializerDefineProperty: function (e, i, t, r) {
                        if (!t) return;
                        Object.defineProperty(e, i, {
                          enumerable: t.enumerable,
                          configurable: t.configurable,
                          writable: t.writable,
                          value: t.initializer ? t.initializer.call(r) : void 0
                        });
                      },
                      setPrototypeOf: i
                    });
                  }
                };
              });
            }
          };
        });

        // #endregion ORIGINAL CODE

        _cjsExports = exports('default', module.exports);
      }, {});
    }
  };
});

System.register("chunks:///_virtual/bundle.mjs_cjs=&original=.js", ['./bundle.js', './cjs-loader.mjs'], function (exports, module) {
  var __cjsMetaURL, loader;
  return {
    setters: [function (module) {
      __cjsMetaURL = module.__cjsMetaURL;
      var _setter = {};
      _setter.__cjsMetaURL = module.__cjsMetaURL;
      _setter.default = module.default;
      exports(_setter);
    }, function (module) {
      loader = module.default;
    }],
    execute: function () {
      // I am the facade module who provides access to the CommonJS module './bundle.js'~
      if (!__cjsMetaURL) {
        loader.throwInvalidWrapper('./bundle.js', module.meta.url);
      }
      loader.require(__cjsMetaURL);
    }
  };
});

System.register("chunks:///_virtual/BundleSplit.ts", ['cc', './config.ts'], function (exports, module) {
  var assetManager, native, cclegacy, AssetManager, resources, subGameList;
  return {
    setters: [function (module) {
      assetManager = module.assetManager;
      native = module.native;
      cclegacy = module.cclegacy;
      AssetManager = module.AssetManager;
      resources = module.resources;
    }, function (module) {
      subGameList = module.subGameList;
    }],
    execute: function () {
      cclegacy._RF.push({}, "91e21OPXgdNDYe/dlhUXdoh", "BundleSplit", undefined);
      function createBundle(id, data, options, onComplete) {
        let bundle = assetManager.bundles.get(data.name);
        if (!bundle) {
          bundle = data.name === AssetManager.BuiltinBundleName.RESOURCES ? resources : new AssetManager.Bundle();
          data.base = data.base || `${id}/`;
          bundle.init(data);
        }
        if (subGameList.map(i => i.bundleName).indexOf(bundle.name) !== -1) {
          // if (!EDITOR && bundle.name !== bundleName) {
          try {
            module.import(`virtual:///prerequisite-imports/${bundle.name}`).then(() => {
              onComplete(null, bundle);
            }).catch(() => {
              onComplete(null, bundle);
            });
          } catch (e) {
            onComplete(null, bundle);
          }
        } else {
          onComplete(null, bundle);
        }
      }
      const gameBundle = {};
      var BundleSplit = exports('default', {
        init: () => {
          assetManager.factory.register("bundle", createBundle);
        },
        /**获取游戏的AB包，Native情况下，调用此函数时，应该确保本地已经下载了子游戏的AB包 */
        getSubGameAssetsBundle: (subGameInfo, progressFn) => {
          return new Promise(async (resolve, reject) => {
            const gemeConfig = subGameList.find(i => i.gameId === subGameInfo.gameId);
            const option = {
              onFileProgress: (n, t) => {
                progressFn(n, t);
              }
            };
            const loadSingleBundle = bundleName => {
              return new Promise((resolveBundle, rejectBundle) => {
                let path = bundleName;
                {
                  path = native.fileUtils.getWritablePath() + "remote/" + bundleName;
                }

                // 清除已存在的 bundle 缓存,强制重新加载最新资源
                const existingBundle = assetManager.bundles.get(bundleName);
                if (existingBundle) {
                  console.log(`[BundleSplit] 移除旧的 bundle 缓存: ${bundleName}`);
                  assetManager.bundles.remove(bundleName);
                }
                assetManager.loadBundle(path, option, (err, bundle) => {
                  if (!err) {
                    gameBundle[bundleName] = bundle;
                    console.log(`[BundleSplit] Bundle 加载成功: ${bundleName}, 路径: ${path}`);
                    resolveBundle(bundle);
                  } else {
                    console.error(`[BundleSplit] Bundle 加载失败: ${bundleName}`, err);
                    rejectBundle(err);
                  }
                });
              });
            };
            try {
              // 如果有脚本 bundle，先加载脚本 bundle
              if (subGameInfo.scriptBundleName) {
                console.log(`[BundleSplit] 开始加载脚本 Bundle: ${subGameInfo.scriptBundleName}`);
                await loadSingleBundle(subGameInfo.scriptBundleName);
              }

              // 加载资源 bundle
              console.log(`[BundleSplit] 开始加载资源 Bundle: ${subGameInfo.bundleName}`);
              const bundle = await loadSingleBundle(subGameInfo.bundleName);
              window.setTimeout(() => {
                resolve(bundle);
              }, 500);
            } catch (error) {
              reject(error);
            }
          });
        },
        releaseBundle: bundleName => {
          const releaseSingleBundle = name => {
            const bundle = gameBundle[name];
            if (bundle) {
              console.log(`[BundleSplit] 释放 Bundle: ${name}`);
              bundle.releaseAll();
              assetManager.removeBundle(bundle);
              delete gameBundle[name];
            } else {
              // 尝试直接从 assetManager 移除，以防 gameBundle 缓存不同步
              const amBundle = assetManager.bundles.get(name);
              if (amBundle) {
                console.log(`[BundleSplit] 从 assetManager 释放 Bundle: ${name}`);
                amBundle.releaseAll();
                assetManager.removeBundle(amBundle);
              }
            }
          };

          // 1. 释放主资源 Bundle
          releaseSingleBundle(bundleName);

          // 2. 查找并释放关联的脚本 Bundle
          const subGameInfo = subGameList.find(i => i.bundleName === bundleName);
          if (subGameInfo && subGameInfo.scriptBundleName) {
            releaseSingleBundle(subGameInfo.scriptBundleName);
          }
        }
        // loadBundel(subGameInfo: HallGameGateType, progressFn: (curr: number, total: number) => void): Promise<AssetManager.Bundle> {
        //   const option = {
        //     onFileProgress: (n, t) => {
        //       progressFn(n, t)
        //     }
        //   }
        //   return new Promise((reslove, reject) => {
        //     const gemeConfig = subGameList.find(i => i.gameId === subGameInfo.gameId)
        //     let path = gemeConfig.enableRemote ? `${config.gameBundleUrl}/subGame/${subGameInfo.bundleName}` : subGameInfo.bundleName
        //     if (NATIVE) {
        //       path = native.fileUtils.getWritablePath() + "remote/" + subGameInfo.bundleName
        //     }
        //     assetManager.loadBundle(path, option,
        //       (err1, _bundle) => {
        //         if (!err1) {
        //           gameBundle[subGameInfo.bundleName] = _bundle
        //           window.setTimeout(() => {
        //             reslove(_bundle)
        //           }, 500)
        //         } else {
        //           reject(err1)
        //         }
        //       })
        //   })
        // },

        // getRemoteSubGameVersion(subGameInfo: HallGameGateType): Promise<any> {
        //   return new Promise<any>((reslove, reject) => {
        //     const url = `${config.gameBundleUrl}/subGame/compressed/${subGameInfo.bundleName}/version.manifest`
        //     fetch(url).then((response) => {
        //       if (response.status === 200) {
        //         response.text().then(text => {
        //           const data = JSON.parse(text)
        //           if (data) {
        //             reslove(data);
        //           } else {
        //             reslove(undefined);
        //           }
        //         }).catch(e => {
        //           reslove(undefined);
        //           console.log(`get url ${url} failed, text catch, error: ${e}`);
        //         })
        //       } else {
        //         reslove(undefined);
        //         console.log(`get url ${url} failed, status: ${response.status}`);
        //       }
        //     }).catch((e) => {
        //       reslove(undefined);
        //       console.log(`get url ${url} failed!!`);
        //     })
        //   })
        // },
        // checkGame: (subGameInfo: HallGameGateType, content): any => {
        //   const nativeVersion = getNativeVersion(subGameInfo.bundleName)
        //   const result = CompareVersion(nativeVersion, content.version);
        //   return result
        // }
      });

      // function GetModulePath(module: string) {
      //   let path = native.fileUtils.getWritablePath() + "remote/" + module + "/project.manifest";
      //   if (native.fileUtils.isFileExist(path)) {
      //     return path;
      //   }

      //   return native.fileUtils.getWritablePath() + "remote/" + module + "/version.manifest";
      // }

      // function CompareVersion(versionA: string, versionB: string): number {
      //   if (versionA === versionB) {
      //     return 0;
      //   }
      //   var vA = versionA.split('.');
      //   var vB = versionB.split('.');
      //   for (var i = 0; i < vA.length; ++i) {
      //     var a = parseInt(vA[i]);
      //     var b = parseInt(vB[i]) || 0;
      //     if (a === b) {
      //       continue;
      //     } else {
      //       return a - b;
      //     }
      //   }
      //   if (vB.length > vA.length) {
      //     return -1;
      //   } else {
      //     return 0;
      //   }
      // }

      // function getNativeVersion(module: string) {
      //   // let path = GetModulePath(module);
      //   // if(native.fileUtils.isFileExist(path)) {
      //   //     let data = native.fileUtils.getStringFromFile(path);
      //   //     if(!data) {
      //   //         log("û���ҵ�remote��version�汾", data);
      //   //         return "0.0.0"
      //   //     }
      //   //     return JSON.parse(data).version;
      //   // }
      //   return "0.0.0";
      // }
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/BuryPoint.ts", ['cc', './Singleton.ts'], function (exports) {
  var cclegacy, Singleton;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      Singleton = module.default;
    }],
    execute: function () {
      cclegacy._RF.push({}, "d8ee61/86RG5qCT+2HBBnX/", "BuryPoint", undefined);
      class BuryPoint extends Singleton {
        constructor() {
          super();
          this._isInit = false;
        }
        init() {
          if (this._isInit) return;

          // Sentry Initialization
          // if (GameConfig.sentryDSN) {
          //     Sentry.init({
          //         dsn: GameConfig.sentryDSN,
          //         // debug: getIsTest(),
          //         environment: GameConfig.envKey,
          //         release: GameConfig.appLocalVersion,
          //         sendDefaultPii: true,
          //         // Set tracesSampleRate to 1.0 to capture 100%
          //         // of transactions for performance monitoring.
          //         // We recommend adjusting this value in production
          //         integrations: [
          //             Sentry.browserTracingIntegration()
          //         ],
          //         tracesSampleRate: 0.2,
          //     });
          // }

          // if (GameConfig.mixpanelToken) {
          //     mixpanel.init(GameConfig.mixpanelToken, {
          //         debug: getIsTest(),
          //         track_pageview: true,
          //         persistence: 'localStorage',
          //         autocapture: true,
          //         record_sessions_percent: 100,
          //         api_host: 'https://api-eu.mixpanel.com',
          //     });
          // }

          this._isInit = true;
          console.log("[BuryPoint] Initialized Sentry and Mixpanel");
        }

        /**
         * Track a custom event
         * @param eventName Event name
         * @param properties Event properties
         */
        track(eventName, properties) {
          if (!this._isInit) return;
        }

        /**
         * Identify a user
         * @param userId User unique ID
         * @param traits User traits (optional)
         */
        identify(userId, traits) {
          if (!this._isInit) return;

          // try {
          //     mixpanel.identify(userId);
          //     if (traits) {
          //         mixpanel.people.set(traits);
          //     }
          //     Sentry.setUser({ id: userId, ...traits });
          // } catch (e) {
          //     console.error("[BuryPoint] Identify error:", e);
          // }
        }

        /**
         * Capture an exception manually
         * @param exception Error object or string
         */
        captureException(exception) {
          if (!this._isInit) return;
        }
      }
      exports('BuryPoint', BuryPoint);
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/CaptchaGenerator.ts", ['cc'], function (exports) {
  var Node, Label, Color, UITransform, Graphics, cclegacy;
  return {
    setters: [function (module) {
      Node = module.Node;
      Label = module.Label;
      Color = module.Color;
      UITransform = module.UITransform;
      Graphics = module.Graphics;
      cclegacy = module.cclegacy;
    }],
    execute: function () {
      cclegacy._RF.push({}, "a7819aA0VdEx4Z9mqJNMM5x", "CaptchaGenerator", undefined);
      class CaptchaGenerator {
        constructor(node, chartLength) {
          this.node = void 0;
          this.chartLength = void 0;
          this.displayNode = void 0;
          this.displayNoiseNode = void 0;
          this.captcha = void 0;
          this.node = node;
          this.chartLength = chartLength;
          this.generate();
        }
        generate() {
          this.generateCaptcha(this.chartLength);
          this.displayCaptcha();
          this.addNoise();
        }
        /**生成指定长度的随机字符验证码 */
        generateCaptcha(length) {
          const charset = "ABCDEFGHJKLMNPQRSTUVWXYZabcdefghjkmnpqrstuvwxyz23456789";
          let captcha = "";
          for (let i = 0; i < length; i++) {
            const randomIndex = Math.floor(Math.random() * charset.length);
            captcha += charset.charAt(randomIndex);
          }
          this.captcha = captcha;
        }
        /**将验证码显示在精灵节点上 */
        displayCaptcha() {
          this.displayNode && this.displayNode.destroy();
          this.displayNoiseNode && this.displayNoiseNode.destroy();
          this.displayNode = new Node();
          const labelComponent = this.displayNode.addComponent(Label);
          labelComponent.string = this.captcha;
          labelComponent.color = new Color(0, 0, 0, 255);
          labelComponent.fontSize = 26 + parseInt(Math.random() * 6 + ''); // 设置字体大小
          labelComponent.fontFamily = "Arial"; // 设置字体类型
          labelComponent.horizontalAlign = Label.HorizontalAlign.CENTER; // 设置文本水平对齐方式
          this.node.addChild(this.displayNode);
        }
        /**添加噪点到验证码图片 */
        addNoise() {
          // 获取精灵的宽度和高度
          this.displayNoiseNode = new Node();
          const ui = this.node.getComponent(UITransform);
          const transform = this.displayNoiseNode.addComponent(UITransform);
          transform.width = ui.width;
          transform.height = ui.height;
          const ctx = this.displayNoiseNode.addComponent(Graphics);
          // 添加噪点
          const noiseAmount = 70; // 调整噪点数量
          for (let i = 0; i < noiseAmount; i++) {
            // 随机生成噪点的坐标和颜色
            const x = Math.floor(Math.random() * ui.width / 2 * (Math.random() > 0.5 ? 1 : -1));
            const y = Math.floor(Math.random() * ui.height / 2 * (Math.random() > 0.5 ? 1 : -1));
            const color = new Color(Math.random() * 255, Math.random() * 255, Math.random() * 255, 255);
            // 绘制一个小的随机颜色点
            ctx.fillColor = color; //Color.fromHEX(color, '')//hexToColor(color);
            ctx.fillRect(x, y, Math.random() > 0.5 ? 2 : 1, Math.random() > 0.5 ? 2 : 1);
          }
          this.node.addChild(this.displayNoiseNode);
        }
      }
      exports('default', CaptchaGenerator);
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Common_GiftUser.ts", ['cc', './BaseComponent.ts', './globals.ts', './tool.ts', './spriteDefine2.ts', './skeletonDefine.ts', './soundDefine.ts'], function (exports) {
  var cclegacy, Vec3, Node, Label, Toggle, Sprite, instantiate, _decorator, BaseComponent, global, sourceManageSeletor, putChatShieldingUser, removeChatShieldingUser, isChatShieldingUser, SpriteFramePathDefine, SkeletonPathDefine, SoundPathDefine;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      Vec3 = module.Vec3;
      Node = module.Node;
      Label = module.Label;
      Toggle = module.Toggle;
      Sprite = module.Sprite;
      instantiate = module.instantiate;
      _decorator = module._decorator;
    }, function (module) {
      BaseComponent = module.BaseComponent;
    }, function (module) {
      global = module.global;
      sourceManageSeletor = module.sourceManageSeletor;
    }, function (module) {
      putChatShieldingUser = module.putChatShieldingUser;
      removeChatShieldingUser = module.removeChatShieldingUser;
      isChatShieldingUser = module.isChatShieldingUser;
    }, function (module) {
      SpriteFramePathDefine = module.SpriteFramePathDefine;
    }, function (module) {
      SkeletonPathDefine = module.SkeletonPathDefine;
    }, function (module) {
      SoundPathDefine = module.SoundPathDefine;
    }],
    execute: function () {
      var _dec, _class;
      cclegacy._RF.push({}, "be63cx3Ku1G+YXp0wWclBZL", "Common_GiftUser", undefined);
      const {
        ccclass,
        property
      } = _decorator;
      /**
       * 礼物图标配置
       */
      const GIFT_ICON_CONFIG = exports('GIFT_ICON_CONFIG', [{
        value: 1,
        spriteFramePath: SpriteFramePathDefine.img_icon_cock,
        skeletonPath: SkeletonPathDefine.cock,
        dub: SoundPathDefine.cock,
        angle: 0,
        offset: new Vec3(0, 0)
      }, {
        value: 2,
        spriteFramePath: SpriteFramePathDefine.img_icon_egg,
        skeletonPath: SkeletonPathDefine.egg,
        dub: SoundPathDefine.egg,
        angle: 360,
        offset: new Vec3(0, 0)
      }, {
        value: 3,
        spriteFramePath: SpriteFramePathDefine.img_icon_durian,
        skeletonPath: SkeletonPathDefine.durian,
        dub: SoundPathDefine.durian,
        angle: 360,
        offset: new Vec3(20, 0)
      }, {
        value: 4,
        spriteFramePath: SpriteFramePathDefine.img_icon_rose,
        skeletonPath: SkeletonPathDefine.rose,
        dub: SoundPathDefine.rose,
        angle: 0,
        offset: new Vec3(0, 0)
      }, {
        value: 5,
        spriteFramePath: SpriteFramePathDefine.img_icon_beer,
        skeletonPath: SkeletonPathDefine.beer,
        dub: SoundPathDefine.beer,
        angle: 0,
        offset: new Vec3(0, 0)
      }, {
        value: 6,
        spriteFramePath: SpriteFramePathDefine.img_icon_pan,
        skeletonPath: SkeletonPathDefine.pan,
        dub: SoundPathDefine.pan,
        angle: 0,
        offset: new Vec3(-50, 25)
      }, {
        value: 7,
        spriteFramePath: SpriteFramePathDefine.img_icon_money,
        skeletonPath: SkeletonPathDefine.money,
        dub: SoundPathDefine.money,
        angle: 0,
        offset: new Vec3(0, 0)
      }, {
        value: 8,
        spriteFramePath: SpriteFramePathDefine.img_icon_bucket,
        skeletonPath: SkeletonPathDefine.bucket,
        dub: SoundPathDefine.bucket,
        angle: 0,
        offset: new Vec3(30, 0)
      }, {
        value: 9,
        spriteFramePath: SpriteFramePathDefine.img_icon_shoe,
        skeletonPath: SkeletonPathDefine.shoe,
        dub: SoundPathDefine.shoe,
        angle: 360 * 5,
        offset: new Vec3(0, 0)
      }, {
        value: 10,
        spriteFramePath: SpriteFramePathDefine.img_icon_kiss,
        skeletonPath: SkeletonPathDefine.kiss,
        dub: SoundPathDefine.kiss,
        angle: 0,
        offset: new Vec3(0, 0)
      }, {
        value: 11,
        spriteFramePath: SpriteFramePathDefine.img_icon_tomato,
        skeletonPath: SkeletonPathDefine.tomato,
        dub: SoundPathDefine.tomato,
        angle: 360,
        offset: new Vec3(0, -20)
      }, {
        value: 12,
        spriteFramePath: SpriteFramePathDefine.img_icon_brick,
        skeletonPath: SkeletonPathDefine.brick,
        dub: SoundPathDefine.brick,
        angle: 360,
        offset: new Vec3(0, 0)
      }]);
      let Common_GiftUser = exports('Common_GiftUser', (_dec = ccclass('Common_GiftUser'), _dec(_class = class Common_GiftUser extends BaseComponent {
        constructor(...args) {
          super(...args);
          /**全局的播放次数 */
          this.playCount = 1;
          this.props = {
            isUser: true,
            gameType: undefined,
            memberId: undefined,
            head: undefined,
            name: undefined,
            gold: 0
          };
          this.events = {
            selectGift: (value, count) => {}
          };
          this.propertyNode = {
            props_head: new Node(),
            props_label_gift_userName: new Label(),
            props_label_gift_userGold: new Label(),
            props_gift_on_off: new Node(),
            props_top_croupier: new Node(),
            props_heguan_yxx: new Node(),
            props_heguan_bandar: new Node(),
            props_top_user: new Node(),
            props_play_number: new Node(),
            props_gift_groups: new Node(),
            props_btn_gift_box: new Node(),
            props_spr_gift_bg_user: new Node(),
            props_spr_gift_bg_dealer: new Node()
          };
        }
        start() {}
        initState() {
          return {};
        }
        bindEvent() {
          this.node.on(Node.EventType.TOUCH_END, () => {
            this.node.active = false;
          });
          this.propertyNode.props_gift_on_off.on(Toggle.EventType.TOGGLE, e => {
            const key = "gift_" + this.props.memberId;
            if (e.isChecked) {
              putChatShieldingUser(this.props.memberId);
            } else {
              removeChatShieldingUser(this.props.memberId);
            }
          });
          this.propertyNode.props_play_number.children.forEach(v => {
            v.on(Toggle.EventType.TOGGLE, e => {
              if (e.isChecked) {
                this.playCount = parseInt(v.name.replace("toggle_", ""));
              } else {
                this.playCount = 1;
              }
            });
          });
        }
        getPlayNumber() {
          const toggles = this.propertyNode.props_play_number.children;
          for (let i = 0; i < toggles.length; i++) {
            const toggle = toggles[i].getComponent(Toggle);
            if (toggle.isChecked) {
              return parseInt(toggle.node.name.replace("toggle_", ""));
            }
          }
          return 1;
        }
        useProps(key, value) {
          if (key === 'isUser') ;else if (key === 'head') {
            global.loadHeadSprite(value.cur, this.propertyNode.props_head.getComponent(Sprite));
          } else if (key === 'name') {
            this.propertyNode.props_label_gift_userName.string = value.cur;
          } else if (key === 'gold') {
            this.propertyNode.props_label_gift_userGold.string = this.props.gold.formatAmountWithLetter();
          } else if (key === 'gameType') ;else if (key === 'memberId') {
            this.propertyNode.props_gift_on_off.getComponent(Toggle).isChecked = isChatShieldingUser(this.props.memberId);
          } else if (key === '_setDone') {
            this.propertyNode.props_top_user.active = this.props.isUser;
            this.propertyNode.props_spr_gift_bg_user.active = this.props.isUser;
            this.propertyNode.props_spr_gift_bg_dealer.active = !this.props.isUser;

            // this.propertyNode.props_top_croupier.active = !this.props.isUser;

            // if (this.propertyNode.props_top_croupier.active) {
            // 	this.propertyNode.props_heguan_yxx.active = this.props.gameType === GameType.YXX;
            // 	this.propertyNode.props_heguan_bandar.active = this.props.gameType === GameType.BANDAR_QIU_QIU || this.props.gameType === GameType.BANDAR;
            // }
          }
        }

        bindUI() {
          const toggle = this.propertyNode.props_play_number.children.find(v => v.name === "toggle_" + this.playCount);
          toggle && (toggle.getComponent(Toggle).isChecked = true);
          this.initIconConfig();
        }
        initIconConfig() {
          this.propertyNode.props_btn_gift_box.active = false;
          GIFT_ICON_CONFIG.forEach(v => {
            const iconNode = instantiate(this.propertyNode.props_btn_gift_box);
            iconNode.active = true;
            iconNode.getChildByName("spr_gift_icon").getComponent(Sprite).spriteFrame = sourceManageSeletor("common").getFile(v.spriteFramePath).source;
            this.propertyNode.props_gift_groups.addChild(iconNode);
            iconNode.on(Node.EventType.TOUCH_END, () => {
              this.events.selectGift(v.value, this.playCount);
              this.node.active = false;
            });
          });
        }
        update(deltaTime) {}
      }) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Common_HotUpdate.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './HotUpdate.ts', './App.ts', './GameConfig.ts', './config.ts', './globals.ts', './env', './mockData.ts', './bridge.ts', './languagePkg.ts', './apiUrl.ts'], function (exports) {
  var _applyDecoratedDescriptor, _initializerDefineProperty, cclegacy, ProgressBar, Asset, Label, Node, _decorator, Component, native, sys, director, game, Hot, HotOptions, App, GameConfig, getIsTest, initConfig, config, lang, NATIVE, hideNativeSplash, BridgeCode, getAppVersionName, getPackageName, showNativeSplash, installApk, getRedirectUrl, LanguageItemType;
  return {
    setters: [function (module) {
      _applyDecoratedDescriptor = module.applyDecoratedDescriptor;
      _initializerDefineProperty = module.initializerDefineProperty;
    }, function (module) {
      cclegacy = module.cclegacy;
      ProgressBar = module.ProgressBar;
      Asset = module.Asset;
      Label = module.Label;
      Node = module.Node;
      _decorator = module._decorator;
      Component = module.Component;
      native = module.native;
      sys = module.sys;
      director = module.director;
      game = module.game;
    }, function (module) {
      Hot = module.default;
      HotOptions = module.HotOptions;
    }, function (module) {
      App = module.default;
    }, function (module) {
      GameConfig = module.GameConfig;
      getIsTest = module.getIsTest;
    }, function (module) {
      initConfig = module.initConfig;
      config = module.config;
    }, function (module) {
      lang = module.lang;
    }, function (module) {
      NATIVE = module.NATIVE;
    }, null, function (module) {
      hideNativeSplash = module.hideNativeSplash;
      BridgeCode = module.BridgeCode;
      getAppVersionName = module.getAppVersionName;
      getPackageName = module.getPackageName;
      showNativeSplash = module.showNativeSplash;
      installApk = module.installApk;
      getRedirectUrl = module.getRedirectUrl;
    }, function (module) {
      LanguageItemType = module.LanguageItemType;
    }, null],
    execute: function () {
      var _dec, _dec2, _dec3, _dec4, _dec5, _dec6, _dec7, _dec8, _dec9, _class, _class2, _descriptor, _descriptor2, _descriptor3, _descriptor4, _descriptor5, _descriptor6, _descriptor7, _descriptor8;
      cclegacy._RF.push({}, "e842dSMZBtE9r0/N1h4wTxv", "Common_HotUpdate", undefined);
      const {
        ccclass,
        property
      } = _decorator;

      // macro.CLEANUP_IMAGE_CACHE = false;
      // dynamicAtlasManager.enabled = true;
      let Common_HotUpdate = exports('Common_HotUpdate', (_dec = ccclass("Common_HotUpdate"), _dec2 = property(ProgressBar), _dec3 = property({
        displayName: "project.manifest",
        type: Asset
      }), _dec4 = property({
        displayName: "project.versionManifest",
        type: Asset
      }), _dec5 = property(Label), _dec6 = property(Label), _dec7 = property(Label), _dec8 = property(Node), _dec9 = property(Label), _dec(_class = (_class2 = class Common_HotUpdate extends Component {
        constructor(...args) {
          super(...args);
          _initializerDefineProperty(this, "updateProgress", _descriptor, this);
          _initializerDefineProperty(this, "manifest", _descriptor2, this);
          _initializerDefineProperty(this, "versionManifest", _descriptor3, this);
          _initializerDefineProperty(this, "versionLabel", _descriptor4, this);
          _initializerDefineProperty(this, "tipsLabel", _descriptor5, this);
          _initializerDefineProperty(this, "logLabel", _descriptor6, this);
          _initializerDefineProperty(this, "updateConfirm", _descriptor7, this);
          _initializerDefineProperty(this, "updateContent", _descriptor8, this);
          this.versionInfo = {
            local: "",
            server: ""
          };
          this._storagePath = void 0;
          this.localProjectManifest = void 0;
        }
        start() {
          window["pageDone"] && window["pageDone"]();
          console.warn("envKsy", GameConfig.envKey);
        }
        onLoad() {
          lang.use(getIsTest() ? LanguageItemType.ZH : LanguageItemType.EN);
          {
            console.log("大厅热更新测试代码生效666");
            this._storagePath = (native.fileUtils ? native.fileUtils.getWritablePath() : "/") + "remote-asset";

            // 🔥 关键：在启动时恢复热更搜索路径
            this.restoreHotUpdateSearchPaths();
            hideNativeSplash();
            native.bridge.onNative = (arg0, arg1) => {
              if (BridgeCode.APP_VERSION === arg0) {
                GameConfig.appLocalVersion = arg1;
                this.initGame();
              }
            };
            if (sys.os === sys.OS.OSX) {
              //! Hindi
              lang.use(LanguageItemType.HI);
              GameConfig.appLocalVersion = "V1.0.1";
              this.initGame();
              return;
            }
            getAppVersionName();
          }
        }

        /**版本号判断 */
        shouldUpdate(oldVersion, newVersion) {
          const trnsfer = version => {
            const arr = version.split(".");
            const frist = +arr[0] * 10 + "";
            const second = (arr[1] === "0" ? "00" : +arr[1] * 10) + "";
            const thrid = (arr[2] === "0" ? "00" : +arr[2] * 10) + "";
            return +(frist + second + thrid);
          };
          const oldtansferVersion = trnsfer(oldVersion);
          const newtansferVersion = trnsfer(newVersion);
          console.log("oldtansferVersion", oldtansferVersion);
          console.log("newtansferVersion", newtansferVersion);
          return newtansferVersion > oldtansferVersion;
        }
        initGame() {
          initConfig().then(_config => {
            if (sys.os === sys.OS.ANDROID) {
              console.log("hotUpdate ANDROID");
              let remoteUrl = _config.hotUpdateUrl;
              console.log("hotUpdate ANDROID", remoteUrl);
              if (remoteUrl) {
                // remoteUrl = remoteUrl.replace("appHotUpdate", "static");
                remoteUrl = `${remoteUrl}/androidHotUpdate/Version1/`;
                this.handleManifestFile(remoteUrl);
              }
              this.init();
              return;
            } else {
              // Mock 模式下，不处理热更新 manifest，避免网络请求
              // if (!ENABLE_MOCK) {
              _config.hotUpdateUrl && this.handleManifestFile(_config.hotUpdateUrl);
              // } else {
              //   console.log("[Mock] 跳过热更新 manifest 处理");
              // }
            }

            this.getPackageInfo().then(content => {
              //有限判断AB面开启状态
              if (content && content.abState) {
                director.loadScene("game");
              } else {
                let isApkUpdate = NATIVE;
                // 要 isApkUpdate 为false，才表示设置了该值，返回一个undefined也要更新包
                if (content && content.isApkUpdate === false) {
                  isApkUpdate = false;
                }
                if (isApkUpdate && this.shouldUpdate(GameConfig.appLocalVersion, config.appOnlineVersion)) {
                  //弹出更新提示
                  this.initConfirm([lang.write(k => k.UpdateModule.GameConfig, {
                    version: config.appOnlineVersion
                  }, {
                    placeStr: `请更新App至最新版(${config.appOnlineVersion})`
                  }), config.upgradeDesc], () => {
                    sys.openURL(`${config.shareUrl}?pkgId=${getPackageName()}&version=${config.appOnlineVersion}`);
                    // window.setTimeout(() => {
                    // 	native.bridge.onNative = (arg0: string, arg1: string) => {
                    // 		if (BridgeCode.DOWNLOAD_APK === arg0) {
                    // 			if ('failed' === arg1) {
                    // 				this.initConfirm([lang.write(k => k.UpdateModule.RestartProgram), config.upgradeDesc], () => {
                    // 					this.downloadApkHandle(`${config.appDumpUrl}?ap=${getPackageName()}&version=${config.appOnlineVersion}`, config.appOnlineVersion)
                    // 				}, () => {
                    // 					game.end()
                    // 				})
                    // 			}
                    // 		}
                    // 	}
                    // 
                    // 	this.downloadApkHandle(config.appDumpUrl, config.appOnlineVersion)
                    // }, 10)
                  }, () => {
                    if (config.forceUpgrade) {
                      game.end();
                    } else {
                      this.init();
                    }
                  });
                } else {
                  this.init();
                }
              }
            });
          }).catch(e => {
            console.error("initGame error:", e);
            if (e === "config_error") {
              this.initConfirm([lang.write(k => k.InitGameModule.GameBoardInitAndGotoUrl)], () => {
                game.restart();
                showNativeSplash();
                return true;
              }, () => {
                // sys.openURL('https://hugewin777d.com/')
              });
            }
          });
        }

        /**
         * 🔥 关键：在启动时恢复热更搜索路径
         * 从 localStorage 读取之前保存的搜索路径并应用
         * 这样热更下载的资源才能在重启后生效
         */
        restoreHotUpdateSearchPaths() {
          try {
            const hotUpdateSearchPaths = sys.localStorage.getItem('HotUpdateSearchPaths');
            if (hotUpdateSearchPaths) {
              const paths = JSON.parse(hotUpdateSearchPaths);
              console.log("[HotUpdate] 恢复搜索路径: " + JSON.stringify(paths));
              native.fileUtils.setSearchPaths(paths);

              // 处理临时目录（如果存在未完成的更新）
              const storagePath = paths[0] || '';
              const tempPath = storagePath + '_temp/';
              if (native.fileUtils.isDirectoryExist(tempPath) && !native.fileUtils.isFileExist(tempPath + 'project.manifest.temp')) {
                console.log("[HotUpdate] 发现临时目录，正在合并...");
                const fileList = [];
                native.fileUtils.listFilesRecursively(tempPath, fileList);
                const baseOffset = tempPath.length;
                fileList.forEach(srcPath => {
                  const relativePath = srcPath.substring(baseOffset);
                  const dstPath = storagePath + relativePath;
                  if (srcPath.endsWith('/')) {
                    native.fileUtils.createDirectory(dstPath);
                  } else {
                    if (native.fileUtils.isFileExist(dstPath)) {
                      native.fileUtils.removeFile(dstPath);
                    }
                    native.fileUtils.renameFile(srcPath, dstPath);
                  }
                });
                native.fileUtils.removeDirectory(tempPath);
                console.log("[HotUpdate] 临时目录合并完成");
              }
            } else {
              console.log("[HotUpdate] 没有保存的搜索路径，使用默认路径");
            }
          } catch (e) {
            console.error("[HotUpdate] 恢复搜索路径失败: ", e);
          }
        }
        update(deltaTime) {}
        enterGame() {
          this.updateProgress.progress = 0;
          window.setTimeout(() => {
            App.Instance().start();
            // effect1(this.node).out().then(() => {
            // 	App.Instance().start()
            // })
          }, 500);
        }
        initConfirm(content, okFn, cancle) {
          this.updateConfirm.active = true;
          this.updateConfirm.getChildByName("Label_updata_tips").getComponent(Label).string = content[0];
          content[1] && (this.updateConfirm.getChildByName("Label_updata_content").getComponent(Label).string = content[1]);
          this.updateConfirm.getChildByName("btn_updata_ok").once(Node.EventType.TOUCH_END, () => {
            if (!okFn()) {
              this.updateConfirm.active = false;
            }
          });
          this.updateConfirm.getChildByName("btn_updata_cancel").once(Node.EventType.TOUCH_END, () => {
            this.updateConfirm.active = false;
            if (!cancle) {
              this.updateConfirm.active = false;
            } else if (cancle && !cancle()) {
              this.updateConfirm.active = false;
            }
            // game.end()
          });
        }

        init() {
          const hotInstance = new Hot(this.logLabel);
          // this.loadingLab.string = TextCfg.getTextUi(5012);
          // this._nodes["spr_loading"].getComponent(Label).string = TextCfg.getTextUi(5018);
          let options = new HotOptions();
          options.OnVersionInfo = data => {
            console.log("OnVersionInfo", JSON.stringify(data || {}));
            let {
              local,
              server
            } = data || {};
            this.versionInfo = data || {};
            this.versionLabel.string = lang.write(k => k.UpdateModule.VersionLabel, {
              localVersion: local,
              serverVersion: server
            }, {
              placeStr: `本地版本:v${local}, 线上版本:v${server}`
            });

            // if (local > server) {
            // 	let storagePath = ((native.fileUtils ? native.fileUtils.getWritablePath() : '/') + 'remote-asset');
            // 	native.fileUtils.removeDirectory(storagePath)
            // 	this.versionLabel.string += ' &Cache clear'
            // 	console.log('Cache clear')
            // }
          };

          options.OnUpdateProgress = event => {
            let bytes = event.getDownloadedBytes() + "/" + event.getTotalBytes();
            let files = event.getDownloadedFiles() + "/" + event.getTotalFiles();
            let file = event.getPercentByFile().toFixed(2);
            let byte = event.getPercent().toFixed(2);
            let msg = event.getMessage();

            // console.log('[update]: 进度=' + file);
            this.updateProgress.progress = parseFloat(file);
            this.tipsLabel.string = lang.write(k => k.UpdateModule.UpdateProgress, {
              time: (parseFloat(file) * 100).toFixed(0)
            }, {
              placeStr: `正在更新中,请耐心等待（${(parseFloat(file) * 100).toFixed(0)}%）...`
            });
            console.log(msg);
          };
          options.OnNeedToUpdate = data => {
            this.initConfirm([lang.write(k => k.UpdateModule.OnNeedToUpdate, {
              version: this.versionInfo.local + "→" + this.versionInfo.server
            }, {
              placeStr: `检测到新版本，确认自动开始更新`
            })], () => {
              hotInstance.hotUpdate();
            }, () => {
              // this.enterGame();
              game.end();
            });
          };
          options.OnNoNeedToUpdate = () => {
            this.logLabel.string += lang.write(k => k.UpdateModule.DetectCompleted, {}, {
              placeStr: `检测完成，即将进入游戏>>`
            });
            this.tipsLabel.string = lang.write(k => k.UpdateModule.DetectComplete, {}, {
              placeStr: `检测完成，即将进入游戏`
            });
            // 不需要更新，直接进入游戏
            this.enterGame();
          };
          options.OnUpdateSucceed = () => {
            console.log("OnUpdateSucceed: OnUpdateSucceed");
            native.fileUtils.purgeCachedEntries();
            game.restart();
            showNativeSplash();
            console.log("OnUpdateSucceed: restart");
          };
          options.OnUpdateFailed = code => {
            console.log("OnUpdateFailed code: " + code);
            this.tipsLabel.string = lang.write(k => k.UpdateModule.UpdateFail, {}, {
              placeStr: `更新失败`
            });
            this.initConfirm([lang.write(k => k.UpdateModule.RestartProgram, {}, {
              placeStr: `更新失败，是否要重启程序？`
            })], () => {
              game.restart();
              showNativeSplash();
            }, () => {
              game.end();
            });
          };
          if (sys.isNative) {
            // Mock 模式下，直接进入游戏，跳过热更新检查（避免网络请求卡住）
            // if (ENABLE_MOCK) {
            //   console.log("[Mock] Mock 模式已启用，跳过热更新检查，直接进入游戏");
            //   this.tipsLabel.string = lang.write(
            //     (k) => k.UpdateModule.DetectComplete,
            //     {},
            //     {placeStr: `检测完成，即将进入游戏`}
            //   );
            //   this.enterGame();
            //   return;
            // }

            if (!config.isCheckHotUpdate) {
              this.enterGame();
            } else {
              this.logLabel.string += lang.write(k => k.UpdateModule.ClientCheck, {}, {
                placeStr: `客户端开始检查>>`
              });
              this.tipsLabel.string = lang.write(k => k.UpdateModule.CheckUpdatedPkg, {}, {
                placeStr: `检查更新包...`
              });
              if (this.manifest) {
                hotInstance.init(this.localProjectManifest, this._storagePath, options);
                hotInstance.checkUpdate();
              } else {
                // 如果 manifest 不存在，直接进入游戏（避免卡住）
                console.warn("[HotUpdate] manifest 不存在，跳过热更新检查，直接进入游戏");
                this.enterGame();
              }
            }
          } else {
            this.tipsLabel.string = lang.write(k => k.UpdateModule.isNative, {}, {
              placeStr: `非native版本不检查更新，即将进入游戏`
            });
            this.enterGame();
          }
        }
        handleManifestFile(newRemotUr) {
          console.log("hotUpdate ANDROID", this.manifest);
          if (!this.manifest) {
            console.warn("[HotUpdate] handleManifestFile: manifest is null, skipping update");
            return;
          }
          const afterVersionString = this.updateManifestFile(newRemotUr, this._storagePath + "/project.manifest", this.manifest);
          console.log("hotUpdate ANDROID", afterVersionString);
          this.loadManifestFile(afterVersionString);
          this.updateManifestFile(newRemotUr, this._storagePath + "/version.manifest", this.versionManifest);
        }
        loadManifestFile(data) {
          this.localProjectManifest = new native.Manifest(data, this._storagePath);
          console.log("hotUpdate ANDROID", this.localProjectManifest);
        }
        updateManifestFile(newRemotUr, fileName, manifest) {
          const fileExist = native.fileUtils.isFileExist(fileName);
          console.log("updateManifestFile - filename:" + fileName, "fileExist: ", fileExist);
          let obj = undefined;
          if (fileExist) {
            let filestring_version = native.fileUtils.getStringFromFile(fileName);
            obj = JSON.parse(filestring_version);
            console.log("updateManifestFile - handleManifestFile ", obj.packageUrl, " newRemotUr: ", newRemotUr);
          } else {
            obj = JSON.parse(manifest._nativeAsset);
          }
          obj.packageUrl = newRemotUr;
          obj.remoteManifestUrl = newRemotUr + "/project.manifest";
          obj.remoteVersionUrl = newRemotUr + "/version.manifest";
          let afterVersionString = JSON.stringify(obj);
          const res = native.fileUtils.writeStringToFile(afterVersionString, fileName);
          // this.mainfestObj = obj;
          console.log("updateManifestFile - Modify the results of the file: ", fileName, res);
          return afterVersionString;
        }
        downloadApkHandle(appDumpUrl, appOnlineVersion) {
          const filePath = (native.fileUtils ? native.fileUtils.getWritablePath() : "/") + "apkfiles/HugeWin-" + appOnlineVersion + ".apk";
          let downloader = new native.Downloader();
          //下载失败回调
          downloader.onError = (task, errorCode, errorCodeInternal, errorStr) => {
            console.log("downloader --------- " + errorStr);
          };

          //进度回调
          downloader.onProgress = (task, bytesReceived, totalBytesReceived, totalBytesExpected) => {
            let progress = totalBytesReceived / totalBytesExpected; //已经下载的字节数 / 需要下载的总字节数
            this.updateProgress.progress = progress;
            // this.getProgress(progress);
            let bKReceived = (totalBytesReceived / 1024).toFixed(1);
            let totalReceived = (totalBytesExpected / 1024).toFixed(1);
            // var strProgress: string = "Download APK:" + bKReceived + "kb / " + totalReceived + "kb";
            var strProgress = `Download Version ${appOnlineVersion}: ${bKReceived}kb / ${totalReceived}kb`;
            this.tipsLabel.string = strProgress;
          };
          //下载成功回调
          downloader.onSuccess = task => {
            // this.updateLabel.string = "Download success!";
            installApk(filePath); //下载成功，执行安装apk操作
          };

          const url = getRedirectUrl(appDumpUrl);
          downloader.createDownloadTask(url, filePath);

          // const apkName = appDumpUrl.substring(appDumpUrl.lastIndexOf("/") + 1);
          // nativeDownloadApk(appDumpUrl, "HugeWin" + appOnlineVersion, "Please be patient while downloading");
          // this.updateProgress.node.active = false;
          // this.tipsLabel.string = `Version ${appOnlineVersion} is being downloading...`;
        }

        /**获得包信息 */
        getPackageInfo() {
          return new Promise((reslove, reject) => {
            const packageName = getPackageName();

            // Mock 模式下直接返回 undefined，跳过网络请求
            {
              console.log("[Mock] 跳过渠道包信息请求");
              reslove(undefined);
              return;
            }
          });
        }
      }, (_descriptor = _applyDecoratedDescriptor(_class2.prototype, "updateProgress", [_dec2], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function () {
          return null;
        }
      }), _descriptor2 = _applyDecoratedDescriptor(_class2.prototype, "manifest", [_dec3], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function () {
          return null;
        }
      }), _descriptor3 = _applyDecoratedDescriptor(_class2.prototype, "versionManifest", [_dec4], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function () {
          return null;
        }
      }), _descriptor4 = _applyDecoratedDescriptor(_class2.prototype, "versionLabel", [_dec5], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function () {
          return null;
        }
      }), _descriptor5 = _applyDecoratedDescriptor(_class2.prototype, "tipsLabel", [_dec6], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function () {
          return null;
        }
      }), _descriptor6 = _applyDecoratedDescriptor(_class2.prototype, "logLabel", [_dec7], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function () {
          return null;
        }
      }), _descriptor7 = _applyDecoratedDescriptor(_class2.prototype, "updateConfirm", [_dec8], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function () {
          return null;
        }
      }), _descriptor8 = _applyDecoratedDescriptor(_class2.prototype, "updateContent", [_dec9], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function () {
          return null;
        }
      })), _class2)) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Common_LoaderPanel.ts", ['cc', './BaseComponent.ts', './SourceManage.ts', './globals.ts', './GameConfig.ts'], function (exports) {
  var cclegacy, Label, ProgressBar, Node, _decorator, BaseComponent, SourceManage, global, getIsTest;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      Label = module.Label;
      ProgressBar = module.ProgressBar;
      Node = module.Node;
      _decorator = module._decorator;
    }, function (module) {
      BaseComponent = module.BaseComponent;
    }, function (module) {
      SourceManage = module.default;
    }, function (module) {
      global = module.global;
    }, function (module) {
      getIsTest = module.getIsTest;
    }],
    execute: function () {
      var _dec, _class;
      cclegacy._RF.push({}, "9fe7egMqohM6YNejWlC1HlR", "Common_LoaderPanel", undefined);
      const {
        ccclass,
        property
      } = _decorator;
      let Common_LoaderPanel = exports('Common_LoaderPanel', (_dec = ccclass('Common_LoaderPanel'), _dec(_class = class Common_LoaderPanel extends BaseComponent {
        constructor() {
          super();
          this.events = {
            onLoadDone: () => {}
          };
          this.propertyNode = {
            /**进度条节点 */
            props_progressTip: new Label(),
            props_progressBar: new ProgressBar(),
            props_error_log: new Label(),
            props_btn_return: new Node(),
            props_version: new Label()
          };
          this.sourceManageList = [];
          this.props = {
            loadBarType: 1,
            reverseProgress: false,
            versionStr: '-'
          };
          this.t = 0;
        }
        initState(props) {
          return {
            total: 0,
            progress: 0,
            loadingObj: null
          };
        }
        bindEvent() {
          this.propertyNode.props_btn_return.on(Node.EventType.TOUCH_END, () => {
            this.sourceManageList.forEach(sm => sm.stopPreLoad());
            global.closeSubGame();
          });
        }
        startLoad(bundleList, fileMap) {
          const totalCount = fileMap.filter(i => i.isPreLoad).length;
          let hasDoneCount = 0;
          bundleList.forEach(bundle => {
            const sourceManage = new SourceManage(bundle, fileMap.filter(i => i.bundlePkgName === bundle.name && i.isPreLoad));
            this.sourceManageList.push(sourceManage);
            sourceManage.preLoadAllFiles1((total, doneCount, sourceFileloading) => {
              if (!this.isValid) return;
              hasDoneCount++;
              this.delayShowClose();
              this.setState({
                // loadingObj: sourceFileloading, total, progress: doneCount
                loadingObj: sourceFileloading,
                total: totalCount,
                progress: hasDoneCount
              });
              // if (total === doneCount) {
              if (totalCount === hasDoneCount) {
                this.delayShowClose(true);
                // this.hideCloseBtn();
                this.events && window.setTimeout(() => this.events.onLoadDone(this.sourceManageList), 300);
              }
            }, () => {}, this.propertyNode.props_error_log);
          });

          // this.sourceManage = new SourceManage(bundle, fileMap)
          // this.sourceManage.preLoadAllFiles1((total: number, doneCount: number, sourceFileloading: ISourceFile) => {
          // 	this.setState({
          // 		loadingObj: sourceFileloading, total, progress: total - doneCount
          // 	})
          // }, () => { this.events.onLoadDone(this.sourceManage) }, this.propertyNode.props_error_log)
        }

        delayShowClose(isClear = false) {
          this.t && window.clearTimeout(this.t);
          if (!isClear) {
            this.t = window.setTimeout(() => {
              this.node.isValid && (this.propertyNode.props_btn_return.active = true);
            }, 2 * 1000);
          } else {
            this.hideCloseBtn();
          }
        }
        bindUI() {
          this.propertyNode.props_btn_return.active = false;
          this.useState(() => {
            if (!this.state.total) {
              this.propertyNode.props_progressBar.progress = 1;
              this.propertyNode.props_progressTip.string = "无可预加载的资源，任务已完成";
              return;
            }
            this.propertyNode.props_progressBar.progress = this.props.reverseProgress ? 1 + this.state.progress / this.state.total : this.state.progress / this.state.total;
            // this.propertyNode.props_progressTip.string = (this.state.progress === this.state.total
            // 	? "已加载完成" : `正在加载资源:${this.state.loadingObj.path}
            // 	(${(this.state.progress) + '/' + this.state.total})`)

            this.propertyNode.props_progressTip.string = `${(this.state.progress * 100 / this.state.total).toFixed(0)}%`;
          }, [], false);
        }
        setTipContent(content) {
          this.propertyNode.props_progressTip.string = content;
        }
        hideCloseBtn() {
          this.node.isValid && (this.propertyNode.props_btn_return.active = false);
        }
        destroyCallBack() {
          this.delayShowClose(true);
        }
        useProps(key, value) {
          // console.log(key, "change", value.cur)
          if (key === "versionStr") {
            this.propertyNode.props_version.string = `${getIsTest() ? '内部版本-' : ''}${value.cur}`;
            if (!getIsTest()) {
              this.propertyNode.props_version.node.active = false;
            }
          }
        }
        update(deltaTime) {}
      }) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Common_Marquee.ts", ['cc', './BaseComponent.ts'], function (exports) {
  var cclegacy, Node, instantiate, Label, Vec3, UITransform, _decorator, BaseComponent;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      Node = module.Node;
      instantiate = module.instantiate;
      Label = module.Label;
      Vec3 = module.Vec3;
      UITransform = module.UITransform;
      _decorator = module._decorator;
    }, function (module) {
      BaseComponent = module.BaseComponent;
    }],
    execute: function () {
      var _dec, _class;
      cclegacy._RF.push({}, "ea5abWvL4dMS5Uq675tV4tE", "Common_Marquee", undefined);
      const {
        ccclass,
        property
      } = _decorator;
      let Common_Marquee = exports('Common_Marquee', (_dec = ccclass('Common_Marquee'), _dec(_class = class Common_Marquee extends BaseComponent {
        constructor(...args) {
          super(...args);
          this.marueeMap = [];
          this.propertyNode = {
            props_Mask_ticker: new Node(),
            /**跑马灯模板 */
            props_template_label_ticker: new Node()
          };
          this.props = {
            addInfoQueue: [],
            speed: 3,
            isInSubGame: false
          };
          this.events = {};
        }
        start() {
          this.schedule(this.move, 0.02);
        }
        initState() {
          return {
            isDone: true
          };
        }
        bindEvent() {}
        useProps(key, value) {
          if (key === "addInfoQueue") {
            if (!value.cur.length) return;
            try {
              const list = [...value.cur];
              this.marueeMap = this.marueeMap.concat(list);
              this.marueeMap.sort((a, b) => b.priority - a.priority);
              if (this.state.isDone) {
                this.setState({
                  isDone: false
                });
                this.run();
              }
            } catch (e) {
              console.error(e);
            }
          }
          if (key === "isInSubGame") {
            if (this.props.isInSubGame) {
              this.node.active = false;
            } else {
              if (this.props.addInfoQueue.length) {
                this.node.active = true;
              }
            }
          }
        }
        run() {
          if (this.marueeMap.length) {
            const fristItem = this.marueeMap[0];
            if (fristItem.count === -1) ;else if (fristItem.count <= 1) {
              this.marueeMap.shift();
            } else {
              fristItem.count--;
            }
            //const fristItem = this.marueeMap.shift()
            const itemNode = instantiate(this.propertyNode.props_template_label_ticker);
            // itemNode.getComponent(Label).string = decodeURI(fristItem.content)
            // const cocosString = decodeURI(fristItem.content).replace(/<span\s+style=['"]color\s*:\s*#([^'"]+)['"]>([^<]+)<\/span>/gi, (match, color, content) => {
            // 	// 返回转换后的格式
            // 	return `<color=#${color}>${content}</color>`;
            // })
            const cocosString = this.convertHtmlToCustomFormat(decodeURI(fristItem.content));
            // console.log(decodeURI(fristItem.content), cocosString)
            // itemNode.getComponent(RichText).string = cocosString
            itemNode.getComponent(Label).string = decodeURI(fristItem.content);
            !this.props.isInSubGame && (itemNode.active = true);
            this.propertyNode.props_Mask_ticker.addChild(itemNode);
            // itemNode.getComponent(RichText)['_updateRichText']()
            // console.log('width', itemNode.getComponent(UITransform).width)
            itemNode.setPosition(new Vec3(itemNode.position.x * 2, itemNode.position.y, 0));
          } else {
            this.setState({
              isDone: true
            });
          }
        }
        convertHtmlToCustomFormat(inputString) {
          const regex = /<span\s+style=['"]color\s*:\s*rgb\((\d+),\s*(\d+),\s*(\d+)\);['"]>([^<]+)<\/span>/gi;
          const convertedString = inputString.replace(regex, (match, r, g, b, content) => {
            const hexColor = this.rgbToHex(parseInt(r), parseInt(g), parseInt(b));
            return `<color=${hexColor}>${content}</color>`;
          });
          return convertedString;
        }

        // RGB 转换为十六进制格式的函数
        rgbToHex(r, g, b) {
          const _r = Math.max(0, Math.min(255, r));
          const _g = Math.max(0, Math.min(255, g));
          const _b = Math.max(0, Math.min(255, b));
          const hexR = _r.toString(16).padStart(2, '0');
          const hexG = _g.toString(16).padStart(2, '0');
          const hexB = _b.toString(16).padStart(2, '0');
          return `#${hexR}${hexG}${hexB}`;
        }
        bindUI() {
          this.node.active = false;
          this.useState((key, value) => {
            if (value.cur) {
              this.node.active = false;
            } else {
              !this.props.isInSubGame && (this.node.active = true);
            }
          }, ["isDone"]);
        }
        move() {
          this.propertyNode.props_Mask_ticker.children.forEach(child => {
            child.position = new Vec3(child.position.x - this.props.speed, child.position.y, 0);
            if (child.position.x < -child.getComponent(UITransform).width) {
              child.destroy();
              this.run();
            }
          });
        }
        update(deltaTime) {}
      }) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Common_ModalBox.ts", ['cc', './BaseComponent.ts'], function (exports) {
  var cclegacy, Label, Button, Node, _decorator, BaseComponent;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      Label = module.Label;
      Button = module.Button;
      Node = module.Node;
      _decorator = module._decorator;
    }, function (module) {
      BaseComponent = module.BaseComponent;
    }],
    execute: function () {
      var _dec, _class;
      cclegacy._RF.push({}, "783ecTuB1lM8Yum+CT/5fTw", "Common_ModalBox", undefined);
      const {
        ccclass,
        property
      } = _decorator;
      let Common_ModalBox = exports('Common_ModalBox', (_dec = ccclass('Common_ModalBox'), _dec(_class = class Common_ModalBox extends BaseComponent {
        constructor(...args) {
          super(...args);
          this.props = {
            content: "",
            type: "Confirm",
            url: "",
            isVertical: false
          };
          this.events = {
            onCloseHandler: () => {},
            onCancleHandler: () => true,
            onOkHandler: () => true
          };
          this.propertyNode = {
            props_Label_content: new Label(),
            props_btn_updata_cancel: new Button(),
            props_btn_updata_ok: new Button(),
            props_spr_updata_tipsBg: new Node()
            // props_webView_spr_updata_tipsBg: new Node(),
            // props_WebView: new WebView(),
            // props_btn_dt_off: new Button()
          };
        }

        start() {}
        initState() {
          return {};
        }
        bindEvent() {
          this.propertyNode.props_btn_updata_cancel.node.on(Node.EventType.TOUCH_END, () => {
            if (this.events.onCancleHandler()) {
              this.events.onCloseHandler();
            }
          });
          this.propertyNode.props_btn_updata_ok.node.on(Node.EventType.TOUCH_END, () => {
            if (this.events.onOkHandler()) {
              this.events.onCloseHandler();
            }
          });
          // this.propertyNode.props_btn_dt_off.node.on(Node.EventType.TOUCH_END, () => {
          // 	this.events.onCloseHandler()
          // })
        }

        useProps(key, value) {
          if (key === "content") {
            this.propertyNode.props_spr_updata_tipsBg.active = true;
            this.propertyNode.props_Label_content.string = this.props.content;
          }
          if (key === "type") {
            if (this.props.type === "Confirm") {
              this.propertyNode.props_btn_updata_cancel.node.active = true;
              this.propertyNode.props_btn_updata_ok.node.active = true;
            } else if (this.props.type === "Prompt") {
              this.propertyNode.props_btn_updata_cancel.node.active = false;
              this.propertyNode.props_btn_updata_ok.node.active = true;
            }
          }
          if (key === "url" && this.props.url) {
            this.propertyNode.props_spr_updata_tipsBg.active = false;
            // this.propertyNode.props_webView_spr_updata_tipsBg.active = true
            // this.propertyNode.props_WebView.url = this.props.url
          }

          if (key === "_setDone") {
            if (this.props.isVertical) {
              this.propertyNode.props_spr_updata_tipsBg.angle = 90;
            } else {
              this.propertyNode.props_spr_updata_tipsBg.angle = 0;
            }
          }
        }
        bindUI() {
          // this.propertyNode.props_webView_spr_updata_tipsBg.active = this.props.url ? true : false
          if (this.props.url) {
            this.propertyNode.props_spr_updata_tipsBg.active = true;
            // this.propertyNode.props_WebView.node.active = true
            // this.propertyNode.props_WebView.url = this.props.url
            // this.propertyNode.props_WebView.node.on(WebView.EventType.ERROR, () => {
            // 	hallDispatch(addToastAction({ content: lang.write(k => k.MainPaneModule.LoadUrlError, {}, { placeStr: "此链接无法加载" }), type: ToastType.ERROR }))
            // }, this);
          }
        }

        update(deltaTime) {}
      }) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/comparator.ts", ['cc', './equals.ts', './utils.ts'], function (exports) {
  var cclegacy, areObjectsEqualStrict, areArraysEqual, areDatesEqual, areMapsEqual, areObjectsEqual, arePrimitiveWrappersEqual, areRegExpsEqual, areSetsEqual, areTypedArraysEqual, createIsCircular, combineComparators;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      areObjectsEqualStrict = module.areObjectsEqualStrict;
      areArraysEqual = module.areArraysEqual;
      areDatesEqual = module.areDatesEqual;
      areMapsEqual = module.areMapsEqual;
      areObjectsEqual = module.areObjectsEqual;
      arePrimitiveWrappersEqual = module.arePrimitiveWrappersEqual;
      areRegExpsEqual = module.areRegExpsEqual;
      areSetsEqual = module.areSetsEqual;
      areTypedArraysEqual = module.areTypedArraysEqual;
    }, function (module) {
      createIsCircular = module.createIsCircular;
      combineComparators = module.combineComparators;
    }],
    execute: function () {
      exports({
        createEqualityComparator: createEqualityComparator,
        createEqualityComparatorConfig: createEqualityComparatorConfig,
        createInternalEqualityComparator: createInternalEqualityComparator,
        createIsEqual: createIsEqual
      });
      cclegacy._RF.push({}, "81ab6hGBMtLI5e72ElI2cEj", "comparator", undefined);
      const ARGUMENTS_TAG = '[object Arguments]';
      const BOOLEAN_TAG = '[object Boolean]';
      const DATE_TAG = '[object Date]';
      const MAP_TAG = '[object Map]';
      const NUMBER_TAG = '[object Number]';
      const OBJECT_TAG = '[object Object]';
      const REG_EXP_TAG = '[object RegExp]';
      const SET_TAG = '[object Set]';
      const STRING_TAG = '[object String]';
      const {
        isArray
      } = Array;
      const isTypedArray = typeof ArrayBuffer === 'function' && ArrayBuffer.isView ? ArrayBuffer.isView : null;
      const {
        assign
      } = Object;
      const getTag = Object.prototype.toString.call.bind(Object.prototype.toString);
      /**
       * Create a comparator method based on the type-specific equality comparators passed.
       */
      function createEqualityComparator({
        areArraysEqual,
        areDatesEqual,
        areMapsEqual,
        areObjectsEqual,
        arePrimitiveWrappersEqual,
        areRegExpsEqual,
        areSetsEqual,
        areTypedArraysEqual
      }) {
        /**
         * compare the value of the two objects and return true if they are equivalent in values
         */
        return function comparator(a, b, state) {
          // If the items are strictly equal, no need to do a value comparison.
          if (a === b) {
            return true;
          }

          // If the items are not non-nullish objects, then the only possibility
          // of them being equal but not strictly is if they are both `NaN`. Since
          // `NaN` is uniquely not equal to itself, we can use self-comparison of
          // both objects, which is faster than `isNaN()`.
          if (a == null || b == null || typeof a !== 'object' || typeof b !== 'object') {
            return a !== a && b !== b;
          }
          const constructor = a.constructor;

          // Checks are listed in order of commonality of use-case:
          //   1. Common complex object types (plain object, array)
          //   2. Common data values (date, regexp)
          //   3. Less-common complex object types (map, set)
          //   4. Less-common data values (promise, primitive wrappers)
          // Inherently this is both subjective and assumptive, however
          // when reviewing comparable libraries in the wild this order
          // appears to be generally consistent.

          // Constructors should match, otherwise there is potential for false positives
          // between class and subclass or custom object and POJO.
          if (constructor !== b.constructor) {
            return false;
          }

          // `isPlainObject` only checks against the object's own realm. Cross-realm
          // comparisons are rare, and will be handled in the ultimate fallback, so
          // we can avoid capturing the string tag.
          if (constructor === Object) {
            return areObjectsEqual(a, b, state);
          }

          // `isArray()` works on subclasses and is cross-realm, so we can avoid capturing
          // the string tag or doing an `instanceof` check.
          if (isArray(a)) {
            return areArraysEqual(a, b, state);
          }

          // `isTypedArray()` works on all possible TypedArray classes, so we can avoid
          // capturing the string tag or comparing against all possible constructors.
          if (isTypedArray != null && isTypedArray(a)) {
            return areTypedArraysEqual(a, b, state);
          }

          // Try to fast-path equality checks for other complex object types in the
          // same realm to avoid capturing the string tag. Strict equality is used
          // instead of `instanceof` because it is more performant for the common
          // use-case. If someone is subclassing a native class, it will be handled
          // with the string tag comparison.

          if (constructor === Date) {
            return areDatesEqual(a, b, state);
          }
          if (constructor === RegExp) {
            return areRegExpsEqual(a, b, state);
          }
          if (constructor === Map) {
            return areMapsEqual(a, b, state);
          }
          if (constructor === Set) {
            return areSetsEqual(a, b, state);
          }

          // Since this is a custom object, capture the string tag to determing its type.
          // This is reasonably performant in modern environments like v8 and SpiderMonkey.
          const tag = getTag(a);
          if (tag === DATE_TAG) {
            return areDatesEqual(a, b, state);
          }
          if (tag === REG_EXP_TAG) {
            return areRegExpsEqual(a, b, state);
          }
          if (tag === MAP_TAG) {
            return areMapsEqual(a, b, state);
          }
          if (tag === SET_TAG) {
            return areSetsEqual(a, b, state);
          }
          if (tag === OBJECT_TAG) {
            // The exception for value comparison is custom `Promise`-like class instances. These should
            // be treated the same as standard `Promise` objects, which means strict equality, and if
            // it reaches this point then that strict equality comparison has already failed.
            return typeof a.then !== 'function' && typeof b.then !== 'function' && areObjectsEqual(a, b, state);
          }

          // If an arguments tag, it should be treated as a standard object.
          if (tag === ARGUMENTS_TAG) {
            return areObjectsEqual(a, b, state);
          }

          // As the penultimate fallback, check if the values passed are primitive wrappers. This
          // is very rare in modern JS, which is why it is deprioritized compared to all other object
          // types.
          if (tag === BOOLEAN_TAG || tag === NUMBER_TAG || tag === STRING_TAG) {
            return arePrimitiveWrappersEqual(a, b, state);
          }

          // If not matching any tags that require a specific type of comparison, then we hard-code false because
          // the only thing remaining is strict equality, which has already been compared. This is for a few reasons:
          //   - Certain types that cannot be introspected (e.g., `WeakMap`). For these types, this is the only
          //     comparison that can be made.
          //   - For types that can be introspected, but rarely have requirements to be compared
          //     (`ArrayBuffer`, `DataView`, etc.), the cost is avoided to prioritize the common
          //     use-cases (may be included in a future release, if requested enough).
          //   - For types that can be introspected but do not have an objective definition of what
          //     equality is (`Error`, etc.), the subjective decision is to be conservative and strictly compare.
          // In all cases, these decisions should be reevaluated based on changes to the language and
          // common development practices.
          return false;
        };
      }

      /**
       * Create the configuration object used for building comparators.
       */
      function createEqualityComparatorConfig({
        circular,
        createCustomConfig,
        strict
      }) {
        let config = {
          areArraysEqual: strict ? areObjectsEqualStrict : areArraysEqual,
          areDatesEqual: areDatesEqual,
          areMapsEqual: strict ? combineComparators(areMapsEqual, areObjectsEqualStrict) : areMapsEqual,
          areObjectsEqual: strict ? areObjectsEqualStrict : areObjectsEqual,
          arePrimitiveWrappersEqual: arePrimitiveWrappersEqual,
          areRegExpsEqual: areRegExpsEqual,
          areSetsEqual: strict ? combineComparators(areSetsEqual, areObjectsEqualStrict) : areSetsEqual,
          areTypedArraysEqual: strict ? areObjectsEqualStrict : areTypedArraysEqual
        };
        if (createCustomConfig) {
          config = assign({}, config, createCustomConfig(config));
        }
        if (circular) {
          const areArraysEqual = createIsCircular(config.areArraysEqual);
          const areMapsEqual = createIsCircular(config.areMapsEqual);
          const areObjectsEqual = createIsCircular(config.areObjectsEqual);
          const areSetsEqual = createIsCircular(config.areSetsEqual);
          config = assign({}, config, {
            areArraysEqual,
            areMapsEqual,
            areObjectsEqual,
            areSetsEqual
          });
        }
        return config;
      }

      /**
       * Default equality comparator pass-through, used as the standard `isEqual` creator for
       * use inside the built comparator.
       */
      function createInternalEqualityComparator(compare) {
        return function (a, b, _indexOrKeyA, _indexOrKeyB, _parentA, _parentB, state) {
          return compare(a, b, state);
        };
      }

      /**
       * Create the `isEqual` function used by the consuming application.
       */
      function createIsEqual({
        circular,
        comparator,
        createState,
        equals,
        strict
      }) {
        if (createState) {
          return function isEqual(a, b) {
            const {
              cache = circular ? new WeakMap() : undefined,
              meta
            } = createState();
            return comparator(a, b, {
              cache,
              equals,
              meta,
              strict
            });
          };
        }
        if (circular) {
          return function isEqual(a, b) {
            return comparator(a, b, {
              cache: new WeakMap(),
              equals,
              meta: undefined,
              strict
            });
          };
        }
        const state = {
          cache: undefined,
          equals,
          meta: undefined,
          strict
        };
        return function isEqual(a, b) {
          return comparator(a, b, state);
        };
      }
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/config.ts", ['cc', './GameConfig.ts', './WebSocketStarter.ts', './bridge.ts', './globals.ts', './languagePkg.ts', './tool.ts', './index5.ts', './hallType2.ts', './hallConfig.ts'], function (exports, module) {
  var sys, cclegacy, getGameMapConfig, getIsTest, WebSocketStarter, getPackageName, lang, Country, generateUniqueId, getStore, GameState, SubGameRunState, SubGameType$1, config$1, SKT_HOST;
  return {
    setters: [function (module) {
      sys = module.sys;
      cclegacy = module.cclegacy;
    }, function (module) {
      getGameMapConfig = module.getGameMapConfig;
      getIsTest = module.getIsTest;
    }, function (module) {
      WebSocketStarter = module.default;
    }, function (module) {
      getPackageName = module.getPackageName;
    }, function (module) {
      lang = module.lang;
    }, function (module) {
      Country = module.Country;
    }, function (module) {
      generateUniqueId = module.generateUniqueId;
    }, function (module) {
      getStore = module.getStore;
    }, function (module) {
      GameState = module.GameState;
      SubGameRunState = module.SubGameRunState;
    }, function (module) {
      SubGameType$1 = module.SubGameType;
      config$1 = module.config;
      SKT_HOST = module.SKT_HOST;
      exports('SKT_HOST', module.SKT_HOST);
    }],
    execute: function () {
      cclegacy._RF.push({}, "d08adVFFLJFcqw3wV6OiA/M", "config", undefined);

      // 为避免循环依赖，延迟导入 actions
      let _baseBoardActions = null;
      async function getBaseBoardActions() {
        if (!_baseBoardActions) {
          _baseBoardActions = await module.import('./baseBoard.ts');
        }
        return _baseBoardActions;
      }

      // 重新导出类型以保持向后兼容

      const SubGameType = exports('SubGameType', SubGameType$1);
      /**拉取最新的配置文件 */
      const initConfig = exports('initConfig', () => {
        return new Promise((resolve, reject) => {
          !window.HALL_GLOBAL && (window.HALL_GLOBAL = {});
          /**游戏单独运行的时候，防止getWsInstance为空 */
          window.HALL_GLOBAL.wsInstance = WebSocketStarter.Instance();
          getGameMapConfig().then(data => {
            console.log("游戏map配置读取完成~", data);
            config.gameConfig = data.wsList;
            config.appDumpUrl = data.appDumpUrl;
            config.appOnlineVersion = data.appOnlineVersion;
            config.bankHelpUrl = data.bankHelpUrl;
            config.buryPoint = data.buryPoint;
            config.gameBundleUrl = data.gameBundleUrl;
            data.hotUpdateUrl && (config.hotUpdateUrl = data.hotUpdateUrl);
            config.httpBaseUrl = data.httpBaseUrl;
            config.websocketUrl = data.socketBaseUrl;
            config.goldRecordUrl = data.goldRecordUrl;
            config.maintenanceStatus = data.maintenanceStatus === undefined ? false : data.maintenanceStatus;
            config.appleAppDumpUrl = data.appleAppDumpUrl;
            config.isCheckHotUpdate = data.isCheckHotUpdate === undefined ? true : data.isCheckHotUpdate;
            config.agentPageUrl = data.agentPageUrl;
            config.shareUrl = data.shareUrl;
            config.customerUrl = data.customerUrl;
            config.customerOutUrl = data.customerOutUrl;
            config.upgradeDesc = data.upgradeDesc;
            config.forceUpgrade = data.forceUpgrade;
            config.backwaterHelpUrl = data.backwaterHelpUrl;
            config.faceSwitch = data.faceSwitch === undefined ? true : data.faceSwitch;
            config.country = data.country || Country.CHINA;
            data.relief !== undefined && (config.relief = data.relief);
            /**-------------------确认data需要具备appVersion字段---------------------- */
            // config.appOnlineVersion = 'V1.0.1'//data['appVersion']
            generateUniqueId().then(str => {
              sys.os === sys.OS.OSX && deviceInfo.setUniqueId(str);
            });
            // let isError = false
            const pkgCode = getPackageName();
            console.log("pkgCode", pkgCode);
            subGameList.forEach(subGame => {
              if (subGame.gameId > 0 && !getIsTest()) {
                //web模式不请求远程游戏，直接本地请求(因为远程包是android的)
                subGame.enableRemote = pkgCode === 'web' ? false : true;
              }
              subGame.loadProgress = 0;
              subGame.hotMark = false;
              subGame.newMark = false;
              subGame.vipMark = 0;
              subGame.status = GameState.WORKING;
              subGame.runState = SubGameRunState.CLOSE;
              const result = data.wsList.find(i => i.id === subGame.gameId);
              if (result) {
                subGame.md5 = result.md5;
                // subGame.websocketUrl = result.ws
                subGame.hotMark = result.isHot || false;
                subGame.newMark = result.isNew || false;
                subGame.vipMark = result.vip || 0;
                subGame.status = result.status;
              }
            });
            // isError && getStore().dispatch(addToastAction({ content: "游戏map配置数据错误~" }))

            // const gameQueue = {
            //   domino: [[2]],
            //   slots: [[6], [14, 15], [8, 7], [10, 9], [3, 18]],
            //   other: [[12],[17], [11, 5], [4, 13], [16, 19]],
            // }

            const gameQueue = JSON.parse(data.gameSort);
            // Inject Ocean (23), MoneyComing (22), Ocean (23) into Domino queue (Rummy tab)
            if (gameQueue.domino) {
              gameQueue.domino.push([14007], [23]);
            }
            subGameGateQueue.forEach(i => {
              i.typeName === SubGameType.Domino && (i.queue = gameQueue.domino);
              i.typeName === SubGameType.Slot && (i.queue = gameQueue.slots);
              i.typeName === SubGameType.Other && (i.queue = gameQueue.other);
            });
            // 将游戏类别组揉在一起放到All里面
            subGameGateQueue.find(i => i.typeName === SubGameType.All).queue = subGameGateQueue.filter(i => i.typeName !== SubGameType.All).sort((a, b) => a.typeName - b.typeName).map(i => i.queue).reduce((a, b) => a.concat(b), []);
            window.HALL_GLOBAL.config = config;
            resolve(config);
          }).catch(async e => {
            const actions = await getBaseBoardActions();
            getStore().dispatch(actions.addToastAction({
              content: lang.write(k => k.WebSocketModule.ConfigGameFaild, {}, {
                placeStr: "游戏map配置读取错误~"
              }),
              type: actions.ToastType.ERROR
            }));
            console.error(`请求游戏map配置错误：${e}`);
            reject(e);
          });
        });
      });
      const deviceInfo = exports('deviceInfo', {
        /**设备唯一id */
        thisUniqueId: '',
        thisAdjustAttribution: {},
        // uniqueId: !NATIVE ? navigator.userAgent + navigator.platform + navigator.appVersion + navigator.vendor : '',
        setUniqueId: uniqueId => {
          deviceInfo.thisUniqueId = uniqueId;
        },
        getUniqueId: () => {
          return deviceInfo.thisUniqueId;
        },
        setAdjustAttribution: adjustAttribution => {
          deviceInfo.thisAdjustAttribution = adjustAttribution;
        },
        getAdjustAttribution: () => {
          return deviceInfo.thisAdjustAttribution;
        }
      });

      // 重新导出从 hall-config.ts 导入的 config 对象
      const config = exports('config', config$1);

      /**游戏信息 */
      let subGameList = exports('subGameList', [{
        gameId: 0,
        gameName: "大厅",
        gameHost: SKT_HOST.HALL,
        fileNameSmall: "",
        fileNameLarge: "",
        nameSprite: [""],
        bundleName: "",
        md5: "",
        enableRemote: false,
        runState: SubGameRunState.CLOSE,
        status: GameState.OFF_LINE,
        startUpPrefabPathName: 'prefab/loaderPanel',
        startUpHandler: boardPanel => {}
      }
      // {
      //   gameId: 3,
      //   gameName: "水果777",
      //   gameHost: SKT_HOST.SLOTS,
      //   fileNameSmall: SkeletalPathDefine._FRUITS_GATE_S,
      //   fileNameLarge: SkeletalPathDefine._FRUITS_GATE_L,
      //   nameSprite: [SpriteFramePathDefine.FRUITS_NAME_SMALL, SpriteFramePathDefine.FRUITS_NAME_LARGE],
      //   bundleName: "fruit777",
      //   md5: "",
      //   enableRemote: false,
      //   status: GameState.OFF_LINE,
      //   isVertical: false,
      //   startUpPrefabPathName: "",
      //   startUpHandler: (boardPanel) => import("../subGame/fruit777/StartUp").then(m => m.default(boardPanel as Node))
      // },

      // {
      //   gameId: 5,
      //   gameName: "小火箭",
      //   gameHost: SKT_HOST.MULTI,
      //   fileNameSmall: SkeletalPathDefine._CRASH_GATE_S,
      //   fileNameLarge: SkeletalPathDefine._CRASH_GATE_L,
      //   nameSprite: [SpriteFramePathDefine._CRASH_NAME_SMALL, SpriteFramePathDefine._CRASH_NAME_LARGE],
      //   bundleName: "Crash",
      //   md5: "",
      //   enableRemote: false,
      //   status: GameState.OFF_LINE,
      //   isVertical: false,
      //   startUpHandler: (boardPanel) => import("../subGame/crashV2/crashV2_StartUp").then(m => m.default(boardPanel as Node))
      // },
      // {
      //   gameId: 6,
      //   gameName: "财神",
      //   gameHost: SKT_HOST.SLOTS,
      //   fileNameSmall: SkeletalPathDefine._CSRUKOU_GATE_S,
      //   fileNameLarge: SkeletalPathDefine._CSRUKOU_GATE_L,
      //   nameSprite: [SpriteFramePathDefine._CSRUKOU_NAME_SMALL, SpriteFramePathDefine._CSRUKOU_NAME_LARGE],
      //   bundleName: "godWealthV2",
      //   md5: "",
      //   enableRemote: false,
      //   status: GameState.OFF_LINE,
      //   isVertical: false,
      //   startUpHandler: (boardPanel) => import("../subGame/godWealthV2/GodWealthV2_StartUp").then(m => m.default(boardPanel as Node))
      // },
      // {
      //   gameId: 10,
      //   gameName: "凤凰",
      //   gameHost: SKT_HOST.SLOTS,
      //   fileNameSmall: SkeletalPathDefine._GENG_HUANG_GATE_S,
      //   fileNameLarge: SkeletalPathDefine._GENG_HUANG_GATE_L,
      //   nameSprite: [SpriteFramePathDefine._GENG_HUANG_NAME_SMALL, SpriteFramePathDefine._GENG_HUANG_NAME_LARGE],
      //   bundleName: "phoenixV2",
      //   md5: "",
      //   enableRemote: false,
      //   status: GameState.OFF_LINE,
      //   isVertical: false,
      //   startUpHandler: (boardPanel) => import("../subGame/phoenixV2/PhoenixV2_StartUp").then(m => m.default(boardPanel as Node))
      // },
      // {
      //   gameId: 14,
      //   gameName: "雷神",
      //   gameHost: SKT_HOST.SLOTS,
      //   fileNameSmall: SkeletalPathDefine._THOR_S,
      //   fileNameLarge: SkeletalPathDefine._THOR_L,
      //   nameSprite: [SpriteFramePathDefine._THOR_SMALL, SpriteFramePathDefine._THOR_LARGE],
      //   bundleName: "thorV2",
      //   md5: "",
      //   enableRemote: false,
      //   status: GameState.OFF_LINE,
      //   isVertical: false,
      //   startUpHandler: (boardPanel) => import("../subGame/thorV2/ThorV2_StartUp").then(m => m.default(boardPanel as Node))
      // },
      // {
      //   gameId: 15,
      //   gameName: "星光公主",
      //   gameHost: SKT_HOST.SLOTS,
      //   fileNameSmall: SkeletalPathDefine._STAR_S,
      //   fileNameLarge: SkeletalPathDefine._STAR_L,
      //   nameSprite: [SpriteFramePathDefine._STAR_SMALL, SpriteFramePathDefine._STAR_LARGE],
      //   bundleName: "starlight",
      //   md5: "",
      //   enableRemote: false,
      //   status: GameState.OFF_LINE,
      //   isVertical: false,
      //   startUpHandler: (boardPanel) => import("../subGame/starlightV2/StarlightV2_StartUp").then(m => m.default(boardPanel as Node))
      // },
      // {
      //   gameId: 17,
      //   gameName: "Fish",
      //   gameHost: SKT_HOST.MULTI,
      //   fileNameSmall: SkeletalPathDefine._FISHING_S,
      //   fileNameLarge: SkeletalPathDefine._FISHING_L,
      //   nameSprite: [SpriteFramePathDefine._FISH_SMALL, SpriteFramePathDefine._FISH_LARGE],
      //   bundleName: "fish",
      //   md5: "",
      //   enableRemote: false,
      //   status: GameState.OFF_LINE,
      //   isVertical: false,
      //   startUpHandler: (boardPanel) => import("../subGame/fish/StartUp").then(m => m.default(boardPanel as Node))
      // },
      // {
      //   gameId: 14007,
      //   gameName: "MoneyComing",
      //   gameHost: SKT_HOST.SLOTS,
      //   fileNameSmall: SkeletalPathDefine._DOMINO_GATE_S,
      //   fileNameLarge: SkeletalPathDefine._DOMINO_GATE_L,
      //   nameSprite: [SpriteFramePathDefine._MONEY_COMING_SMALL, SpriteFramePathDefine._MONEY_COMING_LARGE],
      //   bundleName: "moneyComing",
      //   scriptBundleName: "moneyComingScript",
      //   md5: "",
      //   enableRemote: false,
      //   status: GameState.WORKING,
      //   isVertical: false,
      //   startUpHandler: (boardPanel) => {
      //     return import('../subGame/moneyComing/MoneyComing_StartUp').then(module => {
      //       return module.default(boardPanel as Node)
      //     })
      //   }
      // },
      // {
      //   gameId: 11,
      //   gameName: "鱼虾蟹",
      //   gameHost: SKT_HOST.MULTI,
      //   fileNameSmall: SkeletalPathDefine._YXXRK_GATE_S,
      //   fileNameLarge: SkeletalPathDefine._YXXRK_GATE_L,
      //   nameSprite: [SpriteFramePathDefine._YXXRK_NAME_SMALL, SpriteFramePathDefine._YXXRK_NAME_LARGE],
      //   bundleName: "yxx",
      //   md5: "",
      //   enableRemote: false,
      //   status: GameState.OFF_LINE,
      //   isVertical: false,
      //   startUpHandler: (boardPanel) => YXXStartUp(boardPanel as Node)
      // },
      // {
      //   gameId: 12,
      //   gameName: "龙虎",
      //   gameHost: SKT_HOST.MULTI,
      //   fileNameSmall: SkeletalPathDefine._DRAGON_TIGER_GATE_S,
      //   fileNameLarge: SkeletalPathDefine._DRAGON_TIGER_GATE_L,
      //   nameSprite: [SpriteFramePathDefine._DRAGON_TIGER_SMALL, SpriteFramePathDefine._DRAGON_TIGER_LARGE],
      //   bundleName: "dragonTiger",
      //   md5: "",
      //   enableRemote: false,
      //   status: GameState.OFF_LINE,
      //   isVertical: false,
      //   startUpHandler: (boardPanel) => DragonTigerStartUp(boardPanel as Node)
      // },
      // {
      //   gameId: 13,
      //   gameName: "百人球球",
      //   gameHost: SKT_HOST.MULTI,
      //   fileNameSmall: SkeletalPathDefine._BANDAR_S,
      //   fileNameLarge: SkeletalPathDefine._BANDAR_L,
      //   nameSprite: [SpriteFramePathDefine._BANDAR_SMALL, SpriteFramePathDefine._BANDAR_LARGE],
      //   bundleName: "bandar",
      //   md5: "",
      //   enableRemote: false,
      //   status: GameState.OFF_LINE,
      //   isVertical: false,
      //   startUpHandler: (boardPanel) => BandarStartUp(boardPanel as Node)
      // },
      // {
      //   gameId: 1,
      //   gameName: "双子星",   //没做
      //   gameHost: SKT_HOST.SLOTS,
      //   fileNameSmall: SkeletalPathDefine._GEMINI_GATE,
      //   fileNameLarge: SkeletalPathDefine._GEMINI_GATE,
      //   nameSprite: [SpriteFramePathDefine._GEMINI_NAME_SMALL, SpriteFramePathDefine._GEMINI_NAME_LARGE],
      //   bundleName: "binaryStar",
      //   md5: "",
      //   enableRemote: false,
      //   status: GameState.OFF_LINE,
      //   isVertical: false,
      //   startUpPrefabPathName: "",
      //   startUpHandler: (boardPanel) => { }
      // },
      // {
      //   gameId: 2,
      //   gameName: "多米诺",
      //   gameHost: SKT_HOST.MULTI,
      //   fileNameSmall: SkeletalPathDefine._DOMINO_GATE_S,
      //   fileNameLarge: SkeletalPathDefine._CRASH_GATE_L,
      //   nameSprite: [SpriteFramePathDefine._DOMINO_NAME_SMALL, SpriteFramePathDefine._DOMINO_NAME_LARGE],
      //   bundleName: "domino",
      //   md5: "",
      //   enableRemote: false,
      //   status: GameState.OFF_LINE,
      //   isVertical: false,
      //   startUpPrefabPathName: "",
      //   startUpHandler: (boardPanel) => DominoStartUp(boardPanel as Node)
      // },
      // {
      //   gameId: 4,
      //   gameName: "qiuqiu",
      //   gameHost: SKT_HOST.MULTI,
      //   fileNameSmall: SkeletalPathDefine._QIU_QIU_S,
      //   fileNameLarge: SkeletalPathDefine._QIU_QIU_L,
      //   nameSprite: [SpriteFramePathDefine._QIU_QIU_NAME_SMALL, SpriteFramePathDefine._QIU_QIU_NAME_LARGE],
      //   bundleName: "qiuqiu",
      //   md5: "",
      //   enableRemote: false,
      //   status: GameState.OFF_LINE,
      //   isVertical: false,
      //   startUpHandler: (boardPanel) => QiuQiuStartUp(boardPanel as Node)
      // },
      // {
      //   gameId: 7,
      //   gameName: "恭喜发财",
      //   gameHost: SKT_HOST.SLOTS,
      //   fileNameSmall: SkeletalPathDefine._GXFC_GATE_S,
      //   fileNameLarge: SkeletalPathDefine._GXFC_GATE_L,
      //   nameSprite: [SpriteFramePathDefine._GXFC_NAME_SMALL, SpriteFramePathDefine._GXFC_NAME_LARGE],
      //   bundleName: "gxfcV2",
      //   md5: "bf1c3",
      //   enableRemote: false,
      //   status: GameState.OFF_LINE,
      //   isVertical: false,
      //   startUpHandler: (boardPanel) => GxfcV2StartUp(boardPanel as Node)
      // },
      // {
      //   gameId: 8,
      //   gameName: "埃及",
      //   gameHost: SKT_HOST.SLOTS,
      //   fileNameSmall: SkeletalPathDefine._EGYPT_GATE_S,
      //   fileNameLarge: SkeletalPathDefine._EGYPT_GATE_L,
      //   nameSprite: [SpriteFramePathDefine._EGYPT_NAME_SMALL, SpriteFramePathDefine._EGYPT_NAME_LARGE],
      //   bundleName: "egyptV2",
      //   md5: "12e85",
      //   enableRemote: false,
      //   status: GameState.OFF_LINE,
      //   isVertical: false,
      //   startUpHandler: (boardPanel) => Egypt2StartUp(boardPanel as Node)
      // },
      // {
      //   gameId: 9,
      //   gameName: "追龙",
      //   gameHost: SKT_HOST.SLOTS,
      //   fileNameSmall: SkeletalPathDefine._LONG_RK_GATE_S,
      //   fileNameLarge: SkeletalPathDefine._LONG_RK_GATE_L,
      //   nameSprite: [SpriteFramePathDefine._LONG_RK_NAME_SMALL, SpriteFramePathDefine._LONG_RK_NAME_LARGE],
      //   bundleName: "dragonV2",
      //   md5: "beb70",
      //   enableRemote: false,
      //   status: GameState.OFF_LINE,
      //   isVertical: false,
      //   startUpHandler: (boardPanel) => dragonV2_StartUp(boardPanel as Node)
      // },
      // {
      //   gameId: 16,
      //   gameName: "BandarQiuQiu",
      //   gameHost: SKT_HOST.MULTI,
      //   fileNameSmall: SkeletalPathDefine._BANDARQIUQIU_S,
      //   fileNameLarge: SkeletalPathDefine._BANDARQIUQIU_L,
      //   nameSprite: [SpriteFramePathDefine._BANDARQIUQIU_SMALL, SpriteFramePathDefine._BANDARQIUQIU_LARGE],
      //   bundleName: "bandar-qiuqiu",
      //   md5: "",
      //   enableRemote: false,
      //   status: GameState.OFF_LINE,
      //   isVertical: false,
      //   startUpHandler: (boardPanel) => BandarQiuQiuStartUp(boardPanel as Node)
      // },
      // {
      //   gameId: 18,
      //   gameName: "DFDC",
      //   gameHost: SKT_HOST.SLOTS,
      //   fileNameSmall: SkeletalPathDefine._DFDC_S,
      //   fileNameLarge: SkeletalPathDefine._DFDC_L,
      //   nameSprite: [SpriteFramePathDefine._DFDC_SMALL, SpriteFramePathDefine._DFDC_LARGE],
      //   bundleName: "dfdc",
      //   md5: "",
      //   enableRemote: false,
      //   status: GameState.OFF_LINE,
      //   isVertical: false,
      //   isDepend: true,
      //   startUpHandler: (boardPanel) => DFDCStartUp(boardPanel as Node)
      // },
      // {
      //   gameId: 19,
      //   gameName: "RUMMY",
      //   gameHost: SKT_HOST.BATTLE,
      //   fileNameSmall: SkeletalPathDefine._RUMMY_S,
      //   fileNameLarge: SkeletalPathDefine._RUMMY_L,
      //   nameSprite: [SpriteFramePathDefine._RUMMY_SMALL, SpriteFramePathDefine._RUMMY_LARGE],
      //   bundleName: "rummy",
      //   md5: "",
      //   enableRemote: false,
      //   status: GameState.OFF_LINE,
      //   isVertical: false,
      //   startUpHandler: (boardPanel) => RummyStartUp(boardPanel as Node)
      // },
      // {
      //   gameId: 20,
      //   gameName: "FortuneMouse",   //没做
      //   gameHost: SKT_HOST.SLOTS,
      //   fileNameSmall: SkeletalPathDefine._FORTUNET_TIGER_S,
      //   fileNameLarge: SkeletalPathDefine._FORTUNET_TIGER_L,
      //   nameSprite: [SpriteFramePathDefine._FORTUNET_TIGER_SMALL, SpriteFramePathDefine._FORTUNET_TIGER_LARGE],
      //   bundleName: "fortuneMouse",
      //   md5: "",
      //   enableRemote: false,
      //   status: GameState.OFF_LINE,
      //   isDepend: true,
      //   isVertical: true,
      //   startUpHandler: (boardPanel) => { }
      // },
      // {
      //   gameId: 21,
      //   gameName: "FortuneTiger",
      //   gameHost: SKT_HOST.SLOTS,
      //   fileNameSmall: SkeletalPathDefine._FORTUNET_TIGER_S,
      //   fileNameLarge: SkeletalPathDefine._FORTUNET_TIGER_L,
      //   nameSprite: [SpriteFramePathDefine._FORTUNET_TIGER_SMALL, SpriteFramePathDefine._FORTUNET_TIGER_LARGE],
      //   bundleName: "fortuneTiger",
      //   md5: "",
      //   enableRemote: false,
      //   status: GameState.OFF_LINE,
      //   isDepend: true,
      //   isVertical: true,
      //   startUpHandler: (boardPanel) => { }
      // },

      // {
      //   gameId: 23,
      //   gameName: "Ocean",
      //   gameHost: SKT_HOST.SLOTS,
      //   fileNameSmall: SkeletalPathDefine._DOMINO_GATE_S, // Placeholder
      //   fileNameLarge: SkeletalPathDefine._DOMINO_GATE_L, // Placeholder
      //   nameSprite: [SpriteFramePathDefine._MONEY_COMING_SMALL, SpriteFramePathDefine._MONEY_COMING_LARGE], // Placeholder
      //   bundleName: "ocean",
      //   scriptBundleName: "oceanScript",
      //   md5: "",
      //   enableRemote: false,
      //   status: GameState.WORKING,
      //   isVertical: false,
      //   startUpHandler: (boardPanel) => {
      //     return import('../subGame/ocean/Ocean_StartUp').then(module => {
      //       return module.default(boardPanel as Node)
      //     })
      //   }
      // }
      ]);

      /** 大厅的游戏入口排列信息 */
      const subGameGateQueue = exports('subGameGateQueue', [{
        typeName: SubGameType.All,
        toggleName: "all",
        queue: [
          // 调整成自动配置，这里不赋值了
          // [6], [8, 7], [10, 9], [3, 0], [12], [11, 5]
        ]
      }, {
        typeName: SubGameType.Domino,
        toggleName: "domino",
        queue: [
          // 调整成自动配置，这里不赋值了
        ]
      }, {
        typeName: SubGameType.Slot,
        toggleName: "slots",
        queue: [
          // 调整成自动配置，这里不赋值了
          // [6], [8, 7], [10, 9], [3, 0]
        ]
      }, {
        typeName: SubGameType.Other,
        toggleName: "other",
        queue: [
          // 调整成自动配置，这里不赋值了
          // [12], [11, 5]
        ]
      }]);
      const vipMap = exports('vipMap', [[1, 1], [2, 9999], [3, 10000], [4, 30000], [5, 20000], [6, 30000], [7, 50000], [8, 50000], [9, 100000], [10, 200000], [11, 300000], [12, 200000], [13, 500000], [14, 500000], [15, 500000], [16, 500000], [17, 500000], [18, 500000], [19, 500000], [20, 500000], [21, 1000000], [22, 2000000], [23, 2000000], [24, 5000000], [25, 10000000]]);
      const levelMap = exports('levelMap', [[1, 5000], [2, 10000], [3, 20000], [4, 50000], [5, 80000], [6, 100000], [7, 200000], [8, 500000], [9, 1000000], [10, 5000000], [11, 5500000], [12, 6000000], [13, 6500000], [14, 7000000], [15, 7500000], [16, 8000000], [17, 8500000], [18, 9000000], [19, 9500000], [20, 10000000], [21, 10500000], [22, 11000000], [23, 11500000], [24, 12000000], [25, 12500000], [26, 13000000], [27, 13500000], [28, 14000000], [29, 14500000], [30, 15000000], [31, 15500000], [32, 16000000], [33, 16500000], [34, 17000000], [35, 17500000], [36, 18000000], [37, 18500000], [38, 19000000], [39, 19500000], [40, 20000000], [41, 20500000], [42, 21000000], [43, 21500000], [44, 22000000], [45, 22500000], [46, 23000000], [47, 23500000], [48, 24000000], [49, 24500000], [50, 25000000], [51, 25500000], [52, 26000000], [53, 26500000], [54, 27000000], [55, 27500000], [56, 28000000], [57, 28500000], [58, 29000000], [59, 29500000], [60, 30000000], [61, 30500000], [62, 31000000], [63, 31500000], [64, 32000000], [65, 32500000], [66, 33000000], [67, 33500000], [68, 34000000], [69, 34500000], [70, 35000000], [71, 35500000], [72, 36000000], [73, 36500000], [74, 37000000], [75, 37500000], [76, 38000000], [77, 38500000], [78, 39000000], [79, 39500000], [80, 40000000], [81, 40500000], [82, 41000000], [83, 41500000], [84, 42000000], [85, 42500000], [86, 43000000], [87, 43500000], [88, 44000000], [89, 44500000], [90, 45000000], [91, 45500000], [92, 46000000], [93, 46500000], [94, 47000000], [95, 47500000], [96, 48000000], [97, 48500000], [98, 49000000], [99, 49500000], [100, 50000000]]);
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/copyToClipboard.ts", ['cc'], function (exports) {
  var cclegacy;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }],
    execute: function () {
      cclegacy._RF.push({}, "9f503w5AyBG1ZLIlR60jCQ6", "copyToClipboard", undefined);
      var copyToClipboard = exports('default', (str, cb) => {
        var input = str + '';
        const el = document.createElement('textarea');
        el.value = input;
        el.setAttribute('readonly', '');
        el.style.position = 'absolute';
        el.style.left = '-9999px';
        el.style.fontSize = '12pt'; // Prevent zooming on iOS

        const selection = getSelection();
        var originalRange = null;
        if (selection.rangeCount > 0) {
          originalRange = selection.getRangeAt(0);
        }
        document.body.appendChild(el);
        el.select();
        el.selectionStart = 0;
        el.selectionEnd = input.length;
        var success = false;
        try {
          success = document.execCommand('copy');
        } catch (err) {}
        document.body.removeChild(el);
        if (originalRange) {
          selection.removeAllRanges();
          selection.addRange(originalRange);
        }
        cb && cb(success);
        if (success) {
          console.log("复制成功");
        } else {
          console.log("复制失败");
        }
        return success;
      });
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/CountDowner.ts", ['cc'], function (exports) {
  var cclegacy;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }],
    execute: function () {
      cclegacy._RF.push({}, "fbe24H9NcROVbY92yrVo2iZ", "CountDowner", undefined);
      /**倒计时组件 */
      class CountDowner {
        constructor(time, render) {
          this.countDown = void 0;
          this.countDownBackUp = void 0;
          this.render = () => {};
          this.isRunning = false;
          this.countDown = time;
          this.countDownBackUp = time;
          this.render = render;
        }
        goOn(render) {
          this.render = render;
          this.render(this.isRunning, this.countDown);
          // this.render.call(context, this.countDown)
        }

        begin() {
          if (this.isRunning) return;
          if (this.countDown) {
            this.isRunning = true;
            const count = () => {
              window.setTimeout(() => {
                this.countDown -= 1;
                if (this.countDown > 0) {
                  count();
                } else {
                  this.isRunning = false;
                  this.countDown = this.countDownBackUp;
                }
                this.render(this.isRunning, this.countDown);
              }, 1000);
            };
            count();
          }
          this.render(this.isRunning, this.countDown);
        }
      }
      exports('CountDowner', CountDowner);
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/CountdownTool.ts", ['cc'], function (exports) {
  var cclegacy;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }],
    execute: function () {
      cclegacy._RF.push({}, "4143cs3G4VGz7m5ucXhCDIg", "CountdownTool", undefined);
      /**
       * 倒计时工具
       */
      class CountdownTool {
        constructor(update) {
          this.t = -1;
          this.countdown = 0;
          this.isStart = false;
          this.update = void 0;
          this.update = update;
        }
        setCountdown(countdown) {
          this.countdown = countdown;
        }
        getCountdown() {
          return this.countdown;
        }
        getIsStart() {
          return this.isStart;
        }
        start(countdown) {
          this.countdown = countdown;
          this.stop();
          if (this.countdown > 0) {
            this.isStart = true;
            this.update(this.countdown);
            this.t = window.setInterval(() => {
              this.update(--this.countdown);
              if (this.countdown <= 0) {
                this.stop();
              }
            }, 1000);
          } else {
            this.update(this.countdown);
          }
        }
        stop() {
          this.isStart = false;
          window.clearInterval(this.t);
        }
      }
      exports('default', CountdownTool);
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/counter.ts", ['cc', './counter2.ts', './index.mjs_cjs=&original=.js', './index.js'], function (exports) {
  var cclegacy, ActionTypes, _cjsExports;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      ActionTypes = module.ActionTypes;
    }, null, function (module) {
      _cjsExports = module.default;
    }],
    execute: function () {
      cclegacy._RF.push({}, "44e86nZjF5AhIf07sIEP6Ww", "counter", undefined);
      const initState = {
        size: 12,
        color: "#fcfcfc"
      };
      var counterReducer = exports('default', _cjsExports.createReducer({
        [ActionTypes.CHANGE_SIZE]: (state, payload) => ({
          ...state,
          size: payload.size
        }),
        [ActionTypes.CHANGE_COLOR]: (state, payload) => {
          return {
            ...state,
            color: payload.color
          };
        }
      }, initState));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/counter2.ts", ['cc', './index.mjs_cjs=&original=.js', './index.js'], function (exports) {
  var cclegacy, _cjsExports;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, null, function (module) {
      _cjsExports = module.default;
    }],
    execute: function () {
      cclegacy._RF.push({}, "5a852Kidj9OO4U7Wdn8PtnU", "counter", undefined);
      /**必须大写，不然redux-act这货要自动加序列号 */
      let ActionTypes = exports('ActionTypes', /*#__PURE__*/function (ActionTypes) {
        ActionTypes["CHANGE_SIZE"] = "CHANGE_SIZE";
        ActionTypes["CHANGE_COLOR"] = "CHANGE_COLOR";
        return ActionTypes;
      }({}));

      /**定义action的payLoad类型 */

      const colorChangeAction = exports('colorChangeAction', _cjsExports.createAction(ActionTypes.CHANGE_COLOR, color => {
        return {
          color
        };
      }));
      const sizeChangeAction = exports('sizeChangeAction', _cjsExports.createAction(ActionTypes.CHANGE_SIZE, size => {
        return {
          size
        };
      }));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Counter3.ts", ['cc', './BaseComponent.ts'], function (exports) {
  var cclegacy, Label, color, Node, _decorator, BaseComponent;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      Label = module.Label;
      color = module.color;
      Node = module.Node;
      _decorator = module._decorator;
    }, function (module) {
      BaseComponent = module.BaseComponent;
    }],
    execute: function () {
      var _dec, _class;
      cclegacy._RF.push({}, "2621clP+TNIC7Lldma/MHkI", "Counter", undefined);
      const {
        ccclass,
        property
      } = _decorator;
      let Counter = exports('Counter', (_dec = ccclass('Counter'), _dec(_class = class Counter extends BaseComponent {
        constructor() {
          super();
          this.propertyNode = {
            /**运算显示值 */
            props_value: null,
            /**左边按钮 */
            props_leftBtu: null,
            /**右边按钮 */
            props_rightBtu: null,
            /**因子显示 */
            props_factor: null
          };
          this.props = {
            color: "#cccccc",
            size: 12
          };
          this.events = {
            onChange: e => {}
          };
        }
        initState() {
          return {
            count: 0,
            factor: 1
          };
        }
        useProps(key, value) {
          /**传入的props变更触发的函数 */
          // console.log(key, "change", value.cur)
          if (key === "color") {
            this.propertyNode.props_factor.getComponent(Label).color = color().fromHEX(this.props.color);
          }
          if (key === "size") {
            this.propertyNode.props_factor.getComponent(Label).fontSize = this.props.size;
          }
        }
        bindEvent() {
          this.propertyNode.props_leftBtu.on(Node.EventType.TOUCH_START, () => {
            this.setState({
              count: this.state.count - this.state.factor
            });
          });
          this.propertyNode.props_rightBtu.on(Node.EventType.TOUCH_START, () => {
            this.setState({
              count: this.state.count + this.state.factor
            });
          });
          this.propertyNode.props_factor.on(Node.EventType.TOUCH_START, () => {
            this.setState({
              factor: this.state.factor + 1
            });
          });
        }
        bindUI() {
          this.useState((key, {
            pre,
            cur
          }) => {
            this.propertyNode.props_value.getComponent(Label).string = cur;
            this.events.onChange(cur);
          }, ["count"]);
          this.useState((key, {
            pre,
            cur
          }) => {
            this.propertyNode.props_factor.getComponent(Label).string = `因子：${cur}`;
          }, ["factor"]);
        }
        start() {}
        update(deltaTime) {}
      }) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/CounterViewModel.ts", ['cc', './ViewModel.ts', './counter2.ts'], function (exports) {
  var cclegacy, ViewModel, colorChangeAction, sizeChangeAction;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      ViewModel = module.default;
    }, function (module) {
      colorChangeAction = module.colorChangeAction;
      sizeChangeAction = module.sizeChangeAction;
    }],
    execute: function () {
      cclegacy._RF.push({}, "2f8dcYoMKpNG6HsL/IeUFbI", "CounterViewModel", undefined);
      // export type PropsType = {
      //   onChange?: (e: any) => void,
      //   color: string,
      //   size: number
      // }
      class CounterViewModel extends ViewModel {
        constructor() {
          super('Counter');
        }
        begin() {}
        connect() {
          this.inject({}, state => {
            return {
              color: state.counter.color,
              size: state.counter.size
            };
          });
          window.setTimeout(() => {
            this.dispatch(colorChangeAction("#FF0200"));
            this.dispatch(sizeChangeAction(40));
            // this.dispatch({ type: '', payload: {} })
            // console.log(colorChangeAction("#c0c0c0"))
            // this.dispatch({ type: ActionTypes.CHANGE_COLOR, payload: { color: "#FF0200" } })
          }, 2000);
          return this;
        }
      }
      exports('default', CounterViewModel);
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/DailyTaskViewModel.ts", ['cc', './ViewModel.ts'], function (exports) {
  var cclegacy, ViewModel;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      ViewModel = module.default;
    }],
    execute: function () {
      cclegacy._RF.push({}, "b3b63jdNR1C8bQeVScTEs9u", "DailyTaskViewModel", undefined);
      class DailyTaskViewModel extends ViewModel {
        constructor() {
          super('Hall_DailyTask');
        }
        begin() {}
        connect() {
          this.inject({}, state => {
            return {};
          });
          return this;
        }
      }
      exports('default', DailyTaskViewModel);
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/DownloadManagerGame.ts", ['cc', './hallConfig.ts'], function (exports) {
  var cclegacy, native, sys, config;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      native = module.native;
      sys = module.sys;
    }, function (module) {
      config = module.config;
    }],
    execute: function () {
      cclegacy._RF.push({}, "1b7c98XJwtADIJN1aWkkOhx", "DownloadManagerGame", undefined);
      class DownloadManagerGame {
        constructor() {
          this.jsbAssetManager = void 0;
          this.isDownloading = void 0;
          this.isCanRetry = true;
          this.currentModule = null;
          this.nativeManifest = null;
          this.needUpdateCallback = void 0;
          this.progressCallback = void 0;
          this.compeleteCallback = void 0;
          this.failCallback = void 0;
          this.downloadList = null;
          this.downloadIndex = 0;
        }
        CompareVersion(versionA, versionB) {
          var vA = versionA.split('.');
          var vB = versionB.split('.');
          console.log("versionA=" + versionA + "  versionB=" + versionB);
          for (var i = 0; i < vA.length; ++i) {
            var a = parseInt(vA[i]);
            var b = parseInt(vB[i]) || 0;
            if (a === b) {
              continue;
            } else {
              return a - b;
            }
          }
          if (vB.length > vA.length) {
            return -1;
          } else {
            return 0;
          }
        }
        SetVerifyCallback(path, asset) {
          if (!native.fileUtils.isFileExist(path)) {
            return true;
          }
          var data = native.fileUtils.getDataFromFile(path);
          if (data) {
            data = data.slice(0, 1024);
            //var curMD5 = MD5(data); 
            //console.log(path, asset.md5, curMD5)
          }

          return true;
        }
        GetModulePath() {
          return native.fileUtils.getWritablePath() + "remote/" + this.currentModule + "/";
        }
        GetModuleManifestUrl() {
          let path = this.GetModulePath() + "/project.manifest";
          console.log("   GetModuleManifestUrl :", path);
          if (native.fileUtils.isFileExist(path)) {
            return path;
          }
          console.log("-------- GetModuleManifestUrl :", "assets/" + this.currentModule + "/project.manifest");
          return "assets/" + this.currentModule + "/project.manifest";
        }
        MakeDefaultManifest() {
          //let moduleRoot = config.gameBundleUrl + this.currentModule + "/";
          let moduleRoot = `${config.gameBundleUrl}/subGame/compressed/${this.currentModule}/`;
          if (sys.os === sys.OS.IOS || sys.os === sys.OS.OSX) {
            moduleRoot = `${config.gameBundleUrl}/iosSubGame/compressed/${this.currentModule}/`;
          }
          let manifestString = JSON.stringify({
            version: '0.0.0',
            packageUrl: moduleRoot,
            remoteVersionUrl: moduleRoot + "version.manifest",
            remoteManifestUrl: moduleRoot + "project.manifest",
            assets: {},
            searchPaths: [],
            compressed: true
          });
          console.log("热跟新数据" + manifestString);
          return manifestString;
        }
        DownloadMultiple(modules, progressCallback, compeleteCallback, moduleCallback = null, failCallBack) {
          this.failCallback = failCallBack;
          if (this.downloadList && this.downloadList.length > 0) {
            this.failCallback && this.failCallback();
            console.log("已经有队列存在");
            return;
          } else {
            this.downloadList = modules;
          }
          this.BatchDownload((downloaded, total) => {
            console.log("@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@", downloaded, total, this.downloadList[this.downloadIndex]);
            progressCallback && progressCallback(downloaded, total, this.downloadIndex, this.downloadList[this.downloadIndex]);
          }, () => {
            console.log("compeleteCallback");
            this.downloadIndex = 0;
            this.downloadList = [];
            compeleteCallback && compeleteCallback(this.downloadList[this.downloadIndex]);
          }, moduleCallback);
        }
        BatchDownload(progressCallback, compeleteCallback, moduleCallback) {
          let bundle = this.downloadList[this.downloadIndex];
          if (!bundle) {
            compeleteCallback && compeleteCallback();
            return;
          }
          this.Download(bundle, null, (downloaded, total) => {
            console.log("!!!!!!!!!!!!!!!!!", downloaded, total, bundle);
            progressCallback && progressCallback(downloaded, total);
            //Catfish.EventMgr.Dispatch(CatfishEvent.GAME_MODULE_DOWNLOADING, downloaded, total, bundle);
          }, () => {
            if (this.downloadIndex < this.downloadList.length) {
              progressCallback && progressCallback(100, 100);
            }
            ++this.downloadIndex;
            moduleCallback && moduleCallback(bundle);
            //Catfish.EventMgr.Dispatch(CatfishEvent.GAME_MODULE_DOWNLOADED, bundle);
            this.BatchDownload(progressCallback, compeleteCallback, moduleCallback);
          });
        }
        Download(module, needUpdateCallback, progressCallback, compeleteCallback) {
          if (this.currentModule) {
            console.log("一次只能下载一个");
            return;
          }
          this.isDownloading = false;
          this.jsbAssetManager = null;
          if (!this.jsbAssetManager) {
            this.currentModule = module;
            this.needUpdateCallback = needUpdateCallback;
            this.progressCallback = progressCallback;
            this.compeleteCallback = compeleteCallback;
            let storagePath = this.GetModulePath();
            let manifestUrl = this.GetModuleManifestUrl();
            this.jsbAssetManager = new native.AssetsManager(manifestUrl, storagePath, this.CompareVersion.bind(this));
            this.jsbAssetManager.setVerifyCallback(this.SetVerifyCallback.bind(this));
            this.CheckDownload();
          }
        }
        Retry() {
          if (!this.isDownloading && this.isCanRetry) {
            this.isCanRetry = false;
            this.isDownloading = true;
            this.jsbAssetManager.downloadFailedAssets();
          }
        }
        RestartEngine() {
          this.jsbAssetManager.setEventCallback(null);
          // Prepend the manifest's search path
          var searchPaths = native.fileUtils.getSearchPaths();
          var newPaths = this.nativeManifest.getSearchPaths();
          console.log(JSON.stringify(newPaths));
          //Array.prototype.unshift.apply(searchPaths, newPaths);
          this.SetSearchPaths(searchPaths, newPaths);
        }
        SetSearchPaths(searchPaths, newPaths) {
          var res = [];
          var json = {};
          newPaths.push(native.fileUtils.getWritablePath());
          Array.prototype.unshift.apply(res, newPaths);
          for (var i = 0; i < searchPaths.length; i++) {
            if (!json[searchPaths[i]]) {
              res.push(searchPaths[i]);
              json[searchPaths[i]] = 1;
            }
          }
          sys.localStorage.setItem('HotUpdateSearchPaths', JSON.stringify(res));
          native.fileUtils.setSearchPaths(res);
          console.log("lujing -- " + res);
        }
        CheckDownload() {
          if (this.isDownloading) {
            console.log('Checking or updating ...');
            return;
          }
          if (this.jsbAssetManager.getState() === native.AssetsManager.State.UNINITED) {
            console.log("----- CheckDownload  loadLocalManifest");
            let url = this.GetModuleManifestUrl();
            this.jsbAssetManager.loadLocalManifest(url);
          }
          if (!this.jsbAssetManager.getLocalManifest() || !this.jsbAssetManager.getLocalManifest().isLoaded()) {
            console.log('Failed to load local manifest ...');
            var manifest = new native.Manifest(this.MakeDefaultManifest(), this.GetModulePath());
            this.jsbAssetManager.loadLocalManifest(manifest, this.GetModulePath());
          }
          this.nativeManifest = this.jsbAssetManager.getLocalManifest();
          this.jsbAssetManager.setEventCallback(this.CheckDownloadCallback.bind(this));
          this.jsbAssetManager.checkUpdate();
          console.log('checkUpdate');
          this.isDownloading = true;
        }
        CheckDownloadCallback(event) {
          console.log('Code: ' + event.getEventCode());
          let eventCode = event.getEventCode();
          switch (eventCode) {
            case native.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:
              console.log('No local manifest file found, hot update skipped.');
              break;
            case native.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:
            case native.EventAssetsManager.ERROR_PARSE_MANIFEST:
              console.log("Fail to download manifest file, hot update skipped.");
              this.isDownloading = false;
              this.CheckDownload();
              return;
            case native.EventAssetsManager.ALREADY_UP_TO_DATE:
              console.log("Already up to date with the latest remote version.");
              break;
            case native.EventAssetsManager.NEW_VERSION_FOUND:
              if (this.jsbAssetManager.getTotalBytes() == 0) {
                this.isDownloading = false;
                this.jsbAssetManager.setEventCallback(null);
                this.DownloadEnded();
                return;
              }
              this.needUpdateCallback && this.needUpdateCallback();
              console.log('New version found, please try to update. (' + this.jsbAssetManager.getTotalBytes() + ')');
              break;
            default:
              return;
          }
          this.isDownloading = false;
          this.jsbAssetManager.setEventCallback(null);
          if (event.getEventCode() == native.EventAssetsManager.NEW_VERSION_FOUND) {
            this.StartDownload();
          } else {
            this.DownloadEnded();
          }
        }
        StartDownload() {
          if (this.jsbAssetManager && !this.isDownloading) {
            this.jsbAssetManager.setEventCallback(this.DownloadCallback.bind(this));
            if (this.jsbAssetManager.getState() === native.AssetsManager.State.UNINITED) {
              // Resolve md5 url
              var url = this.GetModuleManifestUrl();
              console.log("@@@@@@@@URL_____StartDownload", native.fileUtils.isFileExist(url));
              this.jsbAssetManager.loadLocalManifest(url);
            }
            this.jsbAssetManager.update();
            console.log("StartDownload start  update");
            this.isDownloading = true;
          }
        }
        DownloadCallback(event) {
          var isDownloadEned = false;
          var failed = false;
          let eventCode = event.getEventCode();
          switch (eventCode) {
            case native.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:
              failed = true;
              break;
            case native.EventAssetsManager.UPDATE_PROGRESSION:
              this.progressCallback && this.progressCallback(event.getDownloadedBytes(), event.getTotalBytes());
              break;
            case native.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:
            case native.EventAssetsManager.ERROR_PARSE_MANIFEST:
              console.log('Fail to download manifest file, hot update skipped.');
              this.StartDownload();
              return;
            case native.EventAssetsManager.ALREADY_UP_TO_DATE:
              console.log('Already up to date with the latest remote version.');
              failed = true;
              break;
            case native.EventAssetsManager.UPDATE_FINISHED:
              console.log('Update finished. ' + event.getMessage());
              isDownloadEned = true;
              break;
            case native.EventAssetsManager.UPDATE_FAILED:
              this.isDownloading = false;
              this.isCanRetry = true;
              this.failCallback && this.failCallback('Update failed. ' + event.getMessage());
              break;
            case native.EventAssetsManager.ERROR_UPDATING:
              // 构建完整的下载 URL 用于调试
              let downloadUrl = '';
              let packageUrl = '';
              let assetId = '';
              if (this.nativeManifest) {
                packageUrl = this.nativeManifest.getPackageUrl();
                assetId = event.getAssetId();
                downloadUrl = packageUrl + assetId;
              }
              const errorMsg = 'Asset update error: ' + event.getCURLECode() + " " + assetId + ', ' + event.getMessage() + (downloadUrl ? ', URL: ' + downloadUrl : '');
              console.error('[DownloadManagerGame] ' + errorMsg);
              console.error('[DownloadManagerGame] 详细调试信息:');
              console.error('[DownloadManagerGame] - packageUrl: ' + packageUrl);
              console.error('[DownloadManagerGame] - assetId: ' + assetId);
              console.error('[DownloadManagerGame] - 构建的 URL: ' + downloadUrl);
              console.error('[DownloadManagerGame] - CURL 错误代码: ' + event.getCURLECode());
              console.error('[DownloadManagerGame] - 错误消息: ' + event.getMessage());
              console.error('[DownloadManagerGame] - AssetsManager 状态: ' + (this.jsbAssetManager ? this.jsbAssetManager.getState() : 'null'));
              // CURL 错误代码 -3 可能是 CURLE_URL_MALFORMED 或其他网络错误
              // 如果 URL 是正确的，可能是：1) 网络超时 2) HTTPS 证书问题 3) 服务器拒绝请求 4) 文件大小限制
              this.failCallback && this.failCallback(errorMsg);
              break;
            case native.EventAssetsManager.ERROR_DECOMPRESS:
              console.log(event.getMessage());
              break;
          }
          if (this.isCanRetry) {
            this.Retry();
            return;
          }
          if (failed) {
            this.jsbAssetManager.setEventCallback(null);
            this.isDownloading = false;
            this.compeleteCallback && this.compeleteCallback();
          }
          if (isDownloadEned) {
            this.DownloadEnded();
          }
        }
        DownloadEnded() {
          this.RestartEngine();
          if (this.jsbAssetManager) {
            this.jsbAssetManager.setEventCallback(null);
            this.jsbAssetManager = null;
            delete this.jsbAssetManager;
          }
          this.currentModule = null;
          this.isDownloading = false;
          this.compeleteCallback && this.compeleteCallback();
        }
      }
      exports('DownloadManagerGame', DownloadManagerGame);
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/DropDownBox.ts", ['cc'], function (exports) {
  var cclegacy, Node, Toggle, ScrollView;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      Node = module.Node;
      Toggle = module.Toggle;
      ScrollView = module.ScrollView;
    }],
    execute: function () {
      cclegacy._RF.push({}, "d5a1cyDtLVGBq6+uizZSXk7", "DropDownBox", undefined);
      /**前提条件
       * 1：具有一个带toggle组件的节点
       * 2：具有一个带有scrollView的节点，且content的第一个节点作为选项模板，为一个按钮(按钮Label子节点name=Label)
       * 3：传入一个bgNode的父节点，作为点击自动收起下拉框，要确认冒泡能收到事件
       * 4：数据checkIndex为默认选中节点，为-1则无默认选中值
       * 5：返回值为重渲染函数，传入更新的数据
       */
      const initDropDownBox = exports('default', (data, node, event) => {
        const dataList = [];
        const initView = (list, _chooseInded) => {
          node.scrollView.getComponent(ScrollView).content.children.forEach((item, index) => {
            index >= 1 ? item.destroy() : item.active = false;
          });
          list.forEach((item, index) => {
            const itemNode = event.renderItem(item);
            itemNode.active = true;
            const result = {
              item,
              index,
              itemNode
            };
            dataList.push(result);
            //这里是一个闭包，注意
            itemNode.on(Node.EventType.TOUCH_END, () => {
              event.chooseItem(result);
              dataList.forEach((item2, index2) => event.updateItemNode(item2.itemNode, index2 === index ? true : false));
              node.toggleNode.getComponent(Toggle).isChecked = false;
            });
            node.scrollView.active = false;
            node.scrollView.getComponent(ScrollView).content.addChild(itemNode);
          });
          dataList.forEach((item, index) => event.updateItemNode(item.itemNode, index === _chooseInded ? true : false));
          _chooseInded >= 0 && event.chooseItem(dataList[_chooseInded]);
        };
        initView(data.list, data.checkIndex);
        node.bgNode.on(Node.EventType.TOUCH_END, () => {
          node.toggleNode.getComponent(Toggle).isChecked = false;
        });
        node.toggleNode.on('toggle', () => node.scrollView.active = node.toggleNode.getComponent(Toggle).isChecked, undefined);
        return list => {
          initView(list, -1);
        };
      });

      /*
      使用示例
        const reRender = initDropDownBox({
          list: ['+12', '+13', '+14', '+15', '+86'],
          checkIndex: 1
        }, {
          toggleNode: this.propertyNode.props_togglePhoneAreaNum_pwd,
          scrollView: this.propertyNode.props_ScrollView_areaNum_pwd,
          bgNode: this.node.parent
        }, {
          renderItem: (record) => {
            const templateBtu: Node = instantiate(this.propertyNode.props_ScrollView_areaNum_pwd.getComponent(ScrollView).content.children[0])
            templateBtu.getChildByName("Label").getComponent(Label).string = record
            return templateBtu
          },
          chooseItem: ({ item }) => { 
            this.propertyNode.props_intput_phone_areaNum_pwd.getComponent(EditBox).string = item 
          },
          updateItemNode: (node, isChoose) => {
            node.getChildByName("Label").getComponent(Label).color = isChoose ? Color.RED : Color.BLACK
          }
        })
          ....
        //重新赋值渲染
        reRender([],-1)
        */
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/encryption.ts", ['cc'], function (exports) {
  var cclegacy;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }],
    execute: function () {
      cclegacy._RF.push({}, "2f063UPEPhLCKI7nxnGFFSJ", "encryption", undefined);
      // import CryptoJS from 'crypto-ts'

      // const key = cryptojs.enc.Utf8.parse('6bb4837eb74329105ee4568dda7dc67e')
      // const iv = cryptojs.enc.Utf8.parse("1234123412341234")

      // 十六位十六进制数作为密钥
      // const SECRET_KEY = CryptoJS.enc.Utf8.parse("6bb4837eb74329105ee4568dda7dc67e");
      // 十六位十六进制数作为密钥偏移量
      // const SECRET_IV = CryptoJS.enc.Utf8.parse("1234123412341234");
      var encryption = exports('default', {
        // encode: (data: string) => {
        //   const value = data.toString()
        //   const encrypted = cryptojs.AES.encrypt(value, key, {
        //     iv,
        //     mode: cryptojs.mode.CBC,
        //     padding: cryptojs.pad.PKCS7
        //   });
        //   return encrypted.toString()
        // },
        // decode: (encryptedByteStr: string) => {
        //   const decrypt = cryptojs.AES.decrypt(encryptedByteStr, key, {
        //     iv,
        //     mode: cryptojs.mode.CBC,
        //     padding: cryptojs.pad.PKCS7
        //   });
        //   return decrypt.toString(cryptojs.enc.Utf8)
        // },
        encode: data => {
          // if (typeof data === "object") {
          //   try {
          //     data = JSON.stringify(data);
          //   } catch (error) {
          //     console.log("encrypt error:", error);
          //   }
          // }
          // const dataHex = CryptoJS.enc.Utf8.parse(data);
          // const encrypted = CryptoJS.AES.encrypt(dataHex, SECRET_KEY, {
          //   iv: SECRET_IV,
          //   mode: CryptoJS.mode.CBC,
          //   padding: CryptoJS.pad.PKCS7
          // });
          // return encrypted.ciphertext.toString();
        },
        decode: data => {
          // const encryptedHexStr = CryptoJS.enc.Hex.parse(data);
          // const str = CryptoJS.enc.Hex.stringify(encryptedHexStr);
          // const decrypt = CryptoJS.AES.decrypt(str, SECRET_KEY, {
          //   iv: SECRET_IV,
          //   mode: CryptoJS.mode.CBC,
          //   padding: CryptoJS.pad.PKCS7
          // });
          // const decryptedStr = decrypt.toString(CryptoJS.enc.Utf8);
          // return decryptedStr.toString();
        }
      });
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/equals.ts", ['cc', './utils.ts'], function (exports) {
  var cclegacy, sameValueZeroEqual, hasOwn, getStrictProperties;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      sameValueZeroEqual = module.sameValueZeroEqual;
      hasOwn = module.hasOwn;
      getStrictProperties = module.getStrictProperties;
    }],
    execute: function () {
      exports({
        areArraysEqual: areArraysEqual,
        areDatesEqual: areDatesEqual,
        areMapsEqual: areMapsEqual,
        areObjectsEqual: areObjectsEqual,
        areObjectsEqualStrict: areObjectsEqualStrict,
        arePrimitiveWrappersEqual: arePrimitiveWrappersEqual,
        areRegExpsEqual: areRegExpsEqual,
        areSetsEqual: areSetsEqual,
        areTypedArraysEqual: areTypedArraysEqual
      });
      cclegacy._RF.push({}, "9b0d1mYA4NKzJ+PsZbZoyt7", "equals", undefined);
      const OWNER = '_owner';
      const {
        getOwnPropertyDescriptor,
        keys
      } = Object;

      /**
       * Whether the arrays are equal in value.
       */
      function areArraysEqual(a, b, state) {
        let index = a.length;
        if (b.length !== index) {
          return false;
        }
        while (index-- > 0) {
          if (!state.equals(a[index], b[index], index, index, a, b, state)) {
            return false;
          }
        }
        return true;
      }

      /**
       * Whether the dates passed are equal in value.
       */
      function areDatesEqual(a, b) {
        return sameValueZeroEqual(a.getTime(), b.getTime());
      }

      /**
       * Whether the `Map`s are equal in value.
       */
      function areMapsEqual(a, b, state) {
        if (a.size !== b.size) {
          return false;
        }
        const matchedIndices = {};
        const aIterable = a.entries();
        let index = 0;
        let aResult;
        let bResult;
        while (aResult = aIterable.next()) {
          if (aResult.done) {
            break;
          }
          const bIterable = b.entries();
          let hasMatch = false;
          let matchIndex = 0;
          while (bResult = bIterable.next()) {
            if (bResult.done) {
              break;
            }
            const [aKey, aValue] = aResult.value;
            const [bKey, bValue] = bResult.value;
            if (!hasMatch && !matchedIndices[matchIndex] && (hasMatch = state.equals(aKey, bKey, index, matchIndex, a, b, state) && state.equals(aValue, bValue, aKey, bKey, a, b, state))) {
              matchedIndices[matchIndex] = true;
            }
            matchIndex++;
          }
          if (!hasMatch) {
            return false;
          }
          index++;
        }
        return true;
      }

      /**
       * Whether the objects are equal in value.
       */
      function areObjectsEqual(a, b, state) {
        const properties = keys(a);
        let index = properties.length;
        if (keys(b).length !== index) {
          return false;
        }
        let property;

        // Decrementing `while` showed faster results than either incrementing or
        // decrementing `for` loop and than an incrementing `while` loop. Declarative
        // methods like `some` / `every` were not used to avoid incurring the garbage
        // cost of anonymous callbacks.
        while (index-- > 0) {
          property = properties[index];
          if (property === OWNER && (a.$$typeof || b.$$typeof) && a.$$typeof !== b.$$typeof) {
            return false;
          }
          if (!hasOwn(b, property) || !state.equals(a[property], b[property], property, property, a, b, state)) {
            return false;
          }
        }
        return true;
      }

      /**
       * Whether the objects are equal in value with strict property checking.
       */
      function areObjectsEqualStrict(a, b, state) {
        const properties = getStrictProperties(a);
        let index = properties.length;
        if (getStrictProperties(b).length !== index) {
          return false;
        }
        let property;
        let descriptorA;
        let descriptorB;

        // Decrementing `while` showed faster results than either incrementing or
        // decrementing `for` loop and than an incrementing `while` loop. Declarative
        // methods like `some` / `every` were not used to avoid incurring the garbage
        // cost of anonymous callbacks.
        while (index-- > 0) {
          property = properties[index];
          if (property === OWNER && (a.$$typeof || b.$$typeof) && a.$$typeof !== b.$$typeof) {
            return false;
          }
          if (!hasOwn(b, property)) {
            return false;
          }
          if (!state.equals(a[property], b[property], property, property, a, b, state)) {
            return false;
          }
          descriptorA = getOwnPropertyDescriptor(a, property);
          descriptorB = getOwnPropertyDescriptor(b, property);
          if ((descriptorA || descriptorB) && (!descriptorA || !descriptorB || descriptorA.configurable !== descriptorB.configurable || descriptorA.enumerable !== descriptorB.enumerable || descriptorA.writable !== descriptorB.writable)) {
            return false;
          }
        }
        return true;
      }

      /**
       * Whether the primitive wrappers passed are equal in value.
       */
      function arePrimitiveWrappersEqual(a, b) {
        return sameValueZeroEqual(a.valueOf(), b.valueOf());
      }

      /**
       * Whether the regexps passed are equal in value.
       */
      function areRegExpsEqual(a, b) {
        return a.source === b.source && a.flags === b.flags;
      }

      /**
       * Whether the `Set`s are equal in value.
       */
      function areSetsEqual(a, b, state) {
        if (a.size !== b.size) {
          return false;
        }
        const matchedIndices = {};
        const aIterable = a.values();
        let aResult;
        let bResult;
        while (aResult = aIterable.next()) {
          if (aResult.done) {
            break;
          }
          const bIterable = b.values();
          let hasMatch = false;
          let matchIndex = 0;
          while (bResult = bIterable.next()) {
            if (bResult.done) {
              break;
            }
            if (!hasMatch && !matchedIndices[matchIndex] && (hasMatch = state.equals(aResult.value, bResult.value, aResult.value, bResult.value, a, b, state))) {
              matchedIndices[matchIndex] = true;
            }
            matchIndex++;
          }
          if (!hasMatch) {
            return false;
          }
        }
        return true;
      }

      /**
       * Whether the TypedArray instances are equal in value.
       */
      function areTypedArraysEqual(a, b) {
        let index = a.length;
        if (b.length !== index) {
          return false;
        }
        while (index-- > 0) {
          if (a[index] !== b[index]) {
            return false;
          }
        }
        return true;
      }
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/extend.ts", ['cc'], function () {
  var cclegacy, Node;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      Node = module.Node;
    }],
    execute: function () {
      cclegacy._RF.push({}, "c971ex27QRKXbDBO40l4OxN", "extend", undefined);
      Number.prototype.formatAmountWithCommas = function (fractionDigits = 2) {
        const amount = this;
        // const parts = amount.toFixed(2).split(".");
        const parts = (amount + '').split(".");
        const integerPart = parts[0];
        // const decimalPart = parts[1]
        const decimalPart = parts[1] ? "." + (parts[1].length > 2 ? parts[1].substring(0, fractionDigits) : parts[1]) : parts[1];
        const formattedIntegerPart = integerPart.replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        const formattedAmount = +decimalPart === 0 ? formattedIntegerPart : formattedIntegerPart + (decimalPart || '');
        return formattedAmount;
      };
      Number.prototype.toFixedFix = function (fractionDigits = 2) {
        const number = this;
        try {
          const parts = (number + '').split(".");
          const integerPart = parts[0];
          const decimalPart = parts[1] ? "." + (parts[1].length > 2 ? parts[1].substring(0, fractionDigits) : parts[1]) : parts[1];
          const formattedAmount = +decimalPart === 0 ? integerPart : integerPart + (decimalPart || '');
          return +formattedAmount;
        } catch (e) {
          console.trace(e);
          return number;
        }
      };
      Number.prototype.formatAmountWithLetter = function () {
        let num = this;
        if (!num) return "0";
        const units = ['', 'K', 'M'];
        let unitIndex = 0;

        // 将数字按照1000为基数迭代缩小
        while (num >= 1000 && unitIndex < units.length - 1) {
          num /= 1000;
          unitIndex++;
        }
        if (Number.isInteger(num)) {
          return num + units[unitIndex];
        } else {
          // 使用toFixed保留一位小数，并转换成字符串格式
          return Number(num.toFixedFix()) + units[unitIndex];
        }
      };
      Number.prototype.formatAmountWithLetter2 = function (isInteger) {
        const amount = this;
        const parts = amount.toFixed(0).split(".");
        let inputString = parts[0].replace(/\B(?=(\d{3})+(?!\d))/g, ",").replace(/,(?=[^,]*$)/g, 'K').replace(/,(?=[^,]*$)/, "M").replace(/,(?=[^,]*$)/, 'B');
        const sp = inputString.split('K');
        if (!isInteger && inputString.indexOf('K') !== -1) {
          return sp[0] + "K";
        }
        if (inputString.indexOf('K') !== -1) {
          return sp[0] + "K" + (+sp[1] ? sp[1] : '');
        }
        return inputString;
      };
      String.prototype.format = function (...value) {
        if (value.length == 0) return this;
        let str = this;
        for (var i = 0; i < value.length; i++) {
          var re = new RegExp('\\{' + i + '\\}', 'gm');
          str = this.replace(re, value[i]);
        }
        return str;
      };
      Node.prototype.getDeepChildByName = function (nodeName) {
        const l = this.children.length;
        for (let i = 0; i < l; i++) {
          if (this.children[i].name === nodeName) {
            return this.children[i];
          } else {
            if (this.children[i].children.length) {
              const result = this.children[i].getDeepChildByName(nodeName);
              if (result) {
                return result;
              }
            } else {
              continue;
            }
          }
        }
      };

      //除法函数，用来得到精确的除法结果
      Number.prototype.div = function (arg1, arg2) {
        var t1 = 0,
          t2 = 0,
          r1,
          r2;
        try {
          t1 = arg1.toString().split(".")[1].length;
        } catch (e) {}
        try {
          t2 = arg2.toString().split(".")[1].length;
        } catch (e) {}
        r1 = Number(arg1.toString().replace(".", ""));
        r2 = Number(arg2.toString().replace(".", ""));
        return r1 / r2 * Math.pow(10, t2 - t1);
      };

      //乘法函数，用来得到精确的乘法结果
      Number.prototype.mul = function (arg1, arg2) {
        var m = 0,
          s1 = arg1.toString(),
          s2 = arg2.toString();
        try {
          m += s1.split(".")[1].length;
        } catch (e) {}
        try {
          m += s2.split(".")[1].length;
        } catch (e) {}
        return Number(s1.replace(".", "")) * Number(s2.replace(".", "")) / Math.pow(10, m);
      };

      //加法函数，用来得到精确的加法结果
      Number.prototype.add = function (arg1, arg2) {
        var r1, r2, m;
        try {
          r1 = arg1.toString().split(".")[1].length;
        } catch (e) {
          r1 = 0;
        }
        try {
          r2 = arg2.toString().split(".")[1].length;
        } catch (e) {
          r2 = 0;
        }
        m = Math.pow(10, Math.max(r1, r2));
        return (arg1 * m + arg2 * m) / m;
      };

      //减法函数，用来得到精确的减法结果
      Number.prototype.sub = function (arg1, arg2) {
        var r1, r2, m, n;
        try {
          r1 = arg1.toString().split(".")[1].length;
        } catch (e) {
          r1 = 0;
        }
        try {
          r2 = arg2.toString().split(".")[1].length;
        } catch (e) {
          r2 = 0;
        }
        m = Math.pow(10, Math.max(r1, r2));
        //last modify by deeka
        //动态控制精度长度
        n = r1 >= r2 ? r1 : r2;
        return Number(((arg1 * m - arg2 * m) / m).toFixed(n));
      };
      window.addEventListener("unhandledRejectedPromise", function browserRejectionHandler(event) {
        console.log(event);
        event && event.preventDefault();
      });
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/fastCopy.ts", ['cc'], function (exports) {
  var cclegacy;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }],
    execute: function () {
      exports('createCopier', createCopier);
      cclegacy._RF.push({}, "47718e7/7dHnq0GQs06gh0m", "fastCopy", undefined);
      var toStringFunction = Function.prototype.toString;
      var create = Object.create;
      var SUPPORTS_SYMBOL = typeof Object.getOwnPropertySymbols === 'function';
      var copyObjectLoose = SUPPORTS_SYMBOL ? copyObjectLooseModern : copyObjectLooseLegacy;
      function getRegExpFlagsModern(regExp) {
        return regExp.flags;
      }
      function getRegExpFlagsLegacy(regExp) {
        var flags = '';
        if (regExp.global) {
          flags += 'g';
        }
        if (regExp.ignoreCase) {
          flags += 'i';
        }
        if (regExp.multiline) {
          flags += 'm';
        }
        if (regExp.unicode) {
          flags += 'u';
        }
        if (regExp.sticky) {
          flags += 'y';
        }
        return flags;
      }
      var getRegExpFlags = /test/g.flags === 'g' ? getRegExpFlagsModern : getRegExpFlagsLegacy;
      var toStringObject = Object.prototype.toString;
      function getTagLegacy(value) {
        var type = toStringObject.call(value);
        return type.substring(8, type.length - 1);
      }
      function getTagModern(value) {
        return value[Symbol.toStringTag] || getTagLegacy(value);
      }
      var LegacyCache = /** @class */function () {
        function LegacyCache() {
          this._keys = [];
          this._values = [];
        }
        LegacyCache.prototype.has = function (key) {
          return !!~this._keys.indexOf(key);
        };
        LegacyCache.prototype.get = function (key) {
          return this._values[this._keys.indexOf(key)];
        };
        LegacyCache.prototype.set = function (key, value) {
          this._keys.push(key);
          this._values.push(value);
        };
        return LegacyCache;
      }();
      function createCacheLegacy() {
        return new LegacyCache();
      }
      function createCacheModern() {
        return new WeakMap();
      }
      var getTag = typeof Symbol !== 'undefined' ? getTagModern : getTagLegacy;
      var createCache = typeof WeakMap !== 'undefined' ? createCacheModern : createCacheLegacy;
      var DEFAULT_LOOSE_OPTIONS = {
        array: copyArrayLoose,
        arrayBuffer: copyArrayBuffer,
        blob: copyBlob,
        dataView: copyDataView,
        date: copyDate,
        error: copySelf,
        map: copyMapLoose,
        object: copyObjectLoose,
        regExp: copyRegExp,
        set: copySetLoose
      };
      function copyRegExp(regExp, state) {
        var clone = new state.Constructor(regExp.source, getRegExpFlags(regExp));
        clone.lastIndex = regExp.lastIndex;
        return clone;
      }
      function copySetLoose(set, state) {
        var clone = new state.Constructor();
        // set in the cache immediately to be able to reuse the object recursively
        state.cache.set(set, clone);
        set.forEach(function (value) {
          clone.add(state.copier(value, state));
        });
        return clone;
      }
      function copyObjectLooseLegacy(object, state) {
        var clone = getCleanClone(state.prototype);
        // set in the cache immediately to be able to reuse the object recursively
        state.cache.set(object, clone);
        for (var key in object) {
          if (Object.hasOwnProperty.call(object, key)) {
            clone[key] = state.copier(object[key], state);
          }
        }
        return clone;
      }
      function copyObjectLooseModern(object, state) {
        var clone = getCleanClone(state.prototype);
        // set in the cache immediately to be able to reuse the object recursively
        state.cache.set(object, clone);
        for (var key in object) {
          if (Object.hasOwnProperty.call(object, key)) {
            clone[key] = state.copier(object[key], state);
          }
        }
        var symbols = Object.getOwnPropertySymbols(object);
        for (var index = 0, length_3 = symbols.length, symbol = void 0; index < length_3; ++index) {
          symbol = symbols[index];
          if (Object.propertyIsEnumerable.call(object, symbol)) {
            clone[symbol] = state.copier(object[symbol], state);
          }
        }
        return clone;
      }
      function getCleanClone(prototype) {
        if (!prototype) {
          return create(null);
        }
        var Constructor = prototype.constructor;
        if (Constructor === Object) {
          return prototype === Object.prototype ? {} : create(prototype);
        }
        if (~toStringFunction.call(Constructor).indexOf('[native code]')) {
          try {
            return new Constructor();
          } catch (_a) {}
        }
        return create(prototype);
      }
      function copyMapLoose(map, state) {
        var clone = new state.Constructor();
        // set in the cache immediately to be able to reuse the object recursively
        state.cache.set(map, clone);
        map.forEach(function (value, key) {
          clone.set(key, state.copier(value, state));
        });
        return clone;
      }
      function copyDate(date, state) {
        return new state.Constructor(date.getTime());
      }
      /**
       * Copy the contents of the ArrayBuffer.
       */
      function copyArrayBuffer(arrayBuffer, _state) {
        return arrayBuffer.slice(0);
      }
      /**
       * Create a new Blob with the contents of the original.
       */
      function copyBlob(blob, _state) {
        return blob.slice(0, blob.size, blob.type);
      }
      /**
       * Create a new DataView with the contents of the original.
       */
      function copyDataView(dataView, state) {
        return new state.Constructor(copyArrayBuffer(dataView.buffer));
      }
      /**
       * Deeply copy the indexed values in the array.
       */
      function copyArrayLoose(array, state) {
        var clone = new state.Constructor();
        // set in the cache immediately to be able to reuse the object recursively
        state.cache.set(array, clone);
        for (var index = 0, length_2 = array.length; index < length_2; ++index) {
          clone[index] = state.copier(array[index], state);
        }
        return clone;
      }
      function createCopier(options) {
        var normalizedOptions = Object.assign({}, DEFAULT_LOOSE_OPTIONS, options);
        var tagSpecificCopiers = getTagSpecificCopiers(normalizedOptions);
        var array = tagSpecificCopiers.Array,
          object = tagSpecificCopiers.Object;
        function copier(value, state) {
          state.prototype = state.Constructor = undefined;
          if (!value || typeof value !== 'object') {
            return value;
          }
          if (state.cache.has(value)) {
            return state.cache.get(value);
          }
          state.prototype = Object.getPrototypeOf(value);
          state.Constructor = state.prototype && state.prototype.constructor;
          // plain objects
          if (!state.Constructor || state.Constructor === Object) {
            return object(value, state);
          }
          // arrays
          if (Array.isArray(value)) {
            return array(value, state);
          }
          var tagSpecificCopier = tagSpecificCopiers[getTag(value)];
          if (tagSpecificCopier) {
            return tagSpecificCopier(value, state);
          }
          return typeof value.then === 'function' ? value : object(value, state);
        }
        return function copy(value) {
          return copier(value, {
            Constructor: undefined,
            cache: createCache(),
            copier: copier,
            prototype: undefined
          });
        };
      }
      function getTagSpecificCopiers(options) {
        return {
          Arguments: options.object,
          Array: options.array,
          ArrayBuffer: options.arrayBuffer,
          Blob: options.blob,
          Boolean: copyPrimitiveWrapper,
          DataView: options.dataView,
          Date: options.date,
          Error: options.error,
          Float32Array: options.arrayBuffer,
          Float64Array: options.arrayBuffer,
          Int8Array: options.arrayBuffer,
          Int16Array: options.arrayBuffer,
          Int32Array: options.arrayBuffer,
          Map: options.map,
          Number: copyPrimitiveWrapper,
          Object: options.object,
          Promise: copySelf,
          RegExp: options.regExp,
          Set: options.set,
          String: copyPrimitiveWrapper,
          WeakMap: copySelf,
          WeakSet: copySelf,
          Uint8Array: options.arrayBuffer,
          Uint8ClampedArray: options.arrayBuffer,
          Uint16Array: options.arrayBuffer,
          Uint32Array: options.arrayBuffer,
          Uint64Array: options.arrayBuffer
        };
      }
      function copyPrimitiveWrapper(primitiveObject, state) {
        return new state.Constructor(primitiveObject.valueOf());
      }
      function copySelf(value, _state) {
        return value;
      }
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Fetcher.ts", ['cc', './baseBoard.ts', './globals.ts', './soundDefine2.ts', './index5.ts', './Throttler.ts', './bridge.ts', './BaseViewModel2.ts', './prefabDefine2.ts', './NodeIOEffect.ts', './mockData.ts', './types.ts'], function (exports) {
  var cclegacy, Prefab, setLoadingAction, addToastAction, global, lang, baseBoardView, sourceManageSeletor, hallAudio, SoundPathDefine, getStore, Throttler, sendNativeVibrate, BaseViewModel, PrefabPathDefine, EffectType, getMockResponse, ToastType;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      Prefab = module.Prefab;
    }, function (module) {
      setLoadingAction = module.setLoadingAction;
      addToastAction = module.addToastAction;
    }, function (module) {
      global = module.global;
      lang = module.lang;
      baseBoardView = module.baseBoardView;
      sourceManageSeletor = module.sourceManageSeletor;
      hallAudio = module.hallAudio;
    }, function (module) {
      SoundPathDefine = module.SoundPathDefine;
    }, function (module) {
      getStore = module.getStore;
    }, function (module) {
      Throttler = module.default;
    }, function (module) {
      sendNativeVibrate = module.sendNativeVibrate;
    }, function (module) {
      BaseViewModel = module.default;
    }, function (module) {
      PrefabPathDefine = module.PrefabPathDefine;
    }, function (module) {
      EffectType = module.EffectType;
    }, function (module) {
      getMockResponse = module.getMockResponse;
    }, function (module) {
      ToastType = module.ToastType;
    }],
    execute: function () {
      cclegacy._RF.push({}, "bce77v+cUNJq5eF6Ew5tFHz", "Fetcher", undefined);
      let DataVerify = exports('DataVerify', /*#__PURE__*/function (DataVerify) {
        DataVerify[DataVerify["ANY"] = 0] = "ANY";
        DataVerify[DataVerify["ARRAY"] = 1] = "ARRAY";
        DataVerify[DataVerify["OBJECT"] = 2] = "OBJECT";
        DataVerify[DataVerify["STRING"] = 3] = "STRING";
        DataVerify[DataVerify["CUSTOME"] = 4] = "CUSTOME";
        return DataVerify;
      }({}));
      const SampleData = exports('SampleData', {
        NUMBER: 0,
        STRING: "",
        ARRAY: [],
        BOOLEAN: true,
        OBJECT: {}
      });
      class Fetcher {
        constructor(baseUrl) {
          this.dispatch = void 0;
          this.baseUrl = void 0;
          this.baseUrl = baseUrl;
          this.dispatch = getStore().dispatch;
        }
        send(url, sendData = {}, method = "post", headers, option) {
          console.log(`http发送请求····url:${url},method:${method},sendData:${sendData}`);
          const _option = Object.assign({}, {
            isLoading: true,
            /**如果dataVerify = DataVerify.CUSTOME，verifySampleData(样本数据)必须赋值 */
            dataVerify: DataVerify.ANY,
            verifySampleData: null,
            isThrottler: true
          }, option);

          // Mock 模式：直接返回 mock 数据，但需要处理 loading
          if (!url.includes("slot/enter") && !url.includes("slot/action")) {
            console.log("Mock 模式：直接返回 mock 数据，但需要处理 loading");
            // 如果需要显示 loading，先显示
            if (_option.isLoading) {
              this.dispatch(setLoadingAction({
                isShow: true,
                flagId: url.toString()
              }));
            }

            // 模拟网络延迟后返回数据并关闭 loading
            return new Promise(resolve => {
              setTimeout(() => {
                const mockData = getMockResponse(url, sendData);
                // 关闭 loading
                if (_option.isLoading) {
                  this.dispatch(setLoadingAction({
                    isShow: false,
                    flagId: url.toString()
                  }));
                }
                resolve(mockData);
              }, 100); // 模拟 100ms 延迟
            });
          }

          return new Promise((reslove, reject) => {
            const param = {
              method,
              headers: Object.assign({
                "Content-Type": "application/json",
                // Token: sys.localStorage.getItem("token") || "",
                //! commented because server doesn't support Hindi
                // 'Content-Language': defaultLanguageType[config.country].langName
                "Authorization": 20001
                // "Content-Language": "English",
              }, headers)
            };
            if (method !== "get") {
              param["body"] = JSON.stringify(sendData);
            }
            console.log("param", param);
            console.log("this.baseUrl + url", this.baseUrl + url);
            const _fetch = () => {
              _option.isLoading && this.dispatch(setLoadingAction({
                isShow: true,
                flagId: url.toString()
              }));
              fetch(this.baseUrl + url, param).then(response => {
                this.dispatch(setLoadingAction({
                  isShow: false,
                  flagId: url.toString()
                }));
                if (response.status === 200) {
                  response.json().then(({
                    data,
                    code,
                    status,
                    message
                  }) => {
                    console.log(`http返回请求····code:${code},status:${status},message:${message},data:`, [data][0]);
                    console.log("response data", JSON.stringify(data));
                    if (status === "SUCCESS" || code === 200) {
                      let isDataPass = true;
                      if (_option.dataVerify === DataVerify.ARRAY) {
                        !Array.isArray(data) && (isDataPass = false);
                      } else if (_option.dataVerify === DataVerify.OBJECT) {
                        (typeof data !== "object" || data === null) && (isDataPass = false);
                      } else if (_option.dataVerify === DataVerify.STRING) {
                        typeof data !== "string" && (isDataPass = false);
                      } else if (_option.dataVerify === DataVerify.CUSTOME) {
                        if (!_option.verifySampleData) {
                          console.warn("您设置了自定义验证数据，但是未传入样本数据");
                        } else {
                          !this.validateJson(_option.verifySampleData, data) && (isDataPass = false);
                        }
                      }
                      if (!isDataPass) {
                        this.dispatch(setLoadingAction({
                          isShow: false,
                          flagId: url.toString()
                        }));
                        this.dispatch(addToastAction({
                          content: lang.write(k => k.InitGameModule.FetcherFaild, {}, {
                            placeStr: "json数据解析失败"
                          }),
                          type: ToastType.ERROR,
                          forceLandscape: false
                        }));
                        reject("数据格式异常:" + url);
                      } else {
                        reslove(data);
                      }
                    } else if (code === "BIZ-5101") {
                      //跳转至登录页
                      this.dispatch(setLoadingAction({
                        isShow: false,
                        flagId: url.toString()
                      }));
                      if (baseBoardView.mainPanelViewModel) {
                        baseBoardView.mainPanelViewModel.logOut(false);
                      } else {
                        baseBoardView.loginPageV2ViewModel.comp.events.onOpenLoginDialog();
                      }
                    } else if (code === "BIZ-5102") {
                      //IP被限制
                      sourceManageSeletor().getFileAsync(PrefabPathDefine._PROHIBIT_PANEL, Prefab).then(fileSource => {
                        const prohibitViewModel = new BaseViewModel("Hall_ProhibitPanel").mountView(fileSource.source).setEvent({
                          onCloseHandle: () => prohibitViewModel.unMount(EffectType.EFFECT1)
                        }).appendTo(baseBoardView.viewNode, {
                          effectType: EffectType.EFFECT2,
                          isModal: true
                        });
                      });
                    } else {
                      this.dispatch(addToastAction({
                        content: message,
                        type: ToastType.ERROR,
                        forceLandscape: false
                      }));
                      this.dispatch(setLoadingAction({
                        isShow: false,
                        flagId: url.toString()
                      }));
                      reject(message);
                    }
                  }).catch(() => {
                    this.dispatch(addToastAction({
                      content: lang.write(k => k.InitGameModule.FetcherFaild, {}, {
                        placeStr: "json数据解析失败"
                      }),
                      type: ToastType.ERROR,
                      forceLandscape: false
                    }));
                    this.dispatch(setLoadingAction({
                      isShow: false,
                      flagId: url.toString()
                    }));
                    // console.log("json数据解析失败", response)
                    hallAudio.play(SoundPathDefine.ERROR);
                    reject("json数据解析失败");
                  });
                } else {
                  this.dispatch(addToastAction({
                    content: response.status.toString(),
                    type: ToastType.ERROR,
                    forceLandscape: false
                  }));
                  this.dispatch(setLoadingAction({
                    isShow: false,
                    flagId: url.toString()
                  }));
                  hallAudio.play(SoundPathDefine.ERROR);
                  reject(response);
                }
              }).catch(e => {
                sendNativeVibrate(100);
                this.dispatch(addToastAction({
                  content: e.toString(),
                  type: ToastType.ERROR,
                  forceLandscape: false
                }));
                this.dispatch(setLoadingAction({
                  isShow: false,
                  flagId: url.toString()
                }));
                hallAudio.play(SoundPathDefine.ERROR);
                reject(e);
              });
            };
            if (_option.isThrottler) {
              Throttler.isDebouncerAsync(this.baseUrl + url, 500, true, () => {
                console.log("Debouncer stop", this.baseUrl + url);
                global.hallDispatch(addToastAction({
                  content: lang.write(k => k.PersonCenterModule.PersonCenterSumbit, {}, {
                    placeStr: "操作过于频繁，请稍等~"
                  })
                }));
              }).then(isPass => {
                _fetch();
              });
            } else {
              _fetch();
            }
          });
        }
        /**
         * 用于验证数据是否非法
         * @param sampleData 样本数据
         * @param data 被验证的数据
         * @returns
         */
        validateJson(sampleData, data) {
          // 检查是否为对象
          if (typeof data !== "object" || data === null) {
            return false;
          }
          // 遍历样本数据的字段
          for (const key in sampleData) {
            if (sampleData.hasOwnProperty(key)) {
              // 检查字段是否存在
              if (!(key in data)) {
                console.error(`Missing field: ${key}`);
                return false;
              }
              // 检查字段的数据格式，这里假设样本数据中定义了数据格式
              let expectedType = typeof sampleData[key];
              let actualType = typeof data[key];
              if (actualType !== expectedType && Array.isArray(sampleData[key]) && !Array.isArray(data[key])) {
                console.error(`Invalid data type for field ${key}. Expected ${expectedType}, got ${actualType}`);
                return false;
              }
            }
          }
          // 遍历传入数据的字段，检查是否多余
          for (const key in data) {
            if (data.hasOwnProperty(key) && !(key in sampleData)) {
              console.warn(`Unexpected field: ${key}`);
              // 如果需要禁止多余的字段，可以返回false
            }
          }

          return true;
        }
      }
      exports('default', Fetcher);
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/GameConfig.ts", ['cc', './bridge.ts', './env', './mockData.ts'], function (exports) {
  var cclegacy, getPackageName, DEV;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      getPackageName = module.getPackageName;
    }, function (module) {
      DEV = module.DEV;
    }, null],
    execute: function () {
      cclegacy._RF.push({}, "b3a43fYAldO2JzRQr5/B8go", "GameConfig", undefined);
      const envConfig = {
        development: ["https://static-resources-hoster-snowy.vercel.app/hotupdate/jsonConfig-test.json"],
        test: ["https://static-resources-hoster-snowy.vercel.app/hotupdate/jsonConfig-test.json"],
        advance: [`https://static-resources-hoster-snowy.vercel.app/hotupdate/jsonConfig-test.json`],
        production: ["https://static-resources-hoster-snowy.vercel.app/hotupdate/jsonConfig-test.json"]
      };
      /**获取游戏配置列表 */
      const getGameMapConfig = exports('getGameMapConfig', (urlIndex = 0) => {
        return new Promise((reslove, reject) => {
          console.log("获取游戏配置列表", GameConfig.gameConfigUrl[urlIndex]);
          fetch(`${GameConfig.gameConfigUrl[urlIndex]}?t=${Date.parse(new Date())}`).then(response => {
            console.log("获取游戏配置列表", response);
            if (response.status === 200) {
              // response.text() returns a Promise and consumes the body. It can only be called once.
              response.text().then(jsonStr => {
                console.log("获取游戏配置列表 text", jsonStr);
                try {
                  const jsonObj = JSON.parse(jsonStr.trim());
                  console.log("获取游戏配置列表 json", jsonObj);
                  reslove(jsonObj);
                } catch (e) {
                  console.error("解析游戏配置失败", e);
                  reject(e);
                }
              }).catch(e => reject(e));
            } else {
              const _urlIndex = urlIndex + 1;
              if (_urlIndex === GameConfig.gameConfigUrl.length) {
                reject('config_error');
              } else {
                reslove(getGameMapConfig(_urlIndex));
              }
            }
          }).catch(e => {
            const _urlIndex = urlIndex + 1;
            if (_urlIndex === GameConfig.gameConfigUrl.length) {
              reject('config_error');
            } else {
              reslove(getGameMapConfig(_urlIndex));
            }
          });
        });
      });
      const keyPem = exports('keyPem', {
        /**1024bit */
        key1: {
          /**公钥，用于加密 */
          publicStr: 'MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCc3prvz5vyN3tmnU7JLaSfE+t5bG4qVoAHLvAAfnK61wy94DLpuCpqrhuShZp7JwDyZwBdK9n/aziA6ekSLwsjhj522Yc6bhVKEqP8ARY2ULi67Uoxf9W5VHz0C5SpxB9hetMcu2hmR6MMvJER6KJVAz8HGZTNqR7aiNWSNUYJCwIDAQAB',
          /**私钥，用于解密 */
          privateStr: 'MIICdQIBADANBgkqhkiG9w0BAQEFAASCAl8wggJbAgEAAoGBAJzemu/Pm/I3e2adTsktpJ8T63lsbipWgAcu8AB+crrXDL3gMum4KmquG5KFmnsnAPJnAF0r2f9rOIDp6RIvCyOGPnbZhzpuFUoSo/wBFjZQuLrtSjF/1blUfPQLlKnEH2F60xy7aGZHowy8kRHoolUDPwcZlM2pHtqI1ZI1RgkLAgMBAAECgYBvxYzP4jVTWITskJlabtMlJaRaWBAGyqtecus+7toAlsnVYLHmJfrTGEs9E0UHCrt5/DoeKOijPVp9QC15b1uXRlZ0Hw8LnMbTT0+JnJXtTSq8iLXyuOpfDwE9fiy03TxVJwe0S9Nl426TGJ1Sk0Ws6/RuEWTMAJAKMz5fQR82QQJBAP8ijtOgTr26FRE9Oc6KHhgW55sDrWhWMQwSUfR3Wb4A0Ou5PbJqJ+fDoG+kF1sWbChEwbPKb28HZljodYyYJOcCQQCdZsI7IOLwrszaQ6rBLSzch6IBhN0K1s9pynt/kpKXBShgoO+jVOXgC68Z1CM0xrjo1FKcYNDXvU9qhH8fixI9AkAd+tyXp425I6WYGf6x827n28EpaPw2d3JZ/ckdley4s/XYzTKfxXOc+1Ld64VHEdJxxOqSCuafQFpZdi9h7vrfAkBxZuSPVy1J/JZotpHipdqJdErbT082DPfYn2KE0iQ9HCEwJSMiCPuphKF+OWG4F2iHjtmKAxLULHd4Jce1ASx9AkAJSU4jWqaStNhHzegFnMkWNlW//n9Gevsaape5bwj7g2ujCnG2qnEVd1YKv+Xp3WAyYqFQT1tbmea+bODTLmCw'
        },
        key_2048: {
          /**公钥，用于加密 */
          publicStr: 'MIICITANBgkqhkiG9w0BAQEFAAOCAg4AMIICCQKCAgB9osALeextz/jxWZfkkTolwPAwa7ZwL58Fut/qKhzCAg4mj/ej72yKixcxKb063FjO+kgPcytjz3Xrf7kwCzFxWKrBQeh07IJbjaJ7LtsfJnf6WJDTQtnwK9PWMYiLYfVWlxY9aeMMKaRQgcF20VC7v21Lb1cX3apjdHK64vxogpNxWRYfvRkdRaXnCYfEFQk+t3vVw+SgLqkgIQ3BY9cmZfji3OTpm1E0b7w/3+CaDWDoEYbuRqOVmFpiRuwrqXa/uHTk5PbwmNeSWRcf4ZTm+gMEdnUuOasO8rZ/nmtumjV973brYUkgboL4uYXeitnzSLgNXnU7V4UFNog63IBeY1jQMNsz8aY8rJxA1qyAVztW5bCZpWU8+8gQ7FI0l+PbxNSUDuWstCxnqZAY5DpOYGfKYQu2tks66FKWiUNQbgXBr0TtqJP1olD22mCblVhBQ3xQQW5A2ifjvgokohKeJeucGXuoAwpYvPdu+HHr1j9G91Ox0vO4FcAuhNpeUPm9o0AqstHzUSAYch6Y1RNjIz+dabiD01u9GDUVN4yz4yoCGTwAuTuxajV7QgGSxTgCiDkmYLvOAS6QBOfhrbI1/ysOLAFcdhMM1REI1KYlWVbm05IzvZ9hEVdHVha3imIFdAzP89gTRcJOcfe7hwNgCeggsu5WQh8OZwzLJOJF8QIDAQAB',
          /**私钥，用于解密 */
          privateStr: 'MIIJJgIBAAKCAgB9osALeextz/jxWZfkkTolwPAwa7ZwL58Fut/qKhzCAg4mj/ej72yKixcxKb063FjO+kgPcytjz3Xrf7kwCzFxWKrBQeh07IJbjaJ7LtsfJnf6WJDTQtnwK9PWMYiLYfVWlxY9aeMMKaRQgcF20VC7v21Lb1cX3apjdHK64vxogpNxWRYfvRkdRaXnCYfEFQk+t3vVw+SgLqkgIQ3BY9cmZfji3OTpm1E0b7w/3+CaDWDoEYbuRqOVmFpiRuwrqXa/uHTk5PbwmNeSWRcf4ZTm+gMEdnUuOasO8rZ/nmtumjV973brYUkgboL4uYXeitnzSLgNXnU7V4UFNog63IBeY1jQMNsz8aY8rJxA1qyAVztW5bCZpWU8+8gQ7FI0l+PbxNSUDuWstCxnqZAY5DpOYGfKYQu2tks66FKWiUNQbgXBr0TtqJP1olD22mCblVhBQ3xQQW5A2ifjvgokohKeJeucGXuoAwpYvPdu+HHr1j9G91Ox0vO4FcAuhNpeUPm9o0AqstHzUSAYch6Y1RNjIz+dabiD01u9GDUVN4yz4yoCGTwAuTuxajV7QgGSxTgCiDkmYLvOAS6QBOfhrbI1/ysOLAFcdhMM1REI1KYlWVbm05IzvZ9hEVdHVha3imIFdAzP89gTRcJOcfe7hwNgCeggsu5WQh8OZwzLJOJF8QIDAQABAoICAAk/5zWxF0gKbMCQIQ+x5X8MEmLuOzNNPj70wDGEQjPCZPpP1SKbqPkWPnHfKdBgkqVCZfXFO+eQSZU6BQ9Vc6FtrryltpCNLRfCeLjq/TTw5xpmVNtI67Sz9Veqs+vXHXHvk7KXziCCHFfVBcJSrMf10v0fyGC4cCf8VcoOlhi3rFVHAsr5aBTwoMM+v2EfT1vvtE1Lq9RjOw5jgJjBWgC4tzc0niHYzoS2yTxGpkmRPJY5XB7E0pxb6COeJxsb0eNRmEGV3dxe1Fgw+PPe7tCGjZxRgFUT59Uk52zD5BLzhYatD6tKsVCS8k+PkRyOSneP3gUV9DmXOvLkTelPfJ/asop/EAC/eY70hOdcjWRwEvuC/6YBoe66fsLsenSZ9ZydDB74v551blprCr6sSspwhp3xUDTk+5StpYML40U5T0UKCc4amygue9pYA7jGUH7qAx6GJ29RgBDpH3047HD8HHWLc0jzOhwhq2tx0xWtjndHhjHfhLy325hRB9YWvUB7kosF2kmw8Xmbt+WB2XxV7wQJMgnp27VRtC7rojBrhjDzOIajUB/sCThm+sq/xVROHL1gNsHoqnWdgWHGGe8/KJoU+SpQOETIJbnjq0OrN6yghjk7M3nBEgzCKJtlkFvAgCTNaK6dCu0JBzHhpYNmTcFgm4PV4f9MtE0mouAFAoIBAQD0GL56NYye5KwK1lZeBi4+eqwJkXbn74ErnWmea3HygLWiLmkRalKqoXyxZ7CIprErm0ZTb8FjgEcG3sU9RtyLBWF5KSPMUamZr66Af/JCJ3/G0PKrH62uzdx8FOCnX6HXcCWtnXasHGO6AJma7hy6u1wW8rPV6HRBKHnNI8uCQDPH1gVBppKOHjQamNB8FMvj1rFJrCAPBOSuxejRkfXOf3SIcittwiQ5LafIur+90bJmzsaKTJq+fh8w1hlGEwko1weluw5rNoOi6yj0Zn7cTf3QdWhDvyS4ITHyoOElG6fNN6CfCTVgdMC4AFjER0DaAujLbB1uL9+6W7qIiNZnAoIBAQCDwympx+KrL5UVqDXXUQFs4PKzNMhefbnhYldVrkAalDJAHBzUs+ZDpmjMsg14GL+SBFwocrjUEUVqzo+yebbd71N2GoHyQ4dRQ2GB03Yff6Ox79Vtqt517e3wfo8IdXG+1VwA95X2Jn8vBnqtjL+9cAeiRuuKMj/R0ShLrlfiO03b5AomV7RrnRuCylH9rwxtqCr8jJ9okhnBlp1dzYj8YwHKpflh0wvUfdrI9TywRqJK2cSl/HwIQQGR2r93LtXECBaR/LMYd1ssZA4se775pcFDDdiBbPH8lYrK5uzvjexGwIeWu3JdIUzJf/WT6upns/+Xc44ELAdtoMi4yVnnAoIBADLw2weMF12toU3dr0aOCaaWWULh7au3qwBcKIecKrqOK9m9z8WHp9reOrSXTBsoln7gN8v/3Z8TTT9czFLeb/Y/WDk94a+pNzjQlh1RFlDCB4OJZatawBdj9OicPsoPRio8yFA0NWjzv8g4idXwbWR252AOpIM2sNRMSycJmlYDagsBWjV6OsmX+g226IOMn4Rb8MHMPyCDR+pFeTILQP4oUTyMfw2333FjWsmkV5GYqp+T9ZE1LXIlxgKeG8YpANdaEMmAgSDUzqH4a6KdpUn6qMaRSgIhaNtYaiEVfAcPf3RvcIDgHhiUJQgBYoULzbfxtX2GgZnWOd2deQ83Z28CggEAVbY2/ALTKJijWps5qv8+9hy+xGSpkw4mRL88ILhhaujMZ3fiKVt9hrRRqBaLPHyc4deEO6ulIA68IWaNg4Q5uNVebY2Ayp+y/uHeJB3y0TquualSJSzp2b0U80TgtpfvjjwsxVRJcP5J7cVBOHQ+pnSiAqYvwo49hbeRhum6safyVgBZueeDrh1dMA98lpGwfATRMcgoSlX/+zaG1+ZEHiopmDGvsDshjvDvyZn+CI1qNVbD3VYJOTVQWBj8RANre0HnrL+9oUTDQnUz4yv8Z1m0BnKTTF4abDy7NJJTvuGLudq0WRFGq95lnQ5oKfi+0wb8VQEOeRhLHL1i1RHmMQKCAQB8uqobE+z2YXLvKtwMM0ZuLFo7ooofagLHtaNItF8TcVljhSnq5uDl+worOs3aPDT8L1+wbS4l869iV1aM03bpES+0kxaLMsgTusMJHCag23hkwa+wJb4olFOA5PPo4ozoJ5ZR49ltSV3pzQnHl1+2vN5rl1mJjRAQ8HIDgr99XF6hAMVg0L3TRyLc3nMrD1k2SiLu76pJfGZqjlta65y6x+NGJ4MZ5gG5T73IK2U2jm0FfHv4gxAR1HWBcjoSKZ8pH9H8rXLDsfBOPS3oAJjXyZAcIIIj/ErwI1hDKgq6Z765rT9t1HSthf5Z5xaRQGNuzbZ8JvH12YFVNGJLKQ8y'
        }
      });
      /**是否是内部测试模式（可以是开发、测试、预发，返回true，生产App和生产H5返回false） */
      const getIsTest = exports('getIsTest', () => {
        /**本地语言 */
        const pkgCode = getPackageName();
        const isDev = pkgCode.includes('test') || pkgCode.includes('development') || pkgCode.includes('advance'); // || (!DEV && pkgCode.includes('web'))
        // console.log('isDev=' + isDev, DEV, pkgCode)
        return isDev;
      });
      const getEnvKey = exports('getEnvKey', () => {
        const pkgCode = getPackageName();
        console.log("pkgCode", pkgCode);
        if (pkgCode.includes("development")) return "development";else if (pkgCode.includes("test")) return "test";else if (pkgCode.includes("advance")) return "advance";
        //若使用浏览器开发的时候，要请求其他环境，请在这里修改
        else if (pkgCode.includes("web") && DEV) return "test";else return "production";
      });
      /**是否是生产环境H5版 */
      const isH5 = exports('isH5', () => !getIsTest() && getPackageName() === 'web' && window['installBundle']);
      const GameConfig = exports('GameConfig', {
        /**是否是内部测试版本 */
        // isDev: getIsTest(),
        envKey: getEnvKey(),
        /**用于热更新，会被动态修改 */
        HotUpdateVersion: 1,
        /**本地的App版本号，会被动态修改 */
        appLocalVersion: 'V1.0.1',
        gameConfigUrl: envConfig[getEnvKey()],
        /** Sentry DSN */
        sentryDSN: "https://e085f19a84737dfc917534762ef60bcf@o4510468328849408.ingest.de.sentry.io/4510468336517200",
        // TODO: Replace with actual DSN
        /** Mixpanel Token */
        mixpanelToken: "37c40f76885df411f5905d9bde9847cd"
      });
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/GameMsgHub.ts", ['cc'], function () {
  var cclegacy;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }],
    execute: function () {
      /**
       * 
       */
      cclegacy._RF.push({}, "44ed1B6zy9J0KXiAzxzpUGo", "GameMsgHub", undefined);
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/GiftUserViewModel.ts", ['cc', './ViewModel.ts', './Common_GiftUser.ts', './globals.ts', './prefabDefine.ts', './tool.ts', './soundDefine.ts'], function (exports) {
  var cclegacy, instantiate, Sprite, sp, tween, ViewModel, GIFT_ICON_CONFIG, sourceManageSeletor, commonAudio, PrefabPathDefine, isChatShieldingUser, SoundPathDefine;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      instantiate = module.instantiate;
      Sprite = module.Sprite;
      sp = module.sp;
      tween = module.tween;
    }, function (module) {
      ViewModel = module.default;
    }, function (module) {
      GIFT_ICON_CONFIG = module.GIFT_ICON_CONFIG;
    }, function (module) {
      sourceManageSeletor = module.sourceManageSeletor;
      commonAudio = module.commonAudio;
    }, function (module) {
      PrefabPathDefine = module.PrefabPathDefine;
    }, function (module) {
      isChatShieldingUser = module.isChatShieldingUser;
    }, function (module) {
      SoundPathDefine = module.SoundPathDefine;
    }],
    execute: function () {
      cclegacy._RF.push({}, "f0c1aQRrJ5FoKuWaed2rvqI", "GiftUserViewModel", undefined);
      const BANKER_ID = exports('BANKER_ID', "1100000");
      let GameType = exports('GameType', /*#__PURE__*/function (GameType) {
        GameType[GameType["YXX"] = 1] = "YXX";
        GameType[GameType["DRAGON_TIGER"] = 2] = "DRAGON_TIGER";
        GameType[GameType["BANDAR_QIU_QIU"] = 3] = "BANDAR_QIU_QIU";
        GameType[GameType["BANDAR"] = 4] = "BANDAR";
        return GameType;
      }({}));
      let initStatus = false;
      class GiftUserViewModel extends ViewModel {
        constructor() {
          super('Common_GiftUser');
        }
        begin() {
          initStatus = false;
        }
        connect(initProps = {}) {
          this.inject(initProps, () => {
            return {};
          });
          return this;
        }
        /**
         * 显示礼物窗口
         * @param parent 
         * @param gameType 游戏类型
         * @param userInfo 
         * @param startPos 
         * @param endPos 
         */
        static show(parent, gameType, userInfo, callback) {
          if (initStatus) {
            return;
          }
          initStatus = true;
          if (this.instance) {
            this.instance.viewNode.active = true;
            this.instance.viewNode.setSiblingIndex(this.instance.viewNode.parent.children.length);
            initStatus = false;
          } else {
            this.instance = new GiftUserViewModel().mountView(sourceManageSeletor("common").getFile(PrefabPathDefine.GIFT_USER).source).appendTo(parent);
          }
          const memberId = userInfo ? userInfo.memberId : BANKER_ID;
          commonAudio.playOneShot(SoundPathDefine.spin);
          this.instance.setProps({
            isUser: userInfo ? true : false,
            gameType: gameType,
            head: userInfo ? userInfo.head : 0,
            gold: userInfo ? userInfo.gold : 0,
            name: userInfo ? userInfo.name : "",
            memberId: userInfo ? userInfo.memberId : ""
          }).setEvent({
            selectGift: (value, count) => {
              for (let i = 0; i < count; i++) {
                window.setTimeout(() => {
                  callback && callback(value, memberId);
                }, 200 * i);
              }
            }
          });
        }

        /**
         * 飞礼物
         * @param parent 
         * @param fromMemberId 开始的用户id
         * @param toMemberId 结束的用户id
         * @param startPos 
         * @param endPos 
         * @param value 
         * @param count 执行次数
         */
        static flyGift(parent, fromMemberId, toMemberId, startPos, endPos, value) {
          if (isChatShieldingUser(fromMemberId) || isChatShieldingUser(toMemberId)) {
            return;
          }
          if (!startPos || !endPos) {
            return;
          }
          const sourceFile = sourceManageSeletor("common").getFile(PrefabPathDefine.GIFT_ANIMATION);
          if (!sourceFile) {
            console.error(PrefabPathDefine.GIFT_ANIMATION, " prefab not fround");
            return;
          }
          const iconConfig = this.getIconConfig(value);
          if (!iconConfig) {
            console.error("gift spriteFrame is null");
            return;
          }
          const node = instantiate(sourceFile.source);
          parent.addChild(node);
          const sprGiftNode = node.getChildByName("props_spr_gift").getComponent(Sprite);
          sprGiftNode.spriteFrame = sourceManageSeletor("common").getFile(iconConfig.spriteFramePath).source;
          const giftAnimationNode = node.getChildByName("props_gift_animation");
          const skeleton = giftAnimationNode.getComponent(sp.Skeleton);
          const source = sourceManageSeletor("common").getFile(iconConfig.skeletonPath).source;
          skeleton.skeletonData = source;
          // skeleton.paused = true;
          giftAnimationNode.active = false;
          skeleton.setCompleteListener(() => {
            // this.instance && this.instance.comp && this.instance.comp.scheduleOnce(() => {
            if (node.isValid) {
              node.destroy();
            }
            // })
          });

          node.setWorldPosition(startPos);
          endPos = endPos.add(iconConfig.offset);
          tween(node).to(0.5, {
            worldPosition: endPos,
            angle: iconConfig.angle
          }).call(() => {
            if (node.isValid) {
              skeleton.setAnimation(0, "animation", false);
              giftAnimationNode.active = true;
              sprGiftNode.node.active = false;
              // skeleton.paused = false;
              commonAudio.playOneShot(iconConfig.dub);
            }
          }).start();
        }
        static getIconConfig(value) {
          const iconConfig = GIFT_ICON_CONFIG.find(v => v.value === value);
          if (iconConfig) {
            return iconConfig;
          }
          return undefined;
        }
      }
      exports('default', GiftUserViewModel);
      GiftUserViewModel.instance = null;
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/globals.ts", ['cc', './Internationalization.ts', './languagePkg.ts', './index5.ts'], function (exports, module) {
  var cclegacy, Internationalization, languagePkg, getStore;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      Internationalization = module.default;
    }, function (module) {
      languagePkg = module.default;
    }, function (module) {
      getStore = module.getStore;
    }],
    execute: function () {
      exports({
        baseBoardView: void 0,
        fetcher: void 0,
        rootNodeWrap: void 0
      });
      cclegacy._RF.push({}, "96896WTwkhMWLrrLF+BVqJ8", "globals", undefined);
      // ===== 全局变量 =====

      let sourceManageMap = exports('sourceManageMap', []);
      let rootNodeWrap;
      let baseBoardView;
      let bundleCommon = exports('bundleCommon', null);
      let bundleHall = exports('bundleHall', null);
      let hallAudio = exports('hallAudio', null);
      let commonAudio = exports('commonAudio', null);
      let fetcher;

      // ===== 工具函数 =====

      const sourceManageSeletor = exports('sourceManageSeletor', (bundleName = "hall") => sourceManageMap.find(i => i.bundle.name === bundleName));

      /**
       * 使用大厅的Redux store进行dispatch
       */
      const hallDispatch = exports('hallDispatch', action => {
        getStore().dispatch(action);
      });

      // ===== 国际化实例 =====

      const lang = exports('lang', new Internationalization(languagePkg));

      // ===== 全局对外API (使用懒加载避免循环依赖) =====

      /**大厅暴露出来的通用方法 */
      const global = exports('global', {
        /**使用大厅的store */
        hallDispatch: hallDispatch,
        /**
         * 关闭子游戏
         * @param isPre 是否在初始化完成之前退出，一般指在加载的时候退出
         * @param confirmContent 如果值非空的话，则会弹出确认框
         * @param confirmDoneAfterFn 点击确认后，在实施关闭游戏之后要做的事情
         * @param confirmDoneBeforeFn 点击确认后，在实施关闭游戏之前要做的事情
         */
        closeSubGame: async option => {
          const _option = Object.assign({
            isPre: false,
            confirmContent: "",
            confirmDoneAfterFn: () => {},
            confirmDoneBeforeFn: () => {}
          }, option || {});

          // 懒加载 ModalBox, hallWebSocketDriver, TaskSchedulerDefault
          const [{
            default: ModalBox
          }, {
            hallWebSocketDriver,
            SKT_MAG_TYPE
          }, {
            TaskSchedulerDefault
          }] = await Promise.all([module.import('./ModalBox.ts'), module.import('./socketConnect.ts'), module.import('./TaskScheduler.ts')]);

          //避免重复弹窗
          if (_option.confirmContent) {
            if (!ModalBox.Instance().isShow && _option.confirmContent !== ModalBox.Instance().contentStr) {
              ModalBox.Instance().show({
                content: _option.confirmContent,
                type: "Prompt"
              }, () => {
                _option.confirmDoneBeforeFn();
                baseBoardView.comp && baseBoardView.comp.closeSubGame();
                _option.confirmDoneAfterFn();
                return true;
              });
            }
          } else {
            baseBoardView.comp && baseBoardView.comp.closeSubGame();
          }
          TaskSchedulerDefault().stopQueue(false);
          hallWebSocketDriver.sendSktMessage(SKT_MAG_TYPE.MEMBER_INFO, "", {
            isLoading: false
          });
        },
        /**打开商城 */
        openShop: buyType => {
          baseBoardView && baseBoardView.mainPanelViewModel.openShop(buyType);
        },
        /**打开个人中心 */
        openPersonCenter: index => {
          baseBoardView && baseBoardView.mainPanelViewModel.openPc(index);
        },
        /**打开vip主界面 */
        openVipMain: () => {
          baseBoardView && baseBoardView.mainPanelViewModel.openVipMain();
        },
        openSign: () => {
          baseBoardView && baseBoardView.mainPanelViewModel.openSign();
        },
        /**加载头像 */
        loadHeadSprite: async (icon, sprite) => {
          const {
            SpriteFrame
          } = await module.import('cc');
          bundleCommon && bundleCommon.load(`resource/head/head_circle_${icon}/spriteFrame`, SpriteFrame, (err, sp) => {
            if (!err) {
              sprite.spriteFrame = sp;
            }
          });
        },
        /**更新子游戏的进度信息 */
        setSubGameGate: (gameId, progress) => {
          baseBoardView && baseBoardView.mainPanelViewModel.comp.setSubGameGate(gameId, progress);
        },
        /**是否允许打开子游戏,一半用于子游戏的第一个首预制体已经加载完毕 */
        isAllowOpenSubGame: gameId => {
          if (baseBoardView) {
            return baseBoardView.isAllowOpenSubGame(gameId);
          }
          return true;
        },
        showGiftWindow: async (gameType, userInfo, callback) => {
          const {
            default: GiftUserViewModel
          } = await module.import('./GiftUserViewModel.ts');
          if (rootNodeWrap && rootNodeWrap.isValid) {
            GiftUserViewModel.show(rootNodeWrap, gameType, userInfo, callback);
          }
        },
        flyGift: async (fromMemberId, toMemberId, startPos, endPos, value, parentNode) => {
          const {
            default: GiftUserViewModel
          } = await module.import('./GiftUserViewModel.ts');
          if (!parentNode) {
            parentNode = rootNodeWrap;
          }
          if (parentNode && parentNode.isValid) {
            GiftUserViewModel.flyGift(parentNode, fromMemberId, toMemberId, startPos, endPos, value);
          }
        }
      });

      // ===== Setter函数（供 index.ts 初始化时调用）=====

      const setSourceManageMap = exports('setSourceManageMap', value => {
        sourceManageMap = exports('sourceManageMap', value);
      });
      const setRootNodeWrap = exports('setRootNodeWrap', value => {
        rootNodeWrap = exports('rootNodeWrap', value);
      });
      const setBaseBoardView = exports('setBaseBoardView', value => {
        baseBoardView = exports('baseBoardView', value);
      });
      const setBundleCommon = exports('setBundleCommon', value => {
        bundleCommon = exports('bundleCommon', value);
      });
      const setBundleHall = exports('setBundleHall', value => {
        bundleHall = exports('bundleHall', value);
      });
      const setHallAudio = exports('setHallAudio', value => {
        hallAudio = exports('hallAudio', value);
      });
      const setCommonAudio = exports('setCommonAudio', value => {
        commonAudio = exports('commonAudio', value);
      });
      const setFetcher = exports('setFetcher', value => {
        fetcher = exports('fetcher', value);
      });
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Guide.ts", ['cc', './prefabDefine2.ts', './index4.ts', './NodeIOEffect.ts', './tool.ts', './globals.ts'], function (exports) {
  var Prefab, instantiate, find, Node, cclegacy, PrefabPathDefine, effectFade, getNodePositionInCanvas, sourceManageSeletor;
  return {
    setters: [function (module) {
      Prefab = module.Prefab;
      instantiate = module.instantiate;
      find = module.find;
      Node = module.Node;
      cclegacy = module.cclegacy;
    }, function (module) {
      PrefabPathDefine = module.PrefabPathDefine;
    }, null, function (module) {
      effectFade = module.effectFade;
    }, function (module) {
      getNodePositionInCanvas = module.getNodePositionInCanvas;
    }, function (module) {
      sourceManageSeletor = module.sourceManageSeletor;
    }],
    execute: function () {
      cclegacy._RF.push({}, "d54e22UGvBN2rQ7KsSus4Hx", "Guide", undefined);
      class Guide {
        constructor(focusNode, explainNode) {
          this.focusNode = void 0;
          this.explainNode = void 0;
          this.mainBgNode = void 0;
          this.doneHandler = void 0;
          this.focusNode = focusNode;
          this.explainNode = explainNode;
        }
        creatorBg() {
          return new Promise((resovle, reject) => {
            sourceManageSeletor().getFileAsync(PrefabPathDefine._GUIDE_PANEL, Prefab).then(({
              source
            }) => {
              resovle(instantiate(source));
            }).catch(() => {
              reject('error');
            });
          });
        }
        begin() {
          this.creatorBg().then(bgNode => {
            this.mainBgNode = bgNode;
            find('Canvas').addChild(this.mainBgNode);
            effectFade(this.mainBgNode).enter();
            const position = getNodePositionInCanvas(this.focusNode);
            const _focusNode = instantiate(this.focusNode);
            const _explainNode = instantiate(this.explainNode);
            _explainNode.active = true;
            _focusNode.setPosition(position);
            this.mainBgNode.addChild(_focusNode);
            this.mainBgNode.addChild(_explainNode);
            this.mainBgNode.once(Node.EventType.TOUCH_END, () => {
              effectFade(this.mainBgNode).out().then(() => {
                this.mainBgNode.destroy();
              });
              this.doneHandler && this.doneHandler();
            });
          });
          return this;
        }
        bindDone(done) {
          this.doneHandler = done;
        }
      }
      exports('default', Guide);
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Hall_ActivityPanel.ts", ['cc', './BaseComponent.ts', './tool.ts', './globals.ts', './config.ts', './baseBoard.ts', './Hall_ShopPanel.ts', './TurntableViewModel.ts', './prefabDefine2.ts', './socketConnect.ts', './types.ts'], function (exports) {
  var cclegacy, Node, Label, sys, assetManager, Sprite, SpriteFrame, instantiate, Toggle, _decorator, BaseComponent, initToggle, sourceManageSeletor, global, lang, baseBoardView, subGameList, addToastAction, BuyType, TurntableViewModel, PrefabPathDefine, hallWebSocketDriver, SKT_MAG_TYPE, ToastType;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      Node = module.Node;
      Label = module.Label;
      sys = module.sys;
      assetManager = module.assetManager;
      Sprite = module.Sprite;
      SpriteFrame = module.SpriteFrame;
      instantiate = module.instantiate;
      Toggle = module.Toggle;
      _decorator = module._decorator;
    }, function (module) {
      BaseComponent = module.BaseComponent;
    }, function (module) {
      initToggle = module.initToggle;
    }, function (module) {
      sourceManageSeletor = module.sourceManageSeletor;
      global = module.global;
      lang = module.lang;
      baseBoardView = module.baseBoardView;
    }, function (module) {
      subGameList = module.subGameList;
    }, function (module) {
      addToastAction = module.addToastAction;
    }, function (module) {
      BuyType = module.BuyType;
    }, function (module) {
      TurntableViewModel = module.default;
    }, function (module) {
      PrefabPathDefine = module.PrefabPathDefine;
    }, function (module) {
      hallWebSocketDriver = module.hallWebSocketDriver;
      SKT_MAG_TYPE = module.SKT_MAG_TYPE;
    }, function (module) {
      ToastType = module.ToastType;
    }],
    execute: function () {
      var _dec, _class;
      cclegacy._RF.push({}, "2ddc89n0eBCoJELbBprGNgx", "Hall_ActivityPanel", undefined);
      const {
        ccclass,
        property
      } = _decorator;

      /**活动类型 */
      let ActivityType = exports('ActivityType', /*#__PURE__*/function (ActivityType) {
        ActivityType[ActivityType["TURNPLATE"] = 998] = "TURNPLATE";
        ActivityType[ActivityType["TELEGRAM"] = 999] = "TELEGRAM";
        return ActivityType;
      }({}));
      let Hall_ActivityPanel = exports('Hall_ActivityPanel', (_dec = ccclass('Hall_ActivityPanel'), _dec(_class = class Hall_ActivityPanel extends BaseComponent {
        constructor(...args) {
          super(...args);
          this.turntableViewModel = void 0;
          this.turntableIndex = void 0;
          this.propertyNode = {
            props_btn_tips_close: new Node(),
            props_ToggleGroup: new Node(),
            /**主图 */
            props_img_content: new Node(),
            props_loading_img: new Node(),
            props_content: new Node(),
            props_Label_content: new Label(),
            props_empty: new Label(),
            props_empty_content: new Label(),
            props_Toggle_template: new Node(),
            /**跳转飞机活动按钮 */
            props_jumpTo_Telegram: new Node()
          };
          this.props = {
            activityList: [],
            isTurntable: null
          };
          this.events = {
            onClosePanel: () => {},
            setReadStatus: value => {},
            deleteReadStatus: value => {},
            getItemUnreadStatus: value => {
              return false;
            }
          };
        }
        start() {}
        initState() {
          return {
            chooseActivityIndex: -1
          };
        }
        bindEvent() {
          this.propertyNode.props_btn_tips_close.on(Node.EventType.TOUCH_END, () => {
            this.events.onClosePanel();
          });
          this.propertyNode.props_jumpTo_Telegram.on(Node.EventType.TOUCH_END, () => {
            //跳转到飞机活动
            sys.openURL("https://t.me/rummy520");
          });
          let lastQeqPicUrl = "";
          this.useState((key, value) => {
            const item = this.props.activityList[value.cur];
            this.propertyNode.props_jumpTo_Telegram.active = false;
            if (item.gameId === ActivityType.TURNPLATE) {
              // 转盘逻辑
              this.propertyNode.props_img_content.active = false;
              if (this.turntableViewModel) {
                this.turntableViewModel.comp.node.active = true;
              } else {
                hallWebSocketDriver.sktMsgListener.add(SKT_MAG_TYPE.TURNTABLEDATA, "activity", (data, error) => {
                  if (error) return;
                  if (data[0]) {
                    this.node && (this.turntableViewModel = new TurntableViewModel().mountView(sourceManageSeletor().getFile(PrefabPathDefine.HELL_ACTIVITY_TURNTABLEPANL).source).appendTo(this.node).setEvent({
                      setReadStatus: value => {
                        this.events.setReadStatus(item.id);
                        this.setToggleItemReadStatus(item);
                      }
                    }).setProps({
                      TurntableData: data[0]
                    }));
                    if (data[0].count > 0) {
                      this.setToggleItemReadStatus(item, false);
                    }
                  } else {
                    this.setToggleItemReadStatus(item);
                    global.hallDispatch(addToastAction({
                      content: lang.write(k => k.HallModule.TurntableCue, {}, {
                        placeStr: "对不起,该活动已结束!"
                      }),
                      type: ToastType.ERROR
                    }));
                  }
                });
                hallWebSocketDriver.sendSktMessage(SKT_MAG_TYPE.TURNTABLEDATA);
              }
            } else {
              this.turntableViewModel && (this.turntableViewModel.comp.node.active = false);
              this.propertyNode.props_loading_img.active = true;
              if (item.content) {
                this.propertyNode.props_content.active = true;
                this.propertyNode.props_Label_content.string = item.content;
              } else {
                this.propertyNode.props_content.active = false;
              }
              this.propertyNode.props_img_content.active = false;
              lastQeqPicUrl = item.pictureUrl;
              item.pictureUrl && assetManager.loadRemote(item.pictureUrl, (err, asset) => {
                this.propertyNode && (this.propertyNode.props_loading_img.active = false);
                if (this.propertyNode && !err && lastQeqPicUrl === asset.nativeUrl) {
                  this.propertyNode.props_img_content.active = true;
                  this.propertyNode.props_img_content.getComponent(Sprite).spriteFrame = SpriteFrame.createWithImage(asset);
                }
                this.propertyNode && (this.propertyNode.props_jumpTo_Telegram.active = item.gameId === ActivityType.TELEGRAM);
                if (err) {
                  global.hallDispatch(addToastAction({
                    content: lang.write(k => k.HallModule.LoadFaild, {}, {
                      placeStr: "加载资源失败"
                    }),
                    type: ToastType.ERROR,
                    forceLandscape: false
                  }));
                }
              });
              this.setToggleItemReadStatus(item);
            }
          }, ["chooseActivityIndex"]);
          //点击图片跳转
          this.propertyNode.props_img_content.on(Node.EventType.TOUCH_END, () => {
            if (!this.props.activityList.length) return;
            const detailUrl = this.props.activityList[this.state.chooseActivityIndex].detailUrl;
            const gameId = this.props.activityList[this.state.chooseActivityIndex].gameId;
            if (gameId === ActivityType.TELEGRAM) return;
            detailUrl && sys.openURL(detailUrl);
            // detailUrl && ModalBox.Instance().show({ url: detailUrl })

            if (!baseBoardView.mainPanelViewModel.comp.gateViewModelList) {
              //可能在登录页打开活动页触发
              return;
            }
            if (gameId !== null && gameId !== -1) {
              if (gameId === 0) {
                //打开商城
                global.openShop();
              } else if (gameId === 990) {
                //商城礼包
                global.openShop(BuyType.TAS);
              } else if (gameId === 991) {
                //首冲礼包
                baseBoardView.mainPanelViewModel.openGiftBoxPanel(false);
              } else if (gameId === 992) {
                //绑定手机
                baseBoardView.mainPanelViewModel.openUpgradePanel();
              } else if (gameId === 993) {
                // 每日签到
                global.openSign();
              } else if (gameId === 994) {
                // vip主界面
                global.openVipMain();
              } else if (gameId === 995) {
                // 个人中心
                global.openPersonCenter(1);
              } else if (gameId === 996) {
                // 分佣
                global.openPersonCenter(4);
              } else if (gameId === 997) {
                // 返佣
                global.openPersonCenter(6);
              } else if (gameId === ActivityType.TURNPLATE) ;else {
                const hallGameGate = subGameList.find(i => i.gameId === this.props.activityList[this.state.chooseActivityIndex].gameId);
                if (hallGameGate) {
                  const gateViewModel = baseBoardView.mainPanelViewModel.comp.gateViewModelList.find(vm => vm.comp.props.gamesIds.indexOf(hallGameGate.gameId) !== -1);
                  // global.hallDispatch(setLoadingAction({ isShow: true }))
                  gateViewModel.comp.openGateGame(hallGameGate.gameId);
                } else {
                  global.hallDispatch(addToastAction({
                    content: lang.write(k => k.HallModule.HallGameLoading, {
                      id: this.props.activityList[this.state.chooseActivityIndex].gameId
                    }, {
                      placeStr: "无效的gameId:${this.props.activityList[this.state.chooseActivityIndex}"
                    }),
                    type: ToastType.ERROR
                  }));
                }
              }
            }

            // this.props.activityList[this.state.chooseActivityIndex].detailUrl && sys.openURL(this.props.activityList[this.state.chooseActivityIndex].detailUrl)
            // if (this.props.activityList[this.state.chooseActivityIndex].gameId !== -1) {
            // 	if (this.state.chooseActivityIndex !== -1 && this.props.activityList[this.state.chooseActivityIndex].gameId !== 0) {
            // 		const hallGameGate: HallGameGateType = subGameList.find(i => i.gameId === this.props.activityList[this.state.chooseActivityIndex].gameId)
            // 		if (hallGameGate) {
            // 			if (!baseBoardView.mainPanelViewModel.comp.gateViewModelList) {
            // 				//可能在登录页打开活动页触发
            // 				return
            // 			}
            // 			const gateViewModel = baseBoardView.mainPanelViewModel.comp.gateViewModelList.find(vm => vm.comp.props.gamesIds.indexOf(hallGameGate.gameId) !== -1)
            // 			global.hallDispatch(setLoadingAction(true))
            // 			gateViewModel.comp.openGateGame(hallGameGate.gameId)
            // 		} else {
            // 			global.hallDispatch(addToastAction({ content: lang.write(k => k.HallModule.HallGameLoading, { id: this.props.activityList[this.state.chooseActivityIndex].gameId }, { placeStr: "无效的gameId:${this.props.activityList[this.state.chooseActivityIndex}" }) }))
            // 		}
            // 	} else if (this.props.activityList[this.state.chooseActivityIndex].gameId === 0 && sys.localStorage.getItem('token')) {
            // 		// 打开商城
            // 		global.openShop()
            // 	}
            // }
          });

          initToggle(this.propertyNode.props_ToggleGroup, this.node, new Hall_ActivityPanel.EventHandler(), "Hall_ActivityPanel", "toggleCallback");
        }
        useProps(key, value) {
          const template = instantiate(this.propertyNode.props_Toggle_template);
          // this.propertyNode.props_ToggleGroup.removeAllChildren()
          if (key === "activityList") {
            this.props.activityList.length && (this.propertyNode.props_empty.node.active = false);
            this.propertyNode.props_ToggleGroup.removeAllChildren();
            this.props.activityList.forEach((item, i) => {
              const itemNode = instantiate(template);
              itemNode.name = "act_" + item.id;
              itemNode.getChildByName("Label_off").getComponent(Label).string = item.name;
              itemNode.getChildByName("Checkmark").getChildByName("Label_in").getComponent(Label).string = item.name;
              itemNode.getChildByName("unread").active = this.events.getItemUnreadStatus(item.id);
              this.propertyNode.props_ToggleGroup.addChild(itemNode);
              itemNode.active = true;
              if (item.gameId === ActivityType.TURNPLATE && this.props.isTurntable) {
                this.turntableIndex = i;
                itemNode.getComponent(Toggle).isChecked = true;
              }
            });
            if (this.props.activityList.length) {
              this.setState({
                chooseActivityIndex: this.props.isTurntable ? this.turntableIndex : 0
              });
              this.propertyNode.props_empty_content.node.active = false;
              // this.propertyNode.props_content.active = true
            }
          }
        }

        toggleCallback(event, customEventData) {
          const chooseIndex = event.target['parent'].children.indexOf(event.target);
          this.setState({
            chooseActivityIndex: chooseIndex
          });
        }
        setToggleItemReadStatus(item, isRead = true) {
          if (isRead) {
            this.events.setReadStatus(item.id + '');
          } else {
            this.events.deleteReadStatus(item.id + '');
          }
          const itemNode = this.propertyNode.props_ToggleGroup.children.find(v => v.name === "act_" + item.id);
          itemNode && (itemNode.getChildByName("unread").active = !isRead);
        }
        bindUI() {}
        onDestroy() {
          hallWebSocketDriver.sktMsgListener.remove(SKT_MAG_TYPE.TURNTABLEDATA, "activity");
        }
        update(deltaTime) {}
      }) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Hall_AppDownLoadGuide.ts", ['cc', './BaseComponent.ts', './hallConfig.ts', './bridge.ts', './tool.ts'], function (exports) {
  var cclegacy, Node, Button, tween, Vec3, UITransform, sys, _decorator, BaseComponent, config, getPackageName, getNodePositionInCanvas;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      Node = module.Node;
      Button = module.Button;
      tween = module.tween;
      Vec3 = module.Vec3;
      UITransform = module.UITransform;
      sys = module.sys;
      _decorator = module._decorator;
    }, function (module) {
      BaseComponent = module.BaseComponent;
    }, function (module) {
      config = module.config;
    }, function (module) {
      getPackageName = module.getPackageName;
    }, function (module) {
      getNodePositionInCanvas = module.getNodePositionInCanvas;
    }],
    execute: function () {
      var _dec, _class;
      cclegacy._RF.push({}, "134b6wVJxRJ5LRuxxYcUjU3", "Hall_AppDownLoadGuide", undefined);
      const {
        ccclass,
        property
      } = _decorator;
      let Hall_AppDownLoadGuide = exports('Hall_AppDownLoadGuide', (_dec = ccclass('Hall_AppDownLoadGuide'), _dec(_class = class Hall_AppDownLoadGuide extends BaseComponent {
        constructor(...args) {
          super(...args);
          this.propertyNode = {
            props_blockBg: new Node(),
            props_spr_guide_bg: new Node(),
            props_downLoad_btu: new Button(),
            props_btn_off: new Button(),
            props_btn_download: new Button()
          };
          this.props = {};
          this.events = {
            preGoToDownLoad: () => ""
          };
        }
        start() {}
        initState() {
          return {};
        }
        bindEvent() {
          this.propertyNode.props_btn_off.node.on(Node.EventType.TOUCH_END, () => {
            this.downLoadPanelTroggle(false);
          });
          this.propertyNode.props_btn_download.node.on(Node.EventType.TOUCH_END, () => {
            this.gotoDownload();
          });
          this.propertyNode.props_downLoad_btu.node.on(Node.EventType.TOUCH_END, () => {
            this.downLoadPanelTroggle(true);
          });
        }
        useProps(key, value) {}
        bindUI() {
          // const isGuide = (sys.os === sys.OS.ANDROID && getPackageName() === 'web') || (sys.os === sys.OS.IOS && !window.navigator['standalone']) || sys.os === sys.OS.OSX || sys.os === sys.OS.WINDOWS
          // this.propertyNode.props_downLoad_btu.node.active = isGuide
          // this.propertyNode.props_blockBg.active = isGuide
        }
        downLoadPanelTroggle(isShow) {
          if (!isShow) {
            const targetNodePosition = getNodePositionInCanvas(this.propertyNode.props_downLoad_btu.node);
            const {
              x,
              y,
              z
            } = this.propertyNode.props_spr_guide_bg.position;
            this.downLoadBtuTroggle(true);
            tween(this.propertyNode.props_spr_guide_bg).to(0.2, {
              position: targetNodePosition,
              scale: new Vec3(0, 0, 0)
            }).call(() => {
              this.propertyNode.props_blockBg.active = false;
            }).start();
          } else {
            this.downLoadBtuTroggle(false);
            this.propertyNode.props_blockBg.active = true;
            tween(this.propertyNode.props_spr_guide_bg).to(0.2, {
              position: new Vec3(0, 0, 0),
              scale: new Vec3(1, 1, 1)
            }).start();
          }
        }
        downLoadBtuTroggle(isShow) {
          const {
            x,
            y,
            z
          } = this.propertyNode.props_downLoad_btu.node.position;
          if (isShow) {
            tween(this.propertyNode.props_downLoad_btu.node).to(0.3, {
              position: new Vec3(x + this.propertyNode.props_downLoad_btu.node.getComponent(UITransform).width, y, z)
            }).start();
          } else {
            tween(this.propertyNode.props_downLoad_btu.node).to(0.3, {
              position: new Vec3(x - this.propertyNode.props_downLoad_btu.node.getComponent(UITransform).width, y, z)
            }).start();
          }
        }
        gotoDownload() {
          const openUrl = this.events.preGoToDownLoad();
          sys.openURL(openUrl || (sys.os === sys.OS.IOS ? config.appleAppDumpUrl : `${config.appDumpUrl}?pkgId=` + getPackageName()));
        }
        update(deltaTime) {}
      }) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Hall_BankPanel.ts", ['cc', './BaseComponent.ts', './InputValidator.ts', './tool.ts', './hallConfig.ts', './index5.ts', './GameConfig.ts'], function (exports) {
  var cclegacy, Node, Button, EditBox, Toggle, sys, Label, _decorator, BaseComponent, InputValidator, setCookie, getCookie, config, getStore, getIsTest;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      Node = module.Node;
      Button = module.Button;
      EditBox = module.EditBox;
      Toggle = module.Toggle;
      sys = module.sys;
      Label = module.Label;
      _decorator = module._decorator;
    }, function (module) {
      BaseComponent = module.BaseComponent;
    }, function (module) {
      InputValidator = module.default;
    }, function (module) {
      setCookie = module.setCookie;
      getCookie = module.getCookie;
    }, function (module) {
      config = module.config;
    }, function (module) {
      getStore = module.getStore;
    }, function (module) {
      getIsTest = module.getIsTest;
    }],
    execute: function () {
      var _dec, _class;
      cclegacy._RF.push({}, "a7d6fKqWaNJQoyELaRyHya/", "Hall_BankPanel", undefined);
      const {
        ccclass,
        property
      } = _decorator;
      var ShowModelType = /*#__PURE__*/function (ShowModelType) {
        ShowModelType[ShowModelType["NONE"] = -1] = "NONE";
        ShowModelType[ShowModelType["VERIFY"] = 0] = "VERIFY";
        ShowModelType[ShowModelType["MAIN_PANEL"] = 1] = "MAIN_PANEL";
        ShowModelType[ShowModelType["SET_PWD"] = 2] = "SET_PWD";
        return ShowModelType;
      }(ShowModelType || {});
      let TrasferDirectionType = exports('TrasferDirectionType', /*#__PURE__*/function (TrasferDirectionType) {
        TrasferDirectionType[TrasferDirectionType["SETOR"] = 1] = "SETOR";
        TrasferDirectionType[TrasferDirectionType["MENGAMBILF"] = 2] = "MENGAMBILF";
        return TrasferDirectionType;
      }({}));
      let Hall_BankPanel = exports('Hall_BankPanel', (_dec = ccclass('Hall_BankPanel'), _dec(_class = class Hall_BankPanel extends BaseComponent {
        constructor(...args) {
          super(...args);
          this.propertyNode = {
            /**关闭验证框按钮 */
            props_btn_close_verify: new Node(),
            /**设置密码按钮 */
            props_btn_set: new Node(),
            props_bank_goin: new Node(),
            props_main_panel: new Node(),
            props_bank_set: new Node(),
            /**关闭设置密码按钮 */
            props_btn_close_set: new Node(),
            /**验证确认 */
            props_btn_sure_verify: new Node(),
            /**关闭主窗体 */
            props_btn_main_close: new Node(),
            /**确认重设密码按钮 */
            props_set_btn_sure: new Node(),
            /**密码输入框 */
            props_intput_phone_phoneNum: new Node(),
            /**是否今日免登录 */
            props_Toggle_bank_goin: new Node(),
            /**设置密码，填入登录密码 */
            props_intput_sandi_pwd: new Node(),
            /**设置银行密码 */
            props_intput_bank_set_pwd: new Node(),
            /**存取额度 */
            props_EditBox_meng_goldNum: new Node(),
            /**存按钮 */
            props_btn_bank_setor: new Node(),
            /**取 */
            props_btn_bank_meng: new Node(),
            /**保险箱余额 */
            props_Label_akun_num: new Node(),
            /**银行余额 */
            props_Label_saldo_num: new Node(),
            /**打开记录按钮 */
            props_btn_history: new Button()
          };
          this.props = {
            memberAssetGoldPieces: 0,
            memberAssetSafeGoldPieces: 0
          };
          this.events = {
            onClosePanel: () => {},
            isMustSetPwd: () => new Promise(resolve => resolve(false)),
            verifyPwd: (pwd, isToadyAutoLogin) => new Promise(resolve => resolve(false)),
            transferCapital: (amount, direction) => new Promise(resolve => resolve(false)),
            setBankPassword: (loginPassword, safePassword) => new Promise(resolve => resolve(false))
          };
          this.needCloseForce = false;
        }
        start() {}
        initState() {
          return {
            showModel: ShowModelType.NONE
          };
        }
        bindEvent() {
          /**关闭验证界面 */
          this.propertyNode.props_btn_close_verify.on(Node.EventType.TOUCH_END, () => {
            this.events.onClosePanel();
          });
          /**验证确认 */
          this.propertyNode.props_btn_sure_verify.on(Node.EventType.TOUCH_END, () => {
            const str = this.propertyNode.props_intput_phone_phoneNum.getComponent(EditBox).string;
            const isToadyAutoLogin = this.propertyNode.props_Toggle_bank_goin.getComponent(Toggle).isChecked;
            new InputValidator().begin().isNotEmpty(str).done(() => {
              this.events.verifyPwd(str, isToadyAutoLogin).then(() => {
                this.setState({
                  showModel: ShowModelType.MAIN_PANEL
                });
                if (isToadyAutoLogin) {
                  setCookie('autoSafeLogin', 'true', 1);
                } else {
                  setCookie('autoSafeLogin', 'true', 0);
                }
              });
            });
          });
          /**关闭主界面 */
          this.propertyNode.props_btn_main_close.on(Node.EventType.TOUCH_END, () => {
            this.events.onClosePanel();
          });
          /**打开设置密码 */
          this.propertyNode.props_btn_set.on(Node.EventType.TOUCH_END, () => {
            this.setState({
              showModel: ShowModelType.SET_PWD
            });
          });
          /**关闭修改密码框 */
          this.propertyNode.props_btn_close_set.on(Node.EventType.TOUCH_END, () => {
            if (this.needCloseForce) {
              this.events.onClosePanel();
            } else {
              this.setState({
                showModel: ShowModelType.VERIFY
              });
            }
          });
          /**确认修改密码 */
          this.propertyNode.props_set_btn_sure.on(Node.EventType.TOUCH_END, () => {
            const str = this.propertyNode.props_intput_sandi_pwd.getComponent(EditBox).string;
            const str2 = this.propertyNode.props_intput_bank_set_pwd.getComponent(EditBox).string;
            new InputValidator().begin().isNotEmpty(str).isCharLength([6, 12], str2).done(() => {
              this.events.setBankPassword(str, str2).then(() => {
                this.needCloseForce = false;
                this.setState({
                  showModel: ShowModelType.VERIFY
                });
              });
            });
          });
          this.propertyNode.props_btn_bank_setor.on(Node.EventType.TOUCH_END, () => {
            this.trasfer(this.propertyNode.props_EditBox_meng_goldNum.getComponent(EditBox).string, TrasferDirectionType.SETOR);
          });
          this.propertyNode.props_btn_bank_meng.on(Node.EventType.TOUCH_END, () => {
            this.trasfer(this.propertyNode.props_EditBox_meng_goldNum.getComponent(EditBox).string, TrasferDirectionType.MENGAMBILF);
          });
          this.propertyNode.props_btn_history.node.on(Node.EventType.TOUCH_END, () => {
            //打开记录
            sys.openURL(config.goldRecordUrl + `?token=${sys.localStorage.getItem('token')}&memberId=${getStore().getState().memberInfo.memberId}&env=${getIsTest() ? 'test' : 'pro'}`);
          });
        }
        trasfer(amount, direction) {
          if (+amount <= 0) return;
          new InputValidator().begin().isNotEmpty(amount).isDecimal(amount).done(() => {
            this.events.transferCapital(+amount, direction).then(() => {
              this.propertyNode.props_EditBox_meng_goldNum.getComponent(EditBox).string = "";
            });
          });
        }
        useProps(key, value) {
          key === "memberAssetGoldPieces" && (this.propertyNode.props_Label_saldo_num.getComponent(Label).string = value.cur.formatAmountWithCommas());
          key === "memberAssetSafeGoldPieces" && (this.propertyNode.props_Label_akun_num.getComponent(Label).string = value.cur.formatAmountWithCommas());
        }
        bindUI() {
          this.useState((key, value) => {
            this.propertyNode.props_bank_goin.active = false;
            this.propertyNode.props_main_panel.active = false;
            this.propertyNode.props_bank_set.active = false;
            value.cur === ShowModelType.VERIFY && (this.propertyNode.props_bank_goin.active = true);
            value.cur === ShowModelType.MAIN_PANEL && (this.propertyNode.props_main_panel.active = true);
            value.cur === ShowModelType.SET_PWD && (this.propertyNode.props_bank_set.active = true);
          }, ["showModel"]);
          this.events.isMustSetPwd().then(result => {
            if (!this) return;
            if (result) {
              this.needCloseForce = true;
              this.setState({
                showModel: ShowModelType.SET_PWD
              });
            } else {
              this.needCloseForce = false;
              if (getCookie("autoSafeLogin")) {
                this.setState({
                  showModel: ShowModelType.MAIN_PANEL
                });
              } else {
                this.setState({
                  showModel: ShowModelType.VERIFY
                });
              }
            }
          });
        }
        update(deltaTime) {}
      }) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Hall_Baseboard.ts", ['cc', './BaseComponent.ts', './baseBoard.ts', './index.mjs_cjs=&original=2.js', './config.ts', './BundleSplit.ts', './globals.ts', './soundDefine2.ts', './bridge.ts', './WebSocketStarter.ts', './languagePkg.ts', './GameConfig.ts', './hallType2.ts', './types.ts', './index2.js'], function (exports) {
  var cclegacy, Node, Button, Label, director, game, Game, assetManager, Prefab, instantiate, Vec3, tween, _decorator, BaseComponent, setLoadingAction, setSocketConnectStatus, setSubGameRunState, setSubGameInfoAction, subGameList, BundleSplit, baseBoardView, hallAudio, lang, global, SoundPathDefine, sendNativeVibrate, WebSocketStarter, LanguageItemType, getIsTest, getEnvKey, SubGameRunState, ToastType, ToastPosition, _cjsExports;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      Node = module.Node;
      Button = module.Button;
      Label = module.Label;
      director = module.director;
      game = module.game;
      Game = module.Game;
      assetManager = module.assetManager;
      Prefab = module.Prefab;
      instantiate = module.instantiate;
      Vec3 = module.Vec3;
      tween = module.tween;
      _decorator = module._decorator;
    }, function (module) {
      BaseComponent = module.BaseComponent;
    }, function (module) {
      setLoadingAction = module.setLoadingAction;
      setSocketConnectStatus = module.setSocketConnectStatus;
      setSubGameRunState = module.setSubGameRunState;
      setSubGameInfoAction = module.setSubGameInfoAction;
    }, null, function (module) {
      subGameList = module.subGameList;
    }, function (module) {
      BundleSplit = module.default;
    }, function (module) {
      baseBoardView = module.baseBoardView;
      hallAudio = module.hallAudio;
      lang = module.lang;
      global = module.global;
    }, function (module) {
      SoundPathDefine = module.SoundPathDefine;
    }, function (module) {
      sendNativeVibrate = module.sendNativeVibrate;
    }, function (module) {
      WebSocketStarter = module.default;
    }, function (module) {
      LanguageItemType = module.LanguageItemType;
    }, function (module) {
      getIsTest = module.getIsTest;
      getEnvKey = module.getEnvKey;
    }, function (module) {
      SubGameRunState = module.SubGameRunState;
    }, function (module) {
      ToastType = module.ToastType;
      ToastPosition = module.ToastPosition;
    }, function (module) {
      _cjsExports = module.default;
    }],
    execute: function () {
      var _dec, _class;
      cclegacy._RF.push({}, "08afaFjMwdLE6aCtkXXR/3y", "Hall_Baseboard", undefined);
      const {
        ccclass,
        property
      } = _decorator;
      let Hall_Baseboard = exports('Hall_Baseboard', (_dec = ccclass('Hall_Baseboard'), _dec(_class = class Hall_Baseboard extends BaseComponent {
        constructor(...args) {
          super(...args);
          this.toastTimer = 0;
          this.openGameId = 0;
          this.connectRetryDone = true;
          this.propertyNode = {
            /**底板重启 */
            props_restart: new Node(),
            /**底板重启按钮 */
            props_Button_restart: new Node(),
            /**toast模板节点(正常提示) */
            props_toast_template_normal: new Node(),
            /**toast模板节点(错误提示) */
            props_toast_template_error: new Node(),
            /**放置toast的包裹节点 */
            props_toastWrap_bottom: new Node(),
            props_toastWrap_middle: new Node(),
            props_toastWrap_top: new Node(),
            /**放置主内容的面板 */
            props_mainBoard: new Node(),
            /**加载中的节点 */
            props_loading: new Node(),
            /**关闭loading */
            props_btn_close_loading: new Button(),
            /**盛放子游戏的node */
            props_subGameBoard: new Node(),
            /**游戏的头部框 */
            // props_subGameBoardHeader: new Node(),
            /**关闭按钮 */
            // props_closeButton: new Node(),
            /**加载图 */
            props_icon_dating_loading: new Node(),
            /**头部条 */
            // props_subGameHeader: new Node(),
            /**断链提示面板 */
            props_disconnect_panel: new Node(),
            props_main_bg_rec: new Node(),
            /**跑马灯 */
            props_marquee: new Node(),
            /**中奖通告 */
            props_winnerBox: new Node(),
            /**断链提示面板 */
            // props_disconnect_panel: new Node(),
            /**网络无法连接提示 */
            props_spr_remind_content: new Node(),
            props_connect_tip: new Label(),
            /**关闭和重试连接外框 */
            props_user_opa: new Node(),
            /**连接关闭，退出 */
            props_sokt_close: new Button(),
            /**连接重试 */
            props_sokt_retry: new Button(),
            /**内部版本提示 */
            props_insideVersion: new Node(),
            /**拉帘 */
            props_offloading: new Node(),
            /**toast外围 */
            props_toastWrap: new Node()
          };
          this.loadingCommandMap = {};
          this.disableconnectCancle = 0;
          this.lastHideAppTime = 0;
          this.props = {
            toastData: {
              content: "",
              type: ToastType.NORMAL,
              position: ToastPosition.MIDDLE,
              forceLandscape: false
            },
            // isLoading: false,
            // loadingFlagId: '_',
            // isAllowCloseLoading: false,
            loadPayload: {
              isShow: false,
              isAllowCloseLoading: false,
              flagId: '_'
            },
            openGameInfo: null,
            isConnect: true,
            remainRetryCount: 0
          };
          this.events = {
            toastDone: () => {},
            onGameClose: () => {}
          };
          this.closeGameHandler = void 0;
          this.closeGameHandlerTempList = [];
        }
        start() {}
        initState() {
          return {};
        }
        bindEvent() {
          // this.propertyNode.props_Button_restart.on(Node.EventType.TOUCH_END, () => {
          // 	sys.isNative && game.restart()
          // })

          // this.propertyNode.props_subGameHeader.getChildByName("Up_Left").getChildByName("Back_Bg").on(Node.EventType.TOUCH_END, () => {
          // 	// this.closeSubGame()
          // 	(find("Canvas/baseBoard").getComponent('Hall_Baseboard') as any).closeSubGame()
          // })
          this.propertyNode.props_btn_close_loading.node.on(Node.EventType.TOUCH_END, () => {
            this.dispatch(setLoadingAction({
              isShow: false,
              flagId: ''
            }));
          });
          this.propertyNode.props_sokt_close.node.on(Node.EventType.TOUCH_END, () => {
            // game.restart()
            baseBoardView.mainPanelViewModel && baseBoardView.mainPanelViewModel.logOut(false, '');
            this.dispatch(setSocketConnectStatus({
              isConnect: true
            }));
          });
          this.propertyNode.props_sokt_retry.node.on(Node.EventType.TOUCH_END, () => {
            WebSocketStarter.Instance().remainRetryCount = WebSocketStarter.Instance().maxReconnectTime;
            WebSocketStarter.Instance().reConnect(true);
            // if (!this.connectRetryDone) {
            // 	console.log('wait please')
            // 	return
            // }
            // this.dispatch(setSocketConnectStatus({ isConnect: false, remainRetryCount: 1 }))

            // sktInstance.reConnectTimes = 0
            // this.connectRetryDone = false
            // sktInstance.reconnect().then(() => {
            // 	this.connectRetryDone = true
            // }).catch(() => {
            // 	this.connectRetryDone = true
            // })
          });
        }

        useProps(key, value) {
          if (key === "toastData") {
            if (!_cjsExports(value.pre, value.cur) && value.cur.content) {
              this.addToast(value.cur);
            }
          }
          if (key === "loadPayload") {
            const keys = Object.keys(this.loadingCommandMap);
            if (this.props.loadPayload.isShow) {
              //打开加载
              if (this.props.loadPayload.flagId) {
                const isExistKey = Object.keys(this.loadingCommandMap).some(k => k === this.props.loadPayload.flagId);
                this.loadingCommandMap['lf_' + this.props.loadPayload.flagId] = 'enable';
                isExistKey && getIsTest() && console.warn(`load flig '${this.props.loadPayload.flagId}' has exist`);
              } else {
                console.warn(`no load flig`);
              }
              this.propertyNode.props_loading.active = true;
            } else {
              //关闭加载
              if (!this.props.loadPayload.flagId) {
                // 复原
                this.loadingCommandMap = {};
                this.propertyNode.props_loading.active = false;
              } else {
                if (this.loadingCommandMap['lf_' + this.props.loadPayload.flagId]) {
                  delete this.loadingCommandMap['lf_' + this.props.loadPayload.flagId];
                }
                if (!Object.keys(this.loadingCommandMap).some(k => k.includes('lf_'))) {
                  //所有的flag都不存在了才关闭
                  this.propertyNode.props_loading.active = false;
                }
              }
            }

            // this.propertyNode.props_loading.active = this.props.loadPayload.isShow
            this.propertyNode.props_btn_close_loading.node.active = this.props.loadPayload.isAllowCloseLoading;
          }
          // if (key === "isLoading") {
          // 	this.propertyNode.props_loading.active = value.cur
          // }
          // if (key === "isAllowCloseLoading") {
          // 	this.propertyNode.props_btn_close_loading.node.active = value.cur
          // }
          if (key === "openGameInfo") {
            if (value.cur) {
              //打开游戏
              window['onLoadingBundleName'] = undefined;
              hallAudio.pause();
              hallAudio.disable = true;
              this.dispatch(setLoadingAction({
                isShow: false,
                flagId: ''
              }));
              sendNativeVibrate(200);
              baseBoardView.mainPanelViewModel.viewNode.active = false;
              // this.propertyNode.props_mainBoard.active = false
              if (!this.props.openGameInfo.isDepend) {
                this.closeGameHandler = this.closeGameHandlerTempList.find(item => item.gameId === this.props.openGameInfo.gameId).closeFn;
              }
            }
          }
          if (key === "isConnect") {
            this.propertyNode.props_disconnect_panel.active = !this.props.isConnect;
            if (!this.props.isConnect) {
              this.propertyNode.props_sokt_close.node.active = false;
              window.clearTimeout(this.disableconnectCancle);
              this.disableconnectCancle = window.setTimeout(() => {
                this.propertyNode.props_sokt_close.node.active = true;
              }, 3000);
            }
            if (!this.props.isConnect && this.props.openGameInfo && this.props.openGameInfo.isVertical) {
              this.propertyNode.props_main_bg_rec.angle = 90;
            } else {
              this.propertyNode.props_main_bg_rec.angle = 0;
            }
          }
          if (key === "remainRetryCount") {
            console.log('remainRetryCount', this.props.remainRetryCount);
            this.propertyNode.props_connect_tip.node.active = this.props.remainRetryCount > 0;
            // this.propertyNode.props_user_opa.active = this.props.remainRetryCount <= 0
            this.propertyNode.props_sokt_retry.node.active = this.props.remainRetryCount <= 0;
            this.propertyNode.props_spr_remind_content.active = this.props.remainRetryCount <= 0;
            const times = lang.languageItemType === LanguageItemType.EN ? ['', '1st', '2nd', '3rd', '4th', '5th'] : [0, 1, 2, 3, 4, 5];
            this.propertyNode.props_connect_tip.string = lang.write(k => k.WebSocketModule.socketRetryTimes, {
              times: times[WebSocketStarter.Instance().maxReconnectTime - this.props.remainRetryCount]
            }, {
              placeStr: "连接断开，正在进行第{times}次重连..."
            });
          }
        }
        bindUI() {
          director.addPersistRootNode(this.node);
          const envKey = getEnvKey();
          if (envKey === "development") {
            this.propertyNode.props_insideVersion.active = true;
            this.propertyNode.props_insideVersion.getChildByName('verLabel').getComponent(Label).string = "内部开发版";
          } else if (envKey === "test") {
            this.propertyNode.props_insideVersion.active = true;
            this.propertyNode.props_insideVersion.getChildByName('verLabel').getComponent(Label).string = "内部测试版";
          } else if (envKey === "advance") {
            this.propertyNode.props_insideVersion.active = true;
            this.propertyNode.props_insideVersion.getChildByName('verLabel').getComponent(Label).string = "内部预发版";
          } else {
            this.propertyNode.props_insideVersion.active = false;
          }
          game.on(Game.EVENT_HIDE, () => {
            //游戏切入后台
            this.lastHideAppTime = Date.now();
          });
          game.on(Game.EVENT_SHOW, () => {
            //游戏进入
            if (this.lastHideAppTime !== 0 && Date.now() - this.lastHideAppTime > 24 * 60 * 60 * 1000) {
              //Hide超过一天就要重启
              game.restart();
            }
          });
          // new MarqueeViewModel().mountView(sourceManageSeletor("common").getFile(PrefabPathDefine.MARQUEE).source).appendTo(this.propertyNode.props_marquee).connect()
        }

        /**开始初始化子游戏 */
        beginInitSubGame(gameInfo) {
          // if (this.openGameId) return
          window.HALL_GLOBAL.currGameConfig = gameInfo;
          // 打开游戏底板
          this.propertyNode.props_subGameBoard.active = true;
          this.openGameId = gameInfo.gameId;
          if (gameInfo.isDepend) {
            this.showGameLoading(gameInfo);
          } else {
            const result = gameInfo.startUpHandler(this.propertyNode.props_subGameBoard);
            // 处理 Promise 返回值
            if (result instanceof Promise) {
              result.then(closeFn => {
                console.log("closeFn", closeFn.toString());
                this.updateCloseGameHandler(gameInfo.gameId, closeFn);
              }).catch(err => {
                console.error(`[Hall_Baseboard] StartUp failed for game ${gameInfo.gameId}:`, err);
                console.error(`[Hall_Baseboard] StartUp failed for game ${gameInfo.gameId}:`, err.stack);
              });
            } else {
              this.updateCloseGameHandler(gameInfo.gameId, result);
            }
          }

          // effect1(this.propertyNode.props_subGameBoard).enter().then(() => { })
          // director.loadScene("fruit777")
        }

        updateCloseGameHandler(gameId, closeFn) {
          if (this.closeGameHandlerTempList.some(i => i.gameId === gameId)) {
            this.closeGameHandlerTempList.find(i => i.gameId === gameId).closeFn = closeFn;
          } else {
            this.closeGameHandlerTempList.push({
              gameId: gameId,
              closeFn: closeFn
            });
          }
          // 如果当前打开的就是这个游戏，立即更新 closeGameHandler
          if (this.props.openGameInfo && this.props.openGameInfo.gameId === gameId) {
            this.closeGameHandler = closeFn;
          }
        }
        /**加载游戏加载界面 */
        showGameLoading(gameInfo) {
          console.error("加载游戏加载界面", gameInfo.bundleName, assetManager.bundles);
          let bundle = assetManager.getBundle(gameInfo.bundleName);
          console.error(bundle);
          let url = `prefabs/prefab_${gameInfo.bundleName}_loading`;
          bundle.load(url, Prefab, (progress, total) => {
            global.hallDispatch(setSubGameRunState(SubGameRunState.LOADING));
            global.setSubGameGate(gameInfo.gameId, progress / total);
          }, (err, pre) => {
            if (pre) {
              global.hallDispatch(setSubGameRunState(SubGameRunState.READY));
              this.dispatch(setSubGameInfoAction(gameInfo));
              baseBoardView.mainPanelViewModel.viewNode.active = false;
              // this.propertyNode.props_mainBoard.children[0].active = false;
              let nd = instantiate(pre);
              nd.parent = this.propertyNode.props_subGameBoard;
              console.error("加载预制体成功 ", url);
            } else {
              console.error("加载预制体失败 ", url);
            }
          });
        }
        /**设置大厅旋转 */
        // setShowAngle(inGame: boolean) {
        // 	return
        // 	if (inGame) {

        // 	} else {
        // 		window.HALL_GLOBAL.currGameConfig = null;
        // 	}
        // 	let nd = baseBoardView.mainPanelViewModel.viewNode.parent;
        // 	let nd1 = nd.parent.getChildByName("props_disconnect_panel");
        // 	if (window.HALL_GLOBAL.currGameConfig && window.HALL_GLOBAL.currGameConfig.isVertical) {
        // 		nd.angle = 90;
        // 		nd1.angle = 90;
        // 	} else {
        // 		nd.angle = 0;
        // 		nd1.angle = 0;
        // 	}
        // }
        closeSubGame() {
          if (!this.props.openGameInfo) return;
          this.openGameId = 0;
          const gameId = this.props.openGameInfo.gameId;

          // 重置 runState 为 CLOSE，允许再次进入游戏
          const gameGate = subGameList.find(i => i.gameId === gameId);
          if (gameGate) {
            gameGate.runState = SubGameRunState.CLOSE;
          }

          // 立即清除这些状态，避免"操作太频繁"的报错
          window['onLoadingBundleName'] = undefined;
          this.dispatch(setSubGameInfoAction(null));
          // effect1(this.propertyNode.props_subGameBoard).out(false).then(() => { })
          // 注释掉立即解除音频禁用,移到场景销毁后再执行
          // hallAudio.disable = false
          hallAudio.playOneShot(SoundPathDefine.BTU_CLICK);
          // if (!isPre) {
          if (this.closeGameHandler) {
            this.closeGameHandler();
            // 	} else {
            // 		console.error("未返回结束游戏的方案")
          }
          // }
          baseBoardView.mainPanelViewModel.viewNode.active = true;
          // 移除退出时的 loading,避免阻挡画面造成卡顿感
          // this.dispatch(setLoadingAction({ isShow: true, flagId: 'closeGame' }))
          // this.propertyNode.props_offloading.active = true
          // this.propertyNode.props_offloading.getComponent(sp.Skeleton).animation = 'animation'
          // baseBoardView.mainPanelViewModel.openReliefPanel()
          this.scheduleOnce(() => {
            this.propertyNode.props_subGameBoard.destroyAllChildren();
            // 延迟释放 Bundle，确保节点已完全销毁
            this.scheduleOnce(() => {
              if (this.props.openGameInfo) {
                BundleSplit.releaseBundle(this.props.openGameInfo.bundleName);
              }
            }, 0.1);
          }, 0.2);
          this.scheduleOnce(() => {
            this.propertyNode.props_subGameBoard.destroyAllChildren();
            this.events.onGameClose();
            // this.propertyNode.props_subGameBoard.active = false
            this.propertyNode.props_subGameBoard.active = false;
            // 在场景销毁后再解除音频禁用和恢复音乐
            hallAudio.disable = false;
            hallAudio.resume(); //.play(SoundPathDefine.MAIN_BGM, true)
            this.closeGameHandler = undefined;
            this.dispatch(setSubGameInfoAction(null));
            // this.dispatch(setLoadingAction({ isShow: false, flagId: 'closeGame' }))
            // this.propertyNode.props_offloading.getComponent(sp.Skeleton).animation = ''
            // this.propertyNode.props_offloading.active = false
          }, 1.2);
          // this.propertyNode.props_subGameHeader.active = false
        }

        /**
         * 添加toast提示
         * @param toastObj (forceLandscape:强制横向)
         */
        addToast(toastObj) {
          let toastWrap;
          switch (toastObj.position) {
            case ToastPosition.BOTTOM:
              toastWrap = this.propertyNode.props_toastWrap_bottom;
              break;
            case ToastPosition.MIDDLE:
              toastWrap = this.propertyNode.props_toastWrap_middle;
              break;
            case ToastPosition.TOP:
              toastWrap = this.propertyNode.props_toastWrap_top;
              break;
          }
          if (toastObj.type !== ToastType.ERROR && toastObj.position === ToastPosition.BOTTOM) {
            toastWrap = this.propertyNode.props_toastWrap_middle;
          }
          toastWrap.setSiblingIndex(1000);
          const props_toast = instantiate(toastObj.type === ToastType.ERROR ? this.propertyNode.props_toast_template_error : this.propertyNode.props_toast_template_normal);
          props_toast.setPosition(new Vec3(0, 0, 0));
          props_toast.getChildByName("toastLabel").getComponent(Label).string = toastObj.content;
          props_toast.active = true;
          toastWrap.addChild(props_toast);
          props_toast.setScale(new Vec3(1, 0, 1));
          if (this.props.openGameInfo && this.props.openGameInfo.isVertical && !toastObj.forceLandscape) {
            // toastWrap.setRotationFromEuler(0, 90, 0)
            this.propertyNode.props_toastWrap.angle = 90;
          } else {
            // toastWrap.setRotationFromEuler(0, 0, 0)
            this.propertyNode.props_toastWrap.angle = 0;
          }
          tween(props_toast).to(0.1, {
            scale: new Vec3(1, 1, 1)
          }).delay(3).to(0.1, {
            scale: new Vec3(1, 0, 1)
          }).call(() => {
            props_toast.destroy();
            this.events.toastDone();
          }).start();

          // props_toast.setScale(new Vec3(1, 1, 1))
          // const { x, y, z } = props_toast.position
          // tween(props_toast).to(0.1, { position: new Vec3(x, y, z) }).delay(3).to(0.1, { position: new Vec3(x, y + 100, z) }).call(() => {
          // 	props_toast.destroy()
          // 	this.events.toastDone()
          // }).start()

          // tween(props_toast).to(0.2, { position: new Vec3(x, y) }, { easing: "backOut" }).delay(2).to(0.1, { position: new Vec3(x, y + 200) }).call(() => {
          // 	props_toast.destroy()
          // 	this.events.toastDone()
          // }).start()
        }

        getSubGameWrapNode() {
          return this.propertyNode.props_subGameBoard;
        }
        getMainBoardNode() {
          return this.propertyNode.props_mainBoard;
        }
        update(deltaTime) {}
      }) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Hall_BindPhonePanel.ts", ['cc', './BaseComponent.ts', './InputValidator.ts', './languagePkg.ts', './hallConfig.ts', './CountDowner.ts'], function (exports) {
  var cclegacy, Node, EditBox, _decorator, Label, BaseComponent, InputValidator, defaultLanguageType, config, CountDowner;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      Node = module.Node;
      EditBox = module.EditBox;
      _decorator = module._decorator;
      Label = module.Label;
    }, function (module) {
      BaseComponent = module.BaseComponent;
    }, function (module) {
      InputValidator = module.default;
    }, function (module) {
      defaultLanguageType = module.defaultLanguageType;
    }, function (module) {
      config = module.config;
    }, function (module) {
      CountDowner = module.CountDowner;
    }],
    execute: function () {
      var _dec, _class;
      cclegacy._RF.push({}, "90c55B29xVEWr/Ic4bekLzq", "Hall_BindPhonePanel", undefined);
      const {
        ccclass,
        property
      } = _decorator;
      let Hall_BindPhonePanel = exports('Hall_BindPhonePanel', (_dec = ccclass('Hall_BindPhonePanel'), _dec(_class = class Hall_BindPhonePanel extends BaseComponent {
        constructor(...args) {
          super(...args);
          this.propertyNode = {
            /**关闭 */
            props_btn_tips_close: new Node(),
            /**倒计时 */
            props_spr_send_cooling: new Node(),
            /**手机号码 */
            props_intput_phone_phoneNum: new Node(),
            /**验证码框 */
            props_intput_phone_captcha: new Node(),
            /**发送验证码 */
            props_btn_send: new Node(),
            /**确认 */
            props_btn_sure: new Node()
          };
          this.props = {
            phone: ""
          };
          this.events = {
            onClosePanel: () => {},
            sendSmsCode: phoneNumber => new Promise(reslove => reslove("")),
            modifyPhoneDone: (phoneNumber, verificationCode) => {}
          };
        }
        start() {}
        initState() {
          return {};
        }
        bindEvent() {
          /**发送验证码 */
          this.propertyNode.props_btn_send.on(Node.EventType.TOUCH_END, () => {
            const phoneNumber = this.propertyNode.props_intput_phone_phoneNum.getComponent(EditBox).string;
            new InputValidator().begin().isLocalPhoneNumber(phoneNumber).done(() => {
              window['countDowner'].begin();
              this.events.sendSmsCode(defaultLanguageType[config.country].phoneAreaNum + phoneNumber).then(code => {
                this.propertyNode.props_intput_phone_captcha.getComponent(EditBox).string = code;
              });
            });
          });
          /**确认修改 */
          this.propertyNode.props_btn_sure.on(Node.EventType.TOUCH_END, () => {
            const phoneNumber = this.propertyNode.props_intput_phone_phoneNum.getComponent(EditBox).string;
            const verificationCode = this.propertyNode.props_intput_phone_captcha.getComponent(EditBox).string;
            new InputValidator().begin().isLocalPhoneNumber(phoneNumber).isSmsCode(verificationCode).done(() => {
              this.events.modifyPhoneDone(phoneNumber, verificationCode);
            });
          });
          this.propertyNode.props_btn_tips_close.on(Node.EventType.TOUCH_END, () => {
            this.events.onClosePanel();
          });
        }
        useProps(key, value) {
          if (key === "phone") {
            this.propertyNode.props_intput_phone_phoneNum.getComponent(EditBox).string = value.cur || "";
          }
        }
        bindUI() {
          // if (window['phoneCountDown']) {
          // 	this.propertyNode.props_spr_send_cooling.active = true
          // 	this.propertyNode.props_spr_send_cooling.getChildByName("Label_send_cooling").getComponent(Label).string = window['phoneCountDown'] + "S"
          // }
          const render = (isRunning, phoneCountDown) => {
            if (!this.propertyNode) return;
            if (isRunning) {
              this.propertyNode.props_spr_send_cooling.active = true;
              this.propertyNode.props_spr_send_cooling.getChildByName("Label_send_cooling").getComponent(Label).string = phoneCountDown + "S";
            } else {
              this.propertyNode.props_spr_send_cooling.active = false;
            }
          };
          if (!window['countDowner']) {
            window['countDowner'] = new CountDowner(60, render);
          } else {
            window['countDowner'].goOn(render);
          }
        }
        update(deltaTime) {}
      }) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Hall_ChangeNickName.ts", ['cc', './BaseComponent.ts', './InputValidator.ts'], function (exports) {
  var cclegacy, EditBox, Node, _decorator, BaseComponent, InputValidator;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      EditBox = module.EditBox;
      Node = module.Node;
      _decorator = module._decorator;
    }, function (module) {
      BaseComponent = module.BaseComponent;
    }, function (module) {
      InputValidator = module.default;
    }],
    execute: function () {
      var _dec, _class;
      cclegacy._RF.push({}, "422225kLsdGgJSVYOAchP3n", "Hall_ChangeNickName", undefined);
      const {
        ccclass,
        property
      } = _decorator;
      let Hall_ChangeNickName = exports('Hall_ChangeNickName', (_dec = ccclass('Hall_ChangeNickName'), _dec(_class = class Hall_ChangeNickName extends BaseComponent {
        constructor(...args) {
          super(...args);
          this.propertyNode = {
            props_EditBox_changeName: new EditBox(),
            /**取消 */
            props_btn_set_batal: new Node(),
            /**确认 */
            props_btn_tentu: new Node()
          };
          this.props = {
            nickName: ""
          };
          this.events = {
            onCloseHandler: () => {},
            onModifyHandler: newNickName => new Promise(resolve => resolve(false))
          };
        }
        start() {}
        initState() {
          return {};
        }
        bindEvent() {
          this.propertyNode.props_btn_set_batal.on(Node.EventType.TOUCH_END, () => {
            this.events.onCloseHandler();
          });
          this.propertyNode.props_btn_tentu.on(Node.EventType.TOUCH_END, () => {
            new InputValidator().begin().isCharLength([2, 16], this.propertyNode.props_EditBox_changeName.string).done(() => {
              this.events.onModifyHandler(this.propertyNode.props_EditBox_changeName.string).then(() => {
                this.events.onCloseHandler();
              });
            });
          });
        }
        useProps(key, value) {
          if (key === "nickName") this.propertyNode.props_EditBox_changeName.string = value.cur;
        }
        bindUI() {}
        update(deltaTime) {}
      }) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Hall_ChangePassword.ts", ['cc', './BaseComponent.ts', './globals.ts', './baseBoard.ts', './InputValidator.ts', './apiUrl.ts', './types.ts'], function (exports) {
  var cclegacy, Button, EditBox, Node, _decorator, BaseComponent, global, lang, fetcher, addToastAction, InputValidator, ApiUrl, ToastType;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      Button = module.Button;
      EditBox = module.EditBox;
      Node = module.Node;
      _decorator = module._decorator;
    }, function (module) {
      BaseComponent = module.BaseComponent;
    }, function (module) {
      global = module.global;
      lang = module.lang;
      fetcher = module.fetcher;
    }, function (module) {
      addToastAction = module.addToastAction;
    }, function (module) {
      InputValidator = module.default;
    }, function (module) {
      ApiUrl = module.ApiUrl;
    }, function (module) {
      ToastType = module.ToastType;
    }],
    execute: function () {
      var _dec, _class;
      cclegacy._RF.push({}, "8d7edfh3GdOz7AjpJyf8vgs", "Hall_ChangePassword", undefined);
      const {
        ccclass,
        property
      } = _decorator;
      let Hall_ChangePassword = exports('Hall_ChangePassword', (_dec = ccclass('Hall_ChangePassword'), _dec(_class = class Hall_ChangePassword extends BaseComponent {
        constructor(...args) {
          super(...args);
          this.propertyNode = {
            props_btn_spr_change_close: new Button(),
            props_btn_sure: new Button(),
            /**旧密码 */
            props_intput_sandiL: new EditBox(),
            /**新密码 */
            props_intput_sandiB: new EditBox(),
            /**密码确认 */
            props_intput_kSandi: new EditBox()
          };
          this.props = {};
          this.events = {
            onClosePanel: () => {},
            doneHandler: () => {}
          };
        }
        start() {}
        initState() {
          return {};
        }
        bindEvent() {
          this.propertyNode.props_btn_spr_change_close.node.on(Node.EventType.TOUCH_END, () => {
            this.events.onClosePanel();
          });
          // 确认
          this.propertyNode.props_btn_sure.node.on(Node.EventType.TOUCH_END, () => {
            const oldPwd = this.propertyNode.props_intput_sandiL.string.trim();
            const newPwd = this.propertyNode.props_intput_sandiB.string.trim();
            const newPwd_re = this.propertyNode.props_intput_kSandi.string.trim();
            if (newPwd !== newPwd_re) {
              global.hallDispatch(addToastAction({
                content: lang.write(k => k.HallModule.pwdRepetitionError, {}, {
                  placeStr: "两次输入的密码不一致"
                }),
                type: ToastType.ERROR
              }));
              return;
            }
            new InputValidator().begin().isCharLength([6, 30], oldPwd).isCharLength([6, 30], newPwd).isCharLength([6, 30], newPwd_re).done(() => {
              fetcher.send(ApiUrl.RESET_PASSWORD, {
                password: newPwd,
                oldPassword: oldPwd
              }).then(data => {
                //操作成功
                global.hallDispatch(addToastAction({
                  content: lang.write(k => k.BindPhoneModule.BindPhoneChange, {}, {
                    placeStr: "操作成功"
                  }),
                  type: ToastType.SUCCESS
                }));
                this.events.doneHandler();
              }).catch(e => {
                console.log(e);
              });
            });
          });
        }
        useProps(key, value) {}
        bindUI() {}
        update(deltaTime) {}
      }) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Hall_ChooseBank.ts", ['cc', './BaseComponent.ts', './socketConnect.ts', './globals.ts', './tool.ts', './soundDefine2.ts'], function (exports) {
  var cclegacy, Button, Node, instantiate, Label, assetManager, Sprite, SpriteFrame, _decorator, BaseComponent, hallWebSocketDriver, SKT_MAG_TYPE, hallAudio, initToggle, SoundPathDefine;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      Button = module.Button;
      Node = module.Node;
      instantiate = module.instantiate;
      Label = module.Label;
      assetManager = module.assetManager;
      Sprite = module.Sprite;
      SpriteFrame = module.SpriteFrame;
      _decorator = module._decorator;
    }, function (module) {
      BaseComponent = module.BaseComponent;
    }, function (module) {
      hallWebSocketDriver = module.hallWebSocketDriver;
      SKT_MAG_TYPE = module.SKT_MAG_TYPE;
    }, function (module) {
      hallAudio = module.hallAudio;
    }, function (module) {
      initToggle = module.initToggle;
    }, function (module) {
      SoundPathDefine = module.SoundPathDefine;
    }],
    execute: function () {
      var _dec, _class;
      cclegacy._RF.push({}, "65c422XejBD17d4IhlIVqG5", "Hall_ChooseBank", undefined);
      const {
        ccclass,
        property
      } = _decorator;
      let Hall_ChooseBank = exports('Hall_ChooseBank', (_dec = ccclass('Hall_ChooseBank'), _dec(_class = class Hall_ChooseBank extends BaseComponent {
        constructor(...args) {
          super(...args);
          this.propertyNode = {
            props_btn_spr_choose_close: new Button(),
            props_btn_sure: new Button(),
            props_Toggle_template: new Node(),
            props_toggleGroup_bank: new Node()
          };
          this.props = {
            onlyDisplayArr: []
          };
          this.events = {
            onClosePanel: () => {},
            onOrder: rechargeChannelId => {}
          };
        }
        start() {}
        initState() {
          return {
            dataList: [],
            chooseItemIndex: 0
          };
        }
        bindEvent() {
          this.propertyNode.props_btn_spr_choose_close.node.on(Node.EventType.TOUCH_END, () => {
            this.events.onClosePanel();
          });
          this.propertyNode.props_btn_sure.node.on(Node.EventType.TOUCH_END, () => {
            if (this.state.dataList.length && this.state.dataList[this.state.chooseItemIndex]) {
              this.events.onOrder(this.state.dataList[this.state.chooseItemIndex].id);
            }
          });
          hallWebSocketDriver.sktMsgListener.add(SKT_MAG_TYPE.GET_WITH_DRAW_CHANNEL, 'chooseBank', (data, error) => {
            if (error) return;
            if (this.props.onlyDisplayArr.length) {
              this.setState({
                dataList: data.filter(i => this.props.onlyDisplayArr.indexOf(i.id) !== -1)
              });
            } else {
              this.setState({
                dataList: data
              });
            }
            // global.hallDispatch(setLoadingAction({ isShow: false }))
          });

          hallWebSocketDriver.sendSktMessage(SKT_MAG_TYPE.GET_WITH_DRAW_CHANNEL, {}, {
            isLoading: true
          });
        }
        useProps(key, value) {}
        bindUI() {
          this.useState((key, value) => {
            this.state.dataList.forEach((item, index) => {
              const node = instantiate(this.propertyNode.props_Toggle_template);
              node.getChildByName("spr_bankName").getComponent(Label).string = item.name;
              assetManager.loadRemote(item.iconMax, (err, asset) => {
                if (this.propertyNode && !err) {
                  node.getChildByName("spr_bankIcon").getComponent(Sprite).spriteFrame = SpriteFrame.createWithImage(asset);
                }
              });
              node.active = true;
              this.propertyNode.props_toggleGroup_bank.addChild(node);
            });
          }, ["dataList"]);
          initToggle(this.propertyNode.props_toggleGroup_bank, this.node, new Hall_ChooseBank.EventHandler(), "Hall_ChooseBank", "channelToggleCallback");
        }
        channelToggleCallback(event, customEventData) {
          hallAudio.playOneShot(SoundPathDefine.BTU_CLICK);
          const chooseIndex = event.target['parent'].children.indexOf(event.target);
          this.setState({
            chooseItemIndex: chooseIndex
          });
        }
        onDestroy() {
          hallWebSocketDriver.sktMsgListener.removeById("chooseBank");
        }
        update(deltaTime) {}
      }) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Hall_DailyTask.ts", ['cc', './BaseComponent.ts', './globals.ts', './apiUrl.ts', './tool.ts'], function (exports) {
  var cclegacy, ToggleContainer, Button, Node, instantiate, _decorator, BaseComponent, fetcher, ApiUrl, initToggle;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      ToggleContainer = module.ToggleContainer;
      Button = module.Button;
      Node = module.Node;
      instantiate = module.instantiate;
      _decorator = module._decorator;
    }, function (module) {
      BaseComponent = module.BaseComponent;
    }, function (module) {
      fetcher = module.fetcher;
    }, function (module) {
      ApiUrl = module.ApiUrl;
    }, function (module) {
      initToggle = module.initToggle;
    }],
    execute: function () {
      var _dec, _class;
      cclegacy._RF.push({}, "facefAirbBHxr5j6T8acK4r", "Hall_DailyTask", undefined);
      const {
        ccclass,
        property
      } = _decorator;
      let Hall_DailyTask = exports('Hall_DailyTask', (_dec = ccclass('Hall_DailyTask'), _dec(_class = class Hall_DailyTask extends BaseComponent {
        constructor(...args) {
          super(...args);
          this.propertyNode = {
            props_ToggleGroup_task: new ToggleContainer(),
            props_btn_guanbi: new Button(),
            props_ScrollView_topup: new Node(),
            props_right_topup: new Node(),
            props_ScrollView_login: new Node(),
            props_right_login: new Node(),
            props_ScrollView_game: new Node(),
            props_right_game: new Node(),
            props_ScrollView_share: new Node(),
            props_right_share: new Node()
          };
          this.props = {};
          this.events = {
            onCloseHandler: () => {}
          };
        }
        start() {}
        initState() {
          return {};
        }
        bindEvent() {
          this.propertyNode.props_btn_guanbi.node.on(Node.EventType.TOUCH_END, () => {
            this.events.onCloseHandler();
          });
        }
        useProps(key, value) {}
        bindUI() {
          initToggle(this.propertyNode.props_ToggleGroup_task.node, this.node, new Hall_DailyTask.EventHandler(), "Hall_DailyTask", "dailyTaskToggleCallback");
        }
        getList(typeIndex = 0) {
          fetcher.send(ApiUrl.GET_DAILY_TASK_LIST, {}).then(rsp => {
            if (typeIndex === 0) {
              const content = this.propertyNode.props_ScrollView_topup.getDeepChildByName('content');
              const templateNode = instantiate(this.propertyNode.props_right_topup);
              this.propertyNode.props_right_topup.active = false;
            }
          }).catch(e => {});
        }
        dailyTaskToggleCallback(event, customEventData) {
          this.propertyNode.props_ScrollView_topup.active = false;
          this.propertyNode.props_ScrollView_login.active = false;
          this.propertyNode.props_ScrollView_game.active = false;
          this.propertyNode.props_ScrollView_share.active = false;
          switch (event.target["name"]) {
            case 'Toggle_topUp':
              this.propertyNode.props_ScrollView_topup.active = true;
              this.getList(0);
              break;
            case 'Toggle_login':
              this.propertyNode.props_ScrollView_login.active = true;
              break;
            case 'Toggle_game':
              this.propertyNode.props_ScrollView_game.active = true;
              break;
            case 'Toggle_share':
              this.propertyNode.props_ScrollView_share.active = true;
              break;
          }
        }
        update(deltaTime) {}
      }) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Hall_GiftBag.ts", ['cc', './BaseComponent.ts', './socketConnect.ts', './globals.ts', './BaseViewModel.ts', './prefabDefine2.ts', './NodeIOEffect.ts', './ModalBox.ts', './soundDefine2.ts', './bridge.ts'], function (exports) {
  var cclegacy, Button, PageView, Node, sys, instantiate, Label, Prefab, _decorator, BaseComponent, hallWebSocketDriver, SKT_MAG_TYPE, hallAudio, lang, sourceManageSeletor, BaseViewModel, PrefabPathDefine, EffectType, ModalBox, SoundPathDefine, getPackageName;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      Button = module.Button;
      PageView = module.PageView;
      Node = module.Node;
      sys = module.sys;
      instantiate = module.instantiate;
      Label = module.Label;
      Prefab = module.Prefab;
      _decorator = module._decorator;
    }, function (module) {
      BaseComponent = module.BaseComponent;
    }, function (module) {
      hallWebSocketDriver = module.hallWebSocketDriver;
      SKT_MAG_TYPE = module.SKT_MAG_TYPE;
    }, function (module) {
      hallAudio = module.hallAudio;
      lang = module.lang;
      sourceManageSeletor = module.sourceManageSeletor;
    }, function (module) {
      BaseViewModel = module.default;
    }, function (module) {
      PrefabPathDefine = module.PrefabPathDefine;
    }, function (module) {
      EffectType = module.EffectType;
    }, function (module) {
      ModalBox = module.default;
    }, function (module) {
      SoundPathDefine = module.SoundPathDefine;
    }, function (module) {
      getPackageName = module.getPackageName;
    }],
    execute: function () {
      var _dec, _class;
      cclegacy._RF.push({}, "5d0casotmBMF4OercUwlnC7", "Hall_GiftBag", undefined);
      const {
        ccclass,
        property
      } = _decorator;
      let Hall_GiftBag = exports('Hall_GiftBag', (_dec = ccclass('Hall_GiftBag'), _dec(_class = class Hall_GiftBag extends BaseComponent {
        constructor(...args) {
          super(...args);
          this.propertyNode = {
            props_btn_close: new Button(),
            props_PageView_gift_bag: new PageView(),
            props_page_template_item: new Node(),
            props_btn_left: new Node(),
            props_btn_right: new Node()
          };
          this.props = {
            isAutoShowPopItem: false,
            giftList: null
          };
          this.events = {
            onClosePanel: () => {}
          };
        }
        start() {}
        initState() {
          return {
            giftList: []
          };
        }
        bindEvent() {
          this.propertyNode.props_btn_close.node.on(Node.EventType.TOUCH_END, () => {
            getPackageName() === 'web' && !hallAudio.getAudioInstance().playing && hallAudio.play(SoundPathDefine.MAIN_BGM, true);
            this.events.onClosePanel();
          });
          this.propertyNode.props_btn_left.on(Node.EventType.TOUCH_END, () => {
            const index = this.propertyNode.props_PageView_gift_bag.getCurrentPageIndex();
            this.propertyNode.props_PageView_gift_bag.scrollToPage(index > 0 ? index - 1 : 0);
            this.setArrowDisplay();
          });
          this.propertyNode.props_btn_right.on(Node.EventType.TOUCH_END, () => {
            // const count = this.propertyNode.props_PageView_gift_bag.getPages().length
            const count = this.propertyNode.props_PageView_gift_bag.content.children.filter(i => i.active).length;
            const index = this.propertyNode.props_PageView_gift_bag.getCurrentPageIndex();
            this.propertyNode.props_PageView_gift_bag.scrollToPage(index < count - 1 ? index + 1 : count - 1);
            this.setArrowDisplay();
          });
          this.propertyNode.props_PageView_gift_bag.node.on('page-turning', () => {
            this.setArrowDisplay();
          }, this);
          this.setArrowDisplay();
        }
        setArrowDisplay() {
          // const count = this.propertyNode.props_PageView_gift_bag.getPages().length
          const count = this.propertyNode.props_PageView_gift_bag.content.children.filter(i => i.active).length;
          const index = this.propertyNode.props_PageView_gift_bag.getCurrentPageIndex();
          this.propertyNode.props_btn_left.active = count > 1 ? true : false;
          this.propertyNode.props_btn_right.active = count > 1 ? true : false;
          if (index === 0) {
            this.propertyNode.props_btn_left.active = false;
          } else if (index + 1 === count) {
            this.propertyNode.props_btn_right.active = false;
          }
        }
        useProps(key, value) {
          if (key === "giftList") {
            if (!this.props.giftList.length) {
              hallWebSocketDriver.sendSktMessage(SKT_MAG_TYPE.GIFT_LIST, {}, {
                isLoading: true
              });
            } else {
              this.setState({
                giftList: this.props.giftList
              });
            }
          }
        }
        bindUI() {
          this.propertyNode.props_page_template_item.active = false;
          hallWebSocketDriver.sktMsgListener.add(SKT_MAG_TYPE.GIFT_LIST, "gift", (data, error) => {
            if (error) return;
            // global.hallDispatch(setLoadingAction({ isShow: false }))
            this.setState({
              giftList: data
            });
          });
          hallWebSocketDriver.sktMsgListener.add(SKT_MAG_TYPE.RECHARGE_ORDER, 'gift', (data, error) => {
            if (error) {
              return;
            } else {
              // global.hallDispatch(setLoadingAction({ isShow: false }))
              sys.openURL(data);
              // ModalBox.Instance().show({ url: data })
            }
          });

          this.useState((key, value) => {
            if (!this.state.giftList.filter(i => i.separatePage === 1).length) {
              ModalBox.Instance().show({
                content: lang.write(k => k.MainPaneModule.NoGiftData, {}, {
                  placeStr: "暂无礼包数据"
                }),
                type: "Prompt"
              }, () => {
                this.events.onClosePanel();
                return true;
              });
            }
            this.propertyNode.props_PageView_gift_bag.removeAllPages(); //.content.removeAllChildren()
            this.state.giftList.filter(i => i.separatePage === 1).forEach(async (item, index) => {
              const node = instantiate(this.propertyNode.props_page_template_item);
              node.getChildByName("label_name").getComponent(Label).string = item.giftName;
              node.getChildByName("label_gole_old").getComponent(Label).string = item.normalGoldCoin.formatAmountWithCommas();
              node.getChildByName("label_gole_old").getComponent(Label).updateRenderData(true);
              node.getChildByName("label_gole").getComponent(Label).string = item.discountCoins.formatAmountWithCommas();
              node.getChildByName("btn_buy").getChildByName("label_price_buy").getComponent(Label).string = item.amount.formatAmountWithCommas();
              node.getChildByName("label_free").getComponent(Label).string = `+${item.discountRate}%`;
              node.getChildByName("btn_buy").on(Node.EventType.TOUCH_END, async () => {
                //购买
                const chooseBankVM = new BaseViewModel('Hall_ChooseBank').mountView((await sourceManageSeletor().getFileAsync(PrefabPathDefine._HELL_CHOOSE_BANK, Prefab)).source).appendTo(this.node.parent, {
                  effectType: EffectType.EFFECT1,
                  isModal: true
                }).setEvent({
                  onClosePanel: () => {
                    chooseBankVM.unMount(EffectType.EFFECT2);
                  },
                  onOrder: rechargeChannelId => {
                    hallWebSocketDriver.sendSktMessage(SKT_MAG_TYPE.RECHARGE_ORDER, {
                      rechargeChannelId,
                      money: item.amount,
                      orderRechargeType: 2,
                      giftBagMallId: item.id
                    }, {
                      isLoading: true
                    });
                    // purchaseAppsflyerEvents(item.amount + '', 'IDR')
                  }
                }).setProps({
                  onlyDisplayArr: item.rechargeChannelIds || []
                });
              });
              node.active = true;
              this.startCountdown(node.getChildByName("props_Label_cutdown_num").getComponent(Label));
              // this.propertyNode.props_PageView_gift_bag.content.addChild(node)
              try {
                this.propertyNode.props_PageView_gift_bag.addPage(node);
              } catch (e) {
                console.log(e);
              }
            });
            this.scheduleOnce(() => {
              //加个延时是为了确认isAutoShowPopItem已经获取了值
              if (this.props && !this.props.isAutoShowPopItem) {
                this.state.giftList.forEach((item, index) => {
                  if (item.separatePage === 1) {
                    this.propertyNode.props_PageView_gift_bag.scrollToPage(index);
                  }
                });
              }
            }, 0.05);
            this.setArrowDisplay();
          }, ["giftList"]);
        }
        onDestroy() {
          hallWebSocketDriver.sktMsgListener.removeById("gift");
        }
        startCountdown(timeLabel) {
          const targetDate = new Date();
          targetDate.setDate(targetDate.getDate() + 1);
          targetDate.setHours(0);
          targetDate.setMinutes(0);
          targetDate.setSeconds(0);
          targetDate.setMilliseconds(0);
          this.updateCountdownLabel(timeLabel, targetDate);
          this.schedule(() => {
            this.updateCountdownLabel(timeLabel, targetDate);
          }, 1);
        }
        updateCountdownLabel(timeLabel, targetDate) {
          const currentDate = new Date();
          let times = (targetDate.getTime() - currentDate.getTime()) / 1000; // times是剩余时间总的秒数
          let h = parseInt(times / 60 / 60 + ''); //时
          const remainHours = h < 10 ? '0' + h : h;
          let m = parseInt(times / 60 % 60 + ''); //分
          const remainMinutes = m < 10 ? '0' + m : m;
          let s = parseInt(times % 60 + ''); // 秒
          const remainSeconds = s < 10 ? '0' + s : s;
          const remainTimeStr = `${remainHours}:${remainMinutes}:${remainSeconds}`;
          timeLabel.string = remainTimeStr;
        }
        update(deltaTime) {}
      }) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Hall_GivePanel.ts", ['cc', './BaseComponent.ts'], function (exports) {
  var cclegacy, Button, Label, Node, _decorator, BaseComponent;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      Button = module.Button;
      Label = module.Label;
      Node = module.Node;
      _decorator = module._decorator;
    }, function (module) {
      BaseComponent = module.BaseComponent;
    }],
    execute: function () {
      var _dec, _class;
      cclegacy._RF.push({}, "26e8aLrSUNI7phI76tGBwiT", "Hall_GivePanel", undefined);
      const {
        ccclass,
        property
      } = _decorator;
      let Hall_GivePanel = exports('Hall_GivePanel', (_dec = ccclass('Hall_GivePanel'), _dec(_class = class Hall_GivePanel extends BaseComponent {
        constructor(...args) {
          super(...args);
          this.propertyNode = {
            props_btn_sure: new Button(),
            props_Label_welcome: new Label()
          };
          this.props = {
            amount: 0
          };
          this.events = {
            onClosePanel: () => {}
          };
        }
        start() {}
        initState() {
          return {};
        }
        bindEvent() {
          this.propertyNode.props_btn_sure.node.on(Node.EventType.TOUCH_END, () => {
            this.events.onClosePanel();
          });
        }
        useProps(key, value) {
          if (key === "amount") {
            this.propertyNode.props_Label_welcome.string = this.propertyNode.props_Label_welcome.string.replace("000", this.props.amount.formatAmountWithCommas());
          }
        }
        bindUI() {}
        update(deltaTime) {}
      }) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Hall_LoginDialogV2.ts", ['cc', './BaseComponent.ts', './InputValidator.ts', './index4.ts', './soundDefine2.ts', './hallConfig.ts', './RegV2ViewModel.ts', './prefabDefine2.ts', './CaptchaGenerator.ts', './baseBoard.ts', './NodeIOEffect.ts', './globals.ts'], function (exports) {
  var cclegacy, Node, EditBox, Button, sys, Prefab, _decorator, BaseComponent, InputValidator, SoundPathDefine, config, RegV2ViewModel, PrefabPathDefine, CaptchaGenerator, addToastAction, EffectType, lang, global, sourceManageSeletor, hallAudio;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      Node = module.Node;
      EditBox = module.EditBox;
      Button = module.Button;
      sys = module.sys;
      Prefab = module.Prefab;
      _decorator = module._decorator;
    }, function (module) {
      BaseComponent = module.BaseComponent;
    }, function (module) {
      InputValidator = module.default;
    }, null, function (module) {
      SoundPathDefine = module.SoundPathDefine;
    }, function (module) {
      config = module.config;
    }, function (module) {
      RegV2ViewModel = module.default;
    }, function (module) {
      PrefabPathDefine = module.PrefabPathDefine;
    }, function (module) {
      CaptchaGenerator = module.default;
    }, function (module) {
      addToastAction = module.addToastAction;
    }, function (module) {
      EffectType = module.EffectType;
    }, function (module) {
      lang = module.lang;
      global = module.global;
      sourceManageSeletor = module.sourceManageSeletor;
      hallAudio = module.hallAudio;
    }],
    execute: function () {
      var _dec, _class;
      cclegacy._RF.push({}, "8be613lla1EFoxkspokfZjP", "Hall_LoginDialogV2", undefined);
      const {
        ccclass,
        property
      } = _decorator;
      let LoginType = exports('LoginType', /*#__PURE__*/function (LoginType) {
        LoginType[LoginType["PHONE"] = 1] = "PHONE";
        LoginType[LoginType["PASSWORD"] = 4] = "PASSWORD";
        return LoginType;
      }({}));
      let Hall_LoginDialogV2 = exports('Hall_LoginDialogV2', (_dec = ccclass('Hall_LoginDialogV2'), _dec(_class = class Hall_LoginDialogV2 extends BaseComponent {
        constructor(...args) {
          super(...args);
          this.captchaGenerator = void 0;
          this.propertyNode = {
            /**关闭节点 */
            props_closeBtu: new Node(),
            /**登录账户 */
            props_input_akun: new EditBox(),
            /**登录密码 */
            props_input_sandi: new EditBox(),
            /**忘记密码按钮 */
            props_btn_login_forget: new Button(),
            /**验证码 */
            props_input_kode: new EditBox(),
            /**验证码获取按钮 */
            props_spr_kode: new Node(),
            /**注册 */
            props_btn_daftarAkun: new Button(),
            /**登录 */
            props_btn_login: new Button()
          };
          this.events = {
            closeHandler: () => {},
            loginHandler: (loginName, password, done) => {},
            loginDoneHandler: () => {},
            sendSmsHandler: phoneNumber => {},
            errorHandler: errorInfo => {}
          };
          this.props = {};
        }
        start() {}
        initState() {
          return {};
        }
        bindEvent() {
          this.propertyNode.props_closeBtu.on(Node.EventType.TOUCH_END, () => {
            this.events.closeHandler();
          });
          /**注册 */
          this.propertyNode.props_btn_daftarAkun.node.on(Node.EventType.TOUCH_END, () => this.reg());
          /**登录 */
          this.propertyNode.props_btn_login.node.on(Node.EventType.TOUCH_END, () => this.login());
          /**忘记密码 */
          this.propertyNode.props_btn_login_forget.node.on(Node.EventType.TOUCH_END, () => {
            sys.openURL(config.customerOutUrl);
            // ModalBox.Instance().show({ url: config.customerOutUrl })
          });
          /**切换验证码 */
          this.propertyNode.props_spr_kode.on(Node.EventType.TOUCH_END, () => {
            this.captchaGenerator.generate();
          });
        }
        useProps(key, value) {
          /**传入的props变更触发的函数 */
          // console.log(key, "change", value.cur)
        }
        bindUI() {
          this.captchaGenerator = new CaptchaGenerator(this.propertyNode.props_spr_kode, 4);
          if (sys.localStorage.getItem('loginName')) {
            this.propertyNode.props_input_akun.string = sys.localStorage.getItem('loginName');
          }
        }
        /**确认登录 */
        login() {
          const loginName = this.propertyNode.props_input_akun.string;
          const password = this.propertyNode.props_input_sandi.string;
          new InputValidator().begin().isLocalPhoneNumber(loginName).isEmtry(password, lang.write(k => k.HallModule.passwordEmptyError, {}, {
            placeStr: "请输入密码"
          })).isCharLength([6, 30], password).done(() => {
            /**验证码 */
            const valodateCode = this.propertyNode.props_input_kode.string;
            if (valodateCode.trim().length === 0) {
              global.hallDispatch(addToastAction({
                content: lang.write(k => k.HallModule.captchaEmptyError, {}, {
                  placeStr: "请输入验证码"
                })
              }));
              return;
            }
            if (valodateCode.toLocaleLowerCase() !== this.captchaGenerator.captcha.toLocaleLowerCase()) {
              this.captchaGenerator.generate();
              this.propertyNode.props_input_kode.string = '';
              global.hallDispatch(addToastAction({
                content: lang.write(k => k.HallModule.captchaError, {}, {
                  placeStr: "验证码错误"
                })
              }));
            } else {
              this.events.loginHandler(loginName, password, success => {
                !success && this.captchaGenerator.generate();
              });
            }
          });
        }
        async reg() {
          new RegV2ViewModel().mountView((await sourceManageSeletor().getFileAsync(PrefabPathDefine._LOGIN_DIALOG_REG_V2, Prefab)).source).appendTo(this.node.parent, {
            effectType: EffectType.EFFECT2
          }).setEvent({
            regDoneHandler: () => {
              this.events.loginDoneHandler();
            }
          });
        }
        callback(event, customEventData) {
          hallAudio.playOneShot(SoundPathDefine.BTU_CLICK);
          switch (event.target["name"]) {
            case "Toggle_phone":
              //显示手机登录
              this.setState({
                showLoginType: LoginType.PHONE
              });
              break;
            case "Toggle_password":
              //显示密码登录
              this.setState({
                showLoginType: LoginType.PASSWORD
              });
              break;
          }
        }
        update(deltaTime) {}
      }) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Hall_LoginPageV2.ts", ['cc', './BaseComponent.ts', './hallConfig.ts'], function (exports) {
  var cclegacy, Node, Button, _decorator, BaseComponent, config;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      Node = module.Node;
      Button = module.Button;
      _decorator = module._decorator;
    }, function (module) {
      BaseComponent = module.BaseComponent;
    }, function (module) {
      config = module.config;
    }],
    execute: function () {
      var _dec, _class;
      cclegacy._RF.push({}, "1d970AVhE5Bia/WB91w/qw0", "Hall_LoginPageV2", undefined);
      const {
        ccclass,
        property
      } = _decorator;
      let Hall_LoginPageV2 = exports('Hall_LoginPageV2', (_dec = ccclass('Hall_LoginPageV2'), _dec(_class = class Hall_LoginPageV2 extends BaseComponent {
        constructor(...args) {
          super(...args);
          this.propertyNode = {
            // props_guestBtu: new Node(),
            props_btn_loginAkun: new Node(),
            props_btn_login_service: new Node(),
            props_btn_login_situs: new Node(),
            props_btn_login_pengumuman: new Node(),
            props_btn_loginReturn: new Button(),
            props_public_wrap: new Node(),
            /**关闭发版框 */
            props_fb_btn_off: new Button()
          };
          this.props = {
            isAutoLogin: false
          };
          this.events = {
            onOpenLoginDialog: () => {},
            onLoginSuccess: () => {},
            openService: () => {},
            openHomePage: () => {},
            openActivity: () => {},
            retryHandler: () => {}
          };
        }
        start() {}
        initState() {
          return {};
        }
        bindEvent() {
          this.propertyNode.props_btn_loginAkun.on(Node.EventType.TOUCH_END, () => {
            this.events.onOpenLoginDialog();
          });
          this.propertyNode.props_btn_login_service.on(Node.EventType.TOUCH_END, () => {
            // sys.openURL(`${config.customerUrl}`)
            this.events.openService();
          });
          this.propertyNode.props_btn_login_situs.on(Node.EventType.TOUCH_END, () => {
            this.events.openHomePage();
          });
          this.propertyNode.props_btn_login_pengumuman.on(Node.EventType.TOUCH_END, () => {
            this.events.openActivity();
          });
          this.propertyNode.props_btn_loginReturn.node.on(Node.EventType.TOUCH_END, () => {
            this.events.retryHandler();
          });
          this.propertyNode.props_fb_btn_off.node.on(Node.EventType.TOUCH_END, () => {
            this.propertyNode.props_public_wrap.active = false;
          });
        }

        /**显示重试按钮 */
        showRetryButton() {
          this.propertyNode.props_btn_loginReturn.node.active = true;
        }
        useProps(key, value) {
          /**传入的props变更触发的函数 */
          // console.log(key, "change", value.cur)
        }
        bindUI() {
          this.propertyNode.props_public_wrap.active = config.maintenanceStatus;
        }
        update(deltaTime) {}
      }) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Hall_MailBox.ts", ['cc', './BaseComponent.ts', './tool.ts', './ModalBox.ts', './globals.ts', './Hall_MailItemComponent.ts', './soundDefine2.ts', './apiUrl.ts', './hallType.ts'], function (exports) {
  var cclegacy, Node, Label, Toggle, ScrollView, UITransform, instantiate, sys, Layout, Size, _decorator, BaseComponent, initToggle, ModalBox, lang, hallAudio, fetcher, Hall_MailItemComponent, SoundPathDefine, ApiUrl, PageInfo;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      Node = module.Node;
      Label = module.Label;
      Toggle = module.Toggle;
      ScrollView = module.ScrollView;
      UITransform = module.UITransform;
      instantiate = module.instantiate;
      sys = module.sys;
      Layout = module.Layout;
      Size = module.Size;
      _decorator = module._decorator;
    }, function (module) {
      BaseComponent = module.BaseComponent;
    }, function (module) {
      initToggle = module.initToggle;
    }, function (module) {
      ModalBox = module.default;
    }, function (module) {
      lang = module.lang;
      hallAudio = module.hallAudio;
      fetcher = module.fetcher;
    }, function (module) {
      Hall_MailItemComponent = module.Hall_MailItemComponent;
    }, function (module) {
      SoundPathDefine = module.SoundPathDefine;
    }, function (module) {
      ApiUrl = module.ApiUrl;
    }, function (module) {
      PageInfo = module.PageInfo;
    }],
    execute: function () {
      var _dec, _class;
      cclegacy._RF.push({}, "c3f2arwgStL1YPQdkdvGp+c", "Hall_MailBox", undefined);
      const {
        ccclass,
        property
      } = _decorator;
      let Hall_MailBox = exports('Hall_MailBox', (_dec = ccclass('Hall_MailBox'), _dec(_class = class Hall_MailBox extends BaseComponent {
        constructor(...args) {
          super(...args);
          /**领取的附件信息 */
          this.emailAnnexVos = [];
          this.nowChooseMailItemIndex = 0;
          this.pageNum = PageInfo.pageNum;
          this.pageSize = PageInfo.pageSize;
          this.total = 0;
          this.list = [];
          this.propertyNode = {
            props_props_btn_close: new Node(),
            props_ToggleGroup_mail_left: new Node(),
            props_ScrollView_mail_left: new Node(),
            props_spr_mail_null: new Node(),
            /**内容 */
            props_Layout_mail_content: new Node(),
            /**删除 */
            props_btn_mail_delete: new Node(),
            /**领取 */
            props_btn_mail_receive: new Node(),
            props_Toggle_mail_item: new Node(),
            props_mail_sum: new Label(),
            /**附件栏 */
            props_ScrollView_gift: new Node(),
            props_gift_content: new Node(),
            props_gift_item: new Node(),
            /**领取框 */
            props_mail_bg: new Node(),
            /**确认键 */
            props_btn_ok: new Node(),
            props_received_ScrollView_gift: new Node(),
            props_received_gift_item: new Node(),
            props_received_gift_content: new Node(),
            props_received_panel: new Node()
          };
          this.props = {
            mailList: null
          };
          this.events = {
            onCloseHandler: () => {},
            onDeleteHandler: item => new Promise(resolve => resolve(false)),
            onCheckMail: item => new Promise(resolve => resolve(false)),
            onReceiveEmailAnnex: item => new Promise(resolve => resolve(false))
          };
        }
        start() {}
        initState() {
          return {
            chooseMailItemIndex: -1
          };
        }
        bindEvent() {
          this.propertyNode.props_props_btn_close.on(Node.EventType.TOUCH_END, () => {
            this.events.onCloseHandler();
          });
          this.propertyNode.props_btn_mail_delete.on(Node.EventType.TOUCH_END, () => {
            ModalBox.Instance().show({
              content: lang.write(k => k.HallModule.SureDeleteMail, {}, {
                placeStr: "您确定要删除此消息吗？"
              }),
              type: "Confirm"
            }, () => {
              this.nowChooseMailItemIndex = this.state.chooseMailItemIndex - 1;
              if (this.nowChooseMailItemIndex < 0) this.nowChooseMailItemIndex = 0;
              this.events.onDeleteHandler(this.list[this.state.chooseMailItemIndex]).then(() => {
                this.propertyNode.props_ToggleGroup_mail_left.children[this.state.chooseMailItemIndex].destroy();
                this.list.splice(this.state.chooseMailItemIndex, 1);
                this.setState({
                  chooseMailItemIndex: this.state.chooseMailItemIndex - 1
                });
                this.propertyNode.props_mail_sum.string = +this.propertyNode.props_mail_sum.string - 1 + '';
                if (this.list.length) {
                  this.propertyNode.props_ToggleGroup_mail_left.children[this.nowChooseMailItemIndex].getComponent(Toggle).isChecked = true;
                }
              });
              return true;
            });
          });
          this.propertyNode.props_btn_mail_receive.on(Node.EventType.TOUCH_END, () => {
            this.nowChooseMailItemIndex = this.state.chooseMailItemIndex;
            this.setState({
              chooseMailItemIndex: null
            });
            this.events.onReceiveEmailAnnex(this.list[this.nowChooseMailItemIndex]).then(rsp => {
              //领取成功的回调
              hallAudio.playOneShot(SoundPathDefine.WINLOTTERY);
              this.updateReceivesEmailAnnex(this.emailAnnexVos);
              this.propertyNode.props_mail_bg.active = true;
            });
          });
          this.propertyNode.props_btn_ok.on(Node.EventType.TOUCH_END, () => {
            this.propertyNode.props_mail_bg.active = false;
            this.list[this.nowChooseMailItemIndex].receive = 1;
            this.list[this.nowChooseMailItemIndex].status = 1;
            if (this.list.length) {
              this.setState({
                chooseMailItemIndex: this.nowChooseMailItemIndex ? this.nowChooseMailItemIndex : 0
              });
            }
            this.emailAnnexVos = [];
            this.propertyNode.props_received_gift_content.removeAllChildren();
          });
          initToggle(this.propertyNode.props_ToggleGroup_mail_left, this.node, new Hall_MailBox.EventHandler(), "Hall_MailBox", "toggleCallback");
        }
        useProps(key, value) {
          // const template = instantiate(this.propertyNode.props_Toggle_mail_item)
          if (key === "mailList") {
            this.list = value.cur.list;
            this.updateMailItem(value.cur);
            this.setState({
              chooseMailItemIndex: 0
            });
            this.propertyNode.props_mail_sum.string = this.props.mailList.total + '';
          }
        }
        toggleCallback(event, customEventData) {
          const chooseIndex = event.target['parent'].children.indexOf(event.target);
          this.setState({
            chooseMailItemIndex: chooseIndex
          });
        }
        updateMailItem(mailList) {
          // 清空已有内容
          this.propertyNode.props_ToggleGroup_mail_left.removeAllChildren();
          mailList.list.forEach((v, i) => {
            this.createItem(v);
          });
          // 监听滚动事件，实现懒加载
          const scrollView = this.propertyNode.props_ScrollView_mail_left.getComponent(ScrollView);
          scrollView.node.on(ScrollView.EventType.SCROLL_TO_BOTTOM, () => {
            //总页数
            this.total = mailList.total;
            this.pageSize = mailList.pageSize;
            const totalPage = this.total % this.pageSize ? Math.floor(this.total / this.pageSize) + 1 : this.total / this.pageSize;
            this.pageNum++;
            if (totalPage < this.pageNum) {
              this.pageNum = totalPage;
              return;
            }
            fetcher.send(ApiUrl.EMAIL_LIST, {
              pageNum: this.pageNum,
              pageSize: this.pageSize
            }, "post").then(rsp => {
              this.pageNum = rsp.pageNum;
              this.pageSize = rsp.pageSize;
              const list = rsp.list;
              this.list = this.list.concat(list);
              this.loadMoreDataIfNeeded(list);
            }).catch(e => {
              //this.dispatch(addToastAction({ content: e }))
            });
          }, this);
        }
        loadMoreDataIfNeeded(mailList) {
          const scrollView = this.propertyNode.props_ScrollView_mail_left.getComponent(ScrollView);
          const scrollOffset = scrollView.getScrollOffset();
          const contentSize = scrollView.content.getComponent(UITransform).contentSize;
          const scrollViewSize = scrollView.node.getComponent(UITransform).contentSize;
          if (contentSize.height > scrollViewSize.height) {
            for (let i = 0; i < mailList.length; i++) {
              this.createItem(mailList[i]);
            }
          } else {
            return;
          }
        }
        createItem(item) {
          const itemNode = instantiate(this.propertyNode.props_Toggle_mail_item);
          itemNode.getChildByName("label_mail_sender").getComponent(Label).string = item.title;
          itemNode.getChildByName("label_mail_time").getComponent(Label).string = item.createTime;
          itemNode.getChildByName("spr_mail_new").active = !item.status || !item.receive;
          itemNode.getChildByName("spr_mail_accessory").active = item.emailAnnex ? true : false; //是否有附件
          this.propertyNode.props_ToggleGroup_mail_left.addChild(itemNode);
          itemNode.active = true;
        }
        getContentUrl(text) {
          // 定义文本
          // text = "百度一下：https://www.baidu.com nhidsofjksnmiodejfio基督教发士大夫,open:https://openai.com/ fwefasdgvhrh ";
          // 定义匹配网络链接的正则表达式
          const urlRegex = /(https?:\/\/\S+)/gi;
          // 使用正则表达式匹配文本中的网络链接
          const matches = text.match(urlRegex);
          if (matches && matches.length > 0) {
            // 初始化结果数组
            const resultArray = [];

            // 初始化起始索引
            let startIndex = 0;

            // 遍历匹配到的链接
            for (const match of matches) {
              // 获取链接在原文本中的位置
              const index = text.indexOf(match, startIndex);
              // 将链接之前的文本部分加入结果数组
              if (index > startIndex) {
                resultArray.push(text.substring(startIndex, index));
              }
              // 将链接加入结果数组
              resultArray.push(match);

              // 更新起始索引
              startIndex = index + match.length;
            }
            // 添加最后一个链接后面的文本部分到结果数组
            if (startIndex < text.length) {
              resultArray.push(text.substring(startIndex));
            }
            // 输出结果数组
            return {
              matches,
              text: resultArray
            };
          } else {
            return {
              matches: [],
              text: [text]
            };
          }
        }
        getMailRichText(content) {
          // 创建一个新的文本数组，用于存储处理后的文本
          const resultArray = [];
          if (content.matches && content.matches.length > 0) {
            // 遍历文本内容
            content.text.forEach(v => {
              // 判断当前文本是否与匹配的链接相同
              const matchedLink = content.matches.find(m => v === m);
              // 根据匹配结果设置不同的颜色
              if (matchedLink) {
                // 如果是匹配的链接，标记为蓝色
                const formattedLink = `<color=#2b97cf><on click="onLinkClick" param='${matchedLink}'>${matchedLink}</on></color>`;
                resultArray.push(formattedLink);
              } else {
                // 如果不是匹配的链接，标记为红色
                const formattedText = `<color=#672929>${v}</color>`;
                resultArray.push(formattedText);
              }
            });

            // 将处理后的文本数组合并成一个字符串
            const finalResult = resultArray.join('');
            return finalResult;
          } else {
            const finalResult = `<color=#672929>${content.text[0]}</color>`;
            return finalResult;
          }
        }
        bindUI() {
          // this.propertyNode.props_Toggle_mail_item.active = false
          this.useState((key, value) => {
            if (value.cur === null) return;
            this.propertyNode.props_spr_mail_null.active = false;
            this.propertyNode.props_Layout_mail_content.active = false;
            value.cur === -1 && (this.propertyNode.props_spr_mail_null.active = true);
            value.cur !== -1 && (this.propertyNode.props_Layout_mail_content.active = true);
            if (!this.list || !this.list.length) {
              this.propertyNode.props_spr_mail_null.active = true;
              this.propertyNode.props_Layout_mail_content.active = false;
              return;
            }
            const mailItem = this.list[value.cur];
            if (!mailItem) return;
            this.propertyNode.props_Layout_mail_content.getChildByName("label_mail_sender").getComponent(Label).string = mailItem.sendName;
            this.propertyNode.props_Layout_mail_content.getChildByName("label_mail_time").getComponent(Label).string = mailItem.createTime;
            this.propertyNode.props_Layout_mail_content.getChildByName("label_mail_title").getComponent(Label).string = mailItem.title;
            let content = this.getContentUrl(mailItem.content);
            const text = this.getMailRichText(content);
            const ndTxt = this.propertyNode.props_Layout_mail_content.getChildByName("ScrollView_content").getComponent(ScrollView).content.getChildByName("item");
            let spr = ndTxt.getComponent(Hall_MailItemComponent);
            if (!spr) {
              spr = ndTxt.addComponent(Hall_MailItemComponent);
            }
            spr.showTxt(text, txt => {
              sys.openURL(txt);
            });
            this.propertyNode.props_ToggleGroup_mail_left.children[value.cur].getChildByName("spr_mail_new").active = !mailItem.status || !mailItem.receive;
            const newflag = this.propertyNode.props_ToggleGroup_mail_left.children[value.cur].getChildByName("spr_mail_new");
            if (!mailItem.status) {
              this.events.onCheckMail(mailItem).then(() => {
                if (mailItem.receive) {
                  newflag.active = false;
                  mailItem.status = 1;
                }
              });
            }
            if (mailItem.status && mailItem.receive) {
              newflag.active = false;
            }
            this.propertyNode.props_btn_mail_delete.active = mailItem.receive ? true : false;
            this.propertyNode.props_btn_mail_receive.active = !mailItem.receive;
            this.propertyNode.props_ScrollView_gift.active = mailItem.emailAnnex ? true : false;
            this.updateEmailAnnex(mailItem.emailAnnexVos, mailItem.receive);
          }, ["chooseMailItemIndex"]);
        }
        updateEmailAnnex(emailAnnexVos, received) {
          if (!emailAnnexVos) return;
          let child = this.propertyNode.props_gift_item;
          this.propertyNode.props_gift_content.removeAllChildren();
          if (!emailAnnexVos.length) return;
          this.emailAnnexVos = emailAnnexVos;
          emailAnnexVos.forEach(item => {
            const giftItem = instantiate(child);
            // giftItem.getChildByName("spr_item").getComponent(Sprite).spriteFrame = sourceManageSeletor("common").getFile(SpriteFramePathDefine._GOLD).source;
            giftItem.getChildByName("label_item_num").getComponent(Label).string = item.num.formatAmountWithLetter();
            giftItem.getChildByName("spr_received").active = received ? true : false;
            giftItem.getChildByName("label_item_num").active = !received;
            giftItem.active = true;
            this.propertyNode.props_gift_content.addChild(giftItem);
          });
        }
        updateReceivesEmailAnnex(emailAnnexVos) {
          if (!emailAnnexVos) return;
          if (!emailAnnexVos.length) return;
          let lay = this.propertyNode.props_received_gift_content.getComponent(Layout);
          let layPanel = this.propertyNode.props_received_panel.getComponent(Layout);
          if (emailAnnexVos.length < 6) {
            //6个礼物为一行
            layPanel.paddingTop = 0;
            lay.type = Layout.Type.HORIZONTAL;
            lay.resizeMode = Layout.ResizeMode.CONTAINER;
            lay.updateLayout();
            layPanel.updateLayout();
          } else {
            layPanel.paddingTop = -30;
            const contentSize = this.propertyNode.props_received_gift_item.getComponent(UITransform).contentSize;
            // const sizeWidth = contentSize.width * 6 + lay.spacingX
            const sizeWidth = 434;
            lay.getComponent(UITransform).setContentSize(new Size(sizeWidth, contentSize.height));
            lay.type = Layout.Type.GRID;
            lay.resizeMode = Layout.ResizeMode.CONTAINER;
            // lay.paddingTop = 0;
            lay.paddingBottom = 10;
            lay.updateLayout();
            layPanel.updateLayout();
          }
          emailAnnexVos.forEach(item => {
            const giftItem = instantiate(this.propertyNode.props_received_gift_item);
            // giftItem.getChildByName("spr_item").getComponent(Sprite).spriteFrame = sourceManageSeletor("common").getFile(SpriteFramePathDefine._GOLD).source;
            giftItem.getChildByName("label_item_num").getComponent(Label).string = item.num.formatAmountWithLetter();
            giftItem.active = true;
            this.propertyNode.props_received_gift_content.addChild(giftItem);
          });
        }
        update(deltaTime) {}
      }) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Hall_MailItemComponent.ts", ['cc'], function (exports) {
  var cclegacy, Component, RichText, _decorator;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      Component = module.Component;
      RichText = module.RichText;
      _decorator = module._decorator;
    }],
    execute: function () {
      var _dec, _class;
      cclegacy._RF.push({}, "aa37cpDoRtDEJ6mBXdjdV4y", "Hall_MailItemComponent", undefined);
      const {
        ccclass,
        property
      } = _decorator;
      let Hall_MailItemComponent = exports('Hall_MailItemComponent', (_dec = ccclass("Hall_MailItemComponent"), _dec(_class = class Hall_MailItemComponent extends Component {
        constructor(...args) {
          super(...args);
          this.cd = null;
        }
        showTxt(str, cd) {
          this.node.getComponent(RichText).string = str;
          this.cd = cd;
        }
        update(deltaTime) {}
        onLinkClick(e, d) {
          if (this.cd) {
            this.cd(d);
          }
        }
      }) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Hall_MainPanel.ts", ['cc', './BaseComponent.ts', './config.ts', './globals.ts', './prefabDefine2.ts', './NodeIOEffect.ts', './tool.ts', './soundDefine2.ts', './SubGameGateViewModel.ts', './MarqueeViewModel.ts', './prefabDefine.ts', './socketConnect.ts', './index.mjs_cjs=&original=2.js', './baseBoard.ts', './Throttler.ts', './Hall_ShopPanel.ts', './apiUrl.ts', './StepNumber.ts', './GameConfig.ts', './index2.js', './types.ts'], function (exports) {
  var cclegacy, Node, Label, PageView, ScrollView, tween, Vec3, UITransform, SpriteFrame, Sprite, sys, assetManager, instantiate, Toggle, _decorator, BaseComponent, subGameGateQueue, SubGameType, hallAudio, global, bundleCommon, fetcher, lang, sourceManageSeletor, PrefabPathDefine$1, EffectType, arrowDisplay, initToggle, setByScreenScale, SoundPathDefine, SubGameGateViewModel, MarqueeViewModel, PrefabPathDefine, hallWebSocketDriver, addToastAction, Throttler, BuyType, ApiUrl, StepNumber, isH5, _cjsExports, ToastType;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      Node = module.Node;
      Label = module.Label;
      PageView = module.PageView;
      ScrollView = module.ScrollView;
      tween = module.tween;
      Vec3 = module.Vec3;
      UITransform = module.UITransform;
      SpriteFrame = module.SpriteFrame;
      Sprite = module.Sprite;
      sys = module.sys;
      assetManager = module.assetManager;
      instantiate = module.instantiate;
      Toggle = module.Toggle;
      _decorator = module._decorator;
    }, function (module) {
      BaseComponent = module.BaseComponent;
    }, function (module) {
      subGameGateQueue = module.subGameGateQueue;
      SubGameType = module.SubGameType;
    }, function (module) {
      hallAudio = module.hallAudio;
      global = module.global;
      bundleCommon = module.bundleCommon;
      fetcher = module.fetcher;
      lang = module.lang;
      sourceManageSeletor = module.sourceManageSeletor;
    }, function (module) {
      PrefabPathDefine$1 = module.PrefabPathDefine;
    }, function (module) {
      EffectType = module.EffectType;
    }, function (module) {
      arrowDisplay = module.arrowDisplay;
      initToggle = module.initToggle;
      setByScreenScale = module.setByScreenScale;
    }, function (module) {
      SoundPathDefine = module.SoundPathDefine;
    }, function (module) {
      SubGameGateViewModel = module.default;
    }, function (module) {
      MarqueeViewModel = module.default;
    }, function (module) {
      PrefabPathDefine = module.PrefabPathDefine;
    }, function (module) {
      hallWebSocketDriver = module.hallWebSocketDriver;
    }, null, function (module) {
      addToastAction = module.addToastAction;
    }, function (module) {
      Throttler = module.default;
    }, function (module) {
      BuyType = module.BuyType;
    }, function (module) {
      ApiUrl = module.ApiUrl;
    }, function (module) {
      StepNumber = module.default;
    }, function (module) {
      isH5 = module.isH5;
    }, function (module) {
      _cjsExports = module.default;
    }, function (module) {
      ToastType = module.ToastType;
    }],
    execute: function () {
      var _dec, _class;
      cclegacy._RF.push({}, "dfcc40+Z95G0Ibe9dVNS2JZ", "Hall_MainPanel", undefined);
      const {
        ccclass,
        property
      } = _decorator;
      let ToggleTabName = exports('ToggleTabName', /*#__PURE__*/function (ToggleTabName) {
        ToggleTabName["ALL"] = "Toggle_all";
        ToggleTabName["DOMINO"] = "Toggle_domino";
        ToggleTabName["SLOTS"] = "Toggle_slots";
        ToggleTabName["OTHER"] = "Toggle_other";
        ToggleTabName["INIT"] = "";
        return ToggleTabName;
      }({}));
      let Hall_MainPanel = exports('Hall_MainPanel', (_dec = ccclass('Hall_MainPanel'), _dec(_class = class Hall_MainPanel extends BaseComponent {
        constructor(...args) {
          super(...args);
          this.props = {
            memberAssetGoldPieces: 0,
            nickName: 'noName',
            avatarIndex: 0,
            level: 0,
            vipLevel: 0,
            subGameInfo: null,
            tourist: 1,
            memberId: '',
            memberName: '',
            // isConnect: true,
            // retryConnectTimes: 1,
            isUnreadActivity: false,
            UnreadMailNum: -1
          };
          this.gateViewModelList = [];
          this.totalGateQueue = subGameGateQueue[0].queue;
          this.timerBg = 0;
          this.connectRetryDone = true;
          this.swiperDatas = [];
          this.initGame = true;
          this.events = {
            onToggleGameTypeHandler: (gameType, gameGateViewModelList) => {},
            onTouchIntoHandler: gameInfo => {},
            onOpenPersonCenter: index => {},
            onOpenBankPanel: () => {},
            onOpenMailPanel: () => {},
            onOpenShopPanel: () => {},
            onOpenWithdrawalPanel: () => {},
            onOpenBindPhonePanel: () => {},
            onOpenUpgradePanel: () => {},
            onOpenAwardPanel: isTurntable => {},
            onOpenGiftBoxanel: () => {},
            onOpenSignInPanel: () => {},
            onOpenDailyTaskPanel: () => {},
            onOpenVipMainPanel: () => {},
            onOpenService: () => {}
          };
          this.propertyNode = {
            /**白天 */
            props_hall_background_day: new Node(),
            /**黑夜 */
            props_hall_background_night: new Node(),
            /**tab头 */
            props_ToggleGroup_type: new Node(),
            /**游戏入口主scrollView */
            props_ScrollView_game_icon: new Node(),
            /**用户选择头像 */
            props_btn_head_choose: new Node(),
            props_btn_down_bank: new Node(),
            props_btn_down_inbox: new Node(),
            props_btn_down_shop: new Node(),
            props_btn_down_withdrawal: new Node(),
            props_btn_down_phone: new Node(),
            props_btn_down_gift: new Node(),
            /**用户昵称 */
            props_Label_name: new Label(),
            /**用户金币 */
            props_Label_gold: new Node(),
            /**用户头像边的加号 */
            props_btn_gold_add: new Node(),
            /**用户头像图片 */
            props_spr_head: new Node(),
            /**vip级别 */
            props_spr_vip: new Node(),
            /**签到按钮 */
            props_btn_down_signIn: new Node(),
            /**每日领取 */
            props_btn_daily_task: new Node(),
            /**vip按钮 */
            props_btn_down_vip: new Node(),
            /**返佣按钮 */
            props_btn_down_rabat: new Node(),
            /**分佣按钮 */
            props_btn_down_referral: new Node(),
            /**背包按钮 */
            props_btn_down_bag: new Node(),
            /** */
            props_btn_down_hadiah: new Node(),
            /**底部每日任务 */
            props_btn_down_task: new Node(),
            /**客户按钮 */
            props_btn_down_service: new Node(),
            /**礼包入口按钮 */
            props_btn_down_shopGift: new Node(),
            /**跑马灯位置 */
            props_Marquee_node: new Node(),
            /**左箭头 */
            props_btn_left: new Node(),
            /**右箭头 */
            props_btn_right: new Node(),
            /**断链提示面板 */
            // props_disconnect_panel: new Node(),
            // props_connect_tip: new Label(),
            /**关闭和重试连接外框 */
            // props_user_opa: new Node(),
            // /**连接关闭，退出 */
            // props_sokt_close: new Button(),
            // /**连接重试 */
            // props_sokt_retry: new Button(),
            /**宣传画册 */
            props_PageView: new PageView(),
            /**宣传画册-轮播灯 */
            props_indicator: new Node(),
            /**宣传画册-轮播灯 */
            props_indicator_toggle: new Node(),
            /**游戏轮播广告 */
            props_page_template: new Node(),
            /**大厅的爆奖公告 */
            props_winningBox: new Node(),
            /**站内信小红点 */
            props_inbox_red_dot: new Node(),
            /**转盘活动按钮 */
            props_btn_up_lottery: new Node()
          };
          this.swipeTime = 0;
        }
        start() {}
        callback(event, customEventData) {
          hallAudio.playOneShot(SoundPathDefine.BTU_CLICK);
          let gameType = SubGameType.All;
          switch (event.target["name"]) {
            case ToggleTabName.ALL:
              //全部游戏
              gameType = SubGameType.All;
              break;
            case ToggleTabName.DOMINO:
              //多米诺
              gameType = SubGameType.Domino;
              break;
            case ToggleTabName.SLOTS:
              //slot游戏
              gameType = SubGameType.Slot;
              break;
            case ToggleTabName.OTHER:
              //其他
              gameType = SubGameType.Other;
              break;
          }
          this.getGetSubGameGateQueue(event.target["name"], gameType);
          this.scheduleOnce(() => {
            arrowDisplay(this.propertyNode.props_ScrollView_game_icon.getComponent(ScrollView), this.propertyNode.props_btn_left, this.propertyNode.props_btn_right, 40);
          }, 0.1);
        }
        update(deltaTime) {}
        initState() {
          return {
            currGateQueue: subGameGateQueue[0],
            chooseTabName: ToggleTabName.INIT,
            subGameType: SubGameType.All
          };
        }
        bindEvent() {
          initToggle(this.propertyNode.props_ToggleGroup_type, this.node, new Hall_MainPanel.EventHandler(), "Hall_MainPanel", "callback");
          this.propertyNode.props_btn_head_choose.on(Node.EventType.TOUCH_END, () => {
            this.isDebouncerAsync(() => {
              this.events.onOpenPersonCenter(1);
            });
          });
          this.propertyNode.props_btn_down_bag.on(Node.EventType.TOUCH_END, () => {
            this.isDebouncerAsync(() => {
              this.events.onOpenPersonCenter(5);
            });
          });
          this.propertyNode.props_btn_down_hadiah.on(Node.EventType.TOUCH_END, () => {
            this.isDebouncerAsync(() => {
              global.openShop(BuyType.TAS);
            });
          });
          this.propertyNode.props_btn_down_rabat.on(Node.EventType.TOUCH_END, () => {
            this.isDebouncerAsync(() => {
              this.events.onOpenPersonCenter(6);
            });
          });
          this.propertyNode.props_btn_down_referral.on(Node.EventType.TOUCH_END, () => {
            this.isDebouncerAsync(() => {
              this.events.onOpenPersonCenter(4);
            });
          });
          this.propertyNode.props_btn_down_bank.on(Node.EventType.TOUCH_END, () => {
            this.isDebouncerAsync(() => {
              this.events.onOpenBankPanel();
            });
          });
          this.propertyNode.props_btn_down_inbox.on(Node.EventType.TOUCH_END, () => {
            this.isDebouncerAsync(() => {
              this.events.onOpenMailPanel();
            });
          });
          this.propertyNode.props_btn_down_shop.on(Node.EventType.TOUCH_END, () => {
            this.isDebouncerAsync(() => {
              this.events.onOpenShopPanel();
            });
          });
          this.propertyNode.props_btn_gold_add.on(Node.EventType.TOUCH_END, () => {
            this.isDebouncerAsync(() => {
              this.events.onOpenShopPanel();
            });
          });
          this.propertyNode.props_btn_down_withdrawal.on(Node.EventType.TOUCH_END, () => {
            this.isDebouncerAsync(() => {
              this.events.onOpenWithdrawalPanel();
            });
          });
          this.propertyNode.props_btn_down_phone.on(Node.EventType.TOUCH_END, () => {
            this.isDebouncerAsync(() => {
              this.events.onOpenUpgradePanel();
            });
            // this.events.onOpenBindPhonePanel()
          });

          this.propertyNode.props_btn_down_gift.on(Node.EventType.TOUCH_END, () => {
            this.isDebouncerAsync(() => {
              this.events.onOpenAwardPanel(false);
            });
          });
          this.propertyNode.props_btn_up_lottery.on(Node.EventType.TOUCH_END, () => {
            this.isDebouncerAsync(() => {
              this.events.onOpenAwardPanel(true);
            });
          });
          this.propertyNode.props_btn_down_shopGift.on(Node.EventType.TOUCH_END, () => {
            this.isDebouncerAsync(() => {
              this.events.onOpenGiftBoxanel();
            });
          });
          this.propertyNode.props_btn_down_signIn.on(Node.EventType.TOUCH_END, () => {
            this.isDebouncerAsync(() => {
              this.events.onOpenSignInPanel();
            });
          });
          this.propertyNode.props_btn_down_task.on(Node.EventType.TOUCH_END, () => {
            this.isDebouncerAsync(() => {
              this.events.onOpenDailyTaskPanel();
            });
          });
          this.propertyNode.props_btn_daily_task.on(Node.EventType.TOUCH_END, () => {
            this.isDebouncerAsync(() => {
              this.events.onOpenSignInPanel();
            });
          });
          this.propertyNode.props_btn_down_vip.on(Node.EventType.TOUCH_END, () => {
            this.isDebouncerAsync(() => {
              this.events.onOpenVipMainPanel();
            });
          });
          this.propertyNode.props_btn_down_service.on(Node.EventType.TOUCH_END, () => {
            this.isDebouncerAsync(() => {
              this.events.onOpenService();
            });
          });
          this.propertyNode.props_ScrollView_game_icon.on(ScrollView.EventType.SCROLLING, e => {
            arrowDisplay(e, this.propertyNode.props_btn_left, this.propertyNode.props_btn_right, 40);
          });
          // this.propertyNode.props_sokt_close.node.on(Node.EventType.TOUCH_END, () => {
          // 	game.end()
          // })
          // this.propertyNode.props_sokt_retry.node.on(Node.EventType.TOUCH_END, () => {
          // 	if (!this.connectRetryDone) {
          // 		console.log('wait please')
          // 		return
          // 	}
          // 	this.dispatch(setSocketConnectStatus({ isConnect: false, remainRetryCount: 1 }))
          // 	sktInstance.reConnectTimes = 0
          // 	this.connectRetryDone = false
          // 	sktInstance.reconnect().then(() => {
          // 		this.connectRetryDone = true
          // 	}).catch(() => {
          // 		this.connectRetryDone = true
          // 	})
          // })

          this.propertyNode.props_btn_left.on(Node.EventType.TOUCH_END, () => {
            const scrollView = this.propertyNode.props_ScrollView_game_icon.getComponent(ScrollView);
            tween(scrollView.content).to(0.1, {
              position: new Vec3(0, 0, 0)
            }).call(() => {
              arrowDisplay(scrollView, this.propertyNode.props_btn_left, this.propertyNode.props_btn_right, 40);
            }).start();
          });
          this.propertyNode.props_btn_right.on(Node.EventType.TOUCH_END, () => {
            const scrollView = this.propertyNode.props_ScrollView_game_icon.getComponent(ScrollView);
            const wrapWodth = this.propertyNode.props_ScrollView_game_icon.getComponent(UITransform).width;
            tween(scrollView.content).to(0.1, {
              position: new Vec3(-scrollView.content.getComponent(UITransform).width + wrapWodth, 0, 0)
            }).call(() => {
              arrowDisplay(scrollView, this.propertyNode.props_btn_left, this.propertyNode.props_btn_right, 40);
            }).start();
          });
        }
        useProps(key, value) {
          key === "nickName" && (this.propertyNode.props_Label_name.string = value.cur + "");
          // key === "memberAssetGoldPieces" && (this.propertyNode.props_Label_gold.getComponent(Label).string = value.cur.formatAmountWithCommas().split('.')[0])
          if (key === "memberAssetGoldPieces") {
            if (this.initGame) {
              this.propertyNode.props_Label_gold.getComponent(Label).string = Number(value.cur).formatAmountWithCommas();
              this.initGame = false;
            } else {
              const stepNumber = new StepNumber(value.pre, value.cur, num => {
                if (this.node && this.node.isValid) {
                  this.propertyNode.props_Label_gold.getComponent(Label).string = Number(value.cur).formatAmountWithCommas();
                }
              });
              stepNumber.setFlyNode(this.propertyNode.props_Label_gold.parent, this.propertyNode.props_Label_gold, 30);
              stepNumber.start();
            }
            // (this.propertyNode.props_Label_gold.getComponent(Label).string = value.cur.formatAmountWithCommas())
          }

          if (key === "avatarIndex") {
            bundleCommon.load(`resource/head/head_circle_${value.cur}/spriteFrame`, SpriteFrame, (err, sp) => {
              if (!err) {
                this.propertyNode.props_spr_head.getComponent(Sprite).spriteFrame = sp;
              }
            });
          }
          if (key === "vipLevel") {
            bundleCommon.load(`resource/vip/VIP${value.cur}/spriteFrame`, SpriteFrame, (err, sp) => {
              !err && (this.propertyNode.props_spr_vip.getComponent(Sprite).spriteFrame = sp);
            });
          }
          // if (key === "tourist") {
          // 	this.propertyNode.props_btn_down_phone.active = this.props.tourist !== 0
          // }
          if (key === "memberName") {
            if (this.props.memberName) {
              sys.localStorage.setItem('loginName', this.props.memberName);
            }
          }
          if (key === "UnreadMailNum") {
            this.propertyNode.props_btn_down_inbox.getChildByName("props_inbox_red_dot").active = value.cur ? true : false;
            this.propertyNode.props_inbox_red_dot.active = value.cur ? true : false;
          }

          // if (key === "_setDone") {
          // 	console.log(this.props)
          // 	if (!this.props.tourist) {
          // 		// 如果不是游客，先把登录名缓存下来，用于登录页显示
          // 		sys.localStorage.setItem('loginName', this.props.memberName)
          // 	} else {
          // 		sys.localStorage.removeItem('loginName')
          // 	}
          // }
        }

        bindUI() {
          this.useState(() => {
            // 实例化图标对象，先清空
            const scrollViewContent = this.propertyNode.props_ScrollView_game_icon.getComponent(ScrollView).content;
            const ratio = setByScreenScale();
            // this.gateViewModelList = []
            const isInit = this.gateViewModelList.length === 0 ? true : false;
            if (!isInit) {
              this.gateViewModelList.forEach(item => item.viewNode.active = false);
            }
            this.state.currGateQueue.queue.forEach(gamesIds => {
              if (!isInit) {
                const target = this.gateViewModelList.find(item => _cjsExports(item.comp.props.gamesIds, gamesIds));
                target && (target.viewNode.active = true);
              } else {
                this.initGateModelView(scrollViewContent, gamesIds);
              }
            });
            this.events.onToggleGameTypeHandler(this.state.subGameType, this.gateViewModelList);
          }, ["chooseTabName"]);
          this.setState({
            chooseTabName: ToggleTabName.ALL
          });
          // 设置初始化为 Rummy (Domino)
          // this.getGetSubGameGateQueue(ToggleTabName.DOMINO, SubGameType.Domino)
          this.propertyNode.props_indicator_toggle.active = false;
          fetcher.send(ApiUrl.GAME_SWIPE, {}, "get", {}).then(data => {
            if (!data || data && !Array.isArray(data)) {
              global.hallDispatch(addToastAction({
                content: lang.write(k => k.BaseBoardModule.DataException, {}, {
                  placeStr: "数据异常"
                }),
                type: ToastType.ERROR,
                forceLandscape: false
              }));
              return;
            }
            data.forEach((item, i) => {
              assetManager.loadRemote(item.swiperUrl, (err, asset) => {
                if (this.propertyNode && !err) {
                  item.sortId = i;
                  const sp = SpriteFrame.createWithImage(asset);
                  item.sp = sp;
                  this.swiperDatas.push(item);
                  if (this.swiperDatas.length === data.length && this.swiperDatas.length > 1) {
                    this.swiperDatas.sort((a, b) => a.sortId - b.sortId);
                    this.propertyNode.props_page_template.active = false;
                    this.addPageViewNode(this.swiperDatas.length - 1);
                    this.swiperDatas.forEach((v, i) => {
                      this.addPageViewNode(i);
                      this.createIndicatorToggle(v);
                    });
                    this.addPageViewNode(0);
                    this.swipeTimeScoll();
                  }
                }
                if (err) {
                  global.hallDispatch(addToastAction({
                    content: lang.write(k => k.HallModule.LoadFaild, {}, {
                      placeStr: "加载资源失败"
                    }),
                    type: ToastType.ERROR,
                    forceLandscape: false
                  }));
                }
              });
            });
          }).catch(e => {
            console.error(e);
          });
          this.scrollPageViewListener();
          this.updateBackground();
          new MarqueeViewModel().mountView(sourceManageSeletor("common").getFile(PrefabPathDefine.MARQUEE_INSERT).source).appendTo(this.propertyNode.props_Marquee_node).connect();
          // new MarqueeViewModel().mountView(sourceManageSeletor("common").getFile(CommonPrefabPathDefine.MARQUEE).source, "Common_Marquee").appendTo(this.propertyNode.props_marquee)

          this.propertyNode.props_btn_left.active = false;
        }
        initGateModelView(scrollViewContent, gamesIds) {
          const gateModelView = new SubGameGateViewModel().mountView(sourceManageSeletor().getFile(PrefabPathDefine$1.SUB_GAME_GATE).source).appendTo(scrollViewContent, {
            effectType: EffectType.EFFECT1
            // effectOption: {
            // 	scaleOrigin: {
            // 		x: ratio,
            // 		y: ratio
            // 	}
            // }
          }).setProps({
            gamesIds
          }).setEvent({
            onTouchInto: gameInfo => {
              this.isDebouncerAsync(() => {
                this.events.onTouchIntoHandler(gameInfo);
              });
            }
          }).connect();
          this.gateViewModelList.push(gateModelView);
        }
        scrollPageViewListener() {
          this.propertyNode.props_PageView.node.on(PageView.EventType.SCROLL_ENDED, pageView => {
            if (pageView.curPageIdx === 0) {
              pageView.scrollToPage(pageView.getPages().length - 2, 0);
            } else if (pageView.curPageIdx + 1 === pageView.getPages().length) {
              pageView.scrollToPage(1, 0);
            }
            const page = pageView.getPages()[pageView.curPageIdx];
            const targetToggle = this.swiperDatas.find(v => v.name === page.name).toggle;
            targetToggle && (targetToggle.isChecked = true);
            this.swipeTimeScoll();
          });
        }
        scrollPageView() {
          if (!this.propertyNode) return;
          let pageIndex = this.propertyNode.props_PageView.getCurrentPageIndex();
          const length = this.propertyNode.props_PageView.getPages().length;
          this.propertyNode.props_PageView.scrollToPage(pageIndex === length - 1 ? 1 : ++pageIndex);
        }
        createIndicatorToggle(swipeData) {
          const toggleNode = instantiate(this.propertyNode.props_indicator_toggle);
          toggleNode.active = true;
          this.propertyNode.props_indicator.addChild(toggleNode);
          swipeData.toggle = toggleNode.getComponent(Toggle);
          swipeData.toggle.isChecked = true;
        }
        swipeTimeScoll() {
          this.unschedule(this.scrollPageView);
          this.scheduleOnce(this.scrollPageView, 5);

          // this.swipeTime && window.clearTimeout(this.swipeTime);
          // this.swipeTime = window.setTimeout(() => {
          // 	this.scrollPageView()
          // }, 5000)
        }

        addPageViewNode(index, insertIndex = -1) {
          if (!this.node.isValid) return;
          const item = this.swiperDatas[index];
          item.name = "swpier_" + index;
          const node = instantiate(this.propertyNode.props_page_template);
          node.getComponent(Sprite).spriteFrame = item.sp;
          node.name = item.name;
          node.active = true;
          insertIndex >= 0 ? this.propertyNode.props_PageView.insertPage(node, insertIndex) : this.propertyNode.props_PageView.addPage(node);
          node.on(Node.EventType.TOUCH_END, () => {
            // item.jump && ModalBox.Instance().show({ url: item.detailUrl })
            item.jump && sys.openURL(item.detailUrl);
          });
        }
        updateBackground() {
          const hours = new Date().getHours();
          const isNight = hours > 18 || hours <= 6;
          if (this.propertyNode) {
            this.propertyNode.props_hall_background_day.active = !isNight;
            this.propertyNode.props_hall_background_night.active = isNight;
          }
          this.unschedule(this.updateBackground);
          this.schedule(this.updateBackground, 60);
        }
        getGetSubGameGateQueue(tabName, typeName) {
          // 获取当前要显示的图标数据
          const subGameQueue = subGameGateQueue.find(item => `Toggle_${item.toggleName}` === tabName).queue;
          this.setState({
            currGateQueue: {
              typeName,
              toggleName: tabName,
              queue: subGameQueue
            },
            chooseTabName: tabName,
            subGameType: typeName
          });
        }
        setGiftButtonDisplay(active) {
          this.propertyNode.props_btn_down_shopGift.active = active;
        }
        onDestroy() {
          hallWebSocketDriver.sktMsgListener.removeById("mainboard");
        }

        /**设置子游戏图标入口的加载状态 */
        setSubGameGate(gameId, progress, isShow) {
          const gateViewModel = this.gateViewModelList.find(item => item.comp.props.gamesIds.indexOf(gameId) !== -1);
          if (gateViewModel) {
            gateViewModel.comp.setLoadingState(gameId, progress, isShow, isH5() ? 0.5 : 1);
          } else {
            console.warn(`[Hall_MainPanel] gateViewModel not found for gameId: ${gameId}`);
          }
        }

        /**
         * 大厅功能入口防抖
         * @param done 
         */
        isDebouncerAsync(done) {
          Throttler.isDebouncerAsync('hall_entry', 1000, true, () => {}).then(isPass => {
            done && done();
          });
        }
      }) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Hall_PC_BackWater.ts", ['cc', './BaseComponent.ts', './index4.ts', './apiUrl.ts', './baseBoard.ts', './socketConnect.ts', './BaseViewModel.ts', './NodeIOEffect.ts', './prefabDefine2.ts', './globals.ts', './types.ts'], function (exports) {
  var cclegacy, Label, Sprite, Button, Node, SpriteFrame, _decorator, BaseComponent, ApiUrl, addToastAction, hallWebSocketDriver, SKT_MAG_TYPE, BaseViewModel, EffectType, PrefabPathDefine, fetcher, global, lang, sourceManageSeletor, baseBoardView, bundleCommon, ToastType;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      Label = module.Label;
      Sprite = module.Sprite;
      Button = module.Button;
      Node = module.Node;
      SpriteFrame = module.SpriteFrame;
      _decorator = module._decorator;
    }, function (module) {
      BaseComponent = module.BaseComponent;
    }, null, function (module) {
      ApiUrl = module.ApiUrl;
    }, function (module) {
      addToastAction = module.addToastAction;
    }, function (module) {
      hallWebSocketDriver = module.hallWebSocketDriver;
      SKT_MAG_TYPE = module.SKT_MAG_TYPE;
    }, function (module) {
      BaseViewModel = module.default;
    }, function (module) {
      EffectType = module.EffectType;
    }, function (module) {
      PrefabPathDefine = module.PrefabPathDefine;
    }, function (module) {
      fetcher = module.fetcher;
      global = module.global;
      lang = module.lang;
      sourceManageSeletor = module.sourceManageSeletor;
      baseBoardView = module.baseBoardView;
      bundleCommon = module.bundleCommon;
    }, function (module) {
      ToastType = module.ToastType;
    }],
    execute: function () {
      var _dec, _class;
      cclegacy._RF.push({}, "2ce86pRzsZLELtTfSSjJG1J", "Hall_PC_BackWater", undefined);
      const {
        ccclass,
        property
      } = _decorator;
      let Hall_PC_BackWater = exports('Hall_PC_BackWater', (_dec = ccclass('Hall_PC_BackWater'), _dec(_class = class Hall_PC_BackWater extends BaseComponent {
        constructor(...args) {
          super(...args);
          this.propertyNode = {
            /**可提返水 */
            props_label_water_pro: new Label(),
            //
            /**有效下注 */
            props_label_sisa: new Label(),
            /**返水比例 */
            props_label_skalaSaat: new Label(),
            /**洗码数 */
            props_label_jumlah: new Label(),
            /**返水的vip级别 */
            props_water_spr_vip: new Sprite(),
            /**确认抽取返水 */
            props_water_cuci: new Button(),
            /**返水置灰覆盖节点 */
            props_spr_word_cuci: new Node(),
            /**返水最小值说明 */
            props_Label_lorem: new Label(),
            /**返水说明 */
            props_btn_ratio_help: new Button()
          };
          this.props = {
            memberInfo: null
          };
          this.events = {};
        }
        start() {}
        initState() {
          return {};
        }
        bindEvent() {
          /**确认提取返水 */
          this.propertyNode.props_water_cuci.node.on(Node.EventType.TOUCH_END, () => {
            fetcher.send(ApiUrl.DRAW_WATER, {
              type: 1
            }).then(data => {
              global.hallDispatch(addToastAction({
                content: lang.write(k => k.BaseBoardModule.operateDone, {}, {
                  placeStr: "操作完成"
                }),
                type: ToastType.SUCCESS
              }));
              hallWebSocketDriver.sendSktMessage(SKT_MAG_TYPE.MEMBER_INFO, {});
            });
          });
          this.propertyNode.props_btn_ratio_help.node.on(Node.EventType.TOUCH_END, () => {
            const waterHelpViewModel = new BaseViewModel("Hall_WaterHelp").mountView(sourceManageSeletor().getFile(PrefabPathDefine.HELL_WATER_HELP).source).appendTo(baseBoardView.viewNode, {
              effectType: EffectType.EFFECT1,
              isModal: true
            }).setEvent({
              onCloseHandler: () => waterHelpViewModel.unMount(EffectType.EFFECT2)
            });
          });
        }
        useProps(key, value) {
          if (key === "memberInfo") {
            if (!this.props.memberInfo.memberId) return;
            const memberInfoNew = value.cur;
            bundleCommon.load(`resource/vip/b_VIP${memberInfoNew.vipLevel}/spriteFrame`, SpriteFrame, (err, sp) => {
              !err && this.propertyNode && (this.propertyNode.props_water_spr_vip.spriteFrame = sp);
            });
            this.propertyNode.props_label_water_pro.string = this.props.memberInfo.memberRechargeWater.formatAmountWithCommas();
            this.propertyNode.props_label_sisa.string = this.props.memberInfo.totalFlowingWater.formatAmountWithCommas();
            this.propertyNode.props_label_jumlah.string = this.props.memberInfo.totalReturnWaterAmount.formatAmountWithCommas();
            this.propertyNode.props_label_skalaSaat.string = this.props.memberInfo.rebateScale * 10000 + '';
            this.propertyNode.props_Label_lorem.string = this.propertyNode.props_Label_lorem.string.replace('0', this.props.memberInfo.minimumWithdrawal.formatAmountWithCommas());
            /**如果抽数值小于最小返水线，就置灰 */
            this.propertyNode.props_spr_word_cuci.active = this.props.memberInfo.minimumWithdrawal > this.props.memberInfo.memberRechargeWater;
          }
        }
        bindUI() {}
        update(deltaTime) {}
      }) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Hall_PC_share_help.ts", ['cc', './BaseComponent.ts'], function (exports) {
  var cclegacy, Node, _decorator, BaseComponent;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      Node = module.Node;
      _decorator = module._decorator;
    }, function (module) {
      BaseComponent = module.BaseComponent;
    }],
    execute: function () {
      var _dec, _class;
      cclegacy._RF.push({}, "22ec3mWHxdN2o9K8hmFyE8W", "Hall_PC_share_help", undefined);
      const {
        ccclass,
        property
      } = _decorator;
      let share_help = exports('share_help', (_dec = ccclass('share_help'), _dec(_class = class share_help extends BaseComponent {
        constructor(...args) {
          super(...args);
          this.propertyNode = {
            props_btn_spr_shareHelp_close: new Node()
          };
          this.props = {
            isShow: true
          };
          this.events = {
            onClosePanel: () => {}
          };
        }
        start() {}
        initState() {
          return {};
        }
        bindEvent() {
          this.propertyNode.props_btn_spr_shareHelp_close.on(Node.EventType.TOUCH_END, () => {
            this.events.onClosePanel();
          });
        }
        useProps(key, value) {
          if (key === 'isShow') {
            this.node.active = value.cur;
          }
        }
        bindUI() {}
        update(deltaTime) {}
      }) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Hall_PC_Share_Info.ts", ['cc', './BaseComponent.ts', './qrcode.mjs_cjs=&original=.js', './bridge.ts', './baseBoard.ts', './index4.ts', './apiUrl.ts', './BaseViewModel.ts', './prefabDefine2.ts', './NodeIOEffect.ts', './copyToClipboard.ts', './globals.ts', './qrcode.js', './types.ts'], function (exports) {
  var cclegacy, Node, Label, Prefab, EditBox, tween, UITransform, isValid, instantiate, Vec3, UIOpacity, Sprite, sys, native, ImageAsset, Texture2D, SpriteFrame, _decorator, BaseComponent, BridgeCode, addToastAction, ApiUrl, BaseViewModel, PrefabPathDefine, EffectType, copyToClipboard, sourceManageSeletor, global, lang, fetcher, _cjsExports, ToastType;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      Node = module.Node;
      Label = module.Label;
      Prefab = module.Prefab;
      EditBox = module.EditBox;
      tween = module.tween;
      UITransform = module.UITransform;
      isValid = module.isValid;
      instantiate = module.instantiate;
      Vec3 = module.Vec3;
      UIOpacity = module.UIOpacity;
      Sprite = module.Sprite;
      sys = module.sys;
      native = module.native;
      ImageAsset = module.ImageAsset;
      Texture2D = module.Texture2D;
      SpriteFrame = module.SpriteFrame;
      _decorator = module._decorator;
    }, function (module) {
      BaseComponent = module.BaseComponent;
    }, null, function (module) {
      BridgeCode = module.BridgeCode;
    }, function (module) {
      addToastAction = module.addToastAction;
    }, null, function (module) {
      ApiUrl = module.ApiUrl;
    }, function (module) {
      BaseViewModel = module.default;
    }, function (module) {
      PrefabPathDefine = module.PrefabPathDefine;
    }, function (module) {
      EffectType = module.EffectType;
    }, function (module) {
      copyToClipboard = module.default;
    }, function (module) {
      sourceManageSeletor = module.sourceManageSeletor;
      global = module.global;
      lang = module.lang;
      fetcher = module.fetcher;
    }, function (module) {
      _cjsExports = module.default;
    }, function (module) {
      ToastType = module.ToastType;
    }],
    execute: function () {
      var _dec, _class;
      cclegacy._RF.push({}, "4dee4TRGatIOamYzBo8EmKU", "Hall_PC_Share_Info", undefined);
      const {
        ccclass,
        property
      } = _decorator;
      let Share_Info = exports('Share_Info', (_dec = ccclass('Share_Info'), _dec(_class = class Share_Info extends BaseComponent {
        constructor(...args) {
          super(...args);
          this.isZoomed = void 0;
          this.zoomScale = 3;
          // 放大的倍数
          this.fadeDuration = 0.3;
          // 背景渐变时间，单位为秒
          this.shareLink = '';
          this.openQR = false;
          this.propertyNode = {
            props_spr_QR_code: new Node(),
            props_background: new Node(),
            props_btn_fenxiang: new Node(),
            props_Label_num1: new Label(),
            props_Label_totalTaruhan: new Label(),
            props_Label_kode: new Label(),
            props_btn_share_copy: new Node(),
            props_Label_num2: new Label(),
            props_Label_num3: new Label(),
            props_Label_num4: new Label(),
            props_Label_num5: new Label(),
            props_Label_num6: new Label(),
            props_label_link: new Label(),
            props_btn_draw: new Node(),
            props_btn_share_mengi: new Node(),
            props_EditBox_shareName: new Node(),
            props_spr_title: new Node()
          };
          this.props = {
            isShow: true,
            forceRefresh: false
          };
          this.events = {
            openShareSure: () => {}
          };
        }
        start() {}
        initState() {
          return {};
        }
        bindEvent() {
          this.propertyNode.props_spr_title.on(Node.EventType.TOUCH_END, () => {
            sourceManageSeletor().getFileAsync(PrefabPathDefine._SHARE_SHARE_HELP, Prefab).then(file => {
              let help = new BaseViewModel("share_help").mountView(file.source).appendTo(this.node.parent, {
                effectType: EffectType.EFFECT1,
                isModal: true
              }).setProps({
                isShow: true
              }).setEvent({
                onClosePanel: () => {
                  help.unMount(EffectType.EFFECT2);
                }
              });
            });
          });
          this.propertyNode.props_btn_share_mengi.on(Node.EventType.TOUCH_END, () => {
            //绑定会员
            const actingId = this.propertyNode.props_EditBox_shareName.getComponent(EditBox).string.trim();
            if (actingId.length > 0) {
              this.events.openShareSure(actingId);
            }
          });
          this.propertyNode.props_btn_draw.on(Node.EventType.TOUCH_END, () => {
            // 体现
            this.ekstrakHandle();
          });
          this.propertyNode.props_btn_share_copy.on(Node.EventType.TOUCH_END, () => {
            // 复制自己编码
            this.copiedToClipboard(this.propertyNode.props_Label_kode.string);
          });
          this.propertyNode.props_btn_fenxiang.on(Node.EventType.TOUCH_END, () => {
            // 复制
            this.copiedToClipboard(this.shareLink);
          });
          this.propertyNode.props_background.on(Node.EventType.TOUCH_END, () => {
            // 关闭二维码
            tween(this.propertyNode.props_background.getComponent(UITransform)).to(this.fadeDuration, {
              height: 0
            }).start();
            if (isValid(this.node.getChildByName('copy_QR_code'))) {
              this.node.getChildByName('copy_QR_code').destroy();
              this.openQR = false;
            }
          });
          this.propertyNode.props_spr_QR_code.on(Node.EventType.TOUCH_END, () => {
            // 打开二维码
            if (this.openQR) return;
            this.openQR = true;
            let node = instantiate(this.propertyNode.props_spr_QR_code);
            node.name = 'copy_QR_code';
            // node.setScale(new Vec3(0, 0, 1))
            node.setPosition(new Vec3(134, 160, 1));
            node.getComponent(UIOpacity).opacity = 255;
            this.createQRCode(this.shareLink, 320, res => {
              node.getComponent(Sprite).spriteFrame = res;
            });
            node.getComponent(UITransform).height = 0;
            tween(node.getComponent(UITransform)).to(0.2, {
              height: 320
            }, {
              easing: 'sineOut'
            }).start();
            this.node.addChild(node);
            tween(this.propertyNode.props_background.getComponent(UITransform)).to(this.fadeDuration, {
              height: 556
            }).start();
          });
          this.renderData();
        }
        useProps(key, value) {
          if (key === 'isShow') {
            if (!value.cur) {
              var _this$node$getChildBy;
              this.propertyNode.props_background.getComponent(UITransform).height = 0;
              (_this$node$getChildBy = this.node.getChildByName('copy_QR_code')) == null || _this$node$getChildBy.destroy();
            }
            this.node.active = value.cur;
          }
          if (key === 'forceRefresh') {
            value.cur && this.renderData();
          }
        }
        copiedToClipboard(text) {
          //统一复制
          if (sys.isNative) {
            if (sys.os === sys.OS.ANDROID || sys.os === sys.OS.IOS) {
              native.bridge.sendToNative(BridgeCode.COPY_CLIPBOARD, text);
              global.hallDispatch(addToastAction({
                content: lang.write(k => k.MainPaneModule.ShareCopy, {}, {
                  placeStr: "已复制内容到剪切板"
                })
              }));
            }
          } else {
            copyToClipboard(text);
            global.hallDispatch(addToastAction({
              content: lang.write(k => k.MainPaneModule.ShareCopy, {}, {
                placeStr: "已复制内容到剪切板"
              })
            }));
            // navigator.clipboard.writeText(text).then(() => {
            //     global.hallDispatch(addToastAction({ content: lang.write(k => k.MainPaneModule.ShareCopy, {}, { placeStr: "已复制内容到剪切板" }) }))
            // }).catch((err) => {
            //     console.error('share copy fail', err)
            // });
          }
        }

        renderData() {
          fetcher.send(ApiUrl.RECOMMEND_DATA, {}, "get").then(rsp => {
            try {
              if (rsp.promotionMemberCode && rsp.promotionMemberCode !== '') {
                this.propertyNode.props_EditBox_shareName.getComponent(EditBox).string = rsp.promotionMemberCode;
                this.propertyNode.props_EditBox_shareName.getComponent(EditBox).enabled = false;
                this.propertyNode.props_btn_share_mengi.active = false;
              } else {
                this.propertyNode.props_EditBox_shareName.getComponent(EditBox).enabled = true;
                this.propertyNode.props_btn_share_mengi.active = true;
              }
              this.propertyNode.props_Label_totalTaruhan.string = rsp.totalPromotionMemberBet.formatAmountWithCommas();
              this.propertyNode.props_Label_kode.string = rsp.promotionCode;
              this.propertyNode.props_Label_num1.string = rsp.totalPromotionMemberCount;
              this.propertyNode.props_Label_num2.string = rsp.totalPromotionRewardsSum.formatAmountWithCommas();
              this.propertyNode.props_Label_num3.string = rsp.promotionRewardsSum.formatAmountWithCommas();
              this.propertyNode.props_label_link.string = rsp.shareLink;
              this.propertyNode.props_btn_draw.getComponent(Sprite).grayscale = rsp.promotionRewardsSum <= 0;
              this.shareLink = rsp.shareLink;
              this.createQRCode(this.shareLink, 80, res => {
                this.propertyNode.props_spr_QR_code.getComponent(Sprite).spriteFrame = res;
              });
            } catch (error) {
              console.log('分佣会员渲染');
            }
          });
          fetcher.send(ApiUrl.RECOMMENDDATATOTODAY, {}, "get").then(rsp => {
            try {
              if (rsp) {
                this.propertyNode.props_Label_num4.string = rsp.todayTotalPromotionMemberCount.formatAmountWithCommas();
                this.propertyNode.props_Label_num5.string = rsp.todayPromotionMemberBet.formatAmountWithCommas();
                this.propertyNode.props_Label_num6.string = rsp.todayPromotionRewardsSum.formatAmountWithCommas();
              }
            } catch (error) {
              console.log('分佣会员渲染');
            }
          });
        }
        createQRCode(text, sz, callback) {
          if (!text) return;
          let qr = _cjsExports(4, 'L');
          qr.addData(text);
          qr.make();
          let canvas = document.createElement('canvas');
          let ctx = canvas.getContext('2d');
          let size = sz;
          canvas.width = size;
          canvas.height = size;
          ctx.fillStyle = "white";
          ctx.fillRect(0, 0, size, size);
          // 根据二维码模块计算每个点的大小
          let tileW = size / qr.getModuleCount();
          let tileH = size / qr.getModuleCount();
          // 绘制二维码
          for (let row = 0; row < qr.getModuleCount(); row++) {
            for (let col = 0; col < qr.getModuleCount(); col++) {
              ctx.fillStyle = qr.isDark(row, col) ? "black" : "white";
              ctx.fillRect(Math.round(col * tileW), Math.round(row * tileH), tileW, tileH);
            }
          }
          // 将 Canvas 转换为 ImageAsset
          let imageAsset = new ImageAsset(canvas);
          // 创建 Texture2D
          let texture = new Texture2D();
          texture.image = imageAsset;
          // 应用到 Sprite
          let spriteFrame = new SpriteFrame();
          spriteFrame.texture = texture;
          callback(spriteFrame);
        }
        /**提取分享奖励 */
        ekstrakHandle() {
          if (parseFloat(this.propertyNode.props_Label_num3.string.replace(/,/g, "")) > 0) {
            fetcher.send(ApiUrl.DRAW_WATER, {
              type: 0
            }).then(() => {
              global.hallDispatch(addToastAction({
                content: lang.write(k => k.BaseBoardModule.operateDone, {}, {
                  placeStr: "操作完成"
                }),
                type: ToastType.SUCCESS
              }));
              this.renderData();
            }).catch(e => {});
          }
        }
        bindUI() {}
        update(deltaTime) {}
      }) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Hall_PC_Share_member.ts", ['cc', './BaseComponent.ts', './index4.ts', './apiUrl.ts', './globals.ts'], function (exports) {
  var cclegacy, Node, ScrollView, instantiate, Label, _decorator, BaseComponent, ApiUrl, fetcher;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      Node = module.Node;
      ScrollView = module.ScrollView;
      instantiate = module.instantiate;
      Label = module.Label;
      _decorator = module._decorator;
    }, function (module) {
      BaseComponent = module.BaseComponent;
    }, null, function (module) {
      ApiUrl = module.ApiUrl;
    }, function (module) {
      fetcher = module.fetcher;
    }],
    execute: function () {
      var _dec, _class;
      cclegacy._RF.push({}, "f9314Lfl/dGbaiCv4vmcajJ", "Hall_PC_Share_member", undefined);
      const {
        ccclass,
        property
      } = _decorator;
      let Hall_PC_Share_member = exports('Hall_PC_Share_member', (_dec = ccclass('Hall_PC_Share_member'), _dec(_class = class Hall_PC_Share_member extends BaseComponent {
        constructor(...args) {
          super(...args);
          this.memberList = [];
          this.isLoading = false;
          this.pageNum = 1;
          this.pageSize = 20;
          this.total = 0;
          this.propertyNode = {
            props_btn_help: new Node(),
            props_img_validitas_hlep: new Node(),
            props_content: new Node(),
            props_layout_item: new Node(),
            props_ScrollView: new ScrollView()
          };
          this.props = {
            isShow: true
          };
          this.events = {};
        }
        start() {}
        initState() {
          return {};
        }
        bindEvent() {
          this.propertyNode.props_btn_help.on(Node.EventType.TOUCH_END, () => {
            this.propertyNode.props_img_validitas_hlep.active = true;
            this.node.once(Node.EventType.TOUCH_END, () => {
              this.propertyNode.props_img_validitas_hlep.active = false;
            });
          });
          this.propertyNode.props_img_validitas_hlep.on(Node.EventType.TOUCH_END, () => {
            this.propertyNode.props_img_validitas_hlep.active = false;
          });
          this.renderData();
          this.propertyNode.props_ScrollView.node.on('scrolling', this.onScrolling, this);
        }
        useProps(key, value) {
          if (key === 'isShow') {
            this.node.active = value.cur;
          }
        }
        onScrolling() {
          let scrollOffset = this.propertyNode.props_ScrollView.getScrollOffset();
          let maxScrollOffset = this.propertyNode.props_ScrollView.getMaxScrollOffset();
          // 检查是否滚动到底部
          if (scrollOffset.y >= maxScrollOffset.y) {
            if (this.isLoading || this.total / this.pageSize <= this.pageNum) {
              return;
            } else {
              this.isLoading = true;
              this.pageNum++;
              this.renderData();
              console.log(this.pageNum);
            }
          }
        }
        renderData() {
          let obj = {
            pageNum: this.pageNum,
            pageSize: this.pageSize
          };
          fetcher.send(ApiUrl.MYRECOMMENDINFO, obj, "post").then(rsp => {
            this.total = rsp.total;
            for (let i = 0; i <= rsp.list.length; i++) {
              let node = instantiate(this.propertyNode.props_layout_item);
              node.active = true;
              if (rsp.list[i]) {
                node.getChildByName('label_name').getComponent(Label).string = rsp.list[i].nickName;
                node.getChildByName('label_date').getComponent(Label).string = rsp.list[i].registerTime;
                node.getChildByName('label_total').getComponent(Label).string = rsp.list[i].totalBet.formatAmountWithCommas();
                node.getChildByName('label_validitas').getComponent(Label).string = rsp.list[i].effective ? 'Yes' : 'No';
                this.propertyNode.props_content.addChild(node);
              }
            }
          });
          this.scheduleOnce(() => {
            this.isLoading = false;
          }, 3);
        }
        bindUI() {}
        update(deltaTime) {}
      }) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Hall_PcMainPanel.ts", ['cc', './BaseComponent.ts', './tool.ts', './globals.ts', './baseBoard.ts', './copyToClipboard.ts', './prefabDefine2.ts', './NodeIOEffect.ts', './UseSetOption.ts', './soundDefine2.ts', './BaseViewModel2.ts', './hallConfig.ts', './config.ts', './bridge.ts', './apiUrl.ts', './GameConfig.ts', './InputValidator.ts', './languagePkg.ts', './types.ts'], function (exports) {
  var cclegacy, Node, Label, Button, EditBox, Sprite, SpriteFrame, director, Toggle, sys, native, ProgressBar, Prefab, tween, UITransform, _decorator, BaseComponent, initToggle, bundleCommon, fetcher, lang, sourceManageSeletor, hallAudio, addToastAction, PrefabPathDefine, EffectType, UseSetOption, SoundPathDefine, BaseViewModel, config, levelMap, vipMap, deviceInfo, BridgeCode, ApiUrl, getIsTest, GameConfig, InputValidator, defaultLanguageType, ToastPosition, ToastType;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      Node = module.Node;
      Label = module.Label;
      Button = module.Button;
      EditBox = module.EditBox;
      Sprite = module.Sprite;
      SpriteFrame = module.SpriteFrame;
      director = module.director;
      Toggle = module.Toggle;
      sys = module.sys;
      native = module.native;
      ProgressBar = module.ProgressBar;
      Prefab = module.Prefab;
      tween = module.tween;
      UITransform = module.UITransform;
      _decorator = module._decorator;
    }, function (module) {
      BaseComponent = module.BaseComponent;
    }, function (module) {
      initToggle = module.initToggle;
    }, function (module) {
      bundleCommon = module.bundleCommon;
      fetcher = module.fetcher;
      lang = module.lang;
      sourceManageSeletor = module.sourceManageSeletor;
      hallAudio = module.hallAudio;
    }, function (module) {
      addToastAction = module.addToastAction;
    }, null, function (module) {
      PrefabPathDefine = module.PrefabPathDefine;
    }, function (module) {
      EffectType = module.EffectType;
    }, function (module) {
      UseSetOption = module.default;
    }, function (module) {
      SoundPathDefine = module.SoundPathDefine;
    }, function (module) {
      BaseViewModel = module.default;
    }, function (module) {
      config = module.config;
    }, function (module) {
      levelMap = module.levelMap;
      vipMap = module.vipMap;
      deviceInfo = module.deviceInfo;
    }, function (module) {
      BridgeCode = module.BridgeCode;
    }, function (module) {
      ApiUrl = module.ApiUrl;
    }, function (module) {
      getIsTest = module.getIsTest;
      GameConfig = module.GameConfig;
    }, function (module) {
      InputValidator = module.default;
    }, function (module) {
      defaultLanguageType = module.defaultLanguageType;
    }, function (module) {
      ToastPosition = module.ToastPosition;
      ToastType = module.ToastType;
    }],
    execute: function () {
      var _dec, _class;
      cclegacy._RF.push({}, "b508b9r6BRGxrlCV94Jlow+", "Hall_PcMainPanel", undefined);
      const {
        ccclass,
        property
      } = _decorator;
      let Hall_PcMainPanel = exports('Hall_PcMainPanel', (_dec = ccclass('Hall_PcMainPanel'), _dec(_class = class Hall_PcMainPanel extends BaseComponent {
        constructor(...args) {
          super(...args);
          this.share_InfoModel = void 0;
          this.share_MemberModel = void 0;
          this.shareShow = false;
          this.propertyNode = {
            props_btn_perfabs_close: new Node(),
            /**sidebar */
            props_ToggleGroup_perfabs: new Node(),
            /**二级折叠菜单 */
            props_Mask_perfabs_left: new Node(),
            /**二级菜单切换包裹 */
            props_ToggleGroup_profil: new Node(),
            /**二级分享菜单切换包裹 */
            props_ToggleGroup_Share: new Node(),
            /**informasi */
            props_layout_informasi: new Node(),
            /**setting */
            props_layout_setting: new Node(),
            /**头像框 */
            props_Layout_change_head: new Node(),
            /**头像切换按钮 */
            props_btn_head_choose: new Node(),
            /**头像图片 */
            props_spr_head: new Node(),
            /**用户登录名 */
            props_login_name: new Label(),
            /**头像选择滑动框 */
            props_ScrollView_changeHead: new Node(),
            /**头像底框 */
            props_ToggleGroup_head: new Node(),
            /**会员ID */
            props_member_id: new Node(),
            /**性别 */
            props_spr_sex: new Node(),
            /**s输入nickname */
            props_EditBox_name: new Node(),
            /**展示nickname */
            props_nick_name: new Node(),
            /**切换编辑模式 */
            props_btn_change: new Node(),
            /**金币 */
            props_Label_glod: new Node(),
            /**打开shop */
            props_btn_add_shop: new Node(),
            /**头像取消 */
            props_btn_change_batal: new Node(),
            /**头像确认 */
            props_btn_change_tentu: new Node(),
            /**level */
            props_ProgressBar_level_pro: new Node(),
            /**level数字 */
            props_label_informasi_level: new Label(),
            /**level百分比 */
            props_label_level_pro: new Node(),
            /**vip等级 */
            props_ProgressBar_vip_pro: new Node(),
            /**vip文字说明 */
            props_label_vip_pro: new Node(),
            /**vip图片 */
            props_word_informasi_vip: new Node(),
            /**绑定手机按钮 */
            props_btn_set_bindPhone: new Node(),
            /**修改密码按钮 */
            props_btn_set_ubasKataSandi: new Node(),
            /**退出登录触发按钮 */
            props_btn_set_switchAccount: new Node(),
            /**退出确认框 */
            props_spr_outgame_comfirm: new Node(),
            /**取消退出按钮 */
            props_btn_set_batal: new Node(),
            /**确认登出按钮 */
            props_btn_tentu: new Node(),
            /**复制 */
            props_btn_copy: new Node(),
            /**音乐开关 */
            props_Toggle_set_music: new Node(),
            /**音效开关 */
            props_Toggle_set_sound: new Node(),
            /**振动开关 */
            props_Toggle_set_vibration: new Node(),
            /**右边头像 */
            props_Layout_right: new Node(),
            props_Mask_share: new Node(),
            //==================背包===========================================
            props_layout_bag: new Node(),
            /**版本号 */
            props_pc_version: new Label(),
            /**兑换确认按钮 */
            props_btn_sure: new Button(),
            /**兑换码 */
            props_EditBox_conver: new EditBox(),
            props_btn_level_help: new Button(),
            /**等级说明node */
            props_img_level_hlep: new Node(),
            /**VIP说明问号按钮 */
            props_btn_vip_help: new Button(),
            /**VIP说明node */
            props_img_vip_hlep: new Node(),
            /**设备唯一号 */
            props_pc_uniqueId: new Label(),
            /**语言 */
            props_label_lang: new Label()
          };
          //已经选择的头像序号
          this.hasChooseAvatarIndex = 0;
          this.lastShowPanel = 0;
          // 待提取的返佣金额
          this.promotionRewardsSum = 0;
          this.props = {
            memberInfo: null,
            isShowWebView: true,
            isLoadRecommendData: '',
            tourist: -1,
            profileShowIndex: 1
          };
          this.events = {
            onClosePanel: () => {},
            goToShop: () => {},
            memberInfoDone: (gender, nickName, avatarIndex) => {},
            bindPhone: () => {},
            openUpgradePanel: () => {},
            openChangePwdPanel: () => {},
            logOutHandler: () => {},
            /**打开分享帮助 */
            openShareHelp: () => {},
            /**打开分享确认窗口 */
            openShareSure: (actingId, promotionCode) => {}
          };
        }
        start() {}
        initState() {
          return {
            profileShowIndex: 1,
            gender: 0,
            promotionCode: ''
          };
        }
        bindEvent() {
          //关闭
          this.propertyNode.props_btn_perfabs_close.on(Node.EventType.TOUCH_END, () => {
            this.events.onClosePanel();
          });
          //展示头像选择框
          this.propertyNode.props_btn_head_choose.on(Node.EventType.TOUCH_END, () => {
            this.setState({
              profileShowIndex: 3
            });
          });
          //打开商城
          this.propertyNode.props_btn_add_shop.on(Node.EventType.TOUCH_END, () => {
            this.events.goToShop();
            this.propertyNode.props_img_level_hlep.active = false;
            this.propertyNode.props_img_vip_hlep.active = false;
          });
          //确认头像
          this.propertyNode.props_btn_change_tentu.on(Node.EventType.TOUCH_END, () => {
            this.events.memberInfoDone(this.props.memberInfo.gender, this.props.memberInfo.nickName, this.hasChooseAvatarIndex);
          });
          //取消选择头像
          this.propertyNode.props_btn_change_batal.on(Node.EventType.TOUCH_END, () => {
            // const index = this.propertyNode.props_ToggleGroup_profil.children[0].getComponent(Toggle).isChecked ? 0 : 1
            // this.propertyNode.props_ToggleGroup_profil.children[index].getComponent(Toggle).isChecked = true
            this.propertyNode.props_Layout_change_head.active = false;
            this.setState({
              profileShowIndex: this.lastShowPanel
            });
          });
          //复制到剪切板
          this.propertyNode.props_btn_copy.on(Node.EventType.TOUCH_END, () => {
            this.copyTextToClipboard(this.props.memberInfo.memberId);
            // this.dispatch(addToastAction({ content: lang.write(k => k.HallModule.HallCopy, {}, { placeStr: "已复制内容到剪切板" }) }))
          });

          //切换性别
          this.propertyNode.props_spr_sex.on(Node.EventType.TOUCH_END, () => {
            const sprittImg = this.propertyNode.props_spr_sex.getComponent(Sprite).spriteFrame.name === "icon_common_woman" ? "icon_common_man" : "icon_common_woman";
            bundleCommon.load(`resource/${sprittImg}/spriteFrame`, SpriteFrame, (err, sp) => {
              if (!err) {
                this.events.memberInfoDone(this.props.memberInfo.gender === 0 ? 1 : 0, this.props.memberInfo.nickName, this.props.memberInfo.avatarIndex, () => {
                  this.propertyNode.props_spr_sex.getComponent(Sprite).spriteFrame = sp;
                });
              }
            });
          });
          //切换昵称编辑模式
          this.propertyNode.props_btn_change.on(Node.EventType.TOUCH_END, () => {
            // this.propertyNode.props_EditBox_name.active = !this.propertyNode.props_EditBox_name.active
            // this.propertyNode.props_nick_name.active = !this.propertyNode.props_nick_name.active
            this.propertyNode.props_img_level_hlep.active = false;
            this.propertyNode.props_img_vip_hlep.active = false;
            this.openEditNickName();
          });
          this.propertyNode.props_nick_name.on(Node.EventType.TOUCH_END, () => {
            this.openEditNickName();
          });
          //失去焦点编辑昵称
          // this.propertyNode.props_EditBox_name.getComponent(EditBox).node.on('editing-did-ended', (editbox: EditBox) => {
          // 	if (!editbox.string) {
          // 		this.propertyNode.props_btn_change.emit(Node.EventType.TOUCH_END)
          // 	} else {
          // 		this.events.memberInfoDone(this.props.memberInfo.gender, editbox.string, this.props.memberInfo.avatarIndex)
          // 	}
          // }, this);
          this.propertyNode.props_btn_set_bindPhone.on(Node.EventType.TOUCH_END, () => {
            // if (this.props.tourist !== 0) {
            // 	this.events.bindPhone()
            // }
            this.events.openUpgradePanel();
            // this.events.bindPhone()
          });
          /**打开升级框 */
          this.propertyNode.props_btn_set_ubasKataSandi.on(Node.EventType.TOUCH_END, () => {
            this.events.openChangePwdPanel();
          });
          this.propertyNode.props_btn_set_switchAccount.on(Node.EventType.TOUCH_END, () => {
            this.propertyNode.props_spr_outgame_comfirm.active = true;
          });
          this.propertyNode.props_btn_set_batal.on(Node.EventType.TOUCH_END, () => {
            this.propertyNode.props_spr_outgame_comfirm.active = false;
          });
          this.propertyNode.props_btn_tentu.on(Node.EventType.TOUCH_END, () => {
            this.events.logOutHandler();
          });
          /**兑换按钮 */
          this.propertyNode.props_btn_sure.node.on(Node.EventType.TOUCH_END, () => {
            this.propertyNode.props_img_level_hlep.active = false;
            this.propertyNode.props_img_vip_hlep.active = false;
            new InputValidator().begin(this.propertyNode.props_EditBox_conver.string).isNotEmpty().done(() => {
              fetcher.send(ApiUrl.CODE_CONVER, {
                data: this.propertyNode.props_EditBox_conver.string
              }).then(() => {
                this.dispatch(addToastAction({
                  content: lang.write(k => k.BaseBoardModule.operateDone, {}, {
                    placeStr: "操作成功"
                  }),
                  position: ToastPosition.TOP,
                  type: ToastType.SUCCESS
                }));
              });
            });
          });
          this.propertyNode.props_Toggle_set_music.on('toggle', toggle => {
            let can = director.getScene();
            if (!can.getChildByName("Canvas") || !can.getChildByName("Canvas").getChildByName("baseBoard") || !can.getChildByName("Canvas").getChildByName("baseBoard").getChildByName("props_mainBoard")) ;else {
              let nd = can.getChildByName("Canvas").getChildByName("baseBoard").getChildByName("props_mainBoard");
              nd.emit("settingMusic", {
                open: toggle.target.getComponent(Toggle).isChecked
              });
            }
            UseSetOption.Instance().setOption("music", toggle.target.getComponent(Toggle).isChecked);
          }, this);
          this.propertyNode.props_Toggle_set_sound.on('toggle', toggle => {
            let can = director.getScene();
            if (!can.getChildByName("Canvas") || !can.getChildByName("Canvas").getChildByName("baseBoard") || !can.getChildByName("Canvas").getChildByName("baseBoard").getChildByName("props_mainBoard")) ;else {
              let nd = can.getChildByName("Canvas").getChildByName("baseBoard").getChildByName("props_mainBoard");
              nd.emit("settingSound", {
                open: toggle.target.getComponent(Toggle).isChecked
              });
            }
            UseSetOption.Instance().setOption("sound", toggle.target.getComponent(Toggle).isChecked);
          }, this);
          this.propertyNode.props_Toggle_set_vibration.on('toggle', toggle => {
            UseSetOption.Instance().setOption("vibration", toggle.target.getComponent(Toggle).isChecked);
          }, this);
          initToggle(this.propertyNode.props_ToggleGroup_perfabs, this.node, new Hall_PcMainPanel.EventHandler(), "Hall_PcMainPanel", "containerEventHandler");
          initToggle(this.propertyNode.props_ToggleGroup_profil, this.node, new Hall_PcMainPanel.EventHandler(), "Hall_PcMainPanel", "containerEventHandler1");
          initToggle(this.propertyNode.props_ToggleGroup_head, this.node, new Hall_PcMainPanel.EventHandler(), "Hall_PcMainPanel", "containerEventHandler2");
          initToggle(this.propertyNode.props_ToggleGroup_Share, this.node, new Hall_PcMainPanel.EventHandler(), "Hall_PcMainPanel", "containerEventHandler3");
          this.propertyNode.props_member_id.on(Node.EventType.TOUCH_END, () => {
            this.copyTextToClipboard(this.props.memberInfo.memberId);
            // this.dispatch(addToastAction({ content: lang.write(k => k.HallModule.HallCopy, {}, { placeStr: "已复制内容到剪切板" }) }))
          });

          this.propertyNode.props_btn_level_help.node.on(Node.EventType.TOUCH_END, () => {
            this.propertyNode.props_img_level_hlep.active = !this.propertyNode.props_img_level_hlep.active;
            // bindCancleHelp()
          });

          this.propertyNode.props_btn_vip_help.node.on(Node.EventType.TOUCH_END, () => {
            this.propertyNode.props_img_vip_hlep.active = !this.propertyNode.props_img_vip_hlep.active;
            // bindCancleHelp()
          });

          this.propertyNode.props_EditBox_conver.node.on(Node.EventType.TOUCH_END, () => {
            this.propertyNode.props_img_level_hlep.active = false;
            this.propertyNode.props_img_vip_hlep.active = false;
          });
          this.node.on(Node.EventType.TOUCH_END, () => {
            this.propertyNode.props_img_level_hlep.active = false;
            this.propertyNode.props_img_vip_hlep.active = false;
          });
        }
        copyTextToClipboard(text, share = 0) {
          {
            if (sys.os === sys.OS.ANDROID || sys.os === sys.OS.IOS) {
              native.bridge.sendToNative(BridgeCode.COPY_CLIPBOARD, text);
            }
          }
          if (share === 0) {
            this.dispatch(addToastAction({
              content: lang.write(k => k.HallModule.HallCopy, {}, {
                placeStr: "已复制内容到剪切板"
              }),
              type: ToastType.SUCCESS
            }));
          } else if (share === 1) {
            // 由于推广链接提示语会被webview挡住，这里提示语放到上面
            this.dispatch(addToastAction({
              content: lang.write(k => k.MainPaneModule.ShareCopy, {}, {
                placeStr: "复制推广链接成功，快去邀请好友一起玩吧"
              }),
              type: ToastType.SUCCESS
            }));
          }
        }
        useProps(key, value) {
          if (key === "memberInfo") {
            if (!this.props.memberInfo.memberId) return;
            const memberInfoNew = value.cur;
            this.hasChooseAvatarIndex = memberInfoNew.avatarIndex;
            this.propertyNode.props_member_id.getComponent(Label).string = memberInfoNew.memberId;
            // this.propertyNode.props_EditBox_name.getComponent(EditBox).string = value.cur.nickName
            this.propertyNode.props_nick_name.getComponent(Label).string = memberInfoNew.nickName;
            this.propertyNode.props_Label_glod.getComponent(Label).string = memberInfoNew.memberAssetGoldPieces.formatAmountWithCommas();
            this.propertyNode.props_label_informasi_level.string = value.cur.level;
            this.propertyNode.props_login_name.string = memberInfoNew.memberName;
            bundleCommon.load(`resource/head/head_circle_${memberInfoNew.avatarIndex}/spriteFrame`, SpriteFrame, (err, sp) => {
              !err && (this.propertyNode.props_spr_head.getComponent(Sprite).spriteFrame = sp);
            });
            bundleCommon.load(`resource/${memberInfoNew.gender === 0 ? "icon_common_woman" : "icon_common_man"}/spriteFrame`, SpriteFrame, (err, sp) => {
              !err && (this.propertyNode.props_spr_sex.getComponent(Sprite).spriteFrame = sp);
            });
            let levelItem = levelMap.find(i => i[0] === memberInfoNew.level + 1);
            if (!levelItem) levelItem = levelMap[levelMap.length - 1];
            this.propertyNode.props_ProgressBar_level_pro.getComponent(ProgressBar).progress = memberInfoNew.levelExperience / levelItem[1];
            this.propertyNode.props_label_level_pro.getComponent(Label).string = `${(memberInfoNew.levelExperience * 100 / levelItem[1]).toFixed(0)}%`;
            let vipItem = vipMap.find(i => i[0] === memberInfoNew.vipLevel + 1);
            if (!vipItem) vipItem = vipMap[vipMap.length - 1];
            this.propertyNode.props_ProgressBar_vip_pro.getComponent(ProgressBar).progress = memberInfoNew.vipLevelExperience / vipItem[1];
            this.propertyNode.props_label_vip_pro.getComponent(Label).string = `${memberInfoNew.vipLevelExperience}/${vipItem[1]}`;
            bundleCommon.load(`resource/vip/b_VIP${memberInfoNew.vipLevel}/spriteFrame`, SpriteFrame, (err, sp) => {
              !err && this.propertyNode && (this.propertyNode.props_word_informasi_vip.getComponent(Sprite).spriteFrame = sp);
            });
          } else if (key === 'isShowWebView') {
            this.updateWebView(value.cur);
          } else if (key === 'isLoadRecommendData') {
            this.loadRecommendData(true);
          } else if (key === 'profileShowIndex') {
            // this.setState({ profileShowIndex: value.cur })
            let toggleNodeName = 'Toggle_left_ransel';
            if (value.cur === 1 || value.cur === 2 || value.cur === 3) {
              toggleNodeName = 'Toggle_left_profil';
              this.selectToggleProfil(value.cur);
            } else if (value.cur === 4) {
              toggleNodeName = 'Toggle_left_share';
            } else if (value.cur === 5) {
              toggleNodeName = 'Toggle_left_ransel';
            } else if (value.cur === 6) {
              toggleNodeName = 'Toggle_left_water';
              this.loadRebateData();
            }
            this.selectToggleLeftRansel(toggleNodeName);
          }
          if (key === "tourist") {
            this.propertyNode.props_btn_set_bindPhone.active = this.props.tourist !== 0;
            this.propertyNode.props_btn_set_ubasKataSandi.active = this.props.tourist === 0;
          }
        }
        bindUI() {
          //返水界面
          let BackWaterVM = null;
          this.useState(async (key, value) => {
            this.lastShowPanel = value.pre;
            this.propertyNode.props_layout_informasi.active = value.cur === 1;
            this.propertyNode.props_layout_setting.active = value.cur === 2;
            this.propertyNode.props_Layout_change_head.active = value.cur === 3;
            if (value.cur === 4) {
              this.loadRecommendData();
            } else {
              this.share_InfoModel && this.share_InfoModel.setProps({
                isShow: false
              });
            }
            if (value.cur === 7) {
              this.loadBawahanData();
            } else {
              this.share_MemberModel && this.share_MemberModel.setProps({
                isShow: false
              });
            }
            this.propertyNode.props_layout_bag.active = value.cur === 5;
            //返水界面
            if (value.cur === 6) {
              !BackWaterVM && (BackWaterVM = new BaseViewModel("Hall_PC_BackWater").mountView((await sourceManageSeletor().getFileAsync(PrefabPathDefine.PC_BACK_WATER, Prefab)).source).appendTo(this.node));
              BackWaterVM.viewNode.active = true;
              // 延迟处理，因为this.props.memberInfo未获取到
              this.scheduleOnce(() => {
                this.isValid && BackWaterVM.setProps({
                  memberInfo: this.props.memberInfo
                });
              }, 0.1);
            } else {
              BackWaterVM && (BackWaterVM.viewNode.active = false);
            }
            // this.propertyNode.props_layout_water.active = value.cur === 6
          }, ["profileShowIndex"]);
          getIsTest() && (this.propertyNode.props_pc_uniqueId.node.active = true);
          const hotUpdateVersion = UseSetOption.Instance().option.gameSet.hall ? UseSetOption.Instance().option.gameSet.hall.hotUpdateVersion : '';
          this.propertyNode.props_pc_version.string = GameConfig.appLocalVersion + (hotUpdateVersion && '.') + hotUpdateVersion.replace('v', '').replace(/\./g, '');
          this.propertyNode.props_pc_uniqueId.string = deviceInfo.getUniqueId();
          this.propertyNode.props_Toggle_set_music.getComponent(Toggle).isChecked = UseSetOption.Instance().option.music;
          this.propertyNode.props_Toggle_set_sound.getComponent(Toggle).isChecked = UseSetOption.Instance().option.sound;
          this.propertyNode.props_Toggle_set_vibration.getComponent(Toggle).isChecked = UseSetOption.Instance().option.vibration;
          this.propertyNode.props_label_lang.string = defaultLanguageType[config.country].langName;
        }
        updateWebView(show) {

          // this.propertyNode.props_layout_share.getChildByName("WebView").active = show;
        }
        containerEventHandler(event, customEventData) {
          hallAudio.playOneShot(SoundPathDefine.BTU_CLICK);
          this.propertyNode.props_img_level_hlep.active = false;
          this.propertyNode.props_img_vip_hlep.active = false;
          //隐藏分佣面板
          switch (event.target["name"]) {
            case "Toggle_left_profil":
              tween(this.propertyNode.props_Mask_perfabs_left.getComponent(UITransform)).to(0.1, {
                height: 138
              }).start();
              tween(this.propertyNode.props_Mask_share.getComponent(UITransform)).to(0.1, {
                height: 0
              }).start();
              // this.propertyNode.props_Mask_perfabs_left.active = true
              this.updateHandler1SelectStatus();
              break;
            case "Toggle_left_ransel":
              tween(this.propertyNode.props_Mask_perfabs_left.getComponent(UITransform)).to(0.1, {
                height: 0
              }).start();
              tween(this.propertyNode.props_Mask_share.getComponent(UITransform)).to(0.1, {
                height: 0
              }).start();
              this.setState({
                profileShowIndex: 5
              });
              // this.propertyNode.props_Mask_perfabs_left.active = false
              break;
            case "Toggle_left_share":
              this.propertyNode.props_Mask_share.active = true;
              tween(this.propertyNode.props_Mask_perfabs_left.getComponent(UITransform)).to(0.1, {
                height: 0
              }).start();
              tween(this.propertyNode.props_Mask_share.getComponent(UITransform)).to(0.1, {
                height: 138
              }).start();
              this.setState({
                profileShowIndex: 4
              });
              break;
            case "Toggle_left_water":
              tween(this.propertyNode.props_Mask_perfabs_left.getComponent(UITransform)).to(0.1, {
                height: 0
              }).start();
              tween(this.propertyNode.props_Mask_share.getComponent(UITransform)).to(0.1, {
                height: 0
              }).start();
              this.setState({
                profileShowIndex: 6
              });
              this.loadRebateData();
              break;
          }
        }
        async openEditNickName() {
          const changeNickNameViewModel = new BaseViewModel("Hall_ChangeNickName").mountView((await sourceManageSeletor().getFileAsync(PrefabPathDefine._PC_CHANGE_NICKNAME, Prefab)).source).appendTo(this.node.parent, {
            effectType: EffectType.EFFECT1,
            isModal: true
          }).setProps({
            nickName: this.props.memberInfo.nickName
          }).setEvent({
            onCloseHandler: () => {
              changeNickNameViewModel.unMount(EffectType.EFFECT2);
            },
            onModifyHandler: newNickName => {
              return new Promise((resolve, reject) => {
                try {
                  this.events.memberInfoDone(this.props.memberInfo.gender, newNickName, this.props.memberInfo.avatarIndex);
                  resolve(true);
                } catch (e) {
                  reject(e);
                }
              });
            }
          });
        }
        selectToggleProfil(index) {
          const nodeName = index === 0 ? 'Toggle_left_informasi' : 'Toggle_left_setting';
          this.propertyNode.props_ToggleGroup_profil.children.filter(v => v.name.startsWith('Toggle_')).forEach(v => {
            v.getComponent(Toggle).isChecked = v.name === nodeName;
          });
        }
        selectToggleLeftRansel(nodeName) {
          this.propertyNode.props_ToggleGroup_perfabs.children.filter(v => v.name.startsWith('Toggle_')).forEach(v => {
            v.getComponent(Toggle).isChecked = v.name === nodeName;
          });
          this.propertyNode.props_Mask_perfabs_left.getComponent(UITransform).height = nodeName === 'Toggle_left_profil' ? 138 : 0;
        }
        containerEventHandler1(event, customEventData) {
          hallAudio.playOneShot(SoundPathDefine.BTU_CLICK);
          this.propertyNode.props_img_level_hlep.active = false;
          this.propertyNode.props_img_vip_hlep.active = false;
          switch (event.target["name"]) {
            case "Toggle_left_informasi":
              this.setState({
                profileShowIndex: 1
              });
              break;
            case "Toggle_left_setting":
              this.setState({
                profileShowIndex: 2
              });
              break;
          }
        }
        containerEventHandler2(event, customEventData) {
          hallAudio.playOneShot(SoundPathDefine.BTU_CLICK);
          bundleCommon.load(`resource/head/head_circle_${event.target["name"].split('_')[1]}/spriteFrame`, SpriteFrame, (err, sp) => {
            !err && (this.propertyNode.props_spr_head.getComponent(Sprite).spriteFrame = sp);
          });
          this.hasChooseAvatarIndex = +event.target["name"].split('_')[1];
        }
        updateHandler1SelectStatus() {
          const selectNode = this.propertyNode.props_ToggleGroup_profil.children.find(v => v.getComponent(Toggle).isChecked);
          if (selectNode.name === 'Toggle_left_informasi') {
            this.setState({
              profileShowIndex: 1
            });
          } else if (selectNode.name === 'Toggle_left_setting') {
            this.setState({
              profileShowIndex: 2
            });
          }
        }
        containerEventHandler3() {
          hallAudio.playOneShot(SoundPathDefine.BTU_CLICK);
          const selectNode = this.propertyNode.props_ToggleGroup_Share.children.find(v => v.getComponent(Toggle).isChecked);
          if (selectNode.name === 'Toggle_left_informasi') {
            this.setState({
              profileShowIndex: 4
            });
            this.share_MemberModel && this.share_MemberModel.setProps({
              isShow: false
            });
          } else if (selectNode.name === 'Toggle_left_bawahan') {
            this.setState({
              profileShowIndex: 7
            });
            this.share_InfoModel && this.share_InfoModel.setProps({
              isShow: false
            });
          }
        }
        // private updateShareSelectStatus() {
        // 	const selectNode = this.propertyNode.props_ToggleGroup_Share.children.find(v => v.getComponent(Toggle).isChecked);
        // 	if (selectNode.name === 'Toggle_left_informasi') {
        // 		// this.setState({ profileShowIndex: 4 })
        // 	} else if (selectNode.name === 'Toggle_left_bawahan') {
        // 		this.setState({ profileShowIndex: 7 })
        // 	}
        // }

        /**加载推荐用户的 */
        loadRecommendData(isforceRefresh = false) {
          if (!this.share_InfoModel) {
            sourceManageSeletor().getFileAsync(PrefabPathDefine.SHARE_Info, Prefab).then(file => {
              this.share_InfoModel = new BaseViewModel("Share_Info").mountView(file.source).appendTo(this.node).setProps({
                isShow: true
              }).setEvent({
                openShareSure: actingId => {
                  this.openShareSure(actingId);
                }
              });
            });
          } else {
            this.share_InfoModel.setProps({
              isShow: true,
              forceRefresh: isforceRefresh
            });
          }
        }
        /**加载推荐会员列表的 */
        loadBawahanData() {
          if (!this.share_MemberModel) {
            this.share_MemberModel = new BaseViewModel("Hall_PC_Share_member").mountView(sourceManageSeletor().getFile(PrefabPathDefine.SHARE_MEMBER_LIST).source).appendTo(this.node, {
              effectType: EffectType.EFFECT1,
              isModal: false
            }).setProps({
              isShow: true
            }).setEvent({});
          } else {
            this.share_MemberModel.setProps({
              isShow: true
            });
          }
        }
        /**返水面板加载 */
        loadRebateData() {}
        initWebView() {
          // const url = config.shareUrl + "/memberRecommendList.html?id=" + this.props.memberInfo.memberId
          const url = config.agentPageUrl + "?token=" + sys.localStorage.getItem("token");
          // this.propertyNode.props_layout_share.getChildByName("WebView").getComponent(WebView).url = url;
        }

        /**打开确认上级代理窗口 */
        openShareSure(actingId) {
          if (actingId.length === 0) {
            return;
          }
          this.events.openShareSure(actingId, this.state.promotionCode);
        }
        update(deltaTime) {}
      }) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Hall_ProhibitPanel.ts", ['cc', './BaseComponent.ts'], function (exports) {
  var cclegacy, Button, Node, _decorator, BaseComponent;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      Button = module.Button;
      Node = module.Node;
      _decorator = module._decorator;
    }, function (module) {
      BaseComponent = module.BaseComponent;
    }],
    execute: function () {
      var _dec, _class;
      cclegacy._RF.push({}, "4d7c0jK6OlNurHVWSHd2FZ5", "Hall_ProhibitPanel", undefined);
      const {
        ccclass,
        property
      } = _decorator;
      let Hall_ProhibitPanel = exports('Hall_ProhibitPanel', (_dec = ccclass('Hall_ProhibitPanel'), _dec(_class = class Hall_ProhibitPanel extends BaseComponent {
        constructor(...args) {
          super(...args);
          this.propertyNode = {
            props_btn_off: new Button()
          };
          this.props = {};
          this.events = {
            onCloseHandle: () => {}
          };
        }
        start() {}
        initState() {
          return {};
        }
        bindEvent() {
          this.propertyNode.props_btn_off.node.on(Node.EventType.TOUCH_END, () => {
            this.events.onCloseHandle();
          });
        }
        useProps(key, value) {}
        bindUI() {}
        update(deltaTime) {}
      }) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Hall_RegPageV2.ts", ['cc', './BaseComponent.ts', './index4.ts', './InputValidator.ts', './baseBoard.ts', './CaptchaGenerator.ts', './CountDowner.ts', './languagePkg.ts', './hallConfig.ts', './globals.ts'], function (exports) {
  var cclegacy, Button, EditBox, Node, _decorator, Label, BaseComponent, InputValidator, addToastAction, CaptchaGenerator, CountDowner, defaultLanguageType, config, lang, global;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      Button = module.Button;
      EditBox = module.EditBox;
      Node = module.Node;
      _decorator = module._decorator;
      Label = module.Label;
    }, function (module) {
      BaseComponent = module.BaseComponent;
    }, null, function (module) {
      InputValidator = module.default;
    }, function (module) {
      addToastAction = module.addToastAction;
    }, function (module) {
      CaptchaGenerator = module.default;
    }, function (module) {
      CountDowner = module.CountDowner;
    }, function (module) {
      defaultLanguageType = module.defaultLanguageType;
    }, function (module) {
      config = module.config;
    }, function (module) {
      lang = module.lang;
      global = module.global;
    }],
    execute: function () {
      var _dec, _class;
      cclegacy._RF.push({}, "cbd21bsa3FJe6mOkkqD7tCt", "Hall_RegPageV2", undefined);
      const {
        ccclass,
        property
      } = _decorator;
      let Hall_RegPageV2 = exports('Hall_RegPageV2', (_dec = ccclass('Hall_RegPageV2'), _dec(_class = class Hall_RegPageV2 extends BaseComponent {
        constructor(...args) {
          super(...args);
          this.captchaGenerator = void 0;
          this.propertyNode = {
            props_closeBtu: new Button(),
            /**用户名 */
            props_input_akun: new EditBox(),
            /**第一遍密码 */
            props_input_sandi: new EditBox(),
            /**重复密码 */
            props_input_kSandi: new EditBox(),
            /**接收短信验证码 */
            props_input_smsCode: new EditBox(),
            /**发送短信验证码的按钮 */
            props_button_send_code: new Button(),
            /**确认 */
            props_btn_ok: new Button(),
            /**验证码 */
            props_input_kode: new EditBox(),
            /**验证码图片 */
            props_spr_kode: new Node(),
            /**倒计时 */
            props_spr_send_cooling: new Node()
          };
          this.props = {};
          this.events = {
            closeHandler: () => {},
            regHandler: () => {},
            regDoneHandler: () => {},
            sendSmsCode: phoneNumber => new Promise(reslove => reslove(""))
          };
        }
        start() {}
        initState() {
          return {};
        }
        bindEvent() {
          this.propertyNode.props_closeBtu.node.on(Node.EventType.TOUCH_END, () => {
            this.events.closeHandler();
          });
          /**发送验证码 */
          this.propertyNode.props_button_send_code.node.on(Node.EventType.TOUCH_END, () => {
            const phoneNumber = this.propertyNode.props_input_akun.string;
            new InputValidator().begin().isLocalPhoneNumber(phoneNumber).done(() => {
              window['countDownerReg'].begin();
              this.events.sendSmsCode(defaultLanguageType[config.country].phoneAreaNum + phoneNumber).then(code => {
                this.propertyNode.props_input_smsCode.getComponent(EditBox).string = code;
              });
            });
          });
          /**切换验证码 */
          this.propertyNode.props_spr_kode.on(Node.EventType.TOUCH_END, () => {
            this.captchaGenerator.generate();
          });
          this.propertyNode.props_btn_ok.node.on(Node.EventType.TOUCH_END, () => {
            const loginName = this.propertyNode.props_input_akun.string.trim();
            const password = this.propertyNode.props_input_sandi.string.trim();
            const password_re = this.propertyNode.props_input_kSandi.string.trim();
            const verificationCode = this.propertyNode.props_input_smsCode.string.trim();
            let success = false;
            console.log('login register', loginName, password, password_re, verificationCode);
            new InputValidator().begin().isLocalPhoneNumber(loginName).isEmtry(password, lang.write(k => k.HallModule.passwordEmptyError, {}, {
              placeStr: "请输入密码"
            })).isCharLength([6, 30], password).isEmtry(password_re, lang.write(k => k.HallModule.confirmPasswordEmptyError, {}, {
              placeStr: "请输入确认密码"
            })).isCharLength([6, 30], password_re).done(() => {
              success = true;
            });
            console.log('login register success', success);
            if (!success) return;
            if (password !== password_re) {
              global.hallDispatch(addToastAction({
                content: lang.write(k => k.HallModule.pwdRepetitionError, {}, {
                  placeStr: "两次输入的密码不一致"
                })
              }));
              return;
            }
            console.log('login register validate success1');
            const valodateCode = this.propertyNode.props_input_kode.string;
            if (valodateCode.trim().length === 0) {
              global.hallDispatch(addToastAction({
                content: lang.write(k => k.HallModule.captchaEmptyError, {}, {
                  placeStr: "请输入验证码"
                })
              }));
              return;
            }
            console.log('login register validate success2');
            if (valodateCode.toLocaleLowerCase() !== this.captchaGenerator.captcha.toLocaleLowerCase()) {
              this.captchaGenerator.generate();
              this.propertyNode.props_input_kode.string = '';
              global.hallDispatch(addToastAction({
                content: lang.write(k => k.HallModule.captchaError, {}, {
                  placeStr: "验证码错误"
                })
              }));
              return;
            }
            console.log('login register validate success3');
            this.events.regHandler(loginName, password, verificationCode);
          });
        }
        useProps(key, value) {
          /**传入的props变更触发的函数 */
        }
        bindUI() {
          this.captchaGenerator = new CaptchaGenerator(this.propertyNode.props_spr_kode, 4);
          const render = (isRunning, phoneCountDown) => {
            if (!this.propertyNode) return;
            if (isRunning) {
              this.propertyNode.props_spr_send_cooling.active = true;
              this.propertyNode.props_spr_send_cooling.getChildByName("Label_send_cooling").getComponent(Label).string = phoneCountDown + "S";
            } else {
              this.propertyNode.props_spr_send_cooling.active = false;
            }
          };
          if (!window['countDownerReg']) {
            window['countDownerReg'] = new CountDowner(60, render);
          } else {
            window['countDownerReg'].goOn(render);
          }
        }
        update(deltaTime) {}
      }) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Hall_reliefPanel.ts", ['cc', './BaseComponent.ts'], function (exports) {
  var cclegacy, Button, Label, Node, _decorator, BaseComponent;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      Button = module.Button;
      Label = module.Label;
      Node = module.Node;
      _decorator = module._decorator;
    }, function (module) {
      BaseComponent = module.BaseComponent;
    }],
    execute: function () {
      var _dec, _class;
      cclegacy._RF.push({}, "9eff0j1+KlPVZwdMFMTFwrH", "Hall_reliefPanel", undefined);
      const {
        ccclass,
        property
      } = _decorator;
      let Hall_ReliefPanel = exports('Hall_ReliefPanel', (_dec = ccclass('Hall_ReliefPanel'), _dec(_class = class Hall_ReliefPanel extends BaseComponent {
        constructor(...args) {
          super(...args);
          this.propertyNode = {
            props_btn_sure: new Button(),
            props_label_gold: new Label(),
            props_Label_benefit: new Label()
          };
          this.props = {
            amount: 0
          };
          this.events = {
            onClosePanel: () => {}
          };
        }
        start() {}
        initState() {
          return {};
        }
        bindEvent() {
          this.propertyNode.props_btn_sure.node.on(Node.EventType.TOUCH_END, () => {
            this.events.onClosePanel();
          });
        }
        useProps(key, value) {
          if (key === "amount") {
            this.propertyNode.props_Label_benefit.string = this.propertyNode.props_Label_benefit.string.replace('000', this.props.amount.formatAmountWithCommas());
            this.propertyNode.props_label_gold.string = this.props.amount.formatAmountWithLetter();
          }
        }
        bindUI() {}
        update(deltaTime) {}
      }) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Hall_ResetPassword.ts", ['cc', './BaseComponent.ts', './apiUrl.ts', './InputValidator.ts', './globals.ts'], function (exports) {
  var cclegacy, Node, EditBox, sys, _decorator, BaseComponent, ApiUrl, InputValidator, fetcher;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      Node = module.Node;
      EditBox = module.EditBox;
      sys = module.sys;
      _decorator = module._decorator;
    }, function (module) {
      BaseComponent = module.BaseComponent;
    }, function (module) {
      ApiUrl = module.ApiUrl;
    }, function (module) {
      InputValidator = module.default;
    }, function (module) {
      fetcher = module.fetcher;
    }],
    execute: function () {
      var _dec, _class;
      cclegacy._RF.push({}, "52dd8cmURVDm5scHbtTzdif", "Hall_ResetPassword", undefined);
      const {
        ccclass,
        property
      } = _decorator;
      let Hall_ResetPassword = exports('Hall_ResetPassword', (_dec = ccclass('Hall_ResetPassword'), _dec(_class = class Hall_ResetPassword extends BaseComponent {
        constructor(...args) {
          super(...args);
          this.propertyNode = {
            /**关闭 */
            props_btn_node_close: new Node(),
            /**发送验证码 */
            props_btn_send: new Node(),
            /**手机号码 */
            props_intput_phone_phoneNum: new Node(),
            /**验证码 */
            props_intput_phone_captcha: new Node(),
            /**密码输入框 */
            props_intput_phone_password: new Node(),
            /**登录注册按钮 */
            props_btn_login: new Node()
          };
          this.props = {
            smsCode: ""
          };
          this.events = {
            closeHandler: () => {},
            sendSmsHandler: phoneNumber => {},
            pwdLoginSuccess: () => {},
            inputError: error => {}
          };
        }
        start() {}
        initState() {
          return {};
        }
        bindEvent() {
          this.propertyNode.props_btn_node_close.on(Node.EventType.TOUCH_END, () => {
            this.events.closeHandler();
          });
          this.propertyNode.props_btn_send.on(Node.EventType.TOUCH_END, () => {
            const phoneNumber = this.propertyNode.props_intput_phone_phoneNum.getComponent(EditBox).string;
            fetcher.send(ApiUrl.SEND_SMS, {
              phone: phoneNumber
            }).then(rsp => {
              this.events.sendSmsHandler(phoneNumber);
              this.propertyNode.props_intput_phone_captcha.getComponent(EditBox).string = rsp;
            }).catch(e => {
              console.log(e);
            });
          });
          this.propertyNode.props_btn_login.on(Node.EventType.TOUCH_END, () => {
            const phone = this.propertyNode.props_intput_phone_phoneNum.getComponent(EditBox).string;
            const verificationCode = this.propertyNode.props_intput_phone_captcha.getComponent(EditBox).string;
            const password = this.propertyNode.props_intput_phone_password.getComponent(EditBox).string;
            new InputValidator().begin().isCharLength([6, 40], password).isPhoneNumber(phone).isSmsCode(verificationCode).done(() => {
              fetcher.send(ApiUrl.RESET_PASSWORD, {
                phone,
                verificationCode,
                password
              }).then(data => {
                sys.localStorage.setItem("token", data);
                this.events.pwdLoginSuccess();
              }).catch(e => {
                console.log(e);
              });
            });
          });
        }
        useProps(key, value) {}
        bindUI() {}
        update(deltaTime) {}
      }) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Hall_Service.ts", ['cc', './BaseComponent.ts', './hallConfig.ts', './SimpleHtmlParser.ts'], function (exports) {
  var cclegacy, Button, Node, WebView, sys, _decorator, BaseComponent, config, CustomHtmlRenderer;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      Button = module.Button;
      Node = module.Node;
      WebView = module.WebView;
      sys = module.sys;
      _decorator = module._decorator;
    }, function (module) {
      BaseComponent = module.BaseComponent;
    }, function (module) {
      config = module.config;
    }, function (module) {
      CustomHtmlRenderer = module.CustomHtmlRenderer;
    }],
    execute: function () {
      var _dec, _class;
      cclegacy._RF.push({}, "eb8f9JX+4JL85YAhrYtco28", "Hall_Service", undefined);
      const {
        ccclass,
        property
      } = _decorator;
      let Hall_Service = exports('Hall_Service', (_dec = ccclass('Hall_Service'), _dec(_class = class Hall_Service extends BaseComponent {
        constructor(...args) {
          super(...args);
          this.propertyNode = {
            props_btn_service_close: new Button(),
            props_btn_service_browser: new Button(),
            props_btn_service_html: new Button(),
            props_btn_service_officialWebsite: new Button(),
            props_customHtmlRenderer: new Node(),
            props_webView_service: new WebView()
          };
          this.props = {
            openUrl: ''
          };
          this.events = {
            onClosePanel: () => {}
          };
        }
        start() {}
        initState() {
          return {};
        }
        bindEvent() {
          this.propertyNode.props_btn_service_close.node.on(Node.EventType.TOUCH_END, () => {
            this.events.onClosePanel();
          });
          this.propertyNode.props_btn_service_browser.node.on(Node.EventType.TOUCH_END, () => {
            sys.openURL(config.customerOutUrl);
            this.propertyNode.props_customHtmlRenderer.active = false;
            this.propertyNode.props_webView_service.node.active = true;
            // this.events.onClosePanel()
          });

          this.propertyNode.props_btn_service_html.node.on(Node.EventType.TOUCH_END, () => {
            this.propertyNode.props_customHtmlRenderer.active = true;
            this.propertyNode.props_webView_service.node.active = false;
          });
          this.propertyNode.props_btn_service_officialWebsite.node.on(Node.EventType.TOUCH_END, () => {
            sys.openURL(config.shareUrl);
            this.events.onClosePanel();
          });
        }
        useProps(key, value) {
          // 	if (key === "openUrl") {
          // 		this.propertyNode.props_webView_service.url = this.props.openUrl
          // 	}
        }
        bindUI() {
          const htmlContent = `
		<div style="font-size: 40; color: #FFD700; font-weight: bold;">Customer Service Center</div>
		<p style="color: #ffffff;">Welcome to our <span style="font-style: italic; color: #00ff00;">premium</span> support channel.</p>
		<div style="color: #00ffff;">
			Contact us via:
			<br/>
			<span style="color: #ffff00; text-decoration: underline;">Email: support@rummy.com</span>
		</div>
		<p>
			<span style="font-size: 25; color: #ff00ff;">Phone: +1 234 567 890</span>
		</p>
		<p>
			<img src="https://w.115.com/m_r/web/static/images/pic_left_det@2x.png?_vh=390e90f_3"
			 style="width: 100px; height: 100px;" />
		</p>
		<div style="font-style: italic; color: #aaaaaa;">Available <b style="color: #ff0000;">24/7</b> for your convenience.</div>
		`;
          let renderer = this.propertyNode.props_customHtmlRenderer.getComponent(CustomHtmlRenderer);
          if (!renderer) {
            renderer = this.propertyNode.props_customHtmlRenderer.addComponent(CustomHtmlRenderer);
          }
          renderer.renderHtml(htmlContent);
        }
        update(deltaTime) {}
      }) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Hall_SetPassword.ts", ['cc', './BaseComponent.ts'], function (exports) {
  var cclegacy, _decorator, BaseComponent;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      _decorator = module._decorator;
    }, function (module) {
      BaseComponent = module.BaseComponent;
    }],
    execute: function () {
      var _dec, _class;
      cclegacy._RF.push({}, "e30d6RAfXFGVJ5M9eJsHZbo", "Hall_SetPassword", undefined);
      const {
        ccclass,
        property
      } = _decorator;
      let Hall_SetPassword = exports('Hall_SetPassword', (_dec = ccclass('Hall_SetPassword'), _dec(_class = class Hall_SetPassword extends BaseComponent {
        constructor(...args) {
          super(...args);
          this.propertyNode = {};
          this.props = {};
          this.events = {};
        }
        start() {}
        initState() {
          return {};
        }
        bindEvent() {}
        useProps(key, value) {
          /**传入的props变更触发的函数 */
          // console.log(key, "change", value.cur)
        }
        bindUI() {}
        update(deltaTime) {}
      }) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Hall_ShareHelp.ts", ['cc', './BaseComponent.ts'], function (exports) {
  var cclegacy, Node, _decorator, BaseComponent;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      Node = module.Node;
      _decorator = module._decorator;
    }, function (module) {
      BaseComponent = module.BaseComponent;
    }],
    execute: function () {
      var _dec, _class;
      cclegacy._RF.push({}, "f0b4aU9zY5GHbCzCfiUY+TP", "Hall_ShareHelp", undefined);
      const {
        ccclass,
        property
      } = _decorator;
      let Hall_ShareHelp = exports('Hall_ShareHelp', (_dec = ccclass('Hall_ShareHelp'), _dec(_class = class Hall_ShareHelp extends BaseComponent {
        constructor(...args) {
          super(...args);
          this.propertyNode = {
            props_btn_spr_shareHelp_close: new Node()
          };
          this.props = {};
          this.events = {
            close: () => {}
          };
        }
        start() {}
        initState() {
          return {};
        }
        bindEvent() {
          this.propertyNode.props_btn_spr_shareHelp_close.on(Node.EventType.TOUCH_END, () => {
            this.events.close();
          });
        }
        bindUI() {}
        useProps(key, value) {}
        update(deltaTime) {}
      }) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Hall_ShareSure.ts", ['cc', './BaseComponent.ts', './globals.ts', './Throttler.ts', './apiUrl.ts', './tool.ts'], function (exports) {
  var cclegacy, Node, Label, Sprite, log, _decorator, BaseComponent, global, Throttler, ApiUrl, omitStr;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      Node = module.Node;
      Label = module.Label;
      Sprite = module.Sprite;
      log = module.log;
      _decorator = module._decorator;
    }, function (module) {
      BaseComponent = module.BaseComponent;
    }, function (module) {
      global = module.global;
    }, function (module) {
      Throttler = module.default;
    }, function (module) {
      ApiUrl = module.ApiUrl;
    }, function (module) {
      omitStr = module.omitStr;
    }],
    execute: function () {
      var _dec, _class;
      cclegacy._RF.push({}, "920fdXwbEJCirkkAbkv+w26", "Hall_ShareSure", undefined);
      const {
        ccclass,
        property
      } = _decorator;
      let Hall_ShareSure = exports('Hall_ShareSure', (_dec = ccclass('Hall_ShareSure'), _dec(_class = class Hall_ShareSure extends BaseComponent {
        constructor(...args) {
          super(...args);
          this.propertyNode = {
            props_btn_set_batal: new Node(),
            props_btn_tentu: new Node(),
            props_Label_pemain: new Label(),
            props_Label_id: new Label(),
            props_spr_head: new Sprite()
          };
          this.props = {
            avatarIndex: -1,
            memberId: '',
            nickName: '',
            actingId: ''
          };
          this.events = {
            batalActing: actingId => {},
            close: () => {}
          };
        }
        start() {}
        initState() {
          return {};
        }
        bindEvent() {
          this.propertyNode.props_btn_set_batal.on(Node.EventType.TOUCH_END, () => {
            this.events.close();
          });
          this.propertyNode.props_btn_tentu.on(Node.EventType.TOUCH_END, () => {
            Throttler.isDebouncerAsync(ApiUrl.RECOMMEND_BIND, 500, true, () => {}).then(isPass => {
              this.events.batalActing(this.props.actingId);
            });
          });
        }
        bindUI() {}
        useProps(key, value) {
          log("usr === ", key, value);
          if (key === 'avatarIndex') {
            global.loadHeadSprite(value.cur, this.propertyNode.props_spr_head);
          } else if (key === 'memberId') {
            this.propertyNode.props_Label_id.string = value.cur;
          } else if (key === 'nickName') {
            this.propertyNode.props_Label_pemain.string = omitStr(value.cur, 14);
          }
        }
        update(deltaTime) {}
      }) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Hall_shopHistoryPanel.ts", ['cc', './BaseComponent.ts', './bridge.ts', './copyToClipboard.ts', './baseBoard.ts', './globals.ts', './TaskScheduler.ts', './soundDefine2.ts'], function (exports) {
  var cclegacy, Node, ScrollView, UITransform, instantiate, assetManager, Sprite, SpriteFrame, Label, sys, native, Color, _decorator, BaseComponent, BridgeCode, hallAudio, TaskScheduler, SoundPathDefine;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      Node = module.Node;
      ScrollView = module.ScrollView;
      UITransform = module.UITransform;
      instantiate = module.instantiate;
      assetManager = module.assetManager;
      Sprite = module.Sprite;
      SpriteFrame = module.SpriteFrame;
      Label = module.Label;
      sys = module.sys;
      native = module.native;
      Color = module.Color;
      _decorator = module._decorator;
    }, function (module) {
      BaseComponent = module.BaseComponent;
    }, function (module) {
      BridgeCode = module.BridgeCode;
    }, null, null, function (module) {
      hallAudio = module.hallAudio;
    }, function (module) {
      TaskScheduler = module.default;
    }, function (module) {
      SoundPathDefine = module.SoundPathDefine;
    }],
    execute: function () {
      var _dec, _class;
      cclegacy._RF.push({}, "6ecf1OU/eZGDrvvz+Cq1jD6", "Hall_shopHistoryPanel", undefined);
      const {
        ccclass,
        property
      } = _decorator;
      let Hall_shopHistoryPanel = exports('Hall_shopHistoryPanel', (_dec = ccclass('Hall_shopHistoryPanel'), _dec(_class = class Hall_shopHistoryPanel extends BaseComponent {
        constructor(...args) {
          super(...args);
          this.taskScheduler = new TaskScheduler();
          this.propertyNode = {
            /**关闭面板 */
            props_btn_spr_choose_close: new Node(),
            /** history的template*/
            props_hiatory_template: new Node(),
            props_ScrollView_choose: new Node(),
            props_content: new Node(),
            /**银行图标 */
            props_spr_bankIcon: new Node(),
            /**银行名称 */
            props_label_bankName: new Node(),
            /**银行账号 */
            props_label_number: new Node(),
            /**充值金额 */
            props_label_amount: new Node(),
            /**充值日期 */
            props_label_date: new Node(),
            /**支付状态 */
            props_label_state: new Node(),
            /**复制账号按钮 */
            props_btn_copy: new Node(),
            props_label_nodata: new Node()
          };
          this.props = {
            shopHistoryList: []
          };
          this.events = {
            onClosePanel: () => {}
          };
        }
        start() {}
        initState() {
          return {};
        }
        bindEvent() {
          this.propertyNode.props_btn_spr_choose_close.on(Node.EventType.TOUCH_END, () => {
            hallAudio.playOneShot(SoundPathDefine.BTU_CLICK);
            this.events.onClosePanel();
          });
        }
        useProps(key, value) {
          if (key === "shopHistoryList") {
            // console.log("shopHistoryList",value.cur);
            value.cur.length && (this.propertyNode.props_label_nodata.active = false);
            this.updateHistoryItem(value.cur);
          }
        }

        // private updateHistoryItem(item: ShopHistoryItem[]) {
        //     this.propertyNode.props_content.removeAllChildren();
        //     const isFirst = this.propertyNode.props_content.children.length ? true : false;

        //     if (!isFirst && item.length > 5) {
        //         item.slice(0, 5).forEach((v, i) => {
        //            this.createItem(v)
        //         })
        //     } else {
        //         item.forEach((v, i) => {
        //             this.createItem(v)
        //         })
        //     }

        //     item.forEach((data, i) => {            
        //         if (i < 5) return
        //         this.taskScheduler.joinQueue(new Task((done) => {
        //             this.createItem(data)
        //             this.scheduleOnce(() => done(), 0.2)
        //         }))
        //     })
        // }

        updateHistoryItem(item) {
          // 清空已有内容
          this.propertyNode.props_content.removeAllChildren();

          // 加载初始数据
          item.slice(0, 5).forEach((v, i) => {
            this.createItem(v);
          });

          // 监听滚动事件，实现懒加载
          const scrollView = this.propertyNode.props_ScrollView_choose.getComponent(ScrollView);
          scrollView.node.on(ScrollView.EventType.SCROLL_TO_BOTTOM, () => {
            this.loadMoreDataIfNeeded(item);
          }, this);
        }
        loadMoreDataIfNeeded(item) {
          const scrollView = this.propertyNode.props_ScrollView_choose.getComponent(ScrollView);
          const scrollOffset = scrollView.getScrollOffset();
          const contentSize = scrollView.content.getComponent(UITransform).contentSize;
          const scrollViewSize = scrollView.node.getComponent(UITransform).contentSize;
          if (contentSize.height > scrollViewSize.height) {
            // 当滚动到底部时加载更多数据
            const startIndex = this.propertyNode.props_content.children.length;
            const endIndex = Math.min(startIndex + 5, item.length); // 一次加载5个数据，可以根据需要调整
            for (let i = startIndex; i < endIndex; i++) {
              this.createItem(item[i]);
            }
          }
        }
        createItem(v) {
          const historyItem = instantiate(this.propertyNode.props_hiatory_template);
          let lastQeqPicUrl = v.bankIcon;
          assetManager.loadRemote(v.bankIcon, (err, asset) => {
            if (this.propertyNode && !err && asset.nativeUrl === lastQeqPicUrl) {
              historyItem.getChildByName("props_spr_bankIcon").getComponent(Sprite).spriteFrame = SpriteFrame.createWithImage(asset);
            }
          });
          historyItem.getChildByName("props_label_bankName").getComponent(Label).string = v.bankName;
          historyItem.getChildByName("props_label_number").getComponent(Label).string = v.orderNo;
          historyItem.getChildByName("props_label_amount").getComponent(Label).string = v.orderMoney + "";
          historyItem.getChildByName("props_label_date").getComponent(Label).string = v.orderTime;
          historyItem.getChildByName("props_label_state").getComponent(Label).color = this.changePayStateColor(v.status).color;
          historyItem.getChildByName("props_label_state").getComponent(Label).string = this.changePayStateColor(v.status).state;
          historyItem.active = true;
          historyItem.getChildByName("props_btn_copy").on(Node.EventType.TOUCH_END, () => {
            hallAudio.playOneShot(SoundPathDefine.BTU_CLICK);
            {
              if (sys.os === sys.OS.ANDROID || sys.os === sys.OS.IOS) {
                native.bridge.sendToNative(BridgeCode.COPY_CLIPBOARD, v.orderNo);
              }
            }
          });
          this.propertyNode.props_content.addChild(historyItem);
        }

        /**
         * @param state 
         * 状态 1:处理中  2:成功  3:失败 4:待支付 5:异常
         */
        changePayStateColor(state) {
          let status;
          if (state === 1) {
            status = {
              state: "Processing",
              color: new Color().fromHEX("#00c6ff")
            };
          } else if (state === 2) {
            status = {
              state: "Success",
              color: new Color().fromHEX("#34dc00")
            };
          } else if (state === 3) {
            status = {
              state: "Fail",
              color: new Color().fromHEX("#ff1010")
            };
          } else if (state === 4) {
            status = {
              state: "To be paid",
              color: new Color().fromHEX("#ff00fc")
            };
          } else if (state === 5) {
            status = {
              state: "Abnormal",
              color: new Color().fromHEX("#ff1010")
            };
          }
          return status;
        }
        destroyCallBack() {
          this.taskScheduler.destoryQueue();
          this.taskScheduler.stopQueue(false);
        }
        bindUI() {}
        update(deltaTime) {}
      }) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Hall_ShopPanel.ts", ['cc', './BaseComponent.ts', './hallConfig.ts', './config.ts', './tool.ts', './globals.ts', './soundDefine2.ts', './baseBoard.ts', './socketConnect.ts', './BaseViewModel.ts', './NodeIOEffect.ts', './prefabDefine2.ts'], function (exports) {
  var cclegacy, ToggleContainer, Node, Sprite, Label, ProgressBar, Button, ScrollView, EditBox, sys, instantiate, assetManager, SpriteFrame, Toggle, Prefab, _decorator, BaseComponent, config, vipMap, initToggle, getNodeByNameDeep, lang, bundleCommon, sourceManageSeletor, baseBoardView, hallAudio, SoundPathDefine, addToastAction, changeChooseAmount, hallWebSocketDriver, SKT_MAG_TYPE, BaseViewModel, EffectType, PrefabPathDefine;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      ToggleContainer = module.ToggleContainer;
      Node = module.Node;
      Sprite = module.Sprite;
      Label = module.Label;
      ProgressBar = module.ProgressBar;
      Button = module.Button;
      ScrollView = module.ScrollView;
      EditBox = module.EditBox;
      sys = module.sys;
      instantiate = module.instantiate;
      assetManager = module.assetManager;
      SpriteFrame = module.SpriteFrame;
      Toggle = module.Toggle;
      Prefab = module.Prefab;
      _decorator = module._decorator;
    }, function (module) {
      BaseComponent = module.BaseComponent;
    }, function (module) {
      config = module.config;
    }, function (module) {
      vipMap = module.vipMap;
    }, function (module) {
      initToggle = module.initToggle;
      getNodeByNameDeep = module.getNodeByNameDeep;
    }, function (module) {
      lang = module.lang;
      bundleCommon = module.bundleCommon;
      sourceManageSeletor = module.sourceManageSeletor;
      baseBoardView = module.baseBoardView;
      hallAudio = module.hallAudio;
    }, function (module) {
      SoundPathDefine = module.SoundPathDefine;
    }, function (module) {
      addToastAction = module.addToastAction;
      changeChooseAmount = module.changeChooseAmount;
    }, function (module) {
      hallWebSocketDriver = module.hallWebSocketDriver;
      SKT_MAG_TYPE = module.SKT_MAG_TYPE;
    }, function (module) {
      BaseViewModel = module.default;
    }, function (module) {
      EffectType = module.EffectType;
    }, function (module) {
      PrefabPathDefine = module.PrefabPathDefine;
    }],
    execute: function () {
      var _dec, _class;
      cclegacy._RF.push({}, "e4f8dqaQqlKnKH/SUStZtlB", "Hall_ShopPanel", undefined);
      const {
        ccclass,
        property
      } = _decorator;
      let BuyType = exports('BuyType', /*#__PURE__*/function (BuyType) {
        BuyType[BuyType["COIN"] = 0] = "COIN";
        BuyType[BuyType["TAS"] = 1] = "TAS";
        return BuyType;
      }({}));
      let Hall_ShopPanel = exports('Hall_ShopPanel', (_dec = ccclass('Hall_ShopPanel'), _dec(_class = class Hall_ShopPanel extends BaseComponent {
        constructor(...args) {
          super(...args);
          this.propertyNode = {
            props_ToggleGroup_shop_title: new ToggleContainer(),
            props_btn_tips_close: new Node(),
            /**toggle选择外框 */
            // props_ToggleGroup: new Node(),
            // props_ToggleGroup1: new Node(),
            /**新人首充的 */
            props_ToggleGroup2: new Node(),
            /**自定义输入 */
            props_input_gold_num: new Node(),
            /**每日充值平铺金额选择框 */
            props_ToggleGroup_gold: new Node(),
            /**新人首充平铺金额选择框 */
            props_ToggleGroup_gold1: new Node(),
            /**确认充值 */
            props_sbtn_shop_pergi: new Node(),
            /**置空 */
            props_btn_gold_null: new Node(),
            /** 兑换率 */
            props_Label_choose_2: new Node(),
            /**当前VIP */
            props_word_vip_left: new Sprite(),
            /**目标VIP */
            props_word_vip_right: new Sprite(),
            /**VIP描述 */
            props_Label_vip: new Label(),
            /**vip进度条 */
            props_ProgressBar_vip: new ProgressBar(),
            /**说明页 */
            props_spr_title: new Node(),
            props_btn_shop_tolong: new Button(),
            props_Toggle_template2: new Node(),
            props_ScrollView_tas: new ScrollView(),
            props_spr_tas_template: new Node(),
            /**充值限制节点 */
            props_label_amount_limit: new Label(),
            /**充值历史记录按钮 */
            props_btn_history: new Node(),
            /**每日首充规则 */
            props_label_recharge: new Node(),
            /**每日首充规则按钮 */
            props_btn_racharge: new Node(),
            /**每日充值面板节点 */
            props_node_coin: new Node(),
            /**每日充值金币选择框 */
            props_Layout_gold_choose: new Node(),
            /**新人充值标题 */
            props_spr_newcomer_title: new Node(),
            /**新人充值金币选择框 */
            props_newcomer_Layout_gold_choose: new Node(),
            /**新人充值的优惠面板 */
            props_newcomer_get_gold: new Node(),
            /**新人充值金币 */
            props_cash: new Label(),
            /**新人充值福利比例 */
            props_jiaobiao_label: new Label(),
            /**新人充值获得金额福利 */
            props_bonus: new Label(),
            /**新人充值获取到的总金额 */
            props_total: new Label(),
            /**新人充值支付金币 */
            props_payment: new Label()
          };
          this.props = {
            dataList: [],
            memberInfo: null,
            defaultBuyType: BuyType.COIN,
            rechargeType: -1,
            chooseAmount: null
          };
          this.events = {
            onClosePanel: () => {},
            rechargeHandler: (channelItem, amount) => {},
            openShopHistory: () => {},
            openRachargeRule: () => {}
          };
          this.chooseChannelItem = null;
        }
        start() {}
        initState(props) {
          return {
            buyType: BuyType.COIN,
            chooseChannelIndex: -1,
            chooseAmount: -1,
            giftList: []
          };
        }
        bindEvent() {
          this.propertyNode.props_btn_tips_close.on(Node.EventType.TOUCH_END, () => {
            this.events.onClosePanel();
          });
          this.propertyNode.props_btn_gold_null.on(Node.EventType.TOUCH_END, () => {
            this.setState({
              chooseAmount: 0
            });
          });
          this.propertyNode.props_input_gold_num.on(EditBox.EventType.TEXT_CHANGED, e => {
            this.setState({
              chooseAmount: +e.string
            });
          });
          this.propertyNode.props_spr_title.on(Node.EventType.TOUCH_END, () => {
            sys.openURL(config.bankHelpUrl);
            // ModalBox.Instance().show({ url: config.bankHelpUrl, type: "Confirm" })
          });

          this.propertyNode.props_btn_shop_tolong.node.on(Node.EventType.TOUCH_END, () => {
            sys.openURL(config.bankHelpUrl);
            // ModalBox.Instance().show({ url: config.bankHelpUrl, type: "Confirm" })
          });

          this.propertyNode.props_btn_history.on(Node.EventType.TOUCH_END, () => {
            this.events.openShopHistory();
          });
          this.propertyNode.props_sbtn_shop_pergi.on(Node.EventType.TOUCH_END, () => {
            if (!this.chooseChannelItem) return;
            const amount = +this.propertyNode.props_input_gold_num.getComponent(EditBox).string;
            if (amount < this.chooseChannelItem.limitDown || amount > this.chooseChannelItem.limitUp) {
              this.dispatch(addToastAction({
                content: lang.write(k => k.HallModule.HallShopAmount, {
                  down: this.chooseChannelItem.limitDown,
                  up: this.chooseChannelItem.limitUp
                }, {
                  placeStr: `充值金额需在${this.chooseChannelItem.limitDown}~${this.chooseChannelItem.limitUp}之间`
                })
              }));
              return;
            }
            this.events.rechargeHandler(this.chooseChannelItem, this.propertyNode.props_input_gold_num.getComponent(EditBox).string);
          });
          this.propertyNode.props_btn_racharge.on(Node.EventType.TOUCH_END, () => {
            this.events.openRachargeRule();
          });
          initToggle(this.propertyNode.props_ToggleGroup_shop_title.node, this.node, new Hall_ShopPanel.EventHandler(), "Hall_ShopPanel", "buyTypeToggleCallback");
          initToggle(this.propertyNode.props_ToggleGroup2, this.node, new Hall_ShopPanel.EventHandler(), "Hall_ShopPanel", "channelToggleCallback");
          initToggle(this.propertyNode.props_ToggleGroup_gold1, this.node, new Hall_ShopPanel.EventHandler(), "Hall_ShopPanel", "channelAmountToggleCallback1");
          initToggle(this.propertyNode.props_ToggleGroup_gold, this.node, new Hall_ShopPanel.EventHandler(), "Hall_ShopPanel", "channelAmountToggleCallback");
        }
        useProps(key, value) {
          if (key === "dataList") {
            const rechargeType = this.getTypeValue(value.cur);
            this.propertyNode.props_ToggleGroup2.removeAllChildren();
            value.cur.forEach((item, index) => {
              // const toggleItem = rechargeType === 1 ? instantiate(this.propertyNode.props_Toggle_template1) : instantiate(this.propertyNode.props_Toggle_template2);
              const toggleItem = instantiate(this.propertyNode.props_Toggle_template2);
              toggleItem.active = true;
              item.iconMin && assetManager.loadRemote(item.iconMin, (err, asset) => {
                if (!this || !this.node) {
                  return;
                }
                if (this.propertyNode && !err) {
                  toggleItem.getChildByName('spr_icon').getComponent(Sprite).spriteFrame = SpriteFrame.createWithImage(asset);
                }
              });
              toggleItem.getChildByName('spr_icon_name').getComponent(Label).string = item.name;
              item.type === 0 && (toggleItem.getChildByName('spr_tag-red').active = true);
              item.type === 1 && (toggleItem.getChildByName('spr_tag-green').active = true);
              // rechargeType === 1 ? this.propertyNode.props_ToggleGroup1.addChild(toggleItem) : this.propertyNode.props_ToggleGroup2.addChild(toggleItem);
              this.propertyNode.props_ToggleGroup2.addChild(toggleItem);
              if (index === 0) {
                this.state.buyType === BuyType.COIN && (toggleItem.getComponent(Toggle).isChecked = true);
              }
            });
          }
          if (key === "memberInfo") {
            if (!this.props.memberInfo.memberId) return;
            let vipItem = vipMap.find(i => i[0] === this.props.memberInfo.vipLevel + 1);
            if (!vipItem) vipItem = vipMap[vipMap.length - 1];
            const experience = vipItem[1] - this.props.memberInfo.vipLevelExperience;
            this.propertyNode.props_Label_vip.string = `Still need top up ${experience.formatAmountWithCommas()}`;
            this.propertyNode.props_ProgressBar_vip.progress = this.props.memberInfo.vipLevelExperience / vipItem[1];
            bundleCommon.load(`resource/vip/b_VIP${this.props.memberInfo.vipLevel}/spriteFrame`, SpriteFrame, (err, sp) => {
              !err && (this.propertyNode.props_word_vip_left.getComponent(Sprite).spriteFrame = sp);
            });
            bundleCommon.load(`resource/vip/b_VIP${vipItem[0]}/spriteFrame`, SpriteFrame, (err, sp) => {
              !err && (this.propertyNode.props_word_vip_right.getComponent(Sprite).spriteFrame = sp);
            });
          }
          if (key === "defaultBuyType") {
            if (this.props.defaultBuyType === BuyType.TAS) {
              this.propertyNode.props_ToggleGroup_shop_title.node.children[1].getComponent(Toggle).isChecked = true;
            }
          }
          if (key === "rechargeType") {
            this.propertyNode.props_btn_history.active = value.cur !== 1;
            this.propertyNode.props_Layout_gold_choose.active = value.cur !== 1;
            this.propertyNode.props_spr_title.active = value.cur !== 1;
            this.propertyNode.props_spr_newcomer_title.active = value.cur === 1;
            this.propertyNode.props_newcomer_Layout_gold_choose.active = value.cur === 1;
            this.propertyNode.props_label_recharge.active = value.cur === 2;
            this.propertyNode.props_btn_racharge.active = value.cur === 2;
          }
          if (key === "chooseAmount") {
            const bonus = value.cur.totalGet - value.cur.chooseAmount;
            const rate = value.cur.chooseAmount ? bonus / value.cur.chooseAmount * 100 : 0;
            const amountString = value.cur.chooseAmount.formatAmountWithCommas();
            this.propertyNode.props_cash.string = amountString;
            this.propertyNode.props_bonus.string = bonus.formatAmountWithCommas();
            this.propertyNode.props_total.string = value.cur.totalGet.formatAmountWithCommas();
            this.propertyNode.props_payment.string = "₹ " + amountString;
            this.propertyNode.props_jiaobiao_label.string = "+" + rate + "%";
            this.propertyNode.props_newcomer_get_gold.active = true;
          }
        }
        bindUI() {
          this.propertyNode.props_spr_tas_template.active = false;
          let lastQeqPicUrl = '';
          this.useState((key, value) => {
            const dataItem = this.props.dataList[value.cur];
            const itemRechargeType = this.getItemTypeValue(dataItem);
            this.chooseChannelItem = dataItem;
            if (dataItem) {
              if (itemRechargeType === 1) {
                //如果为新人首充
                this.propertyNode.props_ToggleGroup_gold1.children.forEach((child, index) => {
                  if (index >= 1) {
                    child.destroy();
                  }
                });
                const itemTemplate = this.propertyNode.props_ToggleGroup_gold1.children[0];
                dataItem.preinstallList.forEach((list, i) => {
                  const node = instantiate(itemTemplate);
                  node.getChildByName("amount").getComponent(Label).string = list.defaultGold.formatAmountWithCommas();
                  node.getChildByName("amount_show").getComponent(Label).string = list.defaultGold + "";
                  getNodeByNameDeep("Label_5000", node).getComponent(Label).string = list.defaultGold.formatAmountWithCommas();
                  getNodeByNameDeep("label_actual", node).getComponent(Label).string = "Get " + list.firstDepositBonusGold.formatAmountWithCommas();
                  getNodeByNameDeep("label_actual_show", node).getComponent(Label).string = "Get " + list.firstDepositBonusGold.formatAmountWithCommas();
                  node.active = true;
                  this.propertyNode.props_ToggleGroup_gold1.addChild(node);
                  if (i === 0) {
                    node.getComponent(Toggle).isChecked = true;
                    this.dispatch(changeChooseAmount({
                      chooseAmount: list.defaultGold,
                      totalGet: list.firstDepositBonusGold
                    }));
                  }
                });
              } else {
                //每日充值
                this.propertyNode.props_newcomer_get_gold.active = false;
                this.propertyNode.props_Label_choose_2.getComponent(Label).string = `=${dataItem.rateOfExchange} Cash`;
                this.propertyNode.props_label_amount_limit.getComponent(Label).string = `Limit ${dataItem.limitDown}~${dataItem.limitUp}`;
                this.propertyNode.props_ToggleGroup_gold.children.forEach((child, index) => {
                  if (index >= 1) {
                    child.destroy();
                  }
                });
                const itemTemplate = this.propertyNode.props_ToggleGroup_gold.children[0];
                dataItem.preinstallList.forEach(list => {
                  const node = instantiate(itemTemplate);
                  node.getChildByName("amount").getComponent(Label).string = list.defaultGold.formatAmountWithCommas();
                  node.getChildByName("amount_show").getComponent(Label).string = list.defaultGold + "";
                  getNodeByNameDeep("spr_daily_bg", node).active = list.type === 2;
                  getNodeByNameDeep("spr_label_rate", node).getComponent(Label).string = "+" + list.activityDailyFirstDepositProportion + "%";
                  node.active = true;
                  this.propertyNode.props_ToggleGroup_gold.addChild(node);
                });
                lastQeqPicUrl = this.props.dataList[value.cur].iconUrl;
                assetManager.loadRemote(this.props.dataList[value.cur].iconUrl, (err, asset) => {
                  if (!this || !this.node) {
                    return;
                  }
                  if (this.propertyNode && !err && asset.nativeUrl === lastQeqPicUrl) {
                    this.propertyNode.props_spr_title.getComponent(Sprite).spriteFrame = SpriteFrame.createWithImage(asset);
                  }
                });
              }
            }
          }, ["chooseChannelIndex"]);
          this.useState((key, value) => {
            if (this.state.chooseAmount) {
              this.propertyNode.props_input_gold_num.getComponent(EditBox).string = value.cur;
            } else {
              this.propertyNode.props_input_gold_num.getComponent(EditBox).string = '';
            }
          }, ["chooseAmount"]);
          this.useState((key, value) => {
            this.propertyNode.props_ScrollView_tas.content.removeAllChildren();
            this.state.giftList.filter(i => i.mallPage === 1).forEach((item, index) => {
              const node = instantiate(this.propertyNode.props_spr_tas_template);
              node.getChildByName("Label_name").getComponent(Label).string = item.giftName;
              node.getChildByName("Label_gole_old").getComponent(Label).string = item.normalGoldCoin.formatAmountWithCommas();
              node.getChildByName("Label_gole_old").getComponent(Label).updateRenderData(true);
              node.getChildByName("Label_gole").getComponent(Label).string = item.discountCoins.formatAmountWithCommas();
              node.getChildByName("btn_buy").getChildByName("label_price_buy").getComponent(Label).string = item.amount.formatAmountWithCommas();
              node.getChildByName("btn_buy").on(Node.EventType.TOUCH_END, async () => {
                //购买
                const chooseBankVM = new BaseViewModel('Hall_ChooseBank').mountView((await sourceManageSeletor().getFileAsync(PrefabPathDefine._HELL_CHOOSE_BANK, Prefab)).source).appendTo(baseBoardView.mainPanelViewModel.parentNode, {
                  effectType: EffectType.EFFECT1,
                  isModal: true
                }).setEvent({
                  onClosePanel: () => {
                    chooseBankVM.unMount(EffectType.EFFECT2);
                  },
                  onOrder: rechargeChannelId => {
                    hallWebSocketDriver.sendSktMessage(SKT_MAG_TYPE.RECHARGE_ORDER, {
                      rechargeChannelId,
                      money: item.amount,
                      orderRechargeType: 2,
                      giftBagMallId: item.id
                    }, {
                      isLoading: true
                    });
                    // purchaseAppsflyerEvents(item.amount + '', 'IDR')
                  }
                }).setProps({
                  onlyDisplayArr: item.rechargeChannelIds || []
                });
              });
              node.active = true;
              this.propertyNode.props_ScrollView_tas.content.addChild(node);
            });
          }, ["giftList"]);
          hallWebSocketDriver.sktMsgListener.add(SKT_MAG_TYPE.GIFT_LIST, "shop", (data, error) => {
            if (error) return;
            // global.hallDispatch(setLoadingAction({ isShow: false }))
            this.setState({
              giftList: data || []
            });
          });
          hallWebSocketDriver.sendSktMessage(SKT_MAG_TYPE.GIFT_LIST, '', {
            isLoading: true
          });
        }

        /**选择银行的回调 获取点击的index */
        channelToggleCallback(event, customEventData) {
          hallAudio.playOneShot(SoundPathDefine.BTU_CLICK);
          const chooseIndex = event.target['parent'].children.indexOf(event.target);
          this.setState({
            chooseChannelIndex: chooseIndex //chooseIndex % 2 === 0 ? chooseIndex / 2 : parseInt((chooseIndex / 2) + '') + 1
          });
        }

        buyTypeToggleCallback(event, customEventData) {
          hallAudio.playOneShot(SoundPathDefine.BTU_CLICK);
          const chooseIndex = event.target['parent'].children.indexOf(event.target);
          this.setState({
            buyType: chooseIndex
          });
        }
        /**新人首充选充值金额 */
        channelAmountToggleCallback1(event, customEventData) {
          hallAudio.playOneShot(SoundPathDefine.BTU_CLICK);
          const chooseAmount = +event.target['getChildByName']("amount_show").getComponent(Label).string;
          const totalGet = event.target['getChildByName']("label_actual").getComponent(Label).string;
          const total = +totalGet.substring(4).replace(/,/g, "");
          this.dispatch(changeChooseAmount({
            chooseAmount,
            totalGet: total
          }));
          this.setState({
            chooseAmount
          });
        }
        /**每日选充值金额 */
        channelAmountToggleCallback(event, customEventData) {
          hallAudio.playOneShot(SoundPathDefine.BTU_CLICK);
          const chooseAmount = +event.target['getChildByName']("amount_show").getComponent(Label).string;
          // console.log(chooseAmount)
          this.setState({
            chooseAmount
          });
        }

        /**获取当前充值界面的类型 0为无 1为新人首充 2为每日首充 */
        getTypeValue(array) {
          for (let item of array) {
            let preinstallList = item.preinstallList || [];
            for (let preinstallItem of preinstallList) {
              if (preinstallItem.type !== 1) {
                return preinstallItem.type;
              }
            }
          }
          return 1;
        }

        /**获取选择银行后的充值界面类型  0为无 1为新人首充 2为每日首充*/
        getItemTypeValue(item) {
          let preinstallList = item.preinstallList || [];
          for (let preinstallItem of preinstallList) {
            if (preinstallItem.type !== 1) {
              return preinstallItem.type;
            }
          }
          return 1;
        }
        onDestroy() {
          this.dispatch(changeChooseAmount(null));
          hallWebSocketDriver.sktMsgListener.removeById("shop");
        }
        update(deltaTime) {}
      }) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Hall_ShopRachargeRule.ts", ['cc', './BaseComponent.ts'], function (exports) {
  var cclegacy, Node, _decorator, BaseComponent;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      Node = module.Node;
      _decorator = module._decorator;
    }, function (module) {
      BaseComponent = module.BaseComponent;
    }],
    execute: function () {
      var _dec, _class;
      cclegacy._RF.push({}, "90c9fKvU4tA+ILXGFIwxR3e", "Hall_ShopRachargeRule", undefined);
      const {
        ccclass,
        property
      } = _decorator;
      let Hall_ShopRachargeRule = exports('Hall_ShopRachargeRule', (_dec = ccclass('Hall_ShopRachargeRule'), _dec(_class = class Hall_ShopRachargeRule extends BaseComponent {
        constructor(...args) {
          super(...args);
          this.propertyNode = {
            props_btn_off: new Node()
          };
          this.props = {};
          this.events = {
            onClosePanel: () => {}
          };
        }
        start() {}
        initState() {
          return {};
        }
        bindEvent() {
          this.propertyNode.props_btn_off.on(Node.EventType.TOUCH_END, () => {
            this.events.onClosePanel();
          });
        }
        useProps(key, value) {}
        bindUI() {}
        update(deltaTime) {}
      }) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Hall_SignIn.ts", ['cc', './BaseComponent.ts', './Throttler.ts', './apiUrl.ts', './globals.ts'], function (exports) {
  var cclegacy, Button, Node, Label, Sprite, Animation, log, SpriteFrame, _decorator, BaseComponent, Throttler, ApiUrl, global, sourceManageSeletor;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      Button = module.Button;
      Node = module.Node;
      Label = module.Label;
      Sprite = module.Sprite;
      Animation = module.Animation;
      log = module.log;
      SpriteFrame = module.SpriteFrame;
      _decorator = module._decorator;
    }, function (module) {
      BaseComponent = module.BaseComponent;
    }, function (module) {
      Throttler = module.default;
    }, function (module) {
      ApiUrl = module.ApiUrl;
    }, function (module) {
      global = module.global;
      sourceManageSeletor = module.sourceManageSeletor;
    }],
    execute: function () {
      var _dec, _class;
      cclegacy._RF.push({}, "e5189+U9+dPPYoNRzzfyggg", "Hall_SignIn", undefined);
      const {
        ccclass,
        property
      } = _decorator;
      const WeekType = exports('WeekType', {
        MONDAY: "monday",
        TUESDAY: "tuesday",
        WEDNESDAY: "wednesday",
        THURSDAY: "thursday",
        FRIDAY: "friday",
        SATURDAY: "saturday",
        SUNDAY: "sunday",
        ULTIMATE: "ultimate"
      });
      let Hall_SignIn = exports('Hall_SignIn', (_dec = ccclass('Hall_SignIn'), _dec(_class = class Hall_SignIn extends BaseComponent {
        constructor(...args) {
          super(...args);
          this.propertyNode = {
            props_btn_close: new Button(),
            props_btn_menerima: new Button(),
            props_btn_unMenerima: new Node(),
            props_spr_signIn_vipbg: new Node(),
            props_vip_num: new Label(),
            props_vip_level: new Sprite()
          };
          this.props = {
            memberInfo: null,
            signInDatas: [],
            signSuccess: false
          };
          this.events = {
            requestGetSignInList: () => {},
            requestSign: weekType => {},
            close: () => {},
            onChangeGold: value => {}
          };
        }
        start() {}
        initState() {
          return {
            weekType: null
          };
        }
        bindEvent() {
          this.propertyNode.props_btn_close.node.on(Node.EventType.TOUCH_END, () => {
            this.events.close();
          });
          this.propertyNode.props_spr_signIn_vipbg.on(Node.EventType.TOUCH_END, () => {
            this.events.close();
            global.openVipMain();
          });
          this.propertyNode.props_btn_menerima.node.on(Node.EventType.TOUCH_END, () => {
            const weekType = this.getSignInWeekType();
            // 签到防抖
            Throttler.isDebouncerAsync(ApiUrl.SIGN_IN + weekType, 500, true, () => {}).then(isPass => {
              this.setState({
                weekType
              });
              this.events.requestSign(this.state.weekType);
              this.updateSignStatus(false);
            });
          });
        }

        /**
         * 更新签到状态
         * @param active 
         */
        updateSignStatus(active) {
          this.propertyNode.props_btn_menerima.node.active = active;
          this.propertyNode.props_btn_unMenerima.active = !active;
        }

        /**
         * 
         * @param weekType 星期类型
         * @param type 0：待签到，1：已签到 2：已过期
         * @param gold 显示的金币
         */
        updatePositionStatus(signInDataType) {
          const weekType = this.getWeekType(signInDataType.day);
          const type = signInDataType.status;
          const gold = signInDataType.gold;
          const signNode = this.getSignInNode(weekType);
          signNode.active = true;
          const goldNode = signNode.getChildByName("label_gold");
          const unclaimedNode = signNode.getChildByName("spr_unclaimed");
          const alreadyNode = signNode.getChildByName("spr_already");
          goldNode.active = false;
          unclaimedNode.active = false;
          alreadyNode.active = false;
          if (type === 0) {
            goldNode.active = true;
            goldNode.getComponent(Label).string = gold.formatAmountWithLetter();
          } else if (type === 1) {
            signNode.getChildByName('qiandao_dailingqu').active = false;
            signNode.getChildByName('spr_gold').getComponent(Sprite).grayscale = true;
            alreadyNode.active = true;
          } else if (type === 2) {
            signNode.getChildByName('qiandao_dailingqu').active = false;
            signNode.getChildByName('spr_gold').getComponent(Sprite).grayscale = true;
            unclaimedNode.active = true;
          } else {
            goldNode.active = true;
            goldNode.getComponent(Label).string = gold.formatAmountWithLetter();
          }
        }
        getSignInNode(nodename) {
          return this.node.getChildByName("Layout_" + nodename);
        }

        /**播放签到动画 */
        playSignInAnimaton(weekType) {
          if (!weekType) return;
          const signNode = this.getSignInNode(weekType);
          signNode.getComponent(Animation).play();
          signNode.setSiblingIndex(99);
          const signInData = this.props.signInDatas.find(v => v.day === this.getDay(weekType));
          let gold = signInData ? signInData.gold : 0;
          if (this.props.memberInfo.vipLevel >= signInData.vip) {
            gold += signInData.vipGold;
          }

          // 动画播放完成之后关闭窗口，星期天播放之后不马上关闭
          if (WeekType.SUNDAY !== weekType) {
            signNode.getComponent(Animation).on(Animation.EventType.FINISHED, () => {
              this.events.onChangeGold(gold);
              this.events.close();
            });
          } else {
            this.events.onChangeGold(gold);
          }
        }
        getWeekType(day) {
          if (day === 1) {
            return WeekType.MONDAY;
          } else if (day === 2) {
            return WeekType.TUESDAY;
          } else if (day === 3) {
            return WeekType.WEDNESDAY;
          } else if (day === 4) {
            return WeekType.THURSDAY;
          } else if (day === 5) {
            return WeekType.FRIDAY;
          } else if (day === 6) {
            return WeekType.SATURDAY;
          } else if (day === 7) {
            return WeekType.SUNDAY;
          } else if (day === 8) {
            return WeekType.ULTIMATE;
          }
        }
        getDay(weekType) {
          if (WeekType.MONDAY === weekType) {
            return 1;
          } else if (WeekType.TUESDAY === weekType) {
            return 2;
          } else if (WeekType.WEDNESDAY === weekType) {
            return 3;
          } else if (WeekType.THURSDAY === weekType) {
            return 4;
          } else if (WeekType.FRIDAY === weekType) {
            return 5;
          } else if (WeekType.SATURDAY === weekType) {
            return 6;
          } else if (WeekType.SUNDAY === weekType) {
            return 7;
          } else if (WeekType.ULTIMATE === weekType) {
            return 8;
          }
        }

        /**是否星期天签到 */
        isSignSunday() {
          return this.props.signInDatas.find(v => v.day === this.getDay(WeekType.SUNDAY));
        }
        init(datas) {
          // 可以签到的某一天
          const signDay = datas.find(v => v.tap === 1);
          datas.forEach(v => {
            this.updatePositionStatus(v);
          });
          if (signDay) {
            // 如果是第8天，表示已经连续签到第7天，直接请求最后一次签到
            if (signDay.day === this.getDay(WeekType.ULTIMATE)) {
              this.events.requestSign(WeekType.ULTIMATE);
              return;
            }
            this.updateSignStatus(true);
            this.updateChangeVip(signDay.vip);
            this.propertyNode.props_vip_num.string = '+' + signDay.vipGold.formatAmountWithLetter();
          } else {
            this.updateSignStatus(false);
            // 初始化没有可签到的选项时，同时上一次又是签到的星期天，就直接关闭窗口
            // 出现这种情况就是签到了星期天，但是没有连续签到7天
            if (this.state.weekType === WeekType.SUNDAY) {
              this.scheduleOnce(() => {
                this.events.close();
              }, 0.5);
            }
            const lastSignDay = [...datas].reverse().find(v => v.status === 1);
            this.updateChangeVip(lastSignDay.vip);
            this.propertyNode.props_vip_num.string = '+' + lastSignDay.vipGold.formatAmountWithLetter();
          }
        }
        getSignInWeekType() {
          const signDay = this.props.signInDatas.find(v => v.tap === 1);
          return signDay && this.getWeekType(signDay.day);
        }
        useProps(key, value) {
          log("signin use props", key, value);
          if (key === 'signInDatas') {
            const newData = value.cur;
            if (newData.length > 0) {
              this.init(newData);
            }
          } else if (key === 'signSuccess' && value.cur) {
            const signType = this.getSignInWeekType();
            this.playSignInAnimaton(signType);

            // 星期天签到之后再请求一次，看能不能完成连续签到
            if (WeekType.SUNDAY === signType) {
              this.events.requestGetSignInList();
            }
          }
        }
        async updateChangeVip(vipLevel) {
          vipLevel = vipLevel ? vipLevel : 0;
          const vipSpritePath = `resource/vip/b_VIP${vipLevel}/spriteFrame`;
          this.propertyNode.props_vip_level.spriteFrame = (await sourceManageSeletor('common').getFileAsync(vipSpritePath, SpriteFrame)).source;
        }
        bindUI() {
          this.updateSignStatus(false);
          this.node.children.filter(v => v.name.startsWith("Layout_")).forEach(v => v.active = false);
        }
        update(deltaTime) {}
      }) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Hall_SubGameGate.ts", ['cc', './BaseComponent.ts', './config.ts', './globals.ts', './BundleSplit.ts', './baseBoard.ts', './soundDefine2.ts', './env', './hallType2.ts', './GameConfig.ts', './DownloadManagerGame.ts', './types.ts'], function (exports) {
  var cclegacy, Node, instantiate, sp, Color, Sprite, SpriteFrame, Label, ProgressBar, sys, _decorator, BaseComponent, subGameList, sourceManageSeletor, bundleHall, lang, hallAudio, global, baseBoardView, BundleSplit, addToastAction, SoundPathDefine, NATIVE, SubGameRunState, GameState, isH5, DownloadManagerGame, ToastType;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      Node = module.Node;
      instantiate = module.instantiate;
      sp = module.sp;
      Color = module.Color;
      Sprite = module.Sprite;
      SpriteFrame = module.SpriteFrame;
      Label = module.Label;
      ProgressBar = module.ProgressBar;
      sys = module.sys;
      _decorator = module._decorator;
    }, function (module) {
      BaseComponent = module.BaseComponent;
    }, function (module) {
      subGameList = module.subGameList;
    }, function (module) {
      sourceManageSeletor = module.sourceManageSeletor;
      bundleHall = module.bundleHall;
      lang = module.lang;
      hallAudio = module.hallAudio;
      global = module.global;
      baseBoardView = module.baseBoardView;
    }, function (module) {
      BundleSplit = module.default;
    }, function (module) {
      addToastAction = module.addToastAction;
    }, function (module) {
      SoundPathDefine = module.SoundPathDefine;
    }, function (module) {
      NATIVE = module.NATIVE;
    }, function (module) {
      SubGameRunState = module.SubGameRunState;
      GameState = module.GameState;
    }, function (module) {
      isH5 = module.isH5;
    }, function (module) {
      DownloadManagerGame = module.DownloadManagerGame;
    }, function (module) {
      ToastType = module.ToastType;
    }],
    execute: function () {
      var _dec, _class;
      cclegacy._RF.push({}, "f7a55CBKHZOeKe6hfw0UeHh", "Hall_SubGameGate", undefined);
      const {
        ccclass,
        property
      } = _decorator;
      let Hall_SubGameGate = exports('Hall_SubGameGate', (_dec = ccclass('Hall_SubGameGate'), _dec(_class = class Hall_SubGameGate extends BaseComponent {
        constructor(...args) {
          super(...args);
          this.gameGateItemNodeList = [];
          /**进度条的初始值（用于支持多阶段加载的情况） */
          this.loadingStart = 0.02;
          this.propertyNode = {
            props_gameItem_template: new Node()
          };
          this.props = {
            useVip: 0,
            gamesIds: [],
            activeSubGameInfo: null
          };
          this.events = {
            onTouchInto: () => {}
          };
        }
        start() {}
        initState() {
          return {};
        }
        bindEvent() {}
        useProps(key, value) {
          if (key === "gamesIds") {
            this.props.gamesIds.forEach(gameId => {
              this.renderGateIcon(gameId).then(gameGateItemNode => {});
            });
          }
          if (key === "useVip") {
            // 因为不能确定用户的vip信息和gameid信息哪个先到，所以vip信息更新的时候，还得执行一次，如果vip信息先到，这个数组为空也不会执行
            this.gameGateItemNodeList.forEach(item => {
              this.renderGateFace(item.key, item.node);
            });
          }
          if (key === "activeSubGameInfo") {
            // console.log('activeSubGameInfo', this.props.activeSubGameInfo.runState)
            let isChoose = false;
            this.props.gamesIds.forEach(gameId => {
              if (gameId && !isChoose) {
                //this.progressBar必须有值，才正确选中了对象，因为gameId是有重复的
                const target = this.gameGateItemNodeList.find(item => item.key === gameId);
                if (target) {
                  const progressBarWrap = target.node.getChildByName("loadWrap");
                  if (this.props.activeSubGameInfo && this.props.activeSubGameInfo.gameId === gameId && progressBarWrap) {
                    isChoose = true;
                    this.setLoadingState(gameId, 0, false);
                    if (this.props.activeSubGameInfo.runState === SubGameRunState.RUN) {
                      this.downLoadState(gameId, true);
                      target.node.getChildByName("download_icon").active = false;
                    }
                  }
                }
              }
            });
          }
        }
        async renderGateIcon(gameId) {
          // 实例化界面
          if (gameId) {
            if (gameId == 20) {
              //老鼠游戏没上
              return;
            }
            // subGameList.forEach(i => {
            // 	i.status = GameState.WORKING
            // })
            const hallGameGate = subGameList.find(i => i.gameId === gameId);
            if (!hallGameGate) {
              return;
            }
            // 根据
            const gameGateItemNode = instantiate(this.propertyNode.props_gameItem_template);
            this.node.addChild(gameGateItemNode);
            gameGateItemNode.active = true;
            hallGameGate.status === GameState.WORKING && gameGateItemNode.on(Node.EventType.TOUCH_END, () => {
              this.openGateGame(gameId);
            });
            hallGameGate.hotMark && (gameGateItemNode.getChildByName("hot_jiaobiao").active = true);
            gameGateItemNode.getChildByName("gameSkeleton").active = true;
            gameGateItemNode.getChildByName("spr_word").active = true;
            gameGateItemNode.getChildByName("download_icon").active = !this.downLoadState(gameId);
            const skeletonComp = gameGateItemNode.getChildByName("gameSkeleton").getComponent(sp.Skeleton);
            skeletonComp.skeletonData = (await sourceManageSeletor().getFileAsync(this.props.gamesIds.length === 1 ? hallGameGate.fileNameLarge : hallGameGate.fileNameSmall, sp.SkeletonData)).source;
            // skeletonComp._animationIndex = (hallGameGate.status === GameState.COME_SOON) ? 2 : 1
            if (hallGameGate.status === GameState.WORKING) {
              skeletonComp._animationIndex = 1;
            } else if (hallGameGate.status === GameState.COME_SOON) {
              //comeSoon
              gameGateItemNode.getChildByName("comeSoon").getChildByName(this.props.gamesIds.length === 1 ? "cs_large" : "cs_small").active = true;
              // skeletonComp._animationIndex = 0
              skeletonComp.animation = 'none';
              skeletonComp.color = new Color().fromHEX("#696874");
            } else if (hallGameGate.status === GameState.MAINTENANCE) ;
            gameGateItemNode.getChildByName("spr_word").getComponent(Sprite).spriteFrame = (await sourceManageSeletor().getFileAsync(hallGameGate.nameSprite[this.props.gamesIds.length - 1], SpriteFrame)).source;
            this.gameGateItemNodeList.push({
              key: gameId,
              node: gameGateItemNode
            });
            this.renderGateFace(gameId, gameGateItemNode);
            return gameGateItemNode;
          } else {
            //做个占位
            const gameGateItemNode = instantiate(this.propertyNode.props_gameItem_template);
            gameGateItemNode.active = true;
            this.node.addChild(gameGateItemNode);
            return gameGateItemNode;
          }
        }

        /**更新vip和下载状态 */
        async renderGateFace(gameId, gameGateItemNode) {
          if (gameId) {
            const hallGameGate = subGameList.find(i => i.gameId === gameId);
            if (!hallGameGate) {
              return;
            }
            // 根据
            if (hallGameGate.vipMark > this.props.useVip) {
              gameGateItemNode.getChildByName("vipWrap").active = true;
              const nodeLabel = gameGateItemNode.getChildByName("vipWrap").getChildByName("vip_jiaobiao").getChildByName("label_vipLevel");
              const VIPNode = gameGateItemNode.getChildByName("vipWrap").getChildByName("vip_jiaobiao").getChildByName("spr_vipIcon");
              nodeLabel && (nodeLabel.getComponent(Label).string = `VIP${hallGameGate.vipMark}`);
              gameGateItemNode.getChildByName("download_icon").active = false;
              bundleHall.load(`vip/resource/img/icon_dt_xinxi_vip${hallGameGate.vipMark}/spriteFrame`, SpriteFrame, (err, sp) => {
                !err && (VIPNode.getComponent(Sprite).spriteFrame = sp);
              });
            } else {
              //用的vip已经大于vip门槛
              gameGateItemNode.getChildByName("vipWrap").active = false;
              gameGateItemNode.getChildByName("download_icon").active = !this.downLoadState(gameId);
            }
            hallGameGate.status === GameState.COME_SOON && (gameGateItemNode.getChildByName("download_icon").active = false);
          }
        }
        /**抽离的临时函数 */
        downLoadZipGame(hallGameGate) {
          console.log(`[Hall_SubGameGate] downLoadZipGame called. NATIVE: ${NATIVE}, isH5: ${isH5()}`);
          if (isH5()) {
            console.log(`[Hall_SubGameGate] Calling beginEnterGame directly`);
            this.beginEnterGame(hallGameGate);
            return;
          }
          if (this.downLoadState(hallGameGate.gameId)) {
            //已下载ZIP
            this.beginEnterGame(hallGameGate);
          } else {
            //未下载ZIP
            const targetGate = this.gameGateItemNodeList.find(i => i.key === hallGameGate.gameId);
            const downLoadProgress = targetGate.node.getChildByName("downLoadProgressBar");
            if (downLoadProgress.active) return true;
            targetGate.node.getChildByName("download_icon").active = false;
            downLoadProgress.active = true;
            const bundlesToDownload = [hallGameGate.bundleName];
            if (hallGameGate.scriptBundleName) {
              bundlesToDownload.push(hallGameGate.scriptBundleName);
            }
            new DownloadManagerGame().DownloadMultiple(bundlesToDownload, (downloaded, total) => {
              //下载ZIP进度
              // console.log(downloaded, total)
              // this.setLoadingState(hallGameGate.gameId, downloaded / total)
              downLoadProgress.getComponent(ProgressBar).progress = total ? downloaded / total : 0;
              downLoadProgress.getChildByName("progressLabel").getComponent(Label).string = ((total ? downloaded / total : 0) * 100).toFixed(0) + '%';
            }, () => {
              downLoadProgress.active = false;
              hallGameGate.runState = SubGameRunState.CLOSE;
              this.dispatch(addToastAction({
                content: lang.write(k => k.HallModule.GameDownLoadDone, {
                  gameName: hallGameGate.gameName
                }, {
                  placeStr: "游戏{gameName}下载完成，请轻击开始"
                })
              }));
            }, () => {
              this.downLoadState(hallGameGate.gameId, true);
              // this.beginEnterGame(hallGameGate)
              this.renderGateFace(targetGate.key, targetGate.node);
            }, e => {
              targetGate.node.getChildByName("download_icon").active = true;
              downLoadProgress.active = false;
              this.dispatch && this.dispatch(addToastAction({
                content: e,
                type: ToastType.ERROR
              }));
              hallAudio.playOneShot(SoundPathDefine.ERROR);
              // console.log('download error', JSON.stringify(e))
              this.setLoadingState(hallGameGate.gameId, 0, false, isH5() ? 0.5 : 1);
            });
          }
        }
        openGateGame(gameId) {
          console.log(`[Hall_SubGameGate] openGateGame called for gameId: ${gameId}`);
          // const isH5 = !getIsTest() && getPackageName() === 'web' && window['installBundle']
          const hallGameGate = subGameList.find(i => i.gameId === gameId);
          console.log(`[Hall_SubGameGate] hallGameGate found:`, hallGameGate ? hallGameGate.gameName : 'null');
          hallAudio.playOneShot(SoundPathDefine.GAME_CLICK);
          if (hallGameGate.runState === SubGameRunState.CLOSE) {
            console.log(`[Hall_SubGameGate] runState is CLOSE, setting to INIT`);
            hallGameGate.runState = SubGameRunState.INIT;
          } else {
            console.log(`[Hall_SubGameGate] runState is NOT CLOSE: ${hallGameGate.runState}, returning`);
            return;
          }
          // const loadGame = () => {
          // 	console.log('开始加载', gameId)
          // 	BundleSplit.getRemoteBundle(hallGameGate, (curr, total) => {
          // 		// this.setLoadingState(gameId, 0.2 * curr / total)
          // 	}).then((bundle) => {
          // 		this.setLoadingState(gameId, this.loadingStart, true, isH5 ? 0.5 : 1)
          // 		baseBoardView.comp.beginInitSubGame(hallGameGate)
          // 	}).catch(e => {
          // 		window['onLoadingBundleName'] = undefined
          // 		this.dispatch && this.dispatch(addToastAction({ content: e }))
          // 		hallAudio.playOneShot(SoundPathDefine.ERROR)
          // 		this.setLoadingState(gameId, 0, false, isH5 ? 0.5 : 1)
          // 	})
          // }
          if (isH5()) {
            console.log(`[Hall_SubGameGate] isH5 is true, calling installBundle`);
            window['installBundle'](hallGameGate.bundleName);
            window['onBundleInstallProgress'] = (bundleName, progress) => {
              if (progress === 1) {
                this.downLoadZipGame(hallGameGate);
                this.setLoadingState(gameId, 1, true, 0.5);
                this.loadingStart = 0.5;
              } else {
                this.setLoadingState(gameId, progress, true, 0.5);
              }
            };
          } else {
            console.log(`[Hall_SubGameGate] isH5 is false, calling downLoadZipGame`);
            this.downLoadZipGame(hallGameGate);
          }
        }
        /**
         * 设置加载的进度状态，也可同时控制进度框的显示隐藏
         * @param gameId 子游戏id
         * @param progress 进度
         * @param isShow 是否显示进度框
         * @param progressRatio 传入进度值的打折量
         * @returns 
         */
        setLoadingState(gameId, progress, isShow = true, progressRatio = 1) {
          // console.log(gameId, progress)
          const gameGateItem = this.gameGateItemNodeList.find(item => item.key === gameId);
          if (!gameGateItem) {
            console.error(`[Hall_SubGameGate] Game node not found for gameId: ${gameId}`);
            return null;
          }
          const gameGateItemNode = gameGateItem.node;
          const progressBarWrap = gameGateItemNode.getChildByName("loadWrap");
          const progressBar = progressBarWrap.getChildByName("DownloadPb").getChildByName("progressBar").getComponent(ProgressBar);
          progressBarWrap.active = isShow;
          progressBar.progress = this.loadingStart + progress * progressRatio;
          !isShow && (subGameList.find(i => i.gameId === gameId).runState = SubGameRunState.CLOSE);
          return progressBarWrap;
        }
        /**
         * 获取是否已经下载
         * @param gameId 子游戏ID
         * @param set 获取到没有下载结果时是否要重设
         * @returns 
         */
        downLoadState(gameId, set = false) {
          !sys.localStorage.getItem('download') && sys.localStorage.setItem('download', '[]');
          const loadList = JSON.parse(sys.localStorage.getItem('download'));
          const hallGameGate = subGameList.find(i => i.gameId === gameId);
          const result = loadList.some(item => item.gameId === gameId && item.md5 === hallGameGate.md5);
          if (!result && set) {
            const target = loadList.find(item => item.gameId === gameId);
            target ? target.md5 = hallGameGate.md5 : loadList.push({
              gameId,
              md5: hallGameGate.md5
            });
            sys.localStorage.setItem('download', JSON.stringify(loadList));
          }
          return result;
        }
        bindUI() {
          this.propertyNode.props_gameItem_template.active = false;
          this.useState((key, value) => {
            if (value.pre === true) ;
          }, ["isdownLoaded"]);
        }
        /**开始加载并进入游戏 */
        beginEnterGame(hallGameGate) {
          console.log(`[Hall_SubGameGate] beginEnterGame called for ${hallGameGate.gameName}`);
          if (this.props.activeSubGameInfo || window['onLoadingBundleName']) {
            console.log(`[Hall_SubGameGate] Operation too frequent`);
            global.hallDispatch(addToastAction({
              content: lang.write(k => k.PersonCenterModule.PersonCenterSumbit, {}, {
                placeStr: "操作过于频繁，请稍等"
              })
            }));
            return;
          }
          this.setLoadingState(hallGameGate.gameId, 0);
          window['onLoadingBundleName'] = hallGameGate.gameId;
          console.log(`[Hall_SubGameGate] Calling BundleSplit.getSubGameAssetsBundle`);
          BundleSplit.getSubGameAssetsBundle(hallGameGate, (curr, total) => {
            this.setLoadingState(hallGameGate.gameId, 0.2 * curr / total);
          }).then(bundle => {
            console.log(`[Hall_SubGameGate] Bundle loaded successfully`, hallGameGate);
            this.setLoadingState(hallGameGate.gameId, this.loadingStart, true, isH5() ? 0.5 : 1);
            console.log(`[Hall_SubGameGate] Bundle loaded successfully1`);
            baseBoardView.comp.beginInitSubGame(hallGameGate);
            console.log(`[Hall_SubGameGate] Bundle loaded successfully2`);
          }).catch(e => {
            console.error(`[Hall_SubGameGate] Bundle load failed:`, e);
            window['onLoadingBundleName'] = undefined;
            this.dispatch && this.dispatch(addToastAction({
              content: e
            }));
            hallAudio.playOneShot(SoundPathDefine.ERROR);
            this.setLoadingState(hallGameGate.gameId, 0, false, isH5() ? 0.5 : 1);
          });
        }
        update(deltaTime) {}
      }) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Hall_Upgrade.ts", ['cc', './BaseComponent.ts', './apiUrl.ts', './globals.ts', './baseBoard.ts', './InputValidator.ts', './ModalBox.ts', './CountDowner.ts', './languagePkg.ts', './hallConfig.ts'], function (exports) {
  var cclegacy, Button, EditBox, Label, Node, _decorator, BaseComponent, ApiUrl, global, lang, fetcher, addToastAction, InputValidator, ModalBox, CountDowner, defaultLanguageType, config;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      Button = module.Button;
      EditBox = module.EditBox;
      Label = module.Label;
      Node = module.Node;
      _decorator = module._decorator;
    }, function (module) {
      BaseComponent = module.BaseComponent;
    }, function (module) {
      ApiUrl = module.ApiUrl;
    }, function (module) {
      global = module.global;
      lang = module.lang;
      fetcher = module.fetcher;
    }, function (module) {
      addToastAction = module.addToastAction;
    }, function (module) {
      InputValidator = module.default;
    }, function (module) {
      ModalBox = module.default;
    }, function (module) {
      CountDowner = module.CountDowner;
    }, function (module) {
      defaultLanguageType = module.defaultLanguageType;
    }, function (module) {
      config = module.config;
    }],
    execute: function () {
      var _dec, _class;
      cclegacy._RF.push({}, "6fe49wS7VdPwIXr57/6HrIq", "Hall_Upgrade", undefined);
      const {
        ccclass,
        property
      } = _decorator;
      let Hall_Upgrade = exports('Hall_Upgrade', (_dec = ccclass('Hall_Upgrade'), _dec(_class = class Hall_Upgrade extends BaseComponent {
        constructor(...args) {
          super(...args);
          this.propertyNode = {
            props_btn_spr_upgrade_close: new Button(),
            /**账户名 */
            props_intput_akun: new EditBox(),
            /**验证码 */
            props_intput_sandi: new EditBox(),
            /**密码 */
            props_intput_kSandi: new EditBox(),
            /**确认密码 */
            props_intput_confirm: new EditBox(),
            /**升级会获取到的金币 */
            props_text_shuzi: new Label(),
            /**确认 */
            props_btn_sure: new Button(),
            props_label_uid: new Label(),
            /**发送按钮 */
            props_button_send: new Button(),
            /**倒计时 */
            props_spr_send_cooling: new Node()
          };
          this.props = {
            memberId: ""
          };
          this.events = {
            onClosePanel: () => {},
            doneHandler: () => {},
            sendSmsCode: phoneNumber => new Promise(reslove => reslove(""))
          };
        }
        start() {}
        initState() {
          return {};
        }
        bindEvent() {
          this.propertyNode.props_btn_spr_upgrade_close.node.on(Node.EventType.TOUCH_END, () => {
            this.events.onClosePanel();
          });
          /**发送验证码 */
          this.propertyNode.props_button_send.node.on(Node.EventType.TOUCH_END, () => {
            const phoneNumber = this.propertyNode.props_intput_akun.getComponent(EditBox).string;
            new InputValidator().begin().isLocalPhoneNumber(phoneNumber).done(() => {
              window['countDownerUpgrade'].begin();
              this.events.sendSmsCode(defaultLanguageType[config.country].phoneAreaNum + phoneNumber).then(code => {
                this.propertyNode.props_intput_sandi.getComponent(EditBox).string = code;
              });
            });
          });
          this.propertyNode.props_btn_sure.node.on(Node.EventType.TOUCH_END, () => {
            const memberName = this.propertyNode.props_intput_akun.string.trim();
            const password = this.propertyNode.props_intput_kSandi.string.trim();
            const password_re = this.propertyNode.props_intput_confirm.string.trim();
            const verificationCode = this.propertyNode.props_intput_sandi.string.trim();
            new InputValidator().begin().isLocalPhoneNumber(memberName).isSmsCode(verificationCode).isCharLength([6, 30], password).isCharLength([6, 30], password_re).done(() => {
              if (password !== password_re) {
                global.hallDispatch(addToastAction({
                  content: lang.write(k => k.HallModule.pwdRepetitionError, {}, {
                    placeStr: "两次输入的密码不一致"
                  })
                }));
                return;
              }
              fetcher.send(ApiUrl.MEMBER_UPGRADES, {
                memberId: this.props.memberId,
                memberName: defaultLanguageType[config.country].phoneAreaNum + memberName,
                password,
                verificationCode
              }).then(data => {
                //操作成功
                if (data !== -1 && data !== 0) {
                  // global.hallDispatch(addToastAction({ content: lang.write(k => k.BindPhoneModule.BindPhoneChange, {}, { placeStr: "操作成功" }) }))
                  ModalBox.Instance().show({
                    content: lang.write(k => k.withdrawal.withdrawalSuccess, {
                      gold: data
                    }, {
                      placeStr: "升级账号成功获取金币"
                    }),
                    type: "Prompt"
                  }, () => {
                    this.events.doneHandler();
                    // 绑定手机号码不发送事件
                    // registerAppsflyerEvents(this.props.memberId, password)
                    return true;
                  });
                } else {
                  global.hallDispatch(addToastAction({
                    content: lang.write(k => k.BindPhoneModule.BindPhoneChange, {}, {
                      placeStr: "操作成功"
                    })
                  }));
                  this.events.doneHandler();
                }
              }).catch(e => {
                console.log(e);
              });
            });
          });
        }
        useProps(key, value) {
          if (key === "memberId") {
            this.propertyNode.props_label_uid.string = this.props.memberId;
          }
        }
        bindUI() {
          fetcher.send(ApiUrl.GET_BIND_PHONE_GOLD, {}, 'get').then(rsp => {
            this.propertyNode.props_text_shuzi.string = rsp;
          }).catch(e => {});
          const render = (isRunning, phoneCountDown) => {
            if (!this.propertyNode) return;
            if (isRunning) {
              this.propertyNode.props_spr_send_cooling.active = true;
              this.propertyNode.props_spr_send_cooling.getChildByName("Label_send_cooling").getComponent(Label).string = phoneCountDown + "S";
            } else {
              this.propertyNode.props_spr_send_cooling.active = false;
            }
          };
          if (!window['countDownerUpgrade']) {
            window['countDownerUpgrade'] = new CountDowner(60, render);
          } else {
            window['countDownerUpgrade'].goOn(render);
          }
        }
        update(deltaTime) {}
      }) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Hall_VipMain.ts", ['cc', './BaseComponent.ts', './config.ts', './tool.ts', './globals.ts', './apiUrl.ts', './baseBoard.ts'], function (exports) {
  var cclegacy, SpriteFrame, Button, Node, Vec3, instantiate, Label, Toggle, ScrollView, ProgressBar, tween, UITransform, Sprite, _decorator, BaseComponent, vipMap, getNodeByNameDeep, global, sourceManageSeletor, fetcher, ApiUrl, updateVipBonusInfo, setLoadingAction;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      SpriteFrame = module.SpriteFrame;
      Button = module.Button;
      Node = module.Node;
      Vec3 = module.Vec3;
      instantiate = module.instantiate;
      Label = module.Label;
      Toggle = module.Toggle;
      ScrollView = module.ScrollView;
      ProgressBar = module.ProgressBar;
      tween = module.tween;
      UITransform = module.UITransform;
      Sprite = module.Sprite;
      _decorator = module._decorator;
    }, function (module) {
      BaseComponent = module.BaseComponent;
    }, function (module) {
      vipMap = module.vipMap;
    }, function (module) {
      getNodeByNameDeep = module.getNodeByNameDeep;
    }, function (module) {
      global = module.global;
      sourceManageSeletor = module.sourceManageSeletor;
      fetcher = module.fetcher;
    }, function (module) {
      ApiUrl = module.ApiUrl;
    }, function (module) {
      updateVipBonusInfo = module.updateVipBonusInfo;
      setLoadingAction = module.setLoadingAction;
    }],
    execute: function () {
      var _dec, _class;
      cclegacy._RF.push({}, "68d6f4l2wBOQ45zhnIBiYFS", "Hall_VipMain", undefined);
      const {
        ccclass,
        property
      } = _decorator;
      /**VIP图标路径 */
      const VIP_ICON_PATH = 'vip/resource/img/icon_dt_xinxi_vip{0}/spriteFrame';
      const vipSpriteFileLoad = exports('vipSpriteFileLoad', bundlePkgName => {
        const _arr = [];
        // 最大等级，包含VIP0，所以要多一个
        for (let i = 1; i <= vipMap.length + 1; i++) {
          _arr.push({
            bundlePkgName,
            path: VIP_ICON_PATH.format(i),
            sourceType: SpriteFrame,
            source: null,
            isPreLoad: true
          });
        }
        return _arr;
      });
      let Hall_VipMain = exports('Hall_VipMain', (_dec = ccclass('Hall_VipMain'), _dec(_class = class Hall_VipMain extends BaseComponent {
        constructor(...args) {
          super(...args);
          this.locateInitPosition = void 0;
          this.propertyNode = {
            props_btn_vip_close: new Button(),
            props_diamond_icon: new Node(),
            props_me_vip_level_label: new Node(),
            props_btn_topup: new Button(),
            props_remind_next_level_gold: new Node(),
            props_remind_vip: new Node(),
            props_pro_levelbar: new Node(),
            props_node_locate: new Node(),
            props_togglegroup_vip: new Node(),
            props_vip_toggle_item: new Node(),
            props_remindtext_next_label_gold: new Node(),
            props_remindtext_vip: new Node(),
            props_ScrollView_vip: new Node(),
            props_btn_aktifkan: new Button(),
            props_spr_promotion: new Node(),
            props_spr_daily: new Node(),
            props_spr_weekly: new Node(),
            props_spr_monthly: new Node()
          };
          this.props = {
            memberInfo: null,
            vipBonusInfo: null
          };
          this.events = {
            close: () => {}
          };
        }
        start() {}
        initState() {
          return {};
        }
        bindEvent() {
          this.propertyNode.props_btn_vip_close.node.on(Node.EventType.TOUCH_END, () => {
            this.events.close();
          });
          this.propertyNode.props_btn_topup.node.on(Node.EventType.TOUCH_END, () => {
            global.openShop();
            // test代码
            // const info = instantiate(this.props);
            // info.memberInfo.vipLevel = 4;
            // info.memberInfo.vipLevelExperience = 1000;
            // this.setProps(info);
          });

          this.propertyNode.props_btn_aktifkan.node.on(Node.EventType.TOUCH_END, () => {
            global.openShop();
          });
        }
        bindUI() {
          this.locateInitPosition = new Vec3(this.propertyNode.props_node_locate.position.x, this.propertyNode.props_node_locate.position.y);
        }
        useProps(key, value) {
          if (key === 'memberInfo') {
            // test代码
            // this.props.memberInfo.vipLevelExperience = 2500000;
            // this.props.memberInfo.vipLevel = 13;

            this.initVipToggle();
            this.updateDiamondIcon(this.props.memberInfo.vipLevel);
            this.updateRemindInfo();
            this.updateLevelBar();
            this.updateBarLevelLabel(this.props.memberInfo.vipLevel);
          }
          if (key === "vipBonusInfo") {
            if (!value.cur) return;
            this.getUserVipGoldNd(this.propertyNode.props_spr_promotion).string = value.cur.myUpgradeBonus + '';
            this.getUserVipGoldNd(this.propertyNode.props_spr_daily).string = value.cur.myDayBonus + '';
            this.getUserVipGoldNd(this.propertyNode.props_spr_weekly).string = value.cur.myWeeklyBonus + '';
            this.getUserVipGoldNd(this.propertyNode.props_spr_monthly).string = value.cur.myMonthlyBonus + '';
            this.getOtherVipGoldNd(this.propertyNode.props_spr_promotion).string = value.cur.clickUpgradeBonus + '';
            this.getOtherVipGoldNd(this.propertyNode.props_spr_daily).string = value.cur.clickDayBonus + '';
            this.getOtherVipGoldNd(this.propertyNode.props_spr_weekly).string = value.cur.clickWeeklyBonus + '';
            this.getOtherVipGoldNd(this.propertyNode.props_spr_monthly).string = value.cur.clickMonthlyBonus + '';
            // this.dispatch(setLoadingAction({ isShow: false, flagId: 'vip' }))
          }
        }

        initVipToggle() {
          const maxVipLevel = vipMap.length;
          let userVipLevel = this.props.memberInfo.vipLevel;
          if (this.props.memberInfo.vipLevel >= maxVipLevel) {
            userVipLevel = maxVipLevel;
          }
          this.propertyNode.props_togglegroup_vip.removeAllChildren();
          vipMap.forEach(v => {
            const vipLevel = v[0];
            const vipToggleItem = instantiate(this.propertyNode.props_vip_toggle_item);
            getNodeByNameDeep("label_vip_unchecked", vipToggleItem).getComponent(Label).string = "VIP" + vipLevel;
            getNodeByNameDeep("label_vip_checked", vipToggleItem).getComponent(Label).string = "VIP" + vipLevel;
            getNodeByNameDeep("label_achieve_vip", vipToggleItem).getComponent(Label).string = "VIP" + vipLevel;
            getNodeByNameDeep("spr_achieve_vip", vipToggleItem).active = vipLevel <= userVipLevel;
            this.propertyNode.props_togglegroup_vip.addChild(vipToggleItem);
            // 默认显示为下一个等级
            // const isChecked = vipLevel === userVipLevel + 1;
            //默认显示未当前等级
            const isChecked = vipLevel === userVipLevel;
            vipToggleItem.getComponent(Toggle).isChecked = isChecked;

            // isChecked && this.updateRemindtextInfo(v);
            if (isChecked) {
              this.updateRemindtextInfo(v);
              if (userVipLevel > 10) {
                this.propertyNode.props_ScrollView_vip.getComponent(ScrollView).scrollToRight();
              }
            } else {
              if (userVipLevel === 0) {
                this.updateRemindtextInfo(v);
              }
            }
            vipToggleItem.on(Node.EventType.TOUCH_END, () => {
              this.getVipBonus(vipLevel);
              this.updateRemindtextInfo(v);
            });
          });
        }

        /**更新等级进度条 */
        updateLevelBar() {
          const maxVipLevel = vipMap.length;
          const userTotalRechange = Number(this.getUserTotalRechange());
          const vipLevel = this.props.memberInfo.vipLevel;
          const vipLevelExperience = this.props.memberInfo.vipLevelExperience;

          // 当前经验值 / 下一个等级需要的经验值 得到当前等级到下一个等级的一个百分比
          // const percent = vipLevel < maxVipLevel ? this.props.memberInfo.vipLevelExperience / vipMap.find(v => v[0] === vipLevel + 1)[1] / 10 : 0;
          // const barValue = vipLevel / maxVipLevel + percent;
          const percent = vipLevel < maxVipLevel ? vipLevelExperience / vipMap.find(v => v[0] === vipLevel + 1)[1] * 0.5 : 0;
          const barValue = vipLevel < maxVipLevel ? (vipLevel === 0 ? 0 : 0.5) + percent : 1;
          const locateNode = this.propertyNode.props_node_locate;
          const locateInitPosition = this.locateInitPosition;
          const bar = this.propertyNode.props_pro_levelbar.getComponent(ProgressBar);
          locateNode.getChildByName("label_suffer").getComponent(Label).string = userTotalRechange.formatAmountWithCommas();
          tween(bar).to(0.5, {
            progress: barValue > 1 ? 1 : barValue
          }, {
            onUpdate: () => {
              const barWidth = bar.barSprite.getComponent(UITransform).width;
              locateNode.setPosition(new Vec3(locateInitPosition.x + barWidth, locateInitPosition.y));
            }
          }).start();
        }
        updateBarLevelLabel(vipLevel) {
          let levels = [];
          if (vipLevel === 0) {
            levels = [0, 1, 2];
          } else if (vipLevel >= vipMap.length) {
            levels = [vipLevel - 2, vipLevel - 1, vipLevel];
          } else {
            levels = [vipLevel - 1, vipLevel, vipLevel + 1];
          }
          this.propertyNode.props_pro_levelbar.children.filter(v => v.name.startsWith("spr_level_")).forEach((v, i) => {
            v.getChildByName("Label_level_vip").getComponent(Label).string = levels[i] + "";
          });
        }

        /**更新钻石图标 */
        async updateDiamondIcon(vipLevel) {
          let iconFile = VIP_ICON_PATH.format(vipLevel + 1);
          this.propertyNode.props_diamond_icon.getComponent(Sprite).spriteFrame = (await sourceManageSeletor().getFileAsync(iconFile, SpriteFrame)).source;
          this.propertyNode.props_me_vip_level_label.getComponent(Label).string = vipLevel + "";
        }

        /**更新top的等级文字描述 */
        updateRemindInfo() {
          const maxVipLevel = vipMap.length;
          let nextLevel = this.props.memberInfo.vipLevel + 1;
          if (nextLevel >= maxVipLevel) {
            this.propertyNode.props_remind_next_level_gold.getComponent(Label).string = '0';
            this.propertyNode.props_remind_vip.getComponent(Label).string = "VIP" + maxVipLevel;
            return;
          }
          const vipInfo = vipMap.find(v => v[0] === nextLevel);
          const experience = vipInfo[1] - this.props.memberInfo.vipLevelExperience;
          this.propertyNode.props_remind_next_level_gold.getComponent(Label).string = experience.formatAmountWithCommas();
          this.propertyNode.props_remind_vip.getComponent(Label).string = "VIP" + nextLevel;
        }

        /**更新bottom的等级文字描述 */
        updateRemindtextInfo(vipInfo) {
          const vipLevel = vipInfo[0];
          let userVipLevel = this.props.memberInfo.vipLevel;
          this.getOtherVip(this.propertyNode.props_spr_promotion).string = vipLevel + '';
          this.getOtherVip(this.propertyNode.props_spr_daily).string = vipLevel + '';
          this.getOtherVip(this.propertyNode.props_spr_weekly).string = vipLevel + '';
          this.getOtherVip(this.propertyNode.props_spr_monthly).string = vipLevel + '';
          this.getUserVip(this.propertyNode.props_spr_promotion).string = "VIP" + userVipLevel;
          this.getUserVip(this.propertyNode.props_spr_daily).string = "VIP" + userVipLevel;
          this.getUserVip(this.propertyNode.props_spr_weekly).string = "VIP" + userVipLevel;
          this.getUserVip(this.propertyNode.props_spr_monthly).string = "VIP" + userVipLevel;
          if (vipLevel <= userVipLevel) {
            this.propertyNode.props_remindtext_next_label_gold.getComponent(Label).string = "0";
            if (vipLevel < userVipLevel) {
              //升级奖
              this.getAvailableNode(this.propertyNode.props_spr_promotion).active = false;
              // this.getReceivedNode(this.propertyNode.props_spr_promotion).active = true;
              this.getLockNode(this.propertyNode.props_spr_promotion).active = true;
              this.getLockNode(this.propertyNode.props_spr_promotion).getChildByName("spr_vip_lock").active = false;

              //每日
              this.getAvailableNode(this.propertyNode.props_spr_daily).active = false;
              // this.getReceivedNode(this.propertyNode.props_spr_daily).active = false;
              this.getLockNode(this.propertyNode.props_spr_daily).active = true;
              this.getLockNode(this.propertyNode.props_spr_daily).getChildByName("spr_vip_lock").active = false;
              //每周
              this.getAvailableNode(this.propertyNode.props_spr_weekly).active = false;
              // this.getReceivedNode(this.propertyNode.props_spr_weekly).active = false;
              this.getLockNode(this.propertyNode.props_spr_weekly).active = true;
              this.getLockNode(this.propertyNode.props_spr_weekly).getChildByName("spr_vip_lock").active = false;

              //每月
              this.getAvailableNode(this.propertyNode.props_spr_monthly).active = false;
              // this.getReceivedNode(this.propertyNode.props_spr_monthly).active = false;
              this.getLockNode(this.propertyNode.props_spr_monthly).active = true;
              this.getLockNode(this.propertyNode.props_spr_monthly).getChildByName("spr_vip_lock").active = false;
            } else if (vipLevel === userVipLevel) {
              //升级奖
              this.getAvailableNode(this.propertyNode.props_spr_promotion).active = true;
              // this.getReceivedNode(this.propertyNode.props_spr_promotion).active = true;
              this.getLockNode(this.propertyNode.props_spr_promotion).active = false;
              //每日
              this.getAvailableNode(this.propertyNode.props_spr_daily).active = true;
              // this.getReceivedNode(this.propertyNode.props_spr_daily).active = false;
              this.getLockNode(this.propertyNode.props_spr_daily).active = false;
              //每周
              this.getAvailableNode(this.propertyNode.props_spr_weekly).active = true;
              // this.getReceivedNode(this.propertyNode.props_spr_weekly).active = false;
              this.getLockNode(this.propertyNode.props_spr_weekly).active = false;
              //每月
              this.getAvailableNode(this.propertyNode.props_spr_monthly).active = true;
              // this.getReceivedNode(this.propertyNode.props_spr_monthly).active = false;
              this.getLockNode(this.propertyNode.props_spr_monthly).active = false;
            }
          } else {
            this.propertyNode.props_remindtext_next_label_gold.getComponent(Label).string = (this.getTotalRechange(vipLevel) - this.getUserTotalRechange()).formatAmountWithCommas();

            //升级奖
            this.getAvailableNode(this.propertyNode.props_spr_promotion).active = false;
            this.getReceivedNode(this.propertyNode.props_spr_promotion).active = false;
            this.getLockNode(this.propertyNode.props_spr_promotion).active = true;
            this.getLockNode(this.propertyNode.props_spr_promotion).getChildByName("spr_vip_lock").active = true;
            //每日
            this.getAvailableNode(this.propertyNode.props_spr_daily).active = false;
            this.getReceivedNode(this.propertyNode.props_spr_daily).active = false;
            this.getLockNode(this.propertyNode.props_spr_daily).active = true;
            this.getLockNode(this.propertyNode.props_spr_daily).getChildByName("spr_vip_lock").active = true;
            //每周
            this.getAvailableNode(this.propertyNode.props_spr_weekly).active = false;
            this.getReceivedNode(this.propertyNode.props_spr_weekly).active = false;
            this.getLockNode(this.propertyNode.props_spr_weekly).active = true;
            this.getLockNode(this.propertyNode.props_spr_weekly).getChildByName("spr_vip_lock").active = true;
            //每月
            this.getAvailableNode(this.propertyNode.props_spr_monthly).active = false;
            this.getReceivedNode(this.propertyNode.props_spr_monthly).active = false;
            this.getLockNode(this.propertyNode.props_spr_monthly).active = true;
            this.getLockNode(this.propertyNode.props_spr_monthly).getChildByName("spr_vip_lock").active = true;
          }
          this.propertyNode.props_remindtext_vip.getComponent(Label).string = "VIP" + vipLevel;
        }

        /**获取福利未领取状态节点 */
        getAvailableNode(parentNode) {
          return parentNode.getChildByName("spr_available");
        }
        /**获取福利已领取状态节点 */
        getReceivedNode(parentNode) {
          return parentNode.getChildByName("spr_received");
        }
        /**获取福利锁住状态节点 */
        getLockNode(parentNode) {
          return parentNode.getChildByName("spr_locked");
        }
        /**福利 获取当前用户vip等级的节点 */
        getUserVip(parentNode) {
          return getNodeByNameDeep("label_vip", parentNode).getComponent(Label);
        }
        /**福利 获取其他vip等级的节点 */
        getOtherVip(parentNode) {
          return getNodeByNameDeep("spr_label_vip", parentNode).getComponent(Label);
        }
        /**获取当前用户vip等级 金币福利值节点 */
        getUserVipGoldNd(parentNode) {
          return getNodeByNameDeep("spr_label_gold", parentNode).getComponent(Label);
        }
        /**获取其他vip等级 金币福利值节点 */
        getOtherVipGoldNd(parentNode) {
          return getNodeByNameDeep("label_gold", parentNode).getComponent(Label);
        }
        /**获得用户累计充值 */
        getUserTotalRechange() {
          return this.getTotalRechange(this.props.memberInfo.vipLevel) + this.props.memberInfo.vipLevelExperience;
        }

        /**获得充值到vip10时需要总的充值金币 */
        getTotalRechange(vipLevel = 99) {
          let sum = 0;
          vipMap.filter(v => v[0] <= vipLevel).forEach(v => sum += v[1]);
          return sum;
        }
        /**获取当前点击vip等级的金币福利 */
        getVipBonus(vipLevel) {
          this.dispatch(updateVipBonusInfo(null));
          fetcher.send(ApiUrl.GET_VIP_BONUS, {
            vipLevel: vipLevel
          }).then(async rsp => {
            this.dispatch(setLoadingAction({
              isShow: false,
              flagId: 'vip'
            }));
            this.dispatch(updateVipBonusInfo(rsp));
          }).catch(e => {
            console.log(e);
          });
        }
        update(deltaTime) {}
      }) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Hall_VipUp.ts", ['cc', './BaseComponent.ts'], function (exports) {
  var cclegacy, Node, sp, _decorator, BaseComponent;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      Node = module.Node;
      sp = module.sp;
      _decorator = module._decorator;
    }, function (module) {
      BaseComponent = module.BaseComponent;
    }],
    execute: function () {
      var _dec, _class;
      cclegacy._RF.push({}, "f4e9aZuYjFOia8Fmc5ZS3+2", "Hall_VipUp", undefined);
      const {
        ccclass,
        property
      } = _decorator;
      let Hall_VipUp = exports('Hall_VipUp', (_dec = ccclass('Hall_VipUp'), _dec(_class = class Hall_VipUp extends BaseComponent {
        constructor(...args) {
          super(...args);
          this.propertyNode = {
            props_vipshengji: new Node()
          };
          this.props = {};
          this.events = {
            close: () => {}
          };
        }
        start() {}
        initState() {
          return {};
        }
        bindEvent() {
          this.propertyNode.props_vipshengji.getComponent(sp.Skeleton).setCompleteListener(() => {
            this.scheduleOnce(() => {
              this.events.close();
            });
          });
        }
        bindUI() {}
        useProps(key, value) {}
        update(deltaTime) {}
      }) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Hall_WaterHelp.ts", ['cc', './BaseComponent.ts', './hallConfig.ts', './GameConfig.ts'], function (exports) {
  var cclegacy, Button, WebView, Node, sys, _decorator, BaseComponent, config, getIsTest;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      Button = module.Button;
      WebView = module.WebView;
      Node = module.Node;
      sys = module.sys;
      _decorator = module._decorator;
    }, function (module) {
      BaseComponent = module.BaseComponent;
    }, function (module) {
      config = module.config;
    }, function (module) {
      getIsTest = module.getIsTest;
    }],
    execute: function () {
      var _dec, _class;
      cclegacy._RF.push({}, "11a01SGdHRGD6yzceQg9IL+", "Hall_WaterHelp", undefined);
      const {
        ccclass,
        property
      } = _decorator;
      let Hall_WaterHelp = exports('Hall_WaterHelp', (_dec = ccclass('Hall_WaterHelp'), _dec(_class = class Hall_WaterHelp extends BaseComponent {
        constructor(...args) {
          super(...args);
          this.propertyNode = {
            props_btn_spr_shareHelp_close: new Button(),
            props_web_help: new WebView()
          };
          this.props = {};
          this.events = {
            onCloseHandler: () => {}
          };
        }
        start() {}
        initState() {
          return {};
        }
        bindEvent() {
          this.propertyNode.props_btn_spr_shareHelp_close.node.on(Node.EventType.TOUCH_END, () => {
            this.events.onCloseHandler();
          });
        }
        useProps(key, value) {}
        bindUI() {
          this.propertyNode.props_web_help.url = `${config.backwaterHelpUrl}?token=${sys.localStorage.getItem('token')}&env=${getIsTest() ? 'test' : 'pro'}`;
        }
        update(deltaTime) {}
      }) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Hall_WinningBox.ts", ['cc', './BaseComponent.ts', './globals.ts', './baseBoard.ts', './types.ts'], function (exports) {
  var cclegacy, Node, instantiate, UITransform, Label, SpriteFrame, Sprite, Widget, Tween, tween, Vec3, _decorator, BaseComponent, baseBoardView, bundleHall, bundleCommon, global, addToastAction, ToastType;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      Node = module.Node;
      instantiate = module.instantiate;
      UITransform = module.UITransform;
      Label = module.Label;
      SpriteFrame = module.SpriteFrame;
      Sprite = module.Sprite;
      Widget = module.Widget;
      Tween = module.Tween;
      tween = module.tween;
      Vec3 = module.Vec3;
      _decorator = module._decorator;
    }, function (module) {
      BaseComponent = module.BaseComponent;
    }, function (module) {
      baseBoardView = module.baseBoardView;
      bundleHall = module.bundleHall;
      bundleCommon = module.bundleCommon;
      global = module.global;
    }, function (module) {
      addToastAction = module.addToastAction;
    }, function (module) {
      ToastType = module.ToastType;
    }],
    execute: function () {
      var _dec, _class;
      cclegacy._RF.push({}, "dae58GVctlP3YIDwJTZ+B4g", "Hall_WinningBox", undefined);
      const {
        ccclass,
        property
      } = _decorator;
      let Hall_WinningBox = exports('Hall_WinningBox', (_dec = ccclass('Hall_WinningBox'), _dec(_class = class Hall_WinningBox extends BaseComponent {
        constructor(...args) {
          super(...args);
          this.winningList = [];
          this.isDone = true;
          this.propertyNode = {
            props_zhongjiangbox_template: new Node()
          };
          this.props = {
            newWinningItem: null
          };
          this.events = {};
        }
        start() {}
        initState() {
          return {};
        }
        bindEvent() {}
        useProps(key, value) {
          if (key === "newWinningItem" && value.cur) {
            this.winningList.push(value.cur);
            this.isDone && this.showWinning();
          }
        }
        pushWinningData(winningType, isVertical = false) {
          if (!winningType) return;
          if (this.winningList.length >= 5) {
            this.winningList.shift();
          }
          this.winningList.push(winningType);
          this.isDone && this.showWinning(isVertical);
        }
        showWinning(isVertical = false) {
          if (!this.winningList.length) {
            this.isDone = true;
          } else {
            try {
              this.isDone = false;
              const showItem = this.winningList.shift();
              const nd = instantiate(this.propertyNode.props_zhongjiangbox_template);
              //如果处于字游戏中，就在最上层弹出，如果在大厅，就在中层弹出
              const wrapNode = baseBoardView.mainPanelViewModel.comp.props.subGameInfo ? baseBoardView.comp.getPropertyNode().props_winnerBox : baseBoardView.mainPanelViewModel.comp.getPropertyNode().props_winningBox;
              let w = this.node.parent.getComponent(UITransform).width;
              let h = this.node.parent.getComponent(UITransform).height;
              // if (window.HALL_GLOBAL.currGameConfig && window.HALL_GLOBAL.currGameConfig.isVertical) {

              this.node.getComponent(UITransform).width = Math.min(w, h);
              this.node.getComponent(UITransform).height = Math.max(w, h);
              this.node.angle = isVertical ? 90 : 0;
              this.node.addChild(nd);
              // if (isVertical) {
              // 	this.node.getComponent(UITransform).width = Math.min(w, h);
              // 	this.node.getComponent(UITransform).height = Math.max(w, h);
              // 	this.node.angle = 90;
              // 	this.node.addChild(nd);
              // } else {
              // 	this.node.getComponent(UITransform).width = Math.max(w, h);
              // 	this.node.getComponent(UITransform).height = Math.min(w, h);
              // 	this.node.angle = 0;
              // 	wrapNode.addChild(nd)
              // }

              nd.active = true;
              nd.getChildByName("label_playerName").getComponent(Label).string = showItem.memberVo.nickName;
              nd.getChildByName("label_goldNum").getComponent(Label).string = showItem.amount.formatAmountWithLetter2(false);
              bundleHall.load(`icon/smallIcon/game_${showItem.gameId}/spriteFrame`, SpriteFrame, (err, sp) => {
                try {
                  !err && (nd.getChildByName("game_spr_icon").getComponent(Sprite).spriteFrame = sp);
                } catch (e) {
                  console.log(e);
                }
              });
              bundleCommon.load(`resource/head/head_circle_${showItem.memberVo.avatarIndex}/spriteFrame`, SpriteFrame, (err, sp) => {
                try {
                  !err && (nd.getChildByName("head_circle_2").getComponent(Sprite).spriteFrame = sp);
                } catch (e) {
                  console.log(e);
                }
              });
              let wg = nd.getComponent(Widget);
              wg.right = 330;
              wg.top = 100;
              wg.updateAlignment();
              this.showWinning();
              console.error(nd.getWorldRotation(), "旋转", this.node.getWorldRotation());
              Tween.stopAllByTarget(wg);
              tween(wg).to(0.3, {
                right: 20
              }, {
                easing: "backOut"
              }).delay(2).to(0.1, {
                right: -330
              }).call(() => {
                nd && nd.destroy();
                this && this.showWinning();
              }).start();
              nd.once(Node.EventType.TOUCH_END, () => {
                if (nd && wg) {
                  tween(nd).to(0.05, {
                    scale: new Vec3(0, 0, 0)
                  }).call(() => {
                    nd && nd.destroy();
                    if (this) {
                      this.winningList = [];
                      this.showWinning();
                    }
                  }).start();
                }
              });
            } catch (e) {
              global.hallDispatch(addToastAction({
                content: e,
                type: ToastType.ERROR,
                forceLandscape: false
              }));
            }
          }
        }
        bindUI() {
          // this.propertyNode.props_zhongjiangbox_template.active = false
        }
        update(deltaTime) {}
      }) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Hall_WithdrawalPanel.ts", ['cc', './BaseComponent.ts', './tool.ts', './InputValidator.ts', './baseBoard.ts', './TaskScheduler.ts', './index4.ts', './ModalBox.ts', './Guide.ts', './hallConfig.ts', './globals.ts'], function (exports) {
  var cclegacy, Node, Button, EditBox, Sprite, Label, assetManager, SpriteFrame, ScrollView, UITransform, tween, instantiate, _decorator, BaseComponent, maskBankCardNumber, InputValidator, addToastAction, TaskScheduler, Task, ModalBox, Guide, config, lang;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      Node = module.Node;
      Button = module.Button;
      EditBox = module.EditBox;
      Sprite = module.Sprite;
      Label = module.Label;
      assetManager = module.assetManager;
      SpriteFrame = module.SpriteFrame;
      ScrollView = module.ScrollView;
      UITransform = module.UITransform;
      tween = module.tween;
      instantiate = module.instantiate;
      _decorator = module._decorator;
    }, function (module) {
      BaseComponent = module.BaseComponent;
    }, function (module) {
      maskBankCardNumber = module.maskBankCardNumber;
    }, function (module) {
      InputValidator = module.default;
    }, function (module) {
      addToastAction = module.addToastAction;
    }, function (module) {
      TaskScheduler = module.default;
      Task = module.Task;
    }, null, function (module) {
      ModalBox = module.default;
    }, function (module) {
      Guide = module.default;
    }, function (module) {
      config = module.config;
    }, function (module) {
      lang = module.lang;
    }],
    execute: function () {
      var _dec, _class;
      cclegacy._RF.push({}, "80c05SWv2ZGepAhTdipT/a8", "Hall_WithdrawalPanel", undefined);
      const {
        ccclass,
        property
      } = _decorator;
      let Hall_WithdrawalPanel = exports('Hall_WithdrawalPanel', (_dec = ccclass('Hall_WithdrawalPanel'), _dec(_class = class Hall_WithdrawalPanel extends BaseComponent {
        constructor(...args) {
          super(...args);
          this.taskScheduler = new TaskScheduler();
          this.taskScheduler2 = new TaskScheduler();
          this.propertyNode = {
            props_btn_tips_close: new Node(),
            /**用户余额 */
            props_label_saldo_num: new Node(),
            /**选择提现渠道按钮 */
            props_btn_withdrawal_ikat: new Node(),
            /**提现金额 */
            props_EditBox_jumlah: new Node(),
            /**减金额 */
            props_btn_withdrawal_subtract: new Node(),
            /**加金额 */
            props_btn_withdrawal_add: new Node(),
            /**最大金额 */
            props_btn_withdrawal_max: new Node(),
            /**Tips */
            props_btn_withdrawal_kirim: new Node(),
            /**未选择银行卡 */
            props_no_bank_choose: new Node(),
            /**已选择银行卡 */
            props_had_bank_choose: new Node(),
            /**打开流水按钮 */
            props_btn_withdrawal_catatan: new Node(),
            /**末班样式 */
            props_spr_one: new Node(),
            /**无数据节点 */
            props_no_message: new Node(),
            /**提现记录 */
            props_scrollView_withDraw: new Node(),
            /**引导界面1 */
            props_layout_remind_lakt: new Node(),
            /**引导界面1 */
            props_layout_remind_jumlah: new Node(),
            /**引导界面1 */
            props_layout_remind_kirim: new Node(),
            /**手动打开引导 */
            props_btn_newHelp: new Button()
          };
          this.props = {
            memberAssetGoldPieces: 0,
            withdrawBankChannelChoose: null,
            validFlowingWater: -1
          };
          this.events = {
            onClosePanel: () => {},
            openWithdrawBank: () => {},
            trueToWithdraw: amount => {},
            openWithdrawBill: () => {}
          };
        }
        start() {}
        initState() {
          return {};
        }
        bindEvent() {
          this.propertyNode.props_btn_tips_close.on(Node.EventType.TOUCH_END, () => {
            this.events.onClosePanel();
          });
          this.propertyNode.props_btn_withdrawal_ikat.on(Node.EventType.TOUCH_END, () => {
            this.events.openWithdrawBank();
          });
          this.propertyNode.props_btn_withdrawal_subtract.on(Node.EventType.TOUCH_END, () => {
            const amountStr = this.propertyNode.props_EditBox_jumlah.getComponent(EditBox).string;
            const amount = amountStr === "" ? 0 : +amountStr;
            if (amount <= 100) {
              this.propertyNode.props_EditBox_jumlah.getComponent(EditBox).string = 0 + '';
            } else {
              this.propertyNode.props_EditBox_jumlah.getComponent(EditBox).string = (amount - 10000 > 0 ? amount - 10000 : 0) + '';
            }
          });
          this.propertyNode.props_btn_withdrawal_add.on(Node.EventType.TOUCH_END, () => {
            const amountStr = this.propertyNode.props_EditBox_jumlah.getComponent(EditBox).string;
            const amount = amountStr === "" ? 0 : +amountStr;
            if (amount + 100 > this.props.memberAssetGoldPieces) {
              this.propertyNode.props_EditBox_jumlah.getComponent(EditBox).string = this.props.memberAssetGoldPieces + '';
            } else {
              this.propertyNode.props_EditBox_jumlah.getComponent(EditBox).string = amount + 10000 + '';
            }
          });
          this.propertyNode.props_btn_withdrawal_max.on(Node.EventType.TOUCH_END, () => {
            this.propertyNode.props_EditBox_jumlah.getComponent(EditBox).string = this.props.memberAssetGoldPieces + '';
          });
          this.propertyNode.props_btn_withdrawal_catatan.on(Node.EventType.TOUCH_END, () => {
            this.events.openWithdrawBill();
          });
          this.propertyNode.props_btn_withdrawal_kirim.on(Node.EventType.TOUCH_END, () => {
            if (this.propertyNode.props_btn_withdrawal_kirim.getComponent(Sprite).grayscale) return;
            if (this.props.withdrawBankChannelChoose) {
              const amount2 = this.propertyNode.props_EditBox_jumlah.getComponent(EditBox).string;
              new InputValidator().begin().isDecimal(amount2, false).done(() => {
                if (+amount2 > this.props.memberAssetGoldPieces) {
                  this.dispatch(addToastAction({
                    content: lang.write(k => k.HallModule.HallWithdrawalNoEnough, {}, {
                      placeStr: "对不起，您的可提现金额不足~"
                    }),
                    forceLandscape: true
                  }));
                  return;
                }
                if (+amount2 < this.props.withdrawBankChannelChoose.limitDown || +amount2 > this.props.withdrawBankChannelChoose.limitUp) {
                  this.dispatch(addToastAction({
                    content: lang.write(k => k.HallModule.HallWithdrawalglod, {
                      down: this.props.withdrawBankChannelChoose.limitDown.formatAmountWithCommas(),
                      up: this.props.withdrawBankChannelChoose.limitUp.formatAmountWithCommas()
                    }, {
                      placeStr: "对不起，提现金额应在{down}~{up}之间"
                    }),
                    forceLandscape: true
                  }));
                  return;
                }
                this.events.trueToWithdraw(+amount2);
              });
            } else {
              this.dispatch(addToastAction({
                content: lang.write(k => k.HallModule.HallWithdrawalMessage, {}, {
                  placeStr: "请选择提现到账的银行信息~"
                })
              }));
            }
          });
          this.propertyNode.props_btn_newHelp.node.on(Node.EventType.TOUCH_END, () => {
            config.fristLogin = {
              main: true
            };
            this.beginGuide();
          });
        }
        useProps(key, value) {
          key === "memberAssetGoldPieces" && (this.propertyNode.props_label_saldo_num.getComponent(Label).string = value.cur.formatAmountWithCommas());
          if (key === "withdrawBankChannelChoose") {
            const cur = value.cur;
            this.propertyNode.props_no_bank_choose.active = false;
            this.propertyNode.props_had_bank_choose.active = true;
            this.propertyNode.props_had_bank_choose.getChildByName("account_number").getComponent(Label).string = maskBankCardNumber(cur.accountNumber, 3);
            // bundleHall.load(`withdrawal/resource/icon_withdrawal_${cur.name.toLocaleLowerCase()}/spriteFrame`, SpriteFrame, (err, sp) => {
            // 	!err && (this.propertyNode.props_had_bank_choose.getChildByName("icon").getComponent(Sprite).spriteFrame = sp)
            // })
            assetManager.loadRemote(this.props.withdrawBankChannelChoose.iconMax, (err, asset) => {
              if (this.propertyNode && !err) {
                this.propertyNode.props_had_bank_choose.getChildByName("icon").getComponent(Sprite).spriteFrame = SpriteFrame.createWithImage(asset);
              }
            });
          }
          if (key === "validFlowingWater") {
            this.isFlowingWater();
            !this.propertyNode.props_btn_withdrawal_kirim.getComponent(Sprite).grayscale && this.beginGuide();
          }
        }
        /**添加流水 */
        addWithdrawBill(dataList) {
          if (!this.propertyNode) return;
          const isFrist = this.propertyNode.props_scrollView_withDraw.getComponent(ScrollView).content.children.length ? true : false;
          this.propertyNode.props_no_message.active = false;
          if (isFrist) {
            //先整几条进去
            dataList.slice(0, 5).forEach(item => {
              const node = this.creatorNodeItem(item);
              this.propertyNode.props_scrollView_withDraw.getComponent(ScrollView).content.addChild(node);
              node.setSiblingIndex(0);
            });
          }
          dataList.forEach((data, index) => {
            if (isFrist && index < 5) return;
            this.taskScheduler.joinQueue(new Task(done => {
              const l = this.propertyNode.props_scrollView_withDraw.getComponent(ScrollView).content.children.length;
              if (l > 10) {
                this.propertyNode.props_scrollView_withDraw.getComponent(ScrollView).content.children[l - 3].destroy();
              }
              const node = this.creatorNodeItem(data);
              this.propertyNode.props_scrollView_withDraw.getComponent(ScrollView).content.addChild(node);
              node.getComponent(UITransform).height = 0;
              tween(node.getComponent(UITransform)).to(0.1, {
                height: 120
              }).start();
              node.setSiblingIndex(0);
              this.scheduleOnce(() => done(), 1.5);
            }));
          });
        }
        creatorNodeItem(data) {
          const node = instantiate(this.propertyNode.props_spr_one);
          node.active = true;
          node.getChildByName("label_time").getComponent(Label).string = data.transferTime;
          node.getChildByName("label_name").getComponent(Label).string = data.nickName;
          node.getChildByName("label_menarik").getComponent(Label).string = data.orderMoney.formatAmountWithCommas() + ' ' + data.currency;
          node.getChildByName("label_waktu").getComponent(Label).string = lang.write(k => k.withdrawal.ElapsedTime, {
            minutes: data.minute,
            second: data.second
          }, {
            placeStr: "多少分多少秒"
          });
          return node;
        }
        destroyCallBack() {
          this.taskScheduler.stopQueue(false);
          this.taskScheduler2.stopQueue(false);
        }
        bindUI() {
          // 第二次打开，就得看这个了
          this.isFlowingWater();
        }
        isFlowingWater() {
          if (this.props.validFlowingWater > 0) {
            !ModalBox.Instance().isShow && ModalBox.Instance().show({
              content: lang.write(k => k.withdrawal.flllowWaterNoLevel, {}, {
                placeStr: "抱歉，你的投注额未达到提现标准！"
              }),
              type: "Prompt"
            }, () => true);
            this.propertyNode.props_btn_withdrawal_kirim.getComponent(Sprite).grayscale = true;
          } else {
            this.propertyNode.props_btn_withdrawal_kirim.getComponent(Sprite).grayscale = false;
          }
        }
        beginGuide() {
          if (config.fristLogin.main && !config.fristLogin['hasShow_1']) {
            //标明这里已经显示了
            config.fristLogin['hasShow_1'] = true;
            const guide_1 = new Guide(this.propertyNode.props_btn_withdrawal_ikat, this.propertyNode.props_layout_remind_lakt);
            const guide_2 = new Guide(this.propertyNode.props_EditBox_jumlah, this.propertyNode.props_layout_remind_jumlah);
            const guide_3 = new Guide(this.propertyNode.props_btn_withdrawal_kirim, this.propertyNode.props_layout_remind_kirim);
            // this.taskScheduler.stopQueue(false)
            this.taskScheduler2.joinQueue(new Task(done => {
              guide_1.begin().bindDone(() => done());
            })).joinQueue(new Task(done => {
              guide_2.begin().bindDone(() => done());
            })).joinQueue(new Task(done => {
              guide_3.begin().bindDone(() => done());
            }));
          }
        }
        update(deltaTime) {}
      }) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Hall_WithdrawBank.ts", ['cc', './BaseComponent.ts', './index4.ts', './hallConfig.ts', './tool.ts', './soundDefine2.ts', './baseBoard.ts', './Guide.ts', './TaskScheduler.ts', './globals.ts'], function (exports) {
  var cclegacy, Node, instantiate, Label, assetManager, Sprite, SpriteFrame, _decorator, BaseComponent, config, initToggle, SoundPathDefine, addToastAction, Guide, TaskScheduler, Task, lang, bundleHall, hallAudio;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      Node = module.Node;
      instantiate = module.instantiate;
      Label = module.Label;
      assetManager = module.assetManager;
      Sprite = module.Sprite;
      SpriteFrame = module.SpriteFrame;
      _decorator = module._decorator;
    }, function (module) {
      BaseComponent = module.BaseComponent;
    }, null, function (module) {
      config = module.config;
    }, function (module) {
      initToggle = module.initToggle;
    }, function (module) {
      SoundPathDefine = module.SoundPathDefine;
    }, function (module) {
      addToastAction = module.addToastAction;
    }, function (module) {
      Guide = module.default;
    }, function (module) {
      TaskScheduler = module.default;
      Task = module.Task;
    }, function (module) {
      lang = module.lang;
      bundleHall = module.bundleHall;
      hallAudio = module.hallAudio;
    }],
    execute: function () {
      var _dec, _class;
      cclegacy._RF.push({}, "fe46508NshGU5dsUb/w0dCG", "Hall_WithdrawBank", undefined);
      const {
        ccclass,
        property
      } = _decorator;
      let Hall_WithdrawBank = exports('Hall_WithdrawBank', (_dec = ccclass('Hall_WithdrawBank'), _dec(_class = class Hall_WithdrawBank extends BaseComponent {
        constructor(...args) {
          super(...args);
          this.taskScheduler = new TaskScheduler();
          this.propertyNode = {
            props_btn_metode_close: new Node(),
            props_ScrollView_metode: new Node(),
            /**打开帮助页面按钮 */
            props_btn_metode_tentukan: new Node(),
            props_ToggleGroup_bankType: new Node(),
            /**引导节点1 */
            props_layout_choose: new Node(),
            /**引导节点2 */
            props_layout_tentukan: new Node()
          };
          this.chooseItem = void 0;
          this.props = {
            withdrawBankChannelList: []
          };
          this.events = {
            onCloseHandler: () => {},
            onClickBankChannl: bankItem => {},
            onBankChannlDone: bankItem => {}
          };
        }
        start() {}
        initState() {
          return {
            isDisableBind: false
          };
        }
        bindEvent() {
          this.propertyNode.props_btn_metode_close.on(Node.EventType.TOUCH_END, () => {
            this.events.onCloseHandler();
          });
          this.propertyNode.props_btn_metode_tentukan.on(Node.EventType.TOUCH_END, () => {
            if (this.chooseItem) {
              if (!this.chooseItem.bind && this.props.withdrawBankChannelList.filter(i => i.bind).length >= 1) {
                this.dispatch(addToastAction({
                  content: lang.write(k => k.HallModule.HallWithdrawalBank, {}, {
                    placeStr: "请选择有效的提现渠道~"
                  })
                }));
                return;
              }
              this.events.onBankChannlDone(this.chooseItem);
            } else {
              this.dispatch(addToastAction({
                content: lang.write(k => k.HallModule.HallWithdrawalBank, {}, {
                  placeStr: "请选择~"
                })
              }));
            }
            // sys.openURL(config.bankHelpUrl)
          });
          // const scroll = this.propertyNode.props_ScrollView_metode.getComponent(ScrollView)
          initToggle(this.propertyNode.props_ToggleGroup_bankType, this.node, new Hall_WithdrawBank.EventHandler(), "Hall_WithdrawBank", "callback");
        }
        useProps(key, value) {
          if (key === "withdrawBankChannelList") {
            // const scroll = this.propertyNode.props_ScrollView_metode.getComponent(ScrollView)
            const toggleWrap = this.propertyNode.props_ToggleGroup_bankType; //scroll.content.getChildByName("ToggleGroup_gold")
            const template = toggleWrap.children[0];
            toggleWrap.children.forEach((child, index) => {
              index > 0 && child.destroy();
            });
            value.cur.sort((a, b) => b.bind - a.bind).forEach((item, index) => {
              const childNode = instantiate(template);
              childNode.active = true;
              childNode.getChildByName("Label_num1").getComponent(Label).string = `${item.limitDown}-${item.limitUp}`;
              childNode.getChildByName("Label_bank_name").getComponent(Label).string = item.name;
              item.iconMax && assetManager.loadRemote(item.iconMax, (err, asset) => {
                if (this.propertyNode && !err) {
                  childNode.getChildByName("icon").getComponent(Sprite).spriteFrame = SpriteFrame.createWithImage(asset);
                }
              });
              // bundleHall.load(`withdrawal/resource/icon_withdrawal_${item.name.toLocaleLowerCase()}/spriteFrame`, SpriteFrame, (err, sp) => {
              // 	!err && (childNode.getChildByName("icon").getComponent(Sprite).spriteFrame = sp)
              // })

              if (item.bind) {
                //如果是已经绑定的卡，按钮显示另外一个
                bundleHall.load(`withdrawal/resource/btn_withdrawal_ikatRed/spriteFrame`, SpriteFrame, (err, sp) => {
                  !err && (childNode.getChildByName("btn_ikat1").getComponent(Sprite).spriteFrame = sp);
                });
              }
              toggleWrap.addChild(childNode);
              childNode.getChildByName("btn_ikat1").on(Node.EventType.TOUCH_END, () => {
                if (item.bind) ;else {
                  //打开详情
                  const grayscale = childNode.getChildByName("btn_ikat1").getComponent(Sprite).grayscale;
                  !grayscale && this.events.onClickBankChannl(item);
                }
              });
            });
            this.setState({
              isDisableBind: this.props.withdrawBankChannelList.filter(i => i.bind).length ? true : false
            });
            this.beginGuide();
          }
        }
        callback(event, customEventData) {
          hallAudio.playOneShot(SoundPathDefine.BTU_CLICK);
          const index = this.propertyNode.props_ToggleGroup_bankType.children.indexOf(event.target);
          this.chooseItem = this.props.withdrawBankChannelList[index - 1];
        }
        beginGuide() {
          if (config.fristLogin.main && !config.fristLogin['hasShow_2']) {
            //标明这里已经显示了
            config.fristLogin['hasShow_2'] = true;
            const children = this.propertyNode.props_ToggleGroup_bankType.children;
            const guide_1 = new Guide(children.length ? children[0] : this.propertyNode.props_ToggleGroup_bankType, this.propertyNode.props_layout_choose);
            const guide_2 = new Guide(this.propertyNode.props_btn_metode_tentukan, this.propertyNode.props_layout_tentukan);
            this.taskScheduler.joinQueue(new Task(done => {
              guide_1.begin().bindDone(() => done());
            })).joinQueue(new Task(done => {
              guide_2.begin().bindDone(() => done());
            }));
          }
        }
        bindUI() {
          this.useState((key, value) => {
            this.propertyNode.props_ToggleGroup_bankType.children.filter(i => i.active).forEach((child, index) => {
              child.getChildByName("btn_ikat1").getComponent(Sprite).grayscale = false;
              const item = this.props.withdrawBankChannelList.sort((a, b) => b.bind - a.bind)[index];
              if (item && !item.bind) {
                child.getChildByName("btn_ikat1").getComponent(Sprite).grayscale = value.cur;
              }
            });
          }, ["isDisableBind"]);
        }
        update(deltaTime) {}
      }) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Hall_WithdrawBankBind.ts", ['cc', './BaseComponent.ts', './index4.ts', './InputValidator.ts', './hallConfig.ts', './Guide.ts', './globals.ts'], function (exports) {
  var cclegacy, Node, EditBox, Button, assetManager, Sprite, SpriteFrame, _decorator, BaseComponent, InputValidator, config, Guide, lang;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      Node = module.Node;
      EditBox = module.EditBox;
      Button = module.Button;
      assetManager = module.assetManager;
      Sprite = module.Sprite;
      SpriteFrame = module.SpriteFrame;
      _decorator = module._decorator;
    }, function (module) {
      BaseComponent = module.BaseComponent;
    }, null, function (module) {
      InputValidator = module.default;
    }, function (module) {
      config = module.config;
    }, function (module) {
      Guide = module.default;
    }, function (module) {
      lang = module.lang;
    }],
    execute: function () {
      var _dec, _class;
      cclegacy._RF.push({}, "540e7lFgUZE7K+RySIDK9Es", "Hall_WithdrawBankBind", undefined);
      const {
        ccclass,
        property
      } = _decorator;
      let Hall_WithdrawBankBind = exports('Hall_WithdrawBankBind', (_dec = ccclass('Hall_WithdrawBankBind'), _dec(_class = class Hall_WithdrawBankBind extends BaseComponent {
        constructor(...args) {
          super(...args);
          this.propertyNode = {
            props_icon_reken: new Node(),
            props_btn_metode_close: new Node(),
            /**支行名字 */
            props_EditBox_Sub: new EditBox(),
            /**卡号 */
            props_nomor_EditBox: new EditBox(),
            /**卡号名 */
            props_EditBox_name: new EditBox(),
            props_btn_metode_tentukan: new Button(),
            /**ifsc信息 */
            props_ifsc_EditBox_code: new EditBox(),
            /**引导节点 */
            props_layout_tentukan: new Node()
          };
          this.props = {
            hadChooseBankChannl: null
          };
          this.events = {
            onClosehandler: () => {},
            onBindDone: (hadChooseBankChannl, accountNumber, realName, ifscCode, bankBranch) => {}
          };
        }
        start() {}
        initState() {
          return {};
        }
        bindEvent() {
          this.propertyNode.props_btn_metode_close.on(Node.EventType.TOUCH_END, () => {
            this.events.onClosehandler();
          });
          this.propertyNode.props_btn_metode_tentukan.node.on(Node.EventType.TOUCH_END, () => {
            const accountNumber = this.propertyNode.props_nomor_EditBox.string;
            const realName = this.propertyNode.props_EditBox_name.string;
            const ifscCode = this.propertyNode.props_ifsc_EditBox_code.string;
            const branchName = this.propertyNode.props_EditBox_Sub.string;
            // if (accountNumber.toString().substring(0, 2) !== '08') {
            // 	global.hallDispatch(addToastAction({ content: lang.write(k => k.InputModule.inputFaildCustomer1, {}, { placeStr: "渠道号码必须以08开头" }) }))
            // 	return
            // }
            if (this.props.hadChooseBankChannl.channelType === 1) {
              //银行
              new InputValidator().begin().isLocalBankCard(accountNumber).isNotEmpty(realName, lang.write(k => k.InputModule.isNotEmpty) + ':Name').isNotEmpty(ifscCode, lang.write(k => k.InputModule.isNotEmpty) + ':IFSC').isNotEmpty(branchName, lang.write(k => k.InputModule.isNotEmpty) + ':SubBranch').isAllNumber(accountNumber).done(() => {
                this.events.onBindDone(this.props.hadChooseBankChannl, accountNumber, realName, ifscCode, branchName);
              });
            } else if (this.props.hadChooseBankChannl.channelType === 0) {
              //电子钱包
              new InputValidator().begin().isLocalBankCard(accountNumber).isNotEmpty(realName, lang.write(k => k.InputModule.isNotEmpty) + ':Name').isAllNumber(accountNumber).done(() => {
                this.events.onBindDone(this.props.hadChooseBankChannl, accountNumber, realName);
              });
            }
          });
        }
        useProps(key, value) {
          if (key === "hadChooseBankChannl") {
            this.propertyNode.props_nomor_EditBox.string = value.cur.accountNumber || "";
            this.propertyNode.props_EditBox_name.string = value.cur.realName || "";
            this.props.hadChooseBankChannl.iconMax && assetManager.loadRemote(this.props.hadChooseBankChannl.iconMax, (err, asset) => {
              if (this.propertyNode && !err) {
                this.propertyNode.props_icon_reken.getComponent(Sprite).spriteFrame = SpriteFrame.createWithImage(asset);
              }
            });
            this.beginGuide();
          }
        }
        beginGuide() {
          if (config.fristLogin.main && !config.fristLogin['hasShow_3']) {
            //标明这里已经显示了
            config.fristLogin['hasShow_3'] = true;
            const guide_1 = new Guide(this.propertyNode.props_btn_metode_tentukan.node, this.propertyNode.props_layout_tentukan);
            guide_1.begin();
          }
        }
        bindUI() {}
        update(deltaTime) {}
      }) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Hall_WithdrawBill.ts", ['cc', './BaseComponent.ts', './index4.ts', './globals.ts'], function (exports) {
  var cclegacy, Node, instantiate, Label, ScrollView, _decorator, BaseComponent, lang;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      Node = module.Node;
      instantiate = module.instantiate;
      Label = module.Label;
      ScrollView = module.ScrollView;
      _decorator = module._decorator;
    }, function (module) {
      BaseComponent = module.BaseComponent;
    }, null, function (module) {
      lang = module.lang;
    }],
    execute: function () {
      var _dec, _class;
      cclegacy._RF.push({}, "8f4caQNGL9GVYpt/KAwJj8k", "Hall_WithdrawBill", undefined);
      const {
        ccclass,
        property
      } = _decorator;

      //UNPAID(1,"待支付"),PAID(2,"已支付"),FINISHED(3,"已完成"),CANCEL(4,"已取消"),ERROR(5,"异常"),WAIT_AUDIT(6,"等待审核"),AUDIT_PASS(7,"审核通过"),AUDIT_REFUSE(8,"审核驳回")

      // [
      // 	'', 'Proses', 'Berhasil', 'Gagal'
      // ]
      let Hall_WithdrawBill = exports('Hall_WithdrawBill', (_dec = ccclass('Hall_WithdrawBill'), _dec(_class = class Hall_WithdrawBill extends BaseComponent {
        constructor(...args) {
          super(...args);
          this.propertyNode = {
            /**关闭 */
            props_btn_tips_close: new Node(),
            /**滚动域 */
            props_ScrollView_order_list: new Node(),
            /**模板 */
            props_order_item_template: new Node(),
            /**无信息提示 */
            props_label_catatan_none: new Node()
          };
          this.statusType = [];
          this.props = {
            orderList: []
          };
          this.events = {
            onClosehandler: () => {}
          };
        }
        start() {}
        initState() {
          return {};
        }
        bindEvent() {
          this.propertyNode.props_btn_tips_close.on(Node.EventType.TOUCH_END, () => {
            this.events.onClosehandler();
          });
        }
        useProps(key, value) {
          if (key === "orderList") {
            value.cur.length && (this.propertyNode.props_label_catatan_none.active = false);
            value.cur.forEach(item => {
              const orderItem = instantiate(this.propertyNode.props_order_item_template);
              orderItem.getChildByName("label_catatan_nomor").getComponent(Label).string = item.orderNo;
              orderItem.getChildByName("label_catatan_tannggal").getComponent(Label).string = item.orderTime;
              orderItem.getChildByName("label_catatan_jumlah").getComponent(Label).string = item.orderMoney;
              orderItem.getChildByName("label_catatan_keadaan").getComponent(Label).string = this.statusType[+item.status];
              orderItem.active = true;
              this.propertyNode.props_ScrollView_order_list.getComponent(ScrollView).content.addChild(orderItem);
            });
          }
        }
        bindUI() {
          this.statusType = lang.write(k => k.withdrawal.OrderShowStr).split(',');
        }
        update(deltaTime) {}
      }) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Hall_WithdrawTip.ts", ['cc', './BaseComponent.ts', './tool.ts', './hallConfig.ts', './Guide.ts', './TaskScheduler.ts'], function (exports) {
  var cclegacy, Node, assetManager, Sprite, SpriteFrame, Label, _decorator, BaseComponent, maskBankCardNumber, config, Guide, TaskScheduler, Task;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      Node = module.Node;
      assetManager = module.assetManager;
      Sprite = module.Sprite;
      SpriteFrame = module.SpriteFrame;
      Label = module.Label;
      _decorator = module._decorator;
    }, function (module) {
      BaseComponent = module.BaseComponent;
    }, function (module) {
      maskBankCardNumber = module.maskBankCardNumber;
    }, function (module) {
      config = module.config;
    }, function (module) {
      Guide = module.default;
    }, function (module) {
      TaskScheduler = module.default;
      Task = module.Task;
    }],
    execute: function () {
      var _dec, _class;
      cclegacy._RF.push({}, "734c8JWYa1Mb6Rf0vCq3yFG", "Hall_WithdrawTip", undefined);
      const {
        ccclass,
        property
      } = _decorator;
      let Hall_WithdrawTip = exports('Hall_WithdrawTip', (_dec = ccclass('Hall_WithdrawTip'), _dec(_class = class Hall_WithdrawTip extends BaseComponent {
        constructor(...args) {
          super(...args);
          this.taskScheduler = new TaskScheduler();
          this.propertyNode = {
            /**信息背景框 */
            props_spr_tip_bg1: new Node(),
            props_btn_tip_close: new Node(),
            /**图标 */
            props_icon_reken: new Node(),
            /**卡号 */
            props_Label_accountNumber: new Node(),
            /**提现金额 */
            props_Label_jumlah: new Node(),
            /**确认按钮 */
            props_btn_tip_tentukan: new Node(),
            /**名字 */
            props_Label_biaya: new Node(),
            /**引导节点1 */
            props_layout_confirm: new Node(),
            /**引导节点2 */
            props_layout_tentukan: new Node()
          };
          this.props = {
            /**图标 */
            iconName: "",
            /**账户卡号 */
            accountNumber: "",
            /**提现金额 */
            withdrawAmount: 0,
            /**账户名 */
            accountName: "",
            /**提现手续费比例 */
            withdrawalPremium: 0,
            logUrl: ""
          };
          this.events = {
            onClosehandler: () => {},
            doneHandler: () => {}
          };
        }
        start() {}
        initState() {
          return {};
        }
        bindEvent() {
          this.propertyNode.props_btn_tip_close.on(Node.EventType.TOUCH_END, () => {
            this.events.onClosehandler();
          });
        }
        useProps(key, value) {
          if (key === "logUrl") {
            this.props.logUrl && assetManager.loadRemote(this.props.logUrl, (err, asset) => {
              if (this.propertyNode && !err) {
                this.propertyNode.props_icon_reken.getComponent(Sprite).spriteFrame = SpriteFrame.createWithImage(asset);
              }
            });
          }
          if (key === "withdrawAmount") {
            this.scheduleOnce(() => {
              this.propertyNode.props_Label_jumlah.getComponent(Label).string = (value.cur * (1 - this.props.withdrawalPremium)).formatAmountWithCommas();
              this.beginGuide();
            }, 0.05);
          }
          key === "accountNumber" && (this.propertyNode.props_Label_accountNumber.getComponent(Label).string = maskBankCardNumber(value.cur, 3));
          key === "accountName" && (this.propertyNode.props_Label_biaya.getComponent(Label).string = value.cur);
        }
        bindUI() {
          this.propertyNode.props_btn_tip_tentukan.on(Node.EventType.TOUCH_END, () => {
            this.events.doneHandler(this.props.accountNumber, this.props.withdrawAmount);
          });
        }
        beginGuide() {
          if (config.fristLogin.main && !config.fristLogin['hasShow_4']) {
            //标明这里已经显示了
            config.fristLogin['hasShow_4'] = true;
            const guide_1 = new Guide(this.propertyNode.props_spr_tip_bg1, this.propertyNode.props_layout_confirm);
            const guide_2 = new Guide(this.propertyNode.props_btn_tip_tentukan, this.propertyNode.props_layout_tentukan);
            this.taskScheduler.joinQueue(new Task(done => {
              guide_1.begin().bindDone(() => done());
            })).joinQueue(new Task(done => {
              guide_2.begin().bindDone(() => done());
            }));
          }
        }
        update(deltaTime) {}
      }) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/hallConfig.ts", ['cc', './languagePkg.ts', './hallType2.ts'], function (exports) {
  var cclegacy, Country;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      Country = module.Country;
    }, function (module) {
      var _setter = {};
      _setter.GameState = module.GameState;
      _setter.SubGameRunState = module.SubGameRunState;
      exports(_setter);
    }],
    execute: function () {
      cclegacy._RF.push({}, "a7f9bLh1MNKX44tG5xPbnqN", "hallConfig", undefined);
      let SKT_HOST = exports('SKT_HOST', /*#__PURE__*/function (SKT_HOST) {
        SKT_HOST["HALL"] = "HALL";
        SKT_HOST["SLOTS"] = "SLOTS";
        SKT_HOST["MULTI"] = "MULTI";
        SKT_HOST["BATTLE"] = "BATTLE";
        return SKT_HOST;
      }({}));
      let SKT_OPERATION = exports('SKT_OPERATION', /*#__PURE__*/function (SKT_OPERATION) {
        SKT_OPERATION["GENERAL"] = "GENERAL";
        SKT_OPERATION["ENCRYPT"] = "ENCRYPT";
        SKT_OPERATION["LOGIN"] = "LOGIN";
        SKT_OPERATION["LOGOUT"] = "LOGOUT";
        SKT_OPERATION["HEART"] = "HEART";
        SKT_OPERATION["INTERACTION"] = "INTERACTION";
        SKT_OPERATION["ERROR"] = "ERROR";
        SKT_OPERATION["RECOVER"] = "RECOVER";
        return SKT_OPERATION;
      }({}));
      let EVEVT_TYPE = exports('EVEVT_TYPE', /*#__PURE__*/function (EVEVT_TYPE) {
        EVEVT_TYPE[EVEVT_TYPE["OPEN"] = 0] = "OPEN";
        EVEVT_TYPE[EVEVT_TYPE["CONNECT_ERROR"] = 1] = "CONNECT_ERROR";
        EVEVT_TYPE[EVEVT_TYPE["DATA_ERROR"] = 2] = "DATA_ERROR";
        EVEVT_TYPE[EVEVT_TYPE["WARN"] = 3] = "WARN";
        EVEVT_TYPE[EVEVT_TYPE["DISCONNECT"] = 4] = "DISCONNECT";
        EVEVT_TYPE[EVEVT_TYPE["RECONNECT"] = 5] = "RECONNECT";
        EVEVT_TYPE[EVEVT_TYPE["RECONNECT_SUCCESS"] = 6] = "RECONNECT_SUCCESS";
        EVEVT_TYPE[EVEVT_TYPE["MESSAGE"] = 7] = "MESSAGE";
        EVEVT_TYPE[EVEVT_TYPE["HEART_BEAT"] = 8] = "HEART_BEAT";
        return EVEVT_TYPE;
      }({}));
      let SubGameType = exports('SubGameType', /*#__PURE__*/function (SubGameType) {
        SubGameType[SubGameType["All"] = 0] = "All";
        SubGameType[SubGameType["Slot"] = 1] = "Slot";
        SubGameType[SubGameType["Domino"] = 2] = "Domino";
        SubGameType[SubGameType["Other"] = 3] = "Other";
        return SubGameType;
      }({}));
      let gameConfig = [];

      /**这些配置都会被配置文件替换掉 */
      const config = exports('config', {
        gameId: 0,
        gameHost: SKT_HOST.HALL,
        gameServer: "HALL",
        /**用于存放请求到的线上版本号，如果此值与appLocalVersion不一致时，会禁止登录并提示更新App */
        appOnlineVersion: 'V1.0.0',
        /**更新说明 */
        upgradeDesc: '',
        /**是否强制更新 */
        forceUpgrade: true,
        /**子游戏远程资源地址 */
        gameBundleUrl: "https://static-resources-hoster-snowy.vercel.app",
        /**热更主地址 */
        hotUpdateUrl: "",
        /**http请求主域名 */
        httpBaseUrl: "http://api.rummycdn.com",
        /**websocket请求主域名 */
        websocketUrl: "ws://192.168.110.248:10000/socket",
        /**分享url */
        shareUrl: "http://hugewin777.com",
        /**代理分享数据url */
        agentPageUrl: "http://hugewin777.com",
        /**金币日志 */
        goldRecordUrl: "",
        /**银行充值说明页 */
        bankHelpUrl: "http://54.251.66.82:8009/appHotUpdate",
        /**客服主链接 */
        customerUrl: "",
        /**客服浏览器链接 */
        customerOutUrl: "https://www.google.com",
        /**是否打开埋点开关 */
        buryPoint: true,
        /**救济金触发线 */
        relief: 1000,
        /**跳转打开应用市场的链接 */
        appDumpUrl: "https://play.google.com/store/apps/details?id=com.google.android.googlequicksearchbox&hl=zh&gl=US",
        /**返水说明的页面url */
        backwaterHelpUrl: "",
        /**是否出现更新公告 */
        maintenanceStatus: false,
        /**是否检测更新 */
        isCheckHotUpdate: true,
        /**是否激活AB面（pkgCode='miMarket的时候才生效'） */
        faceSwitch: true,
        /**苹果的描述文件地址 */
        appleAppDumpUrl: "",
        /**是否首次登录 */
        fristLogin: {
          main: false
        },
        /**国家 */
        country: Country.CHINA,
        gameConfig
      });
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/hallType.ts", ['cc'], function (exports) {
  var cclegacy;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }],
    execute: function () {
      cclegacy._RF.push({}, "171c7SIGDpK0pampeO77s1E", "hallType", undefined);
      /**
       * 拉去充值或者充值成功回调
       */
      /**邮件分页信息配置 */
      const PageInfo = exports('PageInfo', {
        /**页数 */
        pageNum: 1,
        /**条数 */
        pageSize: 10
      });
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/hallType2.ts", ['cc'], function (exports) {
  var cclegacy;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }],
    execute: function () {
      cclegacy._RF.push({}, "4193drM3xpDd7VJX9YBXJsO", "hallType", undefined);
      let SubGameRunState = exports('SubGameRunState', /*#__PURE__*/function (SubGameRunState) {
        SubGameRunState[SubGameRunState["CLOSE"] = 0] = "CLOSE";
        SubGameRunState[SubGameRunState["INIT"] = 1] = "INIT";
        SubGameRunState[SubGameRunState["LOADING"] = 2] = "LOADING";
        SubGameRunState[SubGameRunState["READY"] = 3] = "READY";
        SubGameRunState[SubGameRunState["CANCEL"] = 4] = "CANCEL";
        SubGameRunState[SubGameRunState["RUN"] = 5] = "RUN";
        return SubGameRunState;
      }({}));

      /**大厅的事件类型 */
      let HallEventType = exports('HallEventType', /*#__PURE__*/function (HallEventType) {
        HallEventType[HallEventType["BALANCE_CHANGE"] = 0] = "BALANCE_CHANGE";
        HallEventType[HallEventType["WINNING_NOTICE"] = 1] = "WINNING_NOTICE";
        HallEventType[HallEventType["RECEIVE_LETTER"] = 2] = "RECEIVE_LETTER";
        HallEventType[HallEventType["NEW_MARGUEE"] = 3] = "NEW_MARGUEE";
        HallEventType[HallEventType["CLOSE_GAME"] = 4] = "CLOSE_GAME";
        return HallEventType;
      }({}));
      let GameState = exports('GameState', /*#__PURE__*/function (GameState) {
        GameState[GameState["WORKING"] = 0] = "WORKING";
        GameState[GameState["MAINTENANCE"] = 1] = "MAINTENANCE";
        GameState[GameState["COME_SOON"] = 2] = "COME_SOON";
        GameState[GameState["OFF_LINE"] = 9] = "OFF_LINE";
        return GameState;
      }({}));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/hallTypes.ts", ['cc', './hallType2.ts'], function (exports) {
  var cclegacy;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      var _setter = {};
      _setter.GameState = module.GameState;
      _setter.SubGameRunState = module.SubGameRunState;
      exports(_setter);
    }],
    execute: function () {
      cclegacy._RF.push({}, "8ad73oRjE9AkrtnvGetI5Rs", "hallTypes", undefined);
      let SKT_HOST = exports('SKT_HOST', /*#__PURE__*/function (SKT_HOST) {
        SKT_HOST["HALL"] = "HALL";
        SKT_HOST["SLOTS"] = "SLOTS";
        SKT_HOST["MULTI"] = "MULTI";
        SKT_HOST["BATTLE"] = "BATTLE";
        return SKT_HOST;
      }({}));
      let SKT_OPERATION = exports('SKT_OPERATION', /*#__PURE__*/function (SKT_OPERATION) {
        SKT_OPERATION["GENERAL"] = "GENERAL";
        SKT_OPERATION["ENCRYPT"] = "ENCRYPT";
        SKT_OPERATION["LOGIN"] = "LOGIN";
        SKT_OPERATION["LOGOUT"] = "LOGOUT";
        SKT_OPERATION["HEART"] = "HEART";
        SKT_OPERATION["INTERACTION"] = "INTERACTION";
        SKT_OPERATION["ERROR"] = "ERROR";
        SKT_OPERATION["RECOVER"] = "RECOVER";
        return SKT_OPERATION;
      }({}));
      let EVEVT_TYPE = exports('EVEVT_TYPE', /*#__PURE__*/function (EVEVT_TYPE) {
        EVEVT_TYPE[EVEVT_TYPE["OPEN"] = 0] = "OPEN";
        EVEVT_TYPE[EVEVT_TYPE["CONNECT_ERROR"] = 1] = "CONNECT_ERROR";
        EVEVT_TYPE[EVEVT_TYPE["DATA_ERROR"] = 2] = "DATA_ERROR";
        EVEVT_TYPE[EVEVT_TYPE["WARN"] = 3] = "WARN";
        EVEVT_TYPE[EVEVT_TYPE["DISCONNECT"] = 4] = "DISCONNECT";
        EVEVT_TYPE[EVEVT_TYPE["RECONNECT"] = 5] = "RECONNECT";
        EVEVT_TYPE[EVEVT_TYPE["RECONNECT_SUCCESS"] = 6] = "RECONNECT_SUCCESS";
        EVEVT_TYPE[EVEVT_TYPE["MESSAGE"] = 7] = "MESSAGE";
        EVEVT_TYPE[EVEVT_TYPE["HEART_BEAT"] = 8] = "HEART_BEAT";
        return EVEVT_TYPE;
      }({}));
      let SubGameType = exports('SubGameType', /*#__PURE__*/function (SubGameType) {
        SubGameType[SubGameType["All"] = 0] = "All";
        SubGameType[SubGameType["Slot"] = 1] = "Slot";
        SubGameType[SubGameType["Domino"] = 2] = "Domino";
        SubGameType[SubGameType["Other"] = 3] = "Other";
        return SubGameType;
      }({}));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/HotUpdate.ts", ['cc', './GameConfig.ts', './UseSetOption.ts'], function (exports) {
  var cclegacy, native, log, sys, game, GameConfig, UseSetOption;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      native = module.native;
      log = module.log;
      sys = module.sys;
      game = module.game;
    }, function (module) {
      GameConfig = module.GameConfig;
    }, function (module) {
      UseSetOption = module.default;
    }],
    execute: function () {
      cclegacy._RF.push({}, "74d95EQtYFACax4vT0T0Hiu", "HotUpdate", undefined);
      class HotOptions {
        constructor() {
          this.OnVersionInfo = void 0;
          this.OnNeedToUpdate = void 0;
          this.OnNoNeedToUpdate = void 0;
          this.OnUpdateFailed = void 0;
          this.OnUpdateSucceed = void 0;
          this.OnUpdateProgress = void 0;
        }
        check() {
          for (let key in this) {
            if (key !== 'check') {
              if (!this[key]) {
                console.log(`HotOptions.${key}！set`);
                return false;
              }
            }
          }
          return true;
        }
      }
      exports('HotOptions', HotOptions);

      // const native = window.jsb

      class Hot {
        constructor(label) {
          this.logLabel = void 0;
          this._assetsMgr = null;
          this._options = null;
          this._state = Hot.State.None;
          this.logLabel = label;
        }
        checkUpdate() {
          if (!this._assetsMgr) {
            console.log('please initialize');
            this.logLabel.string += "未初始化AssetsManager=>";
            // log.string += 'please initialize'
            return;
          }
          if (this._assetsMgr.getState() === native.AssetsManager.State.UNINITED) {
            console.log('uninitialized');
            this.logLabel.string += `状态错误：${this._assetsMgr.getState()}=>`;
            // log.string += 'uninitialized'
            this._assetsMgr.loadLocalManifest("");
            return;
          }
          if (!this._assetsMgr.getLocalManifest().isLoaded()) {
            console.log('Load the local manifest lose ...');
            this.logLabel.string += "manifest未找到=>";
            // log.string += 'Load the local manifest lose ...'
            return;
          }
          this._assetsMgr.setEventCallback(this._hotUpdateCallBack.bind(this));
          this._state = Hot.State.Check;
          this.logLabel.string += "开始checkUpdate=>";
          this._assetsMgr.checkUpdate();
        }
        hotUpdate() {
          if (!this._assetsMgr) {
            console.log('Please initialize first');
            return;
          }
          this._assetsMgr.setEventCallback(this._hotUpdateCallBack.bind(this));
          this._state = Hot.State.Update;
          this._assetsMgr.update();
        }
        _hotUpdateCallBack(event) {
          let code = event.getEventCode();
          log(`hotUpdate Code: ${code}`);
          this.logLabel.string += `hotUpdate Code: ${code}`;
          switch (code) {
            case native.EventAssetsManager.ALREADY_UP_TO_DATE:
              console.log("It is the same as the remote version and does not need to be updated");
              this.logLabel.string += "ALREADY_UP_TO_DATE=>";
              this._options.OnNoNeedToUpdate && this._options.OnNoNeedToUpdate(code);
              break;
            case native.EventAssetsManager.NEW_VERSION_FOUND:
              console.log('New version found, please update');
              this.logLabel.string += "NEW_VERSION_FOUND=>";
              this._options.OnNeedToUpdate && this._options.OnNeedToUpdate(event.getTotalBytes());
              break;
            case native.EventAssetsManager.UPDATE_PROGRESSION:
              this.logLabel.string += "UPDATE_PROGRESSION=>";
              if (this._state === Hot.State.Update) {
                this._options.OnUpdateProgress && this._options.OnUpdateProgress(event);
              }
              break;
            case native.EventAssetsManager.UPDATE_FINISHED:
              console.log('update successfully');
              this.logLabel.string += "UPDATE_FINISHED=>";
              this._onUpdateFinished();
              break;
            case native.EventAssetsManager.ASSET_UPDATED:
              this.logLabel.string += "ASSET_UPDATED=>";
              break;
            case native.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:
            case native.EventAssetsManager.ERROR_PARSE_MANIFEST:
              console.log('Fail to download manifest file, hot update skipped.: ' + event.getMessage());
              this.logLabel.string += "失败=>";
              this._onUpdateFailed(code);
              break;
            case native.EventAssetsManager.ERROR_UPDATING:
              // 构建完整的下载 URL 用于调试
              let downloadUrl = '';
              if (this._assetsMgr && this._assetsMgr.getLocalManifest()) {
                const packageUrl = this._assetsMgr.getLocalManifest().getPackageUrl();
                const assetId = event.getAssetId();
                downloadUrl = packageUrl + assetId;
              }
              const errorMsg = 'ERROR_UPDATING Asset update error: ' + event.getAssetId() + ', ' + event.getMessage() + (downloadUrl ? ', URL: ' + downloadUrl : '');
              console.error('[HotUpdate] ' + errorMsg);
              this.logLabel.string = errorMsg;
              break;
            case native.EventAssetsManager.ERROR_DECOMPRESS:
              console.log('ERROR_DECOMPRESS: ' + event.getMessage());
              this.logLabel.string = event.getMessage();
              break;
            default:
              this.logLabel.string += "失败=>";
              this._onUpdateFailed(code);
              break;
          }
        }
        _onUpdateFailed(code) {
          this._assetsMgr.setEventCallback(null);
          this._options.OnUpdateFailed && this._options.OnUpdateFailed(code);
        }
        _onUpdateFinished() {
          this._assetsMgr.setEventCallback(null);
          let searchPaths = native.fileUtils.getSearchPaths();
          let newPaths = this._assetsMgr.getLocalManifest().getSearchPaths();
          console.log("[HotUpdate] SearchPaths found: " + JSON.stringify(newPaths));

          // Add remote path for remote bundles
          let storagePath = this._assetsMgr.getStoragePath();
          // Remove trailing slash to avoid //remote issue
          if (storagePath.endsWith('/')) {
            storagePath = storagePath.slice(0, -1);
          }
          let remotePath = storagePath + "/remote";
          // Ensure newPaths is treated as array and contains remotePath
          let finalNewPaths = [];
          if (Array.isArray(newPaths)) {
            finalNewPaths = [...newPaths];
          } else {
            finalNewPaths = [newPaths];
          }

          // Priority: Remote Path > Hot Update Path > Others
          if (finalNewPaths.indexOf(remotePath) === -1) {
            finalNewPaths.unshift(remotePath);
          }

          // Merge paths: place new paths at the beginning of searchPaths
          // Use a Set to remove duplicates to prevent path explosion
          let mergedPaths = [...finalNewPaths, ...searchPaths];
          // Remove duplicates while keeping order (Set preserves insertion order)
          let uniquePaths = Array.from(new Set(mergedPaths));
          console.log("[HotUpdate] Merged and unique paths: " + JSON.stringify(uniquePaths));
          sys.localStorage.setItem('HotUpdateSearchPaths', JSON.stringify(uniquePaths));
          native.fileUtils.setSearchPaths(uniquePaths);
          // this.log.string += "=>setSearchPaths done"
          this._options.OnUpdateSucceed && this._options.OnUpdateSucceed();
        }
        showSearchPath() {
          let searchPaths = native.fileUtils.getSearchPaths();
          for (let i = 0; i < searchPaths.length; i++) {
            log("[" + i + "]: " + searchPaths[i]);
          }
        }
        init(customManifest, storagePath, opt) {
          // log.string += "=>INIT开始"
          // log.string += "=>fileUtils:" + native.fileUtils.getSearchPaths()
          // log.string += "=>INIT失败？"
          if (!sys.isNative) {
            UseSetOption.Instance().setGameOption("hall", {
              hotUpdateVersion: "vh5"
            });
            return;
          }
          if (!opt.check()) {
            return;
          }
          this._options = opt;
          if (this._assetsMgr) {
            return;
          }
          let curVerStr = sys.localStorage.getItem('currentVersion');
          if (curVerStr) {
            const previousVersion = parseInt(curVerStr);
            if (previousVersion < GameConfig.HotUpdateVersion) {
              let newPaths = this._assetsMgr.getLocalManifest().getSearchPaths();
              for (let i = 0; i < newPaths.length; ++i) {
                native.fileUtils.removeDirectory(newPaths[i]);
              }
              sys.localStorage.setItem('currentVersion', String(GameConfig.HotUpdateVersion));
              game.restart();
            }
          } else {
            sys.localStorage.setItem('currentVersion', String(GameConfig.HotUpdateVersion));
          }
          this.showSearchPath();
          this._assetsMgr = new native.AssetsManager('', storagePath, (versionA, versionB) => {
            // const localVersion = sys.localStorage.getItem('currentVersion') || versionA
            console.log("Client Version: " + versionA + ', The Latest Version: ' + versionB);
            UseSetOption.Instance().setGameOption("hall", {
              hotUpdateVersion: versionA
            });
            this.logLabel.string += `Client Version: ${versionA}, The Latest Version: ${versionB}`;
            // log.string += "Client Version: " + versionA + ', The Latest Version: ' + versionB

            this._options.OnVersionInfo({
              local: versionA,
              server: versionB
            });
            let vA = versionA.split('.');
            let vB = versionB.split('.');
            for (let i = 0; i < vA.length; ++i) {
              let a = parseInt(vA[i]);
              let b = parseInt(vB[i] || '0');
              if (a !== b) {
                return a - b;
              }
            }
            if (vB.length > vA.length) {
              return -1;
            } else {
              return 0;
            }
          });
          console.log(`local packageUrl ${customManifest.getPackageUrl()} 
            remoteManifestUrl ${customManifest.getManifestFileUrl()} remoteVersionUrl ${customManifest.getVersionFileUrl()}`);
          this._assetsMgr.loadLocalManifest(customManifest, storagePath);
          this._assetsMgr.setVerifyCallback((assetsFullPath, asset) => {
            let {
              compressed,
              md5,
              path,
              size
            } = asset;
            if (compressed) {
              return true;
            } else {
              return true;
            }
          });
          if (sys.os === sys.OS.ANDROID) ;
          // let localManifest = this._assetsMgr.getLocalManifest()
          // log.string += "showSearchPath--"
          // log.string += ('=》[HotUpdate] 热更新资源存放路径: ' + storagePath);
          // log.string += ('=》[HotUpdate] 本地manifest路径: ' + url);
          // log.string += ('=》[HotUpdate] local packageUrl: ' + localManifest.getPackageUrl());
          // log.string += ('=》[HotUpdate] project.manifest remote url: ' + localManifest.getManifestFileUrl());
          // log.string += ('=》[HotUpdate] version.manifest remote url: ' + localManifest.getVersionFileUrl());
        }
      }

      exports('default', Hot);
      Hot.State = {
        None: 0,
        Check: 1,
        Update: 2
      };

      // let hotInstance = new Hot();
      // export default hotInstance;
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/index.ts", ['cc', './comparator.ts', './utils.ts', './internalTypes.ts'], function (exports) {
  var cclegacy, createIsEqual, createEqualityComparatorConfig, createEqualityComparator, createInternalEqualityComparator, sameValueZeroEqual;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      createIsEqual = module.createIsEqual;
      createEqualityComparatorConfig = module.createEqualityComparatorConfig;
      createEqualityComparator = module.createEqualityComparator;
      createInternalEqualityComparator = module.createInternalEqualityComparator;
    }, function (module) {
      sameValueZeroEqual = module.sameValueZeroEqual;
      exports('sameValueZeroEqual', module.sameValueZeroEqual);
    }, null],
    execute: function () {
      exports('createCustomEqual', createCustomEqual);
      cclegacy._RF.push({}, "178b9QZUqxHSb/xH3S2iWCZ", "index", undefined);

      /**
       * Whether the items passed are deeply-equal in value.
       */
      const deepEqual = exports('deepEqual', createCustomEqual());

      /**
       * Whether the items passed are deeply-equal in value based on strict comparison.
       */
      const strictDeepEqual = exports('strictDeepEqual', createCustomEqual({
        strict: true
      }));

      /**
       * Whether the items passed are deeply-equal in value, including circular references.
       */
      const circularDeepEqual = exports('circularDeepEqual', createCustomEqual({
        circular: true
      }));

      /**
       * Whether the items passed are deeply-equal in value, including circular references,
       * based on strict comparison.
       */
      const strictCircularDeepEqual = exports('strictCircularDeepEqual', createCustomEqual({
        circular: true,
        strict: true
      }));

      /**
       * Whether the items passed are shallowly-equal in value.
       */
      const shallowEqual = exports('shallowEqual', createCustomEqual({
        createInternalComparator: () => sameValueZeroEqual
      }));

      /**
       * Whether the items passed are shallowly-equal in value based on strict comparison
       */
      const strictShallowEqual = exports('strictShallowEqual', createCustomEqual({
        strict: true,
        createInternalComparator: () => sameValueZeroEqual
      }));

      /**
       * Whether the items passed are shallowly-equal in value, including circular references.
       */
      const circularShallowEqual = exports('circularShallowEqual', createCustomEqual({
        circular: true,
        createInternalComparator: () => sameValueZeroEqual
      }));

      /**
       * Whether the items passed are shallowly-equal in value, including circular references,
       * based on strict comparison.
       */
      const strictCircularShallowEqual = exports('strictCircularShallowEqual', createCustomEqual({
        circular: true,
        createInternalComparator: () => sameValueZeroEqual,
        strict: true
      }));

      /**
       * Create a custom equality comparison method.
       *
       * This can be done to create very targeted comparisons in extreme hot-path scenarios
       * where the standard methods are not performant enough, but can also be used to provide
       * support for legacy environments that do not support expected features like
       * `RegExp.prototype.flags` out of the box.
       */
      function createCustomEqual(options = {}) {
        const {
          circular = false,
          createInternalComparator: createCustomInternalComparator,
          createState,
          strict = false
        } = options;
        const config = createEqualityComparatorConfig(options);
        const comparator = createEqualityComparator(config);
        const equals = createCustomInternalComparator ? createCustomInternalComparator(comparator) : createInternalEqualityComparator(comparator);
        return createIsEqual({
          circular,
          comparator,
          createState,
          equals,
          strict
        });
      }
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/index2.ts", ['cc', './prefabDefine.ts', './spriteDefine2.ts', './skeletonDefine.ts', './soundDefine.ts'], function (exports) {
  var cclegacy, prefabDefine, spriteDefine, skeletonDefine, soundPathDefine;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      prefabDefine = module.default;
    }, function (module) {
      spriteDefine = module.default;
    }, function (module) {
      skeletonDefine = module.default;
    }, function (module) {
      soundPathDefine = module.default;
    }],
    execute: function () {
      cclegacy._RF.push({}, "25c55p9YHhACKsgNObyGoMQ", "index", undefined);
      const bundlePkgName = "common";
      const prefabDefines = prefabDefine(bundlePkgName);
      const spriteDefines = spriteDefine(bundlePkgName);
      const skeletonDefines = skeletonDefine(bundlePkgName);
      const soundPathDefines = soundPathDefine(bundlePkgName);
      const fileMap = exports('default', [...prefabDefines, ...spriteDefines, ...skeletonDefines, ...soundPathDefines]);
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/index3.ts", ['cc', './redux.mjs_cjs=&original=.js', './counter.ts', './baseBoard2.ts', './memberInfo.ts', './withdraw.ts', './redux.js'], function (exports) {
  var cclegacy, counterReducer, baseBoardReducer, memberInfoReducer, withdrawReducer, _cjsExports;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, null, function (module) {
      counterReducer = module.default;
    }, function (module) {
      baseBoardReducer = module.default;
    }, function (module) {
      memberInfoReducer = module.default;
    }, function (module) {
      withdrawReducer = module.default;
    }, function (module) {
      _cjsExports = module.default;
    }],
    execute: function () {
      cclegacy._RF.push({}, "9b2aeNsPWlHUKkgxmpQ+9pc", "index", undefined);
      console.log('redux', _cjsExports.combineReducers);
      const rootReducer = exports('rootReducer', _cjsExports.combineReducers({
        counter: counterReducer,
        baseBoard: baseBoardReducer,
        memberInfo: memberInfoReducer,
        withdraw: withdrawReducer
      }));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/index4.ts", ['cc', './index5.ts', './BundleSplit.ts', './prefabDefine2.ts', './soundDefine2.ts', './index6.ts', './index2.ts', './LoaderPanelViewModel.ts', './BaseBoardViewModel.ts', './AudioMgr.ts', './Fetcher.ts', './hallConfig.ts', './languagePkg.ts', './GameConfig.ts', './ModalBox.ts', './GiftUserViewModel.ts', './bridge.ts', './socketConnect.ts', './TaskScheduler.ts', './baseBoard.ts', './hallType2.ts', './env', './globals.ts'], function (exports) {
  var cclegacy, assetManager, Prefab, SpriteFrame, sys, native, hallStore, getStore, BundleSplit, PrefabPathDefine, SoundPathDefine, fileMap, fileMap$1, LoaderPanelViewModel, BaseBoardViewModel, AudioMgr, Fetcher, config, LanguageItemType, defaultLanguageType, getIsTest, GameConfig, ModalBox, GiftUserViewModel, hallWebSocketDriver, SKT_MAG_TYPE, TaskSchedulerDefault, setLoadingAction, addToastAction, setSubGameRunState, SubGameRunState, NATIVE, setRootNodeWrap, lang, setFetcher, setBundleCommon, setBundleHall, setSourceManageMap, hallAudio, setHallAudio, sourceManageSeletor, commonAudio, setCommonAudio, setBaseBoardView, baseBoardView, bundleCommon, rootNodeWrap;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      assetManager = module.assetManager;
      Prefab = module.Prefab;
      SpriteFrame = module.SpriteFrame;
      sys = module.sys;
      native = module.native;
    }, function (module) {
      hallStore = module.default;
      getStore = module.getStore;
    }, function (module) {
      BundleSplit = module.default;
    }, function (module) {
      PrefabPathDefine = module.PrefabPathDefine;
    }, function (module) {
      SoundPathDefine = module.SoundPathDefine;
    }, function (module) {
      fileMap = module.default;
    }, function (module) {
      fileMap$1 = module.default;
    }, function (module) {
      LoaderPanelViewModel = module.default;
    }, function (module) {
      BaseBoardViewModel = module.default;
    }, function (module) {
      AudioMgr = module.AudioMgr;
    }, function (module) {
      Fetcher = module.default;
    }, function (module) {
      config = module.config;
    }, function (module) {
      LanguageItemType = module.LanguageItemType;
      defaultLanguageType = module.defaultLanguageType;
    }, function (module) {
      getIsTest = module.getIsTest;
      GameConfig = module.GameConfig;
    }, function (module) {
      ModalBox = module.default;
    }, function (module) {
      GiftUserViewModel = module.default;
    }, null, function (module) {
      hallWebSocketDriver = module.hallWebSocketDriver;
      SKT_MAG_TYPE = module.SKT_MAG_TYPE;
    }, function (module) {
      TaskSchedulerDefault = module.TaskSchedulerDefault;
    }, function (module) {
      setLoadingAction = module.setLoadingAction;
      addToastAction = module.addToastAction;
      setSubGameRunState = module.setSubGameRunState;
    }, function (module) {
      SubGameRunState = module.SubGameRunState;
    }, function (module) {
      NATIVE = module.NATIVE;
    }, function (module) {
      setRootNodeWrap = module.setRootNodeWrap;
      lang = module.lang;
      setFetcher = module.setFetcher;
      setBundleCommon = module.setBundleCommon;
      setBundleHall = module.setBundleHall;
      setSourceManageMap = module.setSourceManageMap;
      hallAudio = module.hallAudio;
      setHallAudio = module.setHallAudio;
      sourceManageSeletor = module.sourceManageSeletor;
      commonAudio = module.commonAudio;
      setCommonAudio = module.setCommonAudio;
      setBaseBoardView = module.setBaseBoardView;
      baseBoardView = module.baseBoardView;
      bundleCommon = module.bundleCommon;
      rootNodeWrap = module.rootNodeWrap;
      var _setter = {};
      _setter.baseBoardView = module.baseBoardView;
      _setter.bundleCommon = module.bundleCommon;
      _setter.bundleHall = module.bundleHall;
      _setter.commonAudio = module.commonAudio;
      _setter.fetcher = module.fetcher;
      _setter.global = module.global;
      _setter.hallAudio = module.hallAudio;
      _setter.hallDispatch = module.hallDispatch;
      _setter.lang = module.lang;
      _setter.sourceManageSeletor = module.sourceManageSeletor;
      exports(_setter);
    }],
    execute: function () {
      cclegacy._RF.push({}, "c2a0fgaeo5BSIBV0ewb5HS/", "index", undefined);

      // 热更新目录配置
      const HOT_UPDATE_STORAGE_KEY = 'HotUpdateSearchPaths';

      /**
       * 获取 bundle 的加载路径
       * 优先从热更目录加载，如果热更目录不存在则使用默认 bundle 名称
       */
      const getHotUpdateBundlePath = bundleName => {
        try {
          const searchPathsStr = sys.localStorage.getItem(HOT_UPDATE_STORAGE_KEY);
          if (searchPathsStr) {
            const searchPaths = JSON.parse(searchPathsStr);
            // 查找包含 /remote 的路径（热更资源路径）
            for (const path of searchPaths) {
              if (path && path.includes('/remote')) {
                const hotBundlePath = path.endsWith('/') ? path + bundleName : path + '/' + bundleName;
                // 检查热更目录中该 bundle 是否存在
                if (native.fileUtils.isDirectoryExist(hotBundlePath)) {
                  console.log(`[HotUpdate] 从热更目录加载 ${bundleName}: ${hotBundlePath}`);
                  return hotBundlePath;
                }
              }
            }
          }
        } catch (e) {
          console.warn('[HotUpdate] 获取热更路径失败:', e);
        }
        console.log(`[HotUpdate] 使用默认路径加载 ${bundleName}`);
        return bundleName;
      };
      const startUp = exports('startUp', rootNode => {
        setRootNodeWrap(rootNode);
        hallStore.configureStore();
        BundleSplit.init();
        /**调试期间为了便于读懂信息，默认中文 */
        lang.use(
        //! Hindi
        getIsTest() && !NATIVE ? LanguageItemType.HI : defaultLanguageType[config.country].language);
        setFetcher(new Fetcher(config.httpBaseUrl));
        // const LOADER_PANEL = "prefabs/loaderPanel"
        const commonPath = getHotUpdateBundlePath("common");
        const hallPath = getHotUpdateBundlePath("hall");
        assetManager.loadBundle(commonPath, (err, commonBundle) => {
          setBundleCommon(commonBundle);
          assetManager.loadBundle(hallPath, (err, hallBundle) => {
            setBundleHall(hallBundle);
            // 首先贴入加载框面板
            hallBundle.load(PrefabPathDefine.LOADER_PANEL, Prefab, (err, prefab) => {
              // const loaderPanel = instantiate(prefab)
              // rootNode.addChild(loaderPanel)
              // const loaderviweModel = loaderPanel.getComponent("Common_LoaderPanel") as Common_LoaderPanel
              const loaderviweModel = new LoaderPanelViewModel().mountView(prefab).appendTo(rootNode).setProps({
                loadBarType: 2
              }).setEvent({
                onLoadDone: _sourceManageMap => {
                  setSourceManageMap(_sourceManageMap);
                  !hallAudio && setHallAudio(new AudioMgr(sourceManageSeletor("hall")));
                  !commonAudio && setCommonAudio(new AudioMgr(sourceManageSeletor("common")));
                  loaderviweModel.unMount().then(() => {
                    const _baseBoardView = new BaseBoardViewModel().mountView(sourceManageSeletor("hall").getSourceFile(PrefabPathDefine.BASE_BOARD)).appendTo(rootNode);
                    setBaseBoardView(_baseBoardView);
                    baseBoardView.connect();
                    // playBgMusic(globals.baseBoardView)
                    // getPackageName() !== 'web' && globals.hallAudio.play(SoundPathDefine.MAIN_BGM, true)
                    hallAudio.play(SoundPathDefine.BTU_CLICK, true);
                    hallAudio.play(SoundPathDefine.MAIN_BGM, true);
                    initHallGlobal();
                  });
                }
              }).setProps({
                versionStr: GameConfig.appLocalVersion
              });
              //开始加载大厅和通用的资源
              loaderviweModel.comp.startLoad([hallBundle, commonBundle], [...fileMap, ...fileMap$1]);
            });
          });
        });
      });
      const initHallGlobal = () => {
        window.HALL_GLOBAL.hallDispatch = action => {
          getStore().dispatch(action);
        };
        window.HALL_GLOBAL.closeSubGame = option => {
          const _option = Object.assign({
            isPre: false,
            confirmContent: "",
            confirmDoneAfterFn: () => {},
            confirmDoneBeforeFn: () => {}
          }, option || {});
          // (find("Canvas/baseBoard").getComponent('Hall_Baseboard') as Hall_Baseboard).closeSubGame()
          //避免重复弹窗
          if (_option.confirmContent) {
            if (!ModalBox.Instance().isShow && _option.confirmContent !== ModalBox.Instance().contentStr) {
              ModalBox.Instance().show({
                content: _option.confirmContent,
                type: "Prompt"
              }, () => {
                _option.confirmDoneBeforeFn();
                baseBoardView.comp && baseBoardView.comp.closeSubGame();
                _option.confirmDoneAfterFn();
                return true;
              });
            }
          } else {
            baseBoardView.comp && baseBoardView.comp.closeSubGame();
          }
          TaskSchedulerDefault().stopQueue(false);
          hallWebSocketDriver.sendSktMessage(SKT_MAG_TYPE.MEMBER_INFO, "", {
            isLoading: false
          });
        };
        window.HALL_GLOBAL.openShop = buyType => {
          baseBoardView && baseBoardView.mainPanelViewModel.openShop(buyType);
        };
        window.HALL_GLOBAL.openPersonCenter = index => {
          baseBoardView && baseBoardView.mainPanelViewModel.openPc(index);
        };
        window.HALL_GLOBAL.openVipMain = () => {
          baseBoardView && baseBoardView && baseBoardView.mainPanelViewModel.openVipMain();
        };
        window.HALL_GLOBAL.openSign = () => {
          baseBoardView && baseBoardView.mainPanelViewModel.openSign();
        };
        window.HALL_GLOBAL.loadHeadSprite = (icon, sprite) => {
          bundleCommon && bundleCommon.load(`resource/head/head_circle_${icon}/spriteFrame`, SpriteFrame, (err, sp) => {
            if (!err) {
              sprite.spriteFrame = sp;
            }
          });
        };
        window.HALL_GLOBAL.openShop = buyType => {
          baseBoardView && baseBoardView.mainPanelViewModel.openShop(buyType);
        };
        window.HALL_GLOBAL.setSubGameGate = (gameId, progress) => {
          baseBoardView && baseBoardView.mainPanelViewModel.comp.setSubGameGate(gameId, progress);
        };
        window.HALL_GLOBAL.isAllowOpenSubGame = gameId => {
          if (baseBoardView) {
            return baseBoardView.isAllowOpenSubGame(gameId);
          }
          return true;
        };
        window.HALL_GLOBAL.showGiftWindow = (gameType, userInfo, callback) => {
          if (rootNodeWrap && rootNodeWrap.isValid) {
            GiftUserViewModel.show(rootNodeWrap, gameType, userInfo, callback);
          }
        };
        window.HALL_GLOBAL.flyGift = (fromMemberId, toMemberId, startPos, endPos, value, parentNode) => {
          if (!parentNode) {
            parentNode = rootNodeWrap;
          }
          if (parentNode && parentNode.isValid) {
            GiftUserViewModel.flyGift(parentNode, fromMemberId, toMemberId, startPos, endPos, value);
          }
        };
        window.HALL_GLOBAL.setLoading = (isShow, flagId, isAllowCloseLoading) => {
          getStore().dispatch(setLoadingAction({
            isShow,
            flagId,
            isAllowCloseLoading
          }));
        };
        window.HALL_GLOBAL.addToast = (content, option) => {
          getStore().dispatch(addToastAction({
            content,
            type: option == null ? void 0 : option.type,
            position: option == null ? void 0 : option.position,
            forceLandscape: option == null ? void 0 : option.forceLandscape
          }));
        };
        window.HALL_GLOBAL.setSubGameRunState = subGameRunState => {
          getStore().dispatch(setSubGameRunState(subGameRunState));
        };
        window.HALL_GLOBAL.SubGameRunState = SubGameRunState;
        window.HALL_GLOBAL.lang = lang;
        window.HALL_GLOBAL.defaultLanguageType = defaultLanguageType;
      };
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/index5.ts", ['cc', './redux.mjs_cjs=&original=.js', './index3.ts', './redux.js'], function (exports) {
  var cclegacy, rootReducer, _cjsExports;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, null, function (module) {
      rootReducer = module.rootReducer;
    }, function (module) {
      _cjsExports = module.default;
    }],
    execute: function () {
      exports('store', void 0);
      cclegacy._RF.push({}, "d5ff0wrvxhI3qgXZTVNbKAT", "index", undefined);
      let store;
      const configureStore = preloadedState => {
        if (!store) {
          const composeEnhancer = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || _cjsExports.compose;
          // store = createStore(
          //   // rootReducer,
          //   preloadedState,
          //   composeEnhancer(
          //     applyMiddleware()
          //   ) 
          // )
          store = exports('store', _cjsExports.createStore(rootReducer, composeEnhancer(_cjsExports.applyMiddleware())));
        }
        return store;
      };
      var hallStore = exports('default', {
        configureStore
      });
      const getStore = exports('getStore', () => {
        if (!store) {
          configureStore();
        }
        return store;
      });
      const removeStore = exports('removeStore', () => {
        store = exports('store', null);
      });
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/index6.ts", ['cc', './prefabDefine2.ts', './skeletalDefine.ts', './spriteDefine.ts', './soundDefine2.ts'], function (exports) {
  var cclegacy, prefabDefine, skeletalDefine, spriteDefine, soundDefine;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      prefabDefine = module.default;
    }, function (module) {
      skeletalDefine = module.default;
    }, function (module) {
      spriteDefine = module.default;
    }, function (module) {
      soundDefine = module.default;
    }],
    execute: function () {
      cclegacy._RF.push({}, "dfe9eDNJwZFd7qJFBDWBM8C", "index", undefined);
      const bundlePkgName = "hall";
      const fileMap = exports('default', [...prefabDefine(bundlePkgName), ...skeletalDefine(bundlePkgName), ...spriteDefine(bundlePkgName), ...soundDefine(bundlePkgName)]);
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Injector.ts", ['cc', './index5.ts'], function (exports) {
  var instantiate, cclegacy, getStore;
  return {
    setters: [function (module) {
      instantiate = module.instantiate;
      cclegacy = module.cclegacy;
    }, function (module) {
      getStore = module.getStore;
    }],
    execute: function () {
      cclegacy._RF.push({}, "c021fOI+WtBk6y47+SQaJez", "Injector", undefined);
      /**注入器，负责实例化节点和装载，并注入store数据、订阅事件 */
      class Injector {
        constructor(prefabSource, ComppStr) {
          this.unsubscribe = void 0;
          /**注入器绑定的 */
          this.prefabFile = void 0;
          this.compStr = void 0;
          /**主节点（绑定脚本的节点） */
          this.view = void 0;
          this.comp = void 0;
          this.props = void 0;
          this.dispatch = void 0;
          this.prefabFile = prefabSource; //PrefabFiles.find(item => item.path === prefabFile).source
          this.compStr = ComppStr;
        }
        /**装载进入视图并注入props */
        mountTo(wrapNode) {
          wrapNode.addChild(this.view);
          this.comp.setProps(this.props, true);
          return this;
        }
        /**卸载 */
        unMount() {
          this.unsubscribe();
          if (this.view) {
            this.view.removeAllChildren();
            this.view.destroy();
          }
        }
        connect(initProps, mapStateToProps) {
          // const mapStateToProps = (state) => ({
          //   count: state.count,
          // })
          this.props = Object.assign({}, this.props, initProps);
          this.view = instantiate(this.prefabFile);
          this.comp = this.view.getComponent(this.compStr);
          this.dispatch = getStore().dispatch;
          this.unsubscribe = getStore().subscribe(() => {
            mapStateToProps(getStore().getState());
            // const state = store.getState().count
          });

          return this;
        }
      }
      exports('default', Injector);
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/InputValidator.ts", ['cc', './index5.ts', './baseBoard.ts', './globals.ts', './languagePkg.ts', './hallConfig.ts'], function (exports) {
  var cclegacy, getStore, addToastAction, lang, Country, config;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      getStore = module.getStore;
    }, function (module) {
      addToastAction = module.addToastAction;
    }, function (module) {
      lang = module.lang;
    }, function (module) {
      Country = module.Country;
    }, function (module) {
      config = module.config;
    }],
    execute: function () {
      cclegacy._RF.push({}, "a5ecbsKSudA3YT1FTHsoV8F", "InputValidator", undefined);
      class InputValidator {
        constructor() {
          this.isPass = false;
          this.errorinfo = [];
          this.defaultchar = "";
        }
        begin(defaultchar = "") {
          this.isPass = true;
          this.errorinfo = [];
          this.defaultchar = typeof defaultchar === 'string' ? defaultchar.trim() : defaultchar;
          return this;
        }
        isNotEmpty(char, customErrStr) {
          if (!this.isPass) return this;
          if (!(char || this.defaultchar).length) {
            this.isPass = false;
            this.errorinfo.push(customErrStr || lang.write(k => k.InputModule.isNotEmpty));
          }
          return this;
        }
        isAllNumber(char, customErrStr) {
          if (!this.isPass) return this;
          const isPass = /^\d+$/.test((typeof char === 'string' ? char.trim() : char) || this.defaultchar);
          if (!isPass) {
            this.isPass = false;
            this.errorinfo.push(customErrStr || lang.write(k => k.InputModule.isAllNumber));
          }
          return this;
        }
        isDecimal(char, isAllowFloat = true, customErrStr) {
          if (!this.isPass) return this;
          let isPass = /^\d+(\.\d{1,2})?$/.test((typeof char === 'string' ? char.trim() : char) || this.defaultchar);
          if (!isAllowFloat) {
            isPass = /^[1-9]\d{0,15}$/.test((typeof char === 'string' ? char.trim() : char) || this.defaultchar);
          }
          if (!isPass) {
            this.isPass = false;
            this.errorinfo.push(customErrStr || lang.write(k => k.InputModule.isDecimal));
          }
          return this;
        }
        isPhoneNumber(char, customErrStr) {
          if (!this.isPass) return this;
          const isPass = /^\d{11,13}$/.test((typeof char === 'string' ? char.trim() : char) || this.defaultchar);
          if (!isPass) {
            this.isPass = false;
            this.errorinfo.push(customErrStr || lang.write(k => k.InputModule.isPhoneNumber));
          }
          return this;
        }
        /**自动根据地区匹配手机号码 */
        isLocalPhoneNumber(char, customErrStr) {
          if (config.country === Country.INDIA) {
            return this.isIDPhoneNumber(char, customErrStr);
          } else if (config.country === Country.INDONESIA) {
            return this.isIDAPhoneNumber(char, customErrStr);
          } else {
            return this.isIDAPhoneNumber(char, customErrStr);
          }
        }
        /**印尼的手机号码要 8开头的手机号码 */
        isIDAPhoneNumber(char, customErrStr) {
          if (!this.isPass) return this;
          const isPass = /^8\d{9,11}$/.test((typeof char === 'string' ? char.trim() : char) || this.defaultchar);
          if (!isPass) {
            this.isPass = false;
            this.errorinfo.push(customErrStr || lang.write(k => k.InputModule.isIDAPhoneNumber));
          }
          return this;
        }
        /**印度的手机号码要 6、7、8、9开头的10位手机号码 */
        isIDPhoneNumber(char, customErrStr) {
          if (!this.isPass) return this;
          // const isPass = /^[6-9]\d{9}$/.test((typeof char === 'string' ? char.trim() : char) || this.defaultchar) //6/7/8/9+9位数字
          const isPass = /^\d{10}$/.test((typeof char === 'string' ? char.trim() : char) || this.defaultchar);
          if (!isPass) {
            this.isPass = false;
            this.errorinfo.push(customErrStr || lang.write(k => k.InputModule.isIDPhoneNumber));
          }
          return this;
        }
        /**自动根据地区匹配银行卡号 */
        isLocalBankCard(char) {
          const customErrStr = lang.write(k => k.InputModule.isBankCardNumber);
          if (config.country === Country.INDIA) {
            return this.isCharLength([2, 30], char, customErrStr);
          } else if (config.country === Country.INDONESIA) {
            return this.isCharLength([9, 15], char, customErrStr);
          } else {
            return this.isCharLength([9, 15], char, customErrStr);
          }
        }
        isSmsCode(char, customErrStr) {
          if (!this.isPass) return this;
          const isPass = /^\d{6}$/.test((typeof char === 'string' ? char.trim() : char) || this.defaultchar);
          if (!isPass) {
            this.isPass = false;
            this.errorinfo.push(customErrStr || lang.write(k => k.InputModule.isSmsCode));
          }
          return this;
        }
        isCharLength(length, char, customErrStr) {
          if (!this.isPass) return this;
          const _char = typeof char === 'string' ? char.trim() : char;
          const isPass = _char.length >= length[0] && _char.length <= length[1];
          if (!isPass) {
            this.isPass = false;
            // `masukkan${length[0]}~${length[1]}aksara`
            this.errorinfo.push(customErrStr || lang.write(k => k.InputModule.isCharLength, {
              num1: length[0],
              num2: length[1]
            }));
          }
          return this;
        }
        isEmtry(char, customErrStr) {
          if (!this.isPass) return this;
          const _char = typeof char === 'string' ? char.trim() : char;
          const isPass = _char.length !== 0;
          if (!isPass) {
            this.isPass = false;
            // `masukkan${length[0]}~${length[1]}aksara`
            this.errorinfo.push(customErrStr);
          }
          return this;
        }
        /**展示错误信息 */
        done(passHandler, showErrToast = true) {
          if (this.isPass) {
            passHandler(this);
          } else if (!this.isPass && showErrToast) {
            getStore().dispatch(addToastAction({
              content: this.errorinfo.join(',')
            }));
          }
        }
      }
      exports('default', InputValidator);
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/internalTypes.ts", ['cc'], function () {
  var cclegacy;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }],
    execute: function () {
      cclegacy._RF.push({}, "a8497LyWo1JuZ5Zg6sqYqCB", "internalTypes", undefined);
      /**
       * Cache used to store references to objects, used for circular
       * reference checks.
       */
      // We explicitly check for primitive wrapper types
      // eslint-disable-next-line @typescript-eslint/ban-types
      /**
       * Type which encompasses possible instances of TypedArray
       * classes.
       *
       * **NOTE**: This does not include `BigInt64Array` and
       * `BitUint64Array` because those are part of ES2020 and
       * not supported by certain TS configurations. If using
       * either in `areTypedArraysEqual`, you can cast the
       * instance as `TypedArray` and it will work as expected,
       * because runtime checks will still work for those classes.
       */
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Internationalization.ts", ['cc', './languagePkg.ts'], function (exports) {
  var cclegacy;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, null],
    execute: function () {
      cclegacy._RF.push({}, "ce2fdZdLpVDqbjYpz3X//4/", "Internationalization", undefined);
      class Internationalization {
        constructor(languagePkg) {
          this.languagePkg = void 0;
          this.languageItemType = void 0;
          this.languagePkg = languagePkg;
        }
        /**配置语言类型 */
        use(languageItemType) {
          this.languageItemType = languageItemType;
        }
        /**
         * 
         * @param target 语言包里面的字段层级
         * @param formatData 格式化的填充数据
         * @param option 包含几个可选字段，1:本次强制执行的语言包类型；2:本次强制显示的文字，优先级很高，3:若出现可预知的异常，要进行占位的文字；4:没有发现指定的语言，是否显示警告(显示占位文字)
         * @returns 
         */
        write(target, formatData, option) {
          const _option = Object.assign({
            langItemType: this.languageItemType,
            langStr: target(this.languagePkg) ? target(this.languagePkg)[this.languageItemType || option && option.langItemType] : '--',
            /**缺省字段 */
            placeStr: '--',
            noWarn: true
          }, option || {});
          if (!target(this.languagePkg)) {
            //可能没有配置这个语句项，若有占位字符，就显示占位字符
            if (option && option.placeStr) {
              _option.langStr = option.placeStr;
            } else {
              return _option.langStr;
            }
          }
          if (!_option.langItemType) {
            /**没有设置语言，也没有临时语言设置，或者被临时置空了 */
            _option.noWarn && console.warn('language config error');
            return _option.placeStr;
          }
          // if (!_option.langStr) return '-error-'
          return !formatData ? _option.langStr : _option.langStr.replace(/\{(\w+)\}/g, function (match, key) {
            if (formatData.hasOwnProperty(key)) {
              return formatData[key];
            } else {
              return match;
            }
          });
        }
      }
      exports('default', Internationalization);

      /**使用示例 */
      /*
        const lang = new Internationalization(languagePkg)
        lang.use(LanguageItemType.EN)
        console.log(lang.write(k => k.moduleName2.demoTitle, { name: 'weishere', age: 22 }, {
          langStr: 'daxi-{name}-daxi', //可缺省
          langItemType: LanguageItemType.EN, //可缺省
          placeStr: 'daxi-{name}-daxi', //可缺省
        })) 
      */
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/languagePkg.ts", ['cc'], function (exports) {
  var cclegacy;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }],
    execute: function () {
      cclegacy._RF.push({}, "bd099EpRWtKzJQhkH2PMMGO", "languagePkg", undefined);
      // export type LanguagePkg = {
      //   moduleName2: {
      //     demoTitle: LanguageItem,
      //     subContent: LanguageItem
      //   }
      // }

      /**国家和地区 */
      let Country = exports('Country', /*#__PURE__*/function (Country) {
        Country["CHINA"] = "China";
        Country["INDIA"] = "India";
        Country["INDONESIA"] = "Indonesia";
        Country["HINDI"] = "Hindi";
        return Country;
      }({}));

      /**语言类型 */
      let LanguageItemType = exports('LanguageItemType', /*#__PURE__*/function (LanguageItemType) {
        LanguageItemType["ZH"] = "zh";
        LanguageItemType["EN"] = "en";
        LanguageItemType["IDA"] = "ida";
        LanguageItemType["HI"] = "hi";
        return LanguageItemType;
      }({}));

      /**地区与默认语言包映射 */
      const defaultLanguageType = exports('defaultLanguageType', {
        [Country.CHINA]: {
          langName: "Chinese",
          language: LanguageItemType.ZH,
          phoneAreaNum: "86",
          shortName: "CH"
        },
        [Country.INDIA]: {
          langName: "English",
          language: LanguageItemType.EN,
          phoneAreaNum: "91",
          shortName: "IND"
        },
        [Country.INDONESIA]: {
          langName: "Indonesia",
          language: LanguageItemType.IDA,
          phoneAreaNum: "62",
          shortName: "ID"
        },
        [Country.HINDI]: {
          langName: "Hindi",
          language: LanguageItemType.HI,
          phoneAreaNum: "91",
          shortName: "HI"
        }
      });
      const languagePkg = exports('default', {
        WebSocketModule: {
          WebSocketError: {
            zh: "网络连接失败",
            en: "Network Connection Failure",
            ida: "Koneksi jaringan gagal",
            hi: "नेटवर्क कनेक्शन विफलता"
          },
          WebSocketFreeze: {
            zh: "对不起，您的账户处于冻结状态，请联系客服解冻！",
            en: "Sorry, your account is frozen, please contact customer service to unfreeze it!",
            ida: "Maaf , akun anda dalam kondisi terblokir ,silahkan menghubungi CS untuk membuka blokir !",
            hi: "क्षमा करें, आपका खाता जमे हुए है, कृपया इसे अनफ्रीज करने के लिए ग्राहक सेवा से संपर्क करें!"
          },
          NetworkInstability: {
            zh: "您的网络不稳定",
            en: "network instability",
            ida: "Jaringan Anda tidak stabil",
            hi: "आपका नेटवर्क अस्थिर है"
          },
          ConfigGameFaild: {
            zh: "对不起，连接游戏失败",
            en: "Sorry, connection to the game failed.",
            ida: "Maaf , Koneksi game gagal",
            hi: "क्षमा करें, खेल से कनेक्शन विफल रहा।"
          },
          socketConnectDateFail: {
            zh: "对不起，连接失败",
            en: "Sorry, connection failed.",
            ida: "Maaf , Koneksi gagal",
            hi: "क्षमा करें, कनेक्शन विफल रहा।"
          },
          socketConnectDisconnect: {
            zh: "网络已断开连接",
            en: "Network disconnect",
            ida: "Jaringan telah terputus",
            hi: "नेटवर्क डिस्कनेक्ट"
          },
          socketConnectAuthFaild: {
            zh: "认证失败",
            en: "Auth Faild",
            ida: "Gagal sertifikasi",
            hi: "प्रमाणीकरण विफल"
          },
          socketRetryTimes: {
            zh: "连接断开，正在进行第{times}次重连...",
            en: "Network interrupted, reconnecting {times} time",
            ida: "Koneksi terputus dan koneksi ulang ke {times} sedang berlangsung...",
            hi: "नेटवर्क बाधित, {times} बार पुन: कनेक्ट हो रहा है"
          },
          GameInit: {
            zh: "游戏初始化中，请稍后",
            en: "Game start",
            ida: "Game berhasil dimuat...",
            hi: "खेल शुरू"
          },
          SocketDataError: {
            zh: "服务数据错误",
            en: "Service data error",
            ida: "Kesalahan data layanan",
            hi: "सेवा डेटा त्रुटि"
          },
          SocketMsgTimeOut: {
            zh: "对不起，服务器网络超时",
            en: "Sorry, server network timeout.",
            ida: "Maaf, waktu jaringan server habis",
            hi: "क्षमा करें, सर्वर नेटवर्क टाइमआउट।"
          },
          ErrorGeneral: {
            zh: "对不起，出错了",
            en: "Sorry, something went wrong.",
            ida: "Maaf, ada yang tidak beres",
            hi: "क्षमा करें, कुछ गलत हो गया।"
          }
        },
        HallModule: {
          HallGameLoading: {
            zh: "对不起，加载游戏失败！{id}",
            en: "Sorry, loading the game failed! {id}",
            ida: "Maaf, Gagal menginstal game!{id}",
            hi: "क्षमा करें, खेल लोड करने में विफल! {id}"
          },
          LoadFaild: {
            zh: "加载资源失败",
            en: "Load resouce Faild",
            ida: "Salah memuat sumber daya",
            hi: "संसाधन लोड विफल"
          },
          HallCopy: {
            zh: "复制成功",
            en: "Copy Success",
            ida: "Berhasil Salin",
            hi: "कॉपी सफल"
          },
          GuestAutoLogin: {
            zh: "游客登录中",
            en: "Visitor Login",
            ida: "pengunjung sedang log in",
            hi: "अतिथि लॉगिन"
          },
          AutoLoginFaild: {
            zh: "请手动登录",
            en: "Please login manually",
            ida: "Mohon Log in dengan manual",
            hi: "कृपया मैन्युअल रूप से लॉगिन करें"
          },
          captchaError: {
            zh: "验证码错误",
            en: "CAPTCHA error",
            ida: "Galat captcha",
            hi: "कैप्चा त्रुटि"
          },
          captchaEmptyError: {
            zh: "请输入验证码",
            en: "Enter the verification code",
            ida: "silakan masukkan kode verifikasi",
            hi: "कृपया सत्यापन कोड दर्ज करें"
          },
          passwordEmptyError: {
            zh: "请输入密码",
            en: "Please enter your password",
            ida: "Silakan masukkan sandi",
            hi: "कृपया अपना पासवर्ड दर्ज करें"
          },
          confirmPasswordEmptyError: {
            zh: "请输入确认密码",
            en: "Please enter the confirmation password",
            ida: "Silakan masukkan kata sandi konfirmasi",
            hi: "कृपया पुष्टि पासवर्ड दर्ज करें"
          },
          pwdRepetitionError: {
            zh: "两次输入的密码不一致",
            en: "Inconsistent passwords entered twice",
            ida: "Kata sandi yang dimasukkan tidak sama",
            hi: "दो बार दर्ज किए गए पासवर्ड असंगत हैं"
          },
          CantEditProfile: {
            zh: "对不起，请认证用户资料再操作",
            en: "Sorry, please verify your user profile before proceeding",
            ida: "Maaf , mohon verifikasi informasi anda sebelum melanjutkan",
            hi: "क्षमा करें, कृपया आगे बढ़ने से पहले अपनी उपयोगकर्ता प्रोफ़ाइल सत्यापित करें"
          },
          HallWithdrawalNoEnough: {
            zh: "对不起，您的可提现金额不足",
            en: "Sorry, your withdrawal amount is insufficient",
            ida: "Maaf, jumlah penarikan Anda tidak mencukupi",
            hi: "क्षमा करें, आपकी निकासी राशि अपर्याप्त है"
          },
          HallWithdrawalglod: {
            zh: "对不起，提现金额应在{down}~{up}之间",
            en: "Sorry, the withdrawal amount should be between {down}~{up}",
            ida: "Maaf, jumlah penarikan harus antara {down}~{up}",
            hi: "क्षमा करें, निकासी राशि {down}~{up} के बीच होनी चाहिए"
            // ida: 'Maaf , Jumlah yang anda masukkan tidak benar'
          },

          HallShopAmount: {
            zh: "对不起，充值金额需在{down}~{up}之间",
            en: "Sorry, the recharge amount should be between {down}~{up}",
            ida: "Maaf, jumlah isi ulang harus antara {down}~{up}",
            hi: "क्षमा करें, रिचार्ज राशि {down}~{up} के बीच होनी चाहिए"
          },
          HallWithdrawalMessage: {
            zh: "请选择提现到账的银行信息",
            en: "Please select the withdrawal bank information",
            ida: "Tolong memilih akun bank yang akan melakukan withdraw",
            hi: "कृपया निकासी बैंक जानकारी का चयन करें"
          },
          HallWithdrawalBank: {
            zh: "请选择有效的提现渠道",
            en: "Please choose a valid withdrawal channel",
            ida: "Silahkan pilih saluran ekstraksi yang valid",
            hi: "कृपया एक मान्य निकासी चैनल चुनें"
          },
          WithdrawalApply: {
            zh: "提现申请发送成功",
            en: "Withdrawal request sent successfully",
            ida: "Permohonan penarikan berhasil dikirim",
            hi: "निकासी अनुरोध सफलतापूर्वक भेजा गया"
          },
          SureDeleteMail: {
            zh: "您确定要删除此消息吗？",
            en: "Are you sure you want to delete this message?",
            ida: "Apakah anda yakin akan menghapus pesan ini ?",
            hi: "क्या आप वाकई इस संदेश को हटाना चाहते हैं?"
          },
          TurntableCue: {
            zh: "对不起,该活动已结束!",
            en: "Sorry, this event has ended!",
            ida: "Maaf, acara ini telah berakhir!",
            hi: "क्षमा करें, यह घटना समाप्त हो गई है!"
          },
          UnfinishedGames: {
            zh: "您还有未完成的游戏，请继续",
            en: "You still have unfinished games, continue.",
            ida: "Anda masih memiliki permainan yang belumselesai, lanjutkan",
            hi: "आपके पास अभी भी अधूरे खेल हैं, जारी रखें।"
          },
          GameDownLoadDone: {
            zh: "游戏{gameName}下载完成，请轻击开始",
            en: "Game has been downloaded, please tap to start.",
            ida: "Game telah diunduh, ketuk untuk memulai",
            hi: "खेल डाउनलोड हो गया है, कृपया शुरू करने के लिए टैप करें।"
          }
        },
        BankModule: {
          BankPassword: {
            zh: "您的银行密码设置成功！",
            en: "Your bank password has been set successfully!",
            ida: "Kata sandi bank anda berhasil di tukar !",
            hi: "आपका बैंक पासवर्ड सफलतापूर्वक सेट कर दिया गया है!"
          },
          BankTransfer: {
            zh: "您的银行金币转移成功！",
            en: "Your bank gold transfer was successful!",
            ida: "Saldo bank anda berhasil di pindahkan !",
            hi: "आपका बैंक गोल्ड ट्रांसफर सफल रहा!"
          }
        },
        BaseBoardModule: {
          BaseBoardBeat: {
            zh: "认证成功",
            en: "Certification Success",
            ida: "Pendaftaran berhasil !",
            hi: "प्रमाणीकरण सफल"
          },
          BaseBoardLogin: {
            zh: "抱歉，您的登录信息变更，已自动退出~",
            en: "Sorry, your login information has changed and you have been automatically logged out~",
            ida: "Maaf , Data login anda berubah ,akun telah dikeluarkan secara otomatis",
            hi: "क्षमा करें, आपकी लॉगिन जानकारी बदल गई है और आपको स्वचालित रूप से लॉगआउट कर दिया गया है~"
          },
          BaseBoardExit: {
            zh: "对不起，退出失败",
            en: "Sorry. Exit failed.",
            ida: "Maaf , Gagal Keluar",
            hi: "क्षमा करें। बाहर निकलने में विफल।"
          },
          BaseBoardUpdate: {
            zh: "请更新App至最新版本",
            en: "Please update the app to the latest version",
            ida: "Silahkan mengupgrade App ke versi paling baru",
            hi: "कृपया ऐप को नवीनतम संस्करण में अपडेट करें"
          },
          operateDone: {
            zh: "操作完成",
            en: "Operation completed",
            ida: "Operasi selesai",
            hi: "संचालन पूरा हुआ"
          },
          DataException: {
            zh: "数据加载异常",
            en: "Data loading exception",
            ida: "Pengecualian pemuatan data",
            hi: "डेटा लोडिंग अपवाद"
          }
        },
        BindPhoneModule: {
          BindPhoneChange: {
            zh: "操作成功",
            en: "Successful operation",
            ida: "Operasi sukses",
            hi: "सफल संचालन"
          },
          DoneSuccess: {
            zh: "修改成功",
            en: "Successful update",
            ida: "Pembaruan berhasil",
            hi: "सफलतापूर्वक अपडेट किया गया"
          },
          BindPhoneSend: {
            zh: "验证信息已经发送，请注意查收",
            en: "Verification information has been sent, please pay attention to check",
            ida: "Info verifikasi telah di kirim ,silahkan di cek",
            hi: "सत्यापन जानकारी भेज दी गई है, कृपया जांच करने पर ध्यान दें"
          },
          BindPhonesSendError: {
            zh: "验证信息发送失败",
            en: "Failed to send authentication message",
            ida: "Info verifikasi gagal di kirim",
            hi: "प्रमाणीकरण संदेश भेजने में विफल"
          }
        },
        loginModule: {
          LoginRemind: {
            zh: "请登录",
            en: "sign in",
            ida: "Silakan log masuk",
            hi: "साइन इन करें"
          },
          LoginMark: {
            zh: "已自动登录",
            en: "logged in automatically",
            ida: "Telah Log in secara otomatis",
            hi: "स्वचालित रूप से लॉग इन किया गया"
          },
          LoginSuccess: {
            zh: "已自动登录账号",
            en: "Automatically logged in account",
            ida: "Telah Log in secara otomatis",
            hi: "स्वचालित रूप से लॉग इन किया गया खाता"
          },
          LoginCode: {
            zh: "登录验证已经发送，请注意查收",
            en: "Login verification has been sent, please check",
            ida: "Info verifikasi telah di kirim ,silahkan di cek",
            hi: "लॉगिन सत्यापन भेजा गया है, कृपया जांचें"
          }
        },
        MainPaneModule: {
          MainPanelCodeError: {
            zh: "不能输入自己的推荐码",
            en: "Cannot enter your own referral code",
            ida: "Tidak boleh memasukan kode referral sendiri",
            hi: "अपना रेफरल कोड दर्ज नहीं कर सकते"
          },
          MainPanelPromotion: {
            zh: "您输入的推荐人不存在",
            en: "The referrer you have entered does not exist",
            ida: "Orang referral yang anda masukkan tidak berdaftar",
            hi: "आपके द्वारा दर्ज किया गया रेफरर मौजूद नहीं है"
          },
          ShareSure: {
            zh: "绑定成功",
            en: "Binding successful",
            ida: "Pengikatan berhasil",
            hi: "बाइंडिंग सफल"
          },
          ShareCopy: {
            zh: "复制推广链接成功，快去邀请好友一起玩吧！",
            en: "Copy the promotion link successfully, go ahead and invite your friends to play with you!",
            ida: "Link berhasil di salin , cepat mengajak teman anda bermain !",
            hi: "प्रचार लिंक को सफलतापूर्वक कॉपी करें, आगे बढ़ें और अपने दोस्तों को आपके साथ खेलने के लिए आमंत्रित करें!"
          },
          NoGiftData: {
            zh: "没有礼包数据!",
            en: "No package data!",
            ida: "Tidak ada data paket hadiah!",
            hi: "कोई पैकेज डेटा नहीं!"
          },
          LoadUrlError: {
            zh: "此链接无法加载!",
            en: "This link does not load!",
            ida: "Tautan ini tidak dapat dimuat!",
            hi: "यह लिंक लोड नहीं होता!"
          }
        },
        PersonCenterModule: {
          PersonCenterEdit: {
            zh: "编辑成功",
            en: "Edit Success",
            ida: "Edit berhasil",
            hi: "संपादन सफल"
          },
          PersonCenterSumbit: {
            zh: "操作过于频繁，请稍等",
            en: "Operation is too frequent, please wait",
            ida: "Operasi ini terlalu sering, harap tunggu",
            hi: "संचालन बहुत बार-बार है, कृपया प्रतीक्षा करें"
          }
        },
        palyingModule: {
          GameExit: {
            zh: "您正在游戏中，请游戏结束后重试。",
            en: "You are in the middle of a game, please try again after the game.",
            ida: "Kamu sedang berada di permainan , silahkan dicoba setelah permainan selesai",
            hi: "आप खेल के बीच में हैं, कृपया खेल के बाद पुनः प्रयास करें।"
          },
          CrashBottomFailed: {
            zh: "下注不合法",
            en: "Bet illegal",
            ida: "Taruhan ilegal",
            hi: "सट्टा अवैध है"
          },
          RechangeGlod: {
            zh: "对不起，您的金币不足，请充值!",
            en: "Sorry, your gold coin is insufficient, please recharge!",
            ida: "Maaf , saldo anda tidak cukup ,silakan melakukan deposit",
            hi: "क्षमा करें, आपका सोने का सिक्का अपर्याप्त है, कृपया रिचार्ज करें!"
          },
          ExceedUpper: {
            zh: "对不起，您的金币改房间进入要求!",
            en: "Sorry for your gold coin change room entry requirements!",
            ida: "Maaf , saldo anda tidak cukup ,silakan melakukan deposit",
            hi: "क्षमा करें, आपके सोने के सिक्के के कमरे में प्रवेश की आवश्यकताएं बदल गई हैं!"
          },
          ExceedUpper1: {
            zh: "对不起，您不符合进入条件，是否进入系统匹配房间!",
            en: "Sorry, you do not meet the entry conditions, whether to enter the system matching room!",
            ida: "Maaf anda tidak memenuhi syarat untuk masuk , apakah masuk ke kamar yang sesuai sistem !",
            hi: "क्षमा करें, आप प्रवेश की शर्तों को पूरा नहीं करते हैं, क्या आप सिस्टम मिलान कक्ष में प्रवेश करना चाहते हैं!"
          }
        },
        InitGameModule: {
          HoldOn: {
            zh: "请稍后...",
            en: "Hold on please…",
            ida: "Mohon bersabar",
            hi: "कृपया प्रतीक्षा करें..."
          },
          GameBoardInit: {
            zh: "游戏初始化失败",
            en: "game init failed",
            ida: "Reset permainan gagal",
            hi: "खेल प्रारंभ विफल"
          },
          GameBoardInitAndGotoUrl: {
            zh: "游戏初始化失败，选择确认将重启",
            en: "game init failed",
            ida: "Inisialisasi game gagal, Pilih Konfirmasi untuk mem-boot ulang",
            hi: "खेल प्रारंभ विफल, पुनः आरंभ करने के लिए पुष्टि चुनें"
          },
          FetcherFaild: {
            zh: "数据加载失败",
            en: "Data loading failure",
            ida: "Data gagal di muat",
            hi: "डेटा लोडिंग विफलता"
          },
          BetFaild: {
            zh: "{0} 筹码下注失败",
            en: "{0} Chip bet failed",
            ida: "{0} Taruhan chip gagal",
            hi: "{0} चिप सट्टा विफल"
          }
        },
        InputModule: {
          isNotEmpty: {
            zh: "输入的信息不能为空",
            en: "The information entered cannot be empty",
            ida: "Data yang di masukkan tidak boleh kosong",
            hi: "दर्ज की गई जानकारी खाली नहीं हो सकती"
          },
          isAllNumber: {
            zh: "输入的内容必须是纯数字",
            en: "The input must be purely numeric",
            ida: "Silakan masukkan isi yang harus menjadi nomor murni",
            hi: "इनपुट पूरी तरह से संख्यात्मक होना चाहिए"
          },
          isDecimal: {
            zh: "您输入的金额不合法",
            en: "The amount you have entered is not legal",
            ida: "Jumlah yang di masukkan tidak diperbolehkan",
            hi: "आपके द्वारा दर्ज की गई राशि कानूनी नहीं है"
          },
          isPhoneNumber: {
            zh: "输入的手机号码不合法(11~13位纯数字)",
            en: "Input mobile phone number is not legal (11~13 digits pure numbers)",
            ida: "Nomor handphone yang di masukkan tidak di perbolehkan (11 ~ 13 digit)",
            hi: "दर्ज किया गया मोबाइल फोन नंबर कानूनी नहीं है (11~13 अंक शुद्ध संख्याएं)"
          },
          isIDAPhoneNumber: {
            zh: "输入的手机号码不合法(8 + 10~12位纯数字)",
            en: "Input mobile phone number is not legal (8 + 10~12 pure digits)",
            ida: "Nomor handphone yang di masukkan tidak di perbolehkan (8 + 10 ~ 12 digit)",
            hi: "दर्ज किया गया मोबाइल फोन नंबर कानूनी नहीं है (8 + 10~12 शुद्ध अंक)"
          },
          // isIDPhoneNumber: {
          //   zh: '输入的手机号码不合法(6/7/8/9 + 9位纯数字)',
          //   en: 'Input mobile phone number is not legal (6/7/8/9 + 9 pure digits)',
          //   ida: 'Nomor handphone yang di masukkan tidak di perbolehkan (6/7/8/9 + 9 digit)'
          // },
          isIDPhoneNumber: {
            zh: "输入的手机号码不合法(10位纯数字)",
            en: "Input mobile phone number is not legal (10 pure digits)",
            ida: "Nomor handphone yang di masukkan tidak di perbolehkan (10 digit)",
            hi: "दर्ज किया गया मोबाइल फोन नंबर कानूनी नहीं है (10 शुद्ध अंक)"
          },
          isBankCardNumber: {
            zh: "您输入的银行卡号不合法",
            en: "The bank card number you entered is illegal",
            ida: "Nomor kartu bank yang Anda masukkan ilegal",
            hi: "आपके द्वारा दर्ज किया गया बैंक कार्ड नंबर अवैध है"
          },
          isSmsCode: {
            zh: "请输入正确的手机验证码",
            en: "Please enter the correct mobile phone verification code",
            ida: "Silahkan memasuki kode verifikasi dengan benar",
            hi: "कृपया सही मोबाइल फोन सत्यापन कोड दर्ज करें"
          },
          isCharLength: {
            zh: "请输入 {num1} ~ {num2} 位字符",
            en: "Please enter {num1} ~ {num2} bits",
            ida: "masukkan {num1} ~ {num2} aksara",
            hi: "कृपया {num1} ~ {num2} बिट्स दर्ज करें"
          },
          inputFaildCustomer1: {
            zh: "渠道号码必须以08开头",
            en: "The channel number must start with 08",
            ida: "Nomor saluran harus dimulai dengan 08",
            hi: "चैनल नंबर 08 से शुरू होना चाहिए"
          }
        },
        UpdateModule: {
          GameConfig: {
            zh: "请更新App至最新版本{version}",
            en: "Please update the app to the latest version {version}",
            ida: "Silahkan mengupgrade App ke versi paling baru {version}",
            hi: "कृपया ऐप को नवीनतम संस्करण {version} में अपडेट करें"
          },
          GameNotice: {
            zh: "对不起，系统维护中，请稍后再尝试登录",
            en: "Sorry, the system is under maintenance, please try to log in again later",
            ida: "Maaf, sistem sedang dalam pemeliharaan, silakan coba login lagi nanti",
            hi: "क्षमा करें, सिस्टम रखरखाव में है, कृपया बाद में फिर से लॉगिन करने का प्रयास करें"
          },
          VersionLabel: {
            zh: "本地版本:v{localVersion}, 线上版本:v{serverVersion}",
            en: "Local version: v{localVersion}, Online version: v{serverVersion}",
            ida: "Versi lokal:v{localVersion}, Versi online:v{serverVersion}",
            hi: "स्थानीय संस्करण: v{localVersion}, ऑनलाइन संस्करण: v{serverVersion}"
          },
          UpdateProgress: {
            zh: "正在更新中,请耐心等待({time}%)...",
            en: "Updating now, please be patient ({time}%)...",
            ida: "Sedang update , silahkan menunggu ({time}%)...",
            hi: "अभी अपडेट हो रहा है, कृपया धैर्य रखें ({time}%)..."
          },
          OnNeedToUpdate: {
            zh: "有最新的资源包({version})需要更新，点确认开始下载",
            en: "There are new packages ({version}) that need to be updated, click OK to start the download",
            ida: "Ada paket sumber daya terbaru ({version}) yang perlu diperbarui, klik Konfirmasi untuk mulai mengunduh",
            hi: "नए पैकेज ({version}) हैं जिन्हें अपडेट करने की आवश्यकता है, डाउनलोड शुरू करने के लिए ओके पर क्लिक करें"
          },
          DetectCompleted: {
            zh: "检测完成，即将进入游戏>>",
            en: "Detection complete, about to enter the game>>",
            ida: "Persiapan selesai , segera memasuki permainan>>",
            hi: "पता लगाना पूरा हुआ, खेल में प्रवेश करने वाला है>>"
          },
          DetectComplete: {
            zh: "检测完成，即将进入游戏",
            en: "Detection complete, about to enter the game",
            ida: "Persiapan selesai , segera memasuki permainan",
            hi: "पता लगाना पूरा हुआ, खेल में प्रवेश करने वाला है"
          },
          UpdateFail: {
            zh: "更新失败",
            en: "Update failed",
            ida: "Update gagal",
            hi: "अपडेट विफल"
          },
          RestartProgram: {
            zh: "更新失败，是否要重启程序？",
            en: "Update failed, should I restart the programme?",
            ida: "Update gagal , apakah mau coba ulang?",
            hi: "अपडेट विफल, क्या मुझे प्रोग्राम को पुनरारंभ करना चाहिए?"
          },
          ClientCheck: {
            zh: "客户端开始检查>>",
            en: "Client starts checking >>",
            ida: "Periksa Mula Klien >>",
            hi: "क्लाइंट जांच शुरू करता है >>"
          },
          CheckUpdatedPkg: {
            zh: "检查更新包...",
            en: "Check for updated packages...",
            ida: "Periksa paket terbaru...",
            hi: "अपडेट किए गए पैकेज की जांच करें..."
          },
          isNative: {
            zh: "非native版本不检查更新，即将进入游戏",
            en: "Non-native versions do not check for updates and are about to enter the game",
            ida: "Versi bukan asli tidak memeriksa pemutakhiran dan akan segera memasuki permainan",
            hi: "गैर-देशी संस्करण अपडेट की जांच नहीं करते हैं और खेल में प्रवेश करने वाले हैं"
          }
        },
        withdrawal: {
          withdrawalSuccess: {
            zh: "恭喜您绑定成功，获得{gold}金币奖励！",
            en: "Congratulations, your binding is successful and you have been rewarded with {gold} gold!",
            ida: "Selamat berhasil mendaftar dan mendapatkan {gold} koin sebagai hadiah !",
            hi: "बधाई हो, आपका बाइंडिंग सफल है और आपको {gold} सोने का इनाम मिला है!"
          },
          flllowWaterNoLevel: {
            zh: "抱歉，你的投注额未达到提现标准！",
            en: "Sorry,Your wagering did not meet the withdrawal audit!",
            ida: "Maaf, taruhan Anda tidak memenuhi kriteria penarikan!",
            hi: "क्षमा करें, आपका दांव निकासी ऑडिट को पूरा नहीं करता!"
          },
          GotoServiceModify: {
            zh: "请联系客服修改",
            en: "Please contact customer service to modify",
            ida: "Silakan hubungi layanan pelanggan untuk memodifikasi",
            hi: "कृपया संशोधित करने के लिए ग्राहक सेवा से संपर्क करें"
          },
          ElapsedTime: {
            zh: "{minutes}分{second}秒",
            en: "{minutes} minutes {second} second",
            ida: "{minutes} menit {second} detlk",
            hi: "{minutes} मिनट {second} सेकंड"
          },
          OrderShowStr: {
            zh: '"-","处理中","已完成","失败","待支付"',
            en: '"-","Process","Success","Failed","Unpaid"',
            ida: '"-","Proses","Berhasil","Gagal","Untuk dibayar"',
            hi: '"-","प्रक्रिया","सफलता","विफल","अवैतनिक"'
          }
        }
      });
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/listenerFactoy.ts", ['cc'], function (exports) {
  var cclegacy;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }],
    execute: function () {
      exports('listenerFactoy', listenerFactoy);
      cclegacy._RF.push({}, "776ccQgVV5I3ZsoJ5zuKS0R", "listenerFactoy", undefined);
      /**自定义的监听器 */
      // export const sktMsgListener = {
      //   addOnce: (key: SKT_MAG_TYPE, id: string, handler: (data: any) => void, sortId: number = 0) => {
      //     const listenerItem = sktMsgListener.add(key, id, handler, sortId)
      //     listenerItem.isAutoRemove = true
      //   },
      //   add: (key: SKT_MAG_TYPE, id: string, handler: (data: any) => void, sortId: number = 0) => {
      //     let item = dataMap.find(i => i.key === key)
      //     if (!item) {
      //       item = {
      //         key,
      //         isAutoRemove: false,
      //         handlerList: [{ id, sortId, handler }]
      //       }
      //       dataMap.push(item)
      //     } else {
      //       item.handlerList.push({ id, sortId, handler })
      //     }
      //     return item
      //   },
      //   dispath: (key: SKT_MAG_TYPE, data: any) => {
      //     const item = dataMap.find(i => i.key === key)
      //     if (item) {
      //       item.handlerList.sort((a, b) => a.sortId - b.sortId).forEach(item => item.handler(data))
      //       item.isAutoRemove && (dataMap = dataMap.filter(i => i.key !== key))
      //     }
      //   },
      //   remove: (key: SKT_MAG_TYPE, id?: string) => {
      //     if (id) {
      //       let item = dataMap.find(item => item.key === key)
      //       item.handlerList = item.handlerList.filter(item => item.id !== id)
      //     } else {
      //       dataMap = dataMap.filter(item => item.key !== key)
      //     }
      //   },
      //   removeById: (id: string) => {
      //     dataMap.forEach(item => {
      //       item.handlerList = item.handlerList.filter(item => item.id !== id)
      //     })
      //   }
      // }

      function listenerFactoy() {
        let dataMap = [];
        const sktMsgListener = {
          /**添加一次性的监听函数，执行一次就自动失效 */
          addOnce: (key, id, handler, sortId = 0) => {
            const listenerItem = sktMsgListener.add(key, id, handler, sortId);
            listenerItem.isAutoRemove = true;
          },
          add: (key, id, handler, sortId = 0) => {
            let item = dataMap.find(i => i.key === key);
            if (!item) {
              item = {
                key,
                isAutoRemove: false,
                handlerList: [{
                  id,
                  sortId,
                  handler
                }]
              };
              dataMap.push(item);
            } else {
              item.handlerList.push({
                id,
                sortId,
                handler
              });
            }
            return item;
          },
          dispath: (key, data, error) => {
            const item = dataMap.find(i => i.key === key);
            if (item) {
              item.handlerList.sort((a, b) => a.sortId - b.sortId).forEach(item => item.handler(data, error));
              item.isAutoRemove && (dataMap = dataMap.filter(i => i.key !== key));
            }
          },
          removeAll: () => {
            dataMap = [];
          },
          remove: (key, id) => {
            if (id) {
              let item = dataMap.find(item => item.key === key);
              item && (item.handlerList = item.handlerList.filter(item => item.id !== id));
            } else {
              dataMap = dataMap.filter(item => item.key !== key);
            }
          },
          removeById: id => {
            dataMap.forEach(item => {
              item.handlerList = item.handlerList.filter(item => item.id !== id);
            });
          }
        };
        return sktMsgListener;
      }
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/LoaderPanelViewModel.ts", ['cc', './ViewModel.ts'], function (exports) {
  var cclegacy, ViewModel;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      ViewModel = module.default;
    }],
    execute: function () {
      cclegacy._RF.push({}, "b67ef9QOU9DN66pBjxnLqV5", "LoaderPanelViewModel", undefined);
      class LoaderPanelViewModel extends ViewModel {
        constructor() {
          super('Common_LoaderPanel');
        }
        begin() {}
        init() {}
        connect(initProps = {}) {
          this.inject(initProps, () => {
            return {
              onLoadDone: sourceManage => {},
              loadBarType: 2
            };
          });
          return this;
        }
      }
      exports('default', LoaderPanelViewModel);
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/LoginDialogV2ViewModel.ts", ['cc', './ViewModel.ts', './apiUrl.ts', './baseBoard.ts', './globals.ts', './config.ts', './bridge.ts', './languagePkg.ts'], function (exports) {
  var cclegacy, sys, ViewModel, ApiUrl, addToastAction, fetcher, lang, config, deviceInfo, getPackageName, loginEvents, defaultLanguageType;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      sys = module.sys;
    }, function (module) {
      ViewModel = module.default;
    }, function (module) {
      ApiUrl = module.ApiUrl;
    }, function (module) {
      addToastAction = module.addToastAction;
    }, function (module) {
      fetcher = module.fetcher;
      lang = module.lang;
    }, function (module) {
      config = module.config;
      deviceInfo = module.deviceInfo;
    }, function (module) {
      getPackageName = module.getPackageName;
      loginEvents = module.loginEvents;
    }, function (module) {
      defaultLanguageType = module.defaultLanguageType;
    }],
    execute: function () {
      cclegacy._RF.push({}, "98a3e0DagdDbJDUiq0vbLHT", "LoginDialogV2ViewModel", undefined);
      class LoginDialogV2ViewModel extends ViewModel {
        constructor() {
          super('Hall_LoginDialogV2');
        }
        begin() {
          this.setProps({});
          this.setEvent({
            loginHandler: (loginName, password, done) => {
              fetcher.send(ApiUrl.LOGIN_PWD, {
                type: 4,
                memberName: defaultLanguageType[config.country].phoneAreaNum + loginName,
                password,
                macCode: deviceInfo.getUniqueId(),
                pkgCode: getPackageName()
              }).then(data => {
                const values = data.split(",");
                let token = values.length === 1 ? data : values[0];
                //登录成功
                sys.localStorage.setItem('token', token);
                this.comp.events.loginDoneHandler();
                done && done(true);

                //登录成功发送事件
                loginEvents(loginName);
              }).catch(e => {
                done && done(false);
                console.log(e);
              });
            },
            sendSmsHandler: phoneNumber => {
              this.dispatch(addToastAction({
                content: lang.write(k => k.BindPhoneModule.BindPhoneSend, {}, {
                  placeStr: "验证信息已经发送，请注意查收"
                })
              }));
              // Fetcher.Instance<Fetcher<ApiUrl>>().send(ApiUrl.SEND_SMS, { phone: phoneNumber }).then((rsp) => {
              //   this.dispatch(addToastAction({ content: `验证信息已经发送，请注意查收` }))
              //   this.setProps({ smsCode: rsp })
              // }).catch((e) => {
              //   console.log(e)
              // })
            }
          });
        }

        connect(initProps = {}) {
          this.inject(initProps, state => {
            return {};
          });
          return this;
        }
      }
      exports('default', LoginDialogV2ViewModel);
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/LoginPageV2ViewModel.ts", ['cc', './ViewModel.ts', './LoginDialogV2ViewModel.ts', './globals.ts', './prefabDefine2.ts', './NodeIOEffect.ts', './baseBoard.ts', './apiUrl.ts', './bridge.ts', './BaseViewModel.ts', './hallConfig.ts', './config.ts', './ActivityViewModel.ts'], function (exports) {
  var cclegacy, Prefab, sys, ViewModel, LoginDialogV2ViewModel, sourceManageSeletor, lang, fetcher, PrefabPathDefine, EffectType, addToastAction, ApiUrl, sendNativeVibrate, getPackageName, BaseViewModel, config, deviceInfo, ActivityViewModel;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      Prefab = module.Prefab;
      sys = module.sys;
    }, function (module) {
      ViewModel = module.default;
    }, function (module) {
      LoginDialogV2ViewModel = module.default;
    }, function (module) {
      sourceManageSeletor = module.sourceManageSeletor;
      lang = module.lang;
      fetcher = module.fetcher;
    }, function (module) {
      PrefabPathDefine = module.PrefabPathDefine;
    }, function (module) {
      EffectType = module.EffectType;
    }, function (module) {
      addToastAction = module.addToastAction;
    }, function (module) {
      ApiUrl = module.ApiUrl;
    }, function (module) {
      sendNativeVibrate = module.sendNativeVibrate;
      getPackageName = module.getPackageName;
    }, function (module) {
      BaseViewModel = module.default;
    }, function (module) {
      config = module.config;
    }, function (module) {
      deviceInfo = module.deviceInfo;
    }, function (module) {
      ActivityViewModel = module.default;
    }],
    execute: function () {
      cclegacy._RF.push({}, "476bf2d1BlBk7Oy8ifJ+r1C", "LoginPageV2ViewModel", undefined);
      class LoginPageV2ViewModel extends ViewModel {
        constructor() {
          super('Hall_LoginPageV2');
          this.loginDialogV2ViewModel = void 0;
        }
        async begin() {
          this.setEvent({
            onOpenLoginDialog: async () => {
              if (this.loginDialogV2ViewModel) return;
              this.loginDialogV2ViewModel = new LoginDialogV2ViewModel().mountView((await sourceManageSeletor().getFileAsync(PrefabPathDefine._LOGIN_DIALOG_LOGIN_V2, Prefab)).source).appendTo(this.viewNode, {
                effectType: EffectType.EFFECT1,
                isModal: true
              }).setEvent({
                closeHandler: () => {
                  this.loginDialogV2ViewModel.unMount(EffectType.EFFECT2).then(() => {
                    this.loginDialogV2ViewModel = null;
                  });
                },
                loginDoneHandler: () => {
                  this.comp.events.onLoginSuccess();
                },
                errorHandler: errorInfo => {
                  this.dispatch(addToastAction({
                    content: errorInfo
                  }));
                }
              });
            },
            openService: async () => {
              const serviceVm = new BaseViewModel('Hall_Service').mountView((await sourceManageSeletor().getFileAsync(PrefabPathDefine._HELL_SERVICE_WEBVIEW, Prefab)).source).appendTo(this.viewNode, {
                effectType: EffectType.EFFECT1,
                isModal: true
              }).setEvent({
                onClosePanel: () => {
                  serviceVm.unMount(EffectType.EFFECT2);
                }
              }).setProps({
                openUrl: `${config.customerUrl}`
              });
            },
            openHomePage: () => {
              sys.openURL(config.shareUrl);
            },
            openActivity: async () => {
              const activityViewModel = new ActivityViewModel().mountView((await sourceManageSeletor().getFileAsync(PrefabPathDefine._HELL_ACTIVITY, Prefab)).source).appendTo(this.viewNode, {
                effectType: EffectType.EFFECT1,
                isModal: true
              }).setEvent({
                onClosePanel: () => {
                  activityViewModel.unMount(EffectType.EFFECT2);
                }
              });
            },
            retryHandler: () => {
              this.loginTodo(true);
            }
          });
          this.loginTodo();
        }
        async loginTodo(isforce = false) {
          if (this.comp.props.isAutoLogin || isforce) {
            try {
              const isFastLogin = await this.checkFastLogin();
              if (isFastLogin === 'faild') {
                //没有token
                this.dispatch(addToastAction({
                  content: lang.write(k => k.HallModule.GuestAutoLogin, {}, {
                    placeStr: "游客登录中..."
                  })
                }));
                this.guestLogin();
              } else if (!isFastLogin) {
                //有token但是登录失败
                sys.localStorage.removeItem("token");
                this.dispatch(addToastAction({
                  content: lang.write(k => k.HallModule.AutoLoginFaild, {}, {
                    placeStr: "请手动登录"
                  })
                }));
              } else {
                // this.dispatch(addToastAction({ content: lang.write(k => k.HallModule.LoginMark, {}, { placeStr: "已自动登录" }) }))
                //登录操作完成之后
                sendNativeVibrate(200);
                // this.dispatch(addToastAction({ content: "已自动登录" }))
                this.comp.events.onLoginSuccess();
              }
            } catch (e) {
              this.dispatch(addToastAction({
                content: lang.write(k => k.HallModule.AutoLoginFaild, {}, {
                  placeStr: "请手动登录"
                }) + ':' + e
              }));
            }
          }
        }

        /**游客登录 */
        guestLogin() {
          fetcher.send(ApiUrl.LOGIN_PWD, {
            type: 5,
            macCode: deviceInfo.getUniqueId(),
            pkgCode: getPackageName()
          }).then(data => {
            const values = data.split(",");
            let token = values.length === 1 ? data : values[0];
            const isReg = values.length === 1 ? false : Boolean(values[1]);
            //登录成功
            sys.localStorage.setItem('token', token);
            this.comp.events.onLoginSuccess();

            // if (isReg) {
            //   registerAppsflyerEvents('', '')
            // }
          }).catch(e => {
            this.comp.showRetryButton();
            console.log(e);
          });
        }

        /**是否可以快读登录 */
        checkFastLogin() {
          return new Promise((reslove, reject) => {
            try {
              let token = sys.localStorage.getItem("token");
              if (token && token.trim()) {
                fetcher.send(ApiUrl.LOGIN_FAST, {
                  pkgCode: getPackageName(),
                  macCode: deviceInfo.getUniqueId(),
                  token: token
                }, "post", {
                  // "Content-Type": "application/x-www-form-urlencoded"
                }).then(data => {
                  const values = data.split(",");
                  token = values.length === 1 ? data : values[0];
                  sys.localStorage.setItem('token', token);
                  reslove(token ? true : false);
                }).catch(e => {
                  // this.dispatch(addToastAction({ content: e }))
                  this.comp.showRetryButton();
                  reslove(false);
                });
              } else {
                reslove('faild');
              }
            } catch (e) {
              reject(e);
            }
          });
        }
        connect(initProps = {}) {
          this.inject(initProps, state => {
            return {};
          });
          return this;
        }
      }
      exports('default', LoginPageV2ViewModel);
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/MailBoxViewModel.ts", ['cc', './ViewModel.ts', './apiUrl.ts', './baseBoard.ts', './globals.ts', './hallType.ts'], function (exports) {
  var cclegacy, ViewModel, ApiUrl, setLoadingAction, fetcher, PageInfo;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      ViewModel = module.default;
    }, function (module) {
      ApiUrl = module.ApiUrl;
    }, function (module) {
      setLoadingAction = module.setLoadingAction;
    }, function (module) {
      fetcher = module.fetcher;
    }, function (module) {
      PageInfo = module.PageInfo;
    }],
    execute: function () {
      cclegacy._RF.push({}, "1b5367RRtpMBagxAgd+HM67", "MailBoxViewModel", undefined);
      class MailBoxViewModel extends ViewModel {
        constructor() {
          super('Hall_MailBox');
          this.pageNum = 1;
          this.pageSize = 10;
        }
        begin() {
          this.getMailList();
          this.setEvent({
            onDeleteHandler: item => {
              return new Promise((resolve, reject) => {
                fetcher.send(ApiUrl.DELETE_EMAIL, {
                  data: item.id
                }).then(rsp => {
                  // this.getMailList()
                  resolve(true);
                }).catch(e => reject(e));
                //删除
                // this.getMailList()
                // resolve(true)
              });
            },

            onCheckMail: item => {
              return new Promise((resolve, reject) => {
                fetcher.send(ApiUrl.CHECK_EMAIL, {
                  data: item.id
                }).then(rsp => {
                  // this.getMailList()
                  resolve(true);
                }).catch(e => reject(e));
              });
            },
            onReceiveEmailAnnex: item => {
              return new Promise((resolve, reject) => {
                fetcher.send(ApiUrl.RECEIVE_EMAIL_ANNEX, {
                  data: item.id
                }).then(rsp => {
                  resolve(true);
                }).catch(e => reject(e));
              });
            }
          });
        }
        getMailList() {
          fetcher.send(ApiUrl.EMAIL_LIST, {
            pageNum: PageInfo.pageNum,
            pageSize: PageInfo.pageSize
          }, "post").then(rsp => {
            this.dispatch(setLoadingAction({
              isShow: false,
              flagId: 'mail'
            }));
            this.setProps({
              mailList: {
                list: rsp.list,
                pageNum: rsp.pageNum,
                pageSize: rsp.pageSize,
                total: rsp.total
              }
            });
          }).catch(e => {
            //this.dispatch(addToastAction({ content: e }))
          });
        }
        connect() {
          this.inject({}, state => {
            return {
              mailList: null
            };
          });
          return this;
        }
      }
      exports('default', MailBoxViewModel);
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/main", ['./App.ts', './BaseComponent.ts', './DownloadManagerGame.ts', './Injector.ts', './SourceManage.ts', './ViewModel.ts', './bundle.mjs_cjs=&original=.js', './GameMsgHub.ts', './ModalBox.ts', './SktListener.ts', './WebSocketStarter.ts', './bridge.ts', './Common_GiftUser.ts', './Common_HotUpdate.ts', './Common_LoaderPanel.ts', './Common_Marquee.ts', './Common_ModalBox.ts', './SimpleHtmlParser.ts', './listenerFactoy.ts', './index2.ts', './prefabDefine.ts', './skeletonDefine.ts', './soundDefine.ts', './spriteDefine2.ts', './BaseViewModel2.ts', './GiftUserViewModel.ts', './LoaderPanelViewModel.ts', './GameConfig.ts', './extend.ts', './apiUrl.ts', './Hall_ActivityPanel.ts', './Hall_AppDownLoadGuide.ts', './Hall_BankPanel.ts', './Hall_Baseboard.ts', './Hall_BindPhonePanel.ts', './Hall_ChangeNickName.ts', './Hall_ChangePassword.ts', './Hall_ChooseBank.ts', './Hall_DailyTask.ts', './Hall_GiftBag.ts', './Hall_GivePanel.ts', './Hall_MailBox.ts', './Hall_MailItemComponent.ts', './Hall_MainPanel.ts', './Hall_PC_BackWater.ts', './Hall_PC_Share_Info.ts', './Hall_PC_Share_member.ts', './Hall_PC_share_help.ts', './Hall_PcMainPanel.ts', './Hall_ResetPassword.ts', './Hall_Service.ts', './Hall_SetPassword.ts', './Hall_ShareHelp.ts', './Hall_ShareSure.ts', './Hall_ShopPanel.ts', './Hall_ShopRachargeRule.ts', './Hall_SignIn.ts', './Hall_SubGameGate.ts', './Turntable.ts', './TurntableHelp.ts', './TurntablePanel.ts', './TurntableViewModel.ts', './TurntableWin.ts', './Hall_Upgrade.ts', './Hall_VipMain.ts', './Hall_VipUp.ts', './Hall_WaterHelp.ts', './Hall_WinningBox.ts', './Hall_WithdrawBank.ts', './Hall_WithdrawBankBind.ts', './Hall_WithdrawBill.ts', './Hall_WithdrawTip.ts', './Hall_WithdrawalPanel.ts', './Hall_reliefPanel.ts', './Hall_shopHistoryPanel.ts', './BG.ts', './Counter3.ts', './RollerIcon.ts', './RollerListPanel.ts', './RollerSingle.ts', './Hall_LoginDialogV2.ts', './Hall_LoginPageV2.ts', './Hall_ProhibitPanel.ts', './Hall_RegPageV2.ts', './template.ts', './config.ts', './globals.ts', './hallConfig.ts', './hallType.ts', './hallTypes.ts', './index4.ts', './socketConnect.ts', './index6.ts', './prefabDefine2.ts', './skeletalDefine.ts', './soundDefine2.ts', './spriteDefine.ts', './baseBoard.ts', './counter2.ts', './memberInfo2.ts', './withdraw2.ts', './index5.ts', './baseBoard2.ts', './counter.ts', './index3.ts', './memberInfo.ts', './withdraw.ts', './types.ts', './ActivityViewModel.ts', './BankViewModel.ts', './BaseBoardViewModel.ts', './BaseViewModel.ts', './BindPhoneViewModel.ts', './CounterViewModel.ts', './DailyTaskViewModel.ts', './MailBoxViewModel.ts', './MainPanelViewModel.ts', './MarqueeViewModel.ts', './PersonCenterViewModel.ts', './ResetPasswordViewModel.ts', './ShareHelpViewModel.ts', './ShareSureViewModel.ts', './ShopHistoryViewModel.ts', './ShopRachargeRuleViewModel.ts', './ShopViewModel.ts', './SignInViewModel.ts', './SubGameGateViewModel.ts', './VipMainViewModel.ts', './VipUpViewModel.ts', './WithdrawBankViewModel.ts', './WithdrawalViewModel.ts', './_template.ts', './LoginDialogV2ViewModel.ts', './LoginPageV2ViewModel.ts', './RegV2ViewModel.ts', './hallType2.ts', './Internationalization.ts', './languagePkg.ts', './AudioMgr.ts', './BundleSplit.ts', './BuryPoint.ts', './CaptchaGenerator.ts', './CountDowner.ts', './CountdownTool.ts', './DropDownBox.ts', './Fetcher.ts', './Guide.ts', './HotUpdate.ts', './InputValidator.ts', './NodeIOEffect.ts', './RSA.ts', './Schedule.ts', './Shake.ts', './Singleton.ts', './SkeletonPlay.ts', './SlotSpeedConfig.ts', './StepNumber.ts', './StepNumberV2.ts', './TaskScheduler.ts', './Throttler.ts', './UseSetOption.ts', './copyToClipboard.ts', './encryption.ts', './fastCopy.ts', './comparator.ts', './equals.ts', './index.ts', './internalTypes.ts', './utils.ts', './mockData.ts', './tool.ts', './wheel.ts'], function () {
  return {
    setters: [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null],
    execute: function () {}
  };
});

System.register("chunks:///_virtual/MainPanelViewModel.ts", ['cc', './ViewModel.ts', './prefabDefine2.ts', './NodeIOEffect.ts', './apiUrl.ts', './globals.ts', './socketConnect.ts', './baseBoard.ts', './memberInfo2.ts', './ActivityViewModel.ts', './BankViewModel.ts', './BindPhoneViewModel.ts', './MailBoxViewModel.ts', './PersonCenterViewModel.ts', './ShareHelpViewModel.ts', './ShareSureViewModel.ts', './ShopViewModel.ts', './SignInViewModel.ts', './VipMainViewModel.ts', './VipUpViewModel.ts', './WithdrawalViewModel.ts', './BaseViewModel.ts', './hallConfig.ts', './Hall_ShopPanel.ts', './bridge.ts', './TaskScheduler.ts', './DailyTaskViewModel.ts', './types.ts'], function (exports) {
  var cclegacy, Prefab, ViewModel, PrefabPathDefine, EffectType, ApiUrl, global, lang, sourceManageSeletor, baseBoardView, fetcher, hallWebSocketDriver, SKT_MAG_TYPE, updateMailStatus, setLoadingAction, updateVipBonusInfo, addToastAction, changeWebView, setMemberInfo, setVip, ActivityViewModel, BankViewModel, BindPhoneViewModel, MailBoxViewModel, PersonCenterViewModel, ShareHelpViewModel, ShareSureViewModel, ShopViewModel, SignInViewModel, VipMainViewModel, VipUpViewModel, WithdrawalViewModel, BaseViewModel, config, BuyType, purchaseAppsflyerEvents, pullPurchaseEvents, TaskSchedulerDefault, Task, DailyTaskViewModel, ToastType;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      Prefab = module.Prefab;
    }, function (module) {
      ViewModel = module.default;
    }, function (module) {
      PrefabPathDefine = module.PrefabPathDefine;
    }, function (module) {
      EffectType = module.EffectType;
    }, function (module) {
      ApiUrl = module.ApiUrl;
    }, function (module) {
      global = module.global;
      lang = module.lang;
      sourceManageSeletor = module.sourceManageSeletor;
      baseBoardView = module.baseBoardView;
      fetcher = module.fetcher;
    }, function (module) {
      hallWebSocketDriver = module.hallWebSocketDriver;
      SKT_MAG_TYPE = module.SKT_MAG_TYPE;
    }, function (module) {
      updateMailStatus = module.updateMailStatus;
      setLoadingAction = module.setLoadingAction;
      updateVipBonusInfo = module.updateVipBonusInfo;
      addToastAction = module.addToastAction;
      changeWebView = module.changeWebView;
    }, function (module) {
      setMemberInfo = module.setMemberInfo;
      setVip = module.setVip;
    }, function (module) {
      ActivityViewModel = module.default;
    }, function (module) {
      BankViewModel = module.default;
    }, function (module) {
      BindPhoneViewModel = module.default;
    }, function (module) {
      MailBoxViewModel = module.default;
    }, function (module) {
      PersonCenterViewModel = module.default;
    }, function (module) {
      ShareHelpViewModel = module.default;
    }, function (module) {
      ShareSureViewModel = module.default;
    }, function (module) {
      ShopViewModel = module.default;
    }, function (module) {
      SignInViewModel = module.default;
    }, function (module) {
      VipMainViewModel = module.default;
    }, function (module) {
      VipUpViewModel = module.default;
    }, function (module) {
      WithdrawalViewModel = module.default;
    }, function (module) {
      BaseViewModel = module.default;
    }, function (module) {
      config = module.config;
    }, function (module) {
      BuyType = module.BuyType;
    }, function (module) {
      purchaseAppsflyerEvents = module.purchaseAppsflyerEvents;
      pullPurchaseEvents = module.pullPurchaseEvents;
    }, function (module) {
      TaskSchedulerDefault = module.TaskSchedulerDefault;
      Task = module.Task;
    }, function (module) {
      DailyTaskViewModel = module.default;
    }, function (module) {
      ToastType = module.ToastType;
    }],
    execute: function () {
      cclegacy._RF.push({}, "cbf84AcnORDcKVJA8g11Oy2", "MainPanelViewModel", undefined);
      class MainPanelViewModel extends ViewModel {
        constructor() {
          super('Hall_MainPanel');
          this.personCenterViewModel = void 0;
          this.giftBoxVM = void 0;
          this.winningBoxVM = void 0;
          this.serviceVm = void 0;
          this.vipMainVm = void 0;
          this.shopViewModel = void 0;
          this.isAutoGiftPop = true;
          /**用于只有金额变化之后才开始判断救济金 */
          this.lastUserGlod = -1;
          /**用于防止打开商城的时候，收到的消息导致还打开礼包弹窗(因为商城也会发送礼包socket) */
          this.isOpenShop = false;
          /**用于只检查一次的值 */
          this.isCheckPop = false;
          /**是否已经开始弹窗 */
          this.isBeginPop = false;
          this.isOpenBenefit = false;
          this.retryCount = 0;
        }
        begin() {
          hallWebSocketDriver.sendSktMessage(SKT_MAG_TYPE.MEMBER_INFO, '', {
            isLoading: true
          });
          !this.isCheckPop && hallWebSocketDriver.sendSktMessage(SKT_MAG_TYPE.POP_UPS, '', {});
          // sktInstance.sendSktMessage(SKT_MAG_TYPE.MEMBER_INFO, {}, { isLoading: true })
          // sktMsgListener.add(SKT_MAG_TYPE.MEMBER_INFO, "main", (data) => {
          hallWebSocketDriver.sktMsgListener.add(SKT_MAG_TYPE.MEMBER_INFO, "main", (data, error) => {
            if (error) return;
            this.dispatch(setMemberInfo({
              ...data
            }));
            // this.dispatch(setLoadingAction({ isShow: false }))
            if (data.benefit > 0) {
              // if (this.lastUserGlod !== this.comp.props.memberAssetGoldPieces) {
              this.openReliefPanel(data.benefit);
              // this.lastUserGlod = this.comp.props.memberAssetGoldPieces
              // }
            }
            // !this.isCheckPop && fetcher.send(ApiUrl.POP_UPS, {}, "get").then((rsp: { [key: string]: PopType }) => {

            // }).catch((e) => { })
            this.isCheckPop = true;
          });
          hallWebSocketDriver.sktMsgListener.addOnce(SKT_MAG_TYPE.POP_UPS, "main", (data, error) => {
            if (error) return;
            /**为恢复游戏弹窗设计，那边可能把这个值设为true，那么就不弹窗 */
            if (this.isBeginPop) return;
            this.isBeginPop = true;
            try {
              const {
                activityVo,
                mallVo,
                signInVo,
                upgradesVo
              } = data;
              const queue = [{
                key: 'activityVo',
                ...activityVo
              }, {
                key: 'signInVo',
                ...signInVo
              }, {
                key: 'upgradesVo',
                ...upgradesVo
              }].sort((a, b) => a.sort - b.sort);
              queue.forEach(item => {
                if (item.popUps && item.key === 'activityVo') {
                  TaskSchedulerDefault().joinQueue(new Task(done => this.openAwardPanel(false, () => {
                    done();
                  })));
                } else if (item.popUps && item.key === 'signInVo') {
                  TaskSchedulerDefault().joinQueue(new Task(done => this.openSign(this.parentNode, () => {
                    done();
                  })));
                } else if (item.popUps && item.key === 'upgradesVo') {
                  TaskSchedulerDefault().joinQueue(new Task(done => this.openUpgradePanel(this.parentNode, () => {
                    done();
                  })));
                }
                if (item.popUps) {
                  //客服窗口使用的webview，如果出现叠加弹窗，会出现被覆盖的情况，要先关闭掉客服
                  this.serviceVm && !this.serviceVm.isUnMount && this.serviceVm.unMount();
                }
              });
              this.isAutoGiftPop = mallVo.popUps;
            } catch (e) {
              console.error('pop_ups data error');
            }
          });
          hallWebSocketDriver.sktMsgListener.addOnce(SKT_MAG_TYPE.LOG_EXIT, "log", (data, error) => {
            console.log("强制退出推送.......");
            if (!error && this.comp.props && this.comp.props.subGameInfo) {
              global.closeSubGame({
                confirmContent: lang.write(k => k.BaseBoardModule.BaseBoardLogin, {}, {
                  placeStr: '抱歉，您的登录信息变更，已自动退出~'
                })
              });
            }
            this.logOut(true);
          });
          hallWebSocketDriver.sktMsgListener.add(SKT_MAG_TYPE.GIFT_LIST, "mainboard", (data, error) => {
            if (error || this.isOpenShop) return;
            this.comp.setGiftButtonDisplay(!data.filter(i => i.separatePage === 1).length ? false : true);
            if (this.isAutoGiftPop) {
              this.serviceVm && !this.serviceVm.isUnMount && this.serviceVm.unMount();
              this.openGiftBoxPanel(true, undefined, data);
            }
          });
          hallWebSocketDriver.sktMsgListener.add(SKT_MAG_TYPE.WINNING_BOX, "main", (data, error) => {
            if (error) {
              console.error(error);
              return;
            }
            console.log("中奖广播推送.......", data);
            this.winningBoxVM && this.winningBoxVM.comp.pushWinningData(data, this.comp.props.subGameInfo && this.comp.props.subGameInfo.isVertical);
          });
          hallWebSocketDriver.sktMsgListener.add(SKT_MAG_TYPE.VIP_CHANGE, "main", (data, error) => {
            if (error) return;
            this.openVipUp();
            this.dispatch(setVip(data.inceptionVipLevel, data.vipLevelExperience));
          });
          hallWebSocketDriver.sktMsgListener.add(SKT_MAG_TYPE.RECHANGE_CALLBACK, "main", (data, error) => {
            if (error) return;
            this.rechangeCallbackHandle(data);
          });
          hallWebSocketDriver.sktMsgListener.add(SKT_MAG_TYPE.FRIST_LOGIN, "main", (data, error) => {
            if (error) return;
            config.fristLogin.main = true;
          });
          hallWebSocketDriver.sktMsgListener.add(SKT_MAG_TYPE.NEW_MAIL, "main", (data, error) => {
            if (error) {
              console.error(error);
            }
            console.log("邮箱新消息推送.......", data);
            this.dispatch(updateMailStatus(data));
          });
          if (!this.winningBoxVM) {
            sourceManageSeletor().getFileAsync(PrefabPathDefine._WINNING_BOX, Prefab).then(({
              source
            }) => {
              this.winningBoxVM = new BaseViewModel("Hall_WinningBox").mountView(source).appendTo(baseBoardView.comp.getPropertyNode().props_winnerBox);
            });
          }
          this.setEvent({
            onOpenPersonCenter: index => {
              this.openPc(index);
            },
            onOpenBankPanel: () => {
              this.openBank();
            },
            onOpenMailPanel: async () => {
              this.dispatch(setLoadingAction({
                isShow: true,
                flagId: 'mail'
              }));
              const mailBoxViewModel = new MailBoxViewModel().mountView((await sourceManageSeletor().getFileAsync(PrefabPathDefine._HELL_MAIL, Prefab)).source).appendTo(this.viewNode, {
                effectType: EffectType.EFFECT1,
                isModal: true
              }).setEvent({
                onCloseHandler: () => {
                  mailBoxViewModel.unMount(EffectType.EFFECT2);
                }
              });
            },
            onOpenShopPanel: () => {
              this.openShop();
            },
            onOpenWithdrawalPanel: () => {
              const withdrawalViewModel = new WithdrawalViewModel().mountView(sourceManageSeletor().getFile(PrefabPathDefine.HELL_WITHDRAWAL).source).appendTo(this.viewNode, {
                effectType: EffectType.EFFECT1,
                isModal: true
              }).setEvent({
                onClosePanel: () => {
                  withdrawalViewModel.unMount(EffectType.EFFECT2);
                }
              }).connect();
            },
            onOpenBindPhonePanel: () => {
              this.openBindPhone();
            },
            onOpenUpgradePanel: () => {
              this.openUpgradePanel();
            },
            onOpenAwardPanel: isTurntable => {
              this.openAwardPanel(isTurntable);
            },
            onOpenGiftBoxanel: () => this.openGiftBoxPanel(false),
            onOpenSignInPanel: () => this.openSign(),
            onOpenDailyTaskPanel: () => this.openDailyTaskPanel(),
            onOpenVipMainPanel: () => {
              this.openVipMain();
            },
            onOpenService: async () => {
              this.dispatch(setLoadingAction({
                isShow: true,
                flagId: 'service'
              }));
              this.serviceVm = new BaseViewModel('Hall_Service').mountView((await sourceManageSeletor().getFileAsync(PrefabPathDefine._HELL_SERVICE_WEBVIEW, Prefab)).source).bindDoneHandler(() => {
                this.dispatch(setLoadingAction({
                  isShow: false,
                  flagId: 'service'
                }));
              }).appendTo(this.viewNode, {
                effectType: EffectType.EFFECT1,
                isModal: true
              }).setEvent({
                onClosePanel: () => {
                  this.serviceVm.unMount(EffectType.EFFECT2);
                }
              }).setProps({
                openUrl: `${config.customerUrl}?nc=${this.comp.props.nickName}`
              });
            }
          });
          // const isGuide = (sys.os === sys.OS.ANDROID && getPackageName() === 'web')
          // 	|| (sys.os === sys.OS.IOS && !window.navigator['standalone'] && !NATIVE)
          // 	|| sys.os === sys.OS.OSX
          // 	|| sys.os === sys.OS.WINDOWS
          // if (isGuide) {
          // 	sourceManageSeletor().getFileAsync(sys.os === sys.OS.IOS ? PrefabPathDefine._HELL_APP_DOWNLOAD_PANEL_IOS : PrefabPathDefine._HELL_APP_DOWNLOAD_PANEL, Prefab).then(file => {
          // 		const appDownLoadVM = new BaseViewModel<Hall_AppDownLoadGuide, ALState, ALProps, ALEvent>('Hall_AppDownLoadGuide').mountView(file.source)
          // 			.appendTo(this.viewNode).setEvent({ preGoToDownLoad: () => "" })
          // 	})
          // }

          this.bingFcmToken();
          this.initActivityUnreadStatus();
        }
        unMountCallBack() {
          hallWebSocketDriver.sktMsgListener.removeById("main");
          this.personCenterViewModel && this.personCenterViewModel.unMount();
        }

        /**获取vip等级福利金币值 */
        getVipBonus() {
          fetcher.send(ApiUrl.GET_VIP_BONUS, {
            vipLevel: this.comp.props.vipLevel
          }).then(async rsp => {
            this.dispatch(setLoadingAction({
              isShow: false,
              flagId: 'vip'
            }));
            this.dispatch(updateVipBonusInfo(rsp));
          }).catch(e => {
            console.log(e);
          });
        }
        logOut(isForce, message = "") {}

        /**打开手机绑定框 */
        async openBindPhone(nodeWrap) {
          const bindPhoneViewModel = new BindPhoneViewModel().mountView((await sourceManageSeletor().getFileAsync(PrefabPathDefine._HELL_BIND_PHONE, Prefab)).source).appendTo(nodeWrap || this.parentNode, {
            effectType: EffectType.EFFECT1,
            isModal: true
          }).setEvent({
            onClosePanel: () => {
              bindPhoneViewModel.unMount(EffectType.EFFECT1);
            }
          }).connect();
        }
        /**打开升级框 */
        async openUpgradePanel(nodeWrap, closeHandler) {
          if (!this.comp.props.tourist) {
            closeHandler && closeHandler();
            return;
          }
          const upgradeViewModel = new BaseViewModel('Hall_Upgrade').mountView((await sourceManageSeletor().getFileAsync(PrefabPathDefine._HELL_UPGRADE, Prefab)).source).appendTo(nodeWrap || this.parentNode, {
            effectType: EffectType.EFFECT1,
            isModal: true
          }).setEvent({
            onClosePanel: () => upgradeViewModel.unMount(EffectType.EFFECT1).then(() => closeHandler && closeHandler()),
            doneHandler: () => {
              hallWebSocketDriver.sendSktMessage(SKT_MAG_TYPE.MEMBER_INFO, {});
              upgradeViewModel.unMount();
            },
            sendSmsCode: phoneNumber => {
              return new Promise((reslove, reject) => {
                fetcher.send(ApiUrl.SEND_SMS, {
                  phone: phoneNumber
                }).then(rsp => {
                  this.dispatch(addToastAction({
                    content: lang.write(k => k.BindPhoneModule.BindPhoneSend, {}, {
                      placeStr: "验证信息已经发送，请注意查收"
                    })
                  }));
                  reslove(rsp);
                }).catch(e => {
                  this.dispatch(addToastAction({
                    content: lang.write(k => k.BindPhoneModule.BindPhonesSendError, {}, {
                      placeStr: "请求失败：${e}"
                    })
                  }));
                  reject(e);
                });
              });
            }
          }).setProps({
            memberId: this.comp.props.memberId
          });
        }
        /**打开修改密码框 */
        async openChangePassword(nodeWrap) {
          const changePwdViewModel = new BaseViewModel('Hall_ChangePassword').mountView((await sourceManageSeletor().getFileAsync(PrefabPathDefine._HELL_CHANGE_PASSWORD, Prefab)).source).appendTo(nodeWrap || this.parentNode, {
            effectType: EffectType.EFFECT1,
            isModal: true
          }).setEvent({
            onClosePanel: () => changePwdViewModel.unMount(EffectType.EFFECT1),
            doneHandler: () => changePwdViewModel.unMount()
          });
        }
        /**打开活动面板 */
        async openAwardPanel(isTurntable = false, closeHandler) {
          const activityViewModel = new ActivityViewModel().mountView((await sourceManageSeletor().getFileAsync(PrefabPathDefine._HELL_ACTIVITY, Prefab)).source).appendTo(this.viewNode, {
            effectType: EffectType.EFFECT1,
            isModal: true
          }).setProps({
            isTurntable
          }).setEvent({
            onClosePanel: () => {
              activityViewModel.unMount(EffectType.EFFECT2).then(() => {
                closeHandler && closeHandler();
              });
            }
          }).connect();
        }
        openShop(defaultBuyType = BuyType.COIN, nodeWrap, closeHandler) {
          if (this.isOpenShop) return;
          this.isOpenShop = true;
          this.shopViewModel = new ShopViewModel().mountView(sourceManageSeletor().getFile(PrefabPathDefine.HELL_SHOP).source).appendTo(nodeWrap || this.parentNode, {
            effectType: EffectType.EFFECT1,
            isModal: true
          }).setProps({
            defaultBuyType
          }).setEvent({
            onClosePanel: () => {
              this.shopViewModel.unMount(EffectType.EFFECT2).then(() => closeHandler && closeHandler()).then(() => {
                this.isOpenShop = false;
              });
            }
          }).connect();
        }
        openPc(index = 1, nodeWrap) {
          this.personCenterViewModel = new PersonCenterViewModel().mountView(sourceManageSeletor().getFile(PrefabPathDefine.PC_MAIN_PANEL).source).appendTo(nodeWrap || this.parentNode, {
            effectType: EffectType.EFFECT1,
            isModal: true,
            isBgClose: true
          }).setProps({
            profileShowIndex: index
          }).setEvent({
            onClosePanel: () => {
              this.personCenterViewModel.unMount(EffectType.EFFECT2);
            },
            goToShop: () => {
              this.openShop();
            },
            bindPhone: () => {
              this.openBindPhone();
            },
            openChangePwdPanel: () => {
              this.openChangePassword();
            },
            logOutHandler: () => {
              if (!this.comp.props.subGameInfo) {
                this.logOut(false);
              } else {
                this.dispatch(addToastAction({
                  content: lang.write(k => k.palyingModule.GameExit, {}, {
                    placeStr: "子游戏中不可以退出"
                  }),
                  forceLandscape: false
                }));
              }
            },
            openShareHelp: () => {
              this.onOpenShareHelp();
            },
            openShareSure: (actingId, promotionCode) => {
              this.onOpenShareSure(actingId, promotionCode);
            },
            openUpgradePanel: () => {
              this.openUpgradePanel();
            }
          }).connect();
        }
        async openBank(nodeWrap) {
          if (!this.isTouristPass()) return;
          this.dispatch(setLoadingAction({
            isShow: true,
            flagId: 'bank'
          }));
          const bankViewModel = new BankViewModel().mountView((await sourceManageSeletor().getFileAsync(PrefabPathDefine._HELL_BANK, Prefab)).source).setEvent({
            onClosePanel: () => {
              bankViewModel.unMount(EffectType.EFFECT2);
            },
            isMustSetPwd: () => {
              return new Promise((resolve, reject) => {
                fetcher.send(ApiUrl.IS_SET_PWD, {}, "get").then(rsp => {
                  resolve(rsp);
                }).catch(e => {
                  reject(e);
                });
              });
            }
          })
          // .appendTo(this.viewNode, { effectType: EffectType.EFFECT1, isModal: true }).connect()
          .bindDoneHandler(() => {
            this.dispatch(setLoadingAction({
              isShow: false,
              flagId: 'bank'
            }));
          }).appendTo(nodeWrap || this.parentNode, {
            effectType: EffectType.EFFECT1,
            isModal: true
          }).connect();
        }

        /**
         * 打开礼包弹出框
         * @param isDecideShow 是否还需要判断下自动弹出(数据无弹出标识，就不弹出),此值为true时，第二个参数应该赋值，不然肯定弹窗
         * @param data 传入的数据，可选
         */
        async openGiftBoxPanel(isDecideShow, closeHandler, data) {
          if (this.giftBoxVM && !this.giftBoxVM.isUnMount) {
            //如果窗口已经是打开状态，不予执行
            return;
          }
          if (isDecideShow && data && !data.filter(i => i.separatePage === 1).length) {
            //如果无数据就不自动弹
            closeHandler && closeHandler();
            return;
          }
          this.giftBoxVM = new BaseViewModel('Hall_GiftBag').mountView((await sourceManageSeletor().getFileAsync(PrefabPathDefine._HELL_GIFT_BAG, Prefab)).source).appendTo(this.viewNode, {
            effectType: EffectType.EFFECT1,
            isModal: true
          }).setEvent({
            onClosePanel: () => {
              this.giftBoxVM.unMount(EffectType.EFFECT2);
              closeHandler && closeHandler();
            }
          }).setProps({
            giftList: data ? data.filter(i => i.separatePage === 1) : [],
            isAutoShowPopItem: isDecideShow
          });
        }
        /**打开签到页 */
        async openSign(nodeWrap, closeHandler) {
          //这里有个巨坑，SignInViewModel的begin里面声明了close事件，所以直接链式申明起不到作用,Jacky布的坑
          // sourceManageSeletor().getFileAsync(PrefabPathDefine._HELL_SIGN_IN, Prefab).then((source) => {
          // 	const signInViewModel = new SignInViewModel().mountView(source)
          // 	.appendTo(nodeWrap || this.parentNode, { effectType: EffectType.EFFECT1, isModal: true })
          // 	.setEvent({
          // 		close: () => {
          // 			signInViewModel.unMount(EffectType.EFFECT2);
          // 			closeHandler && closeHandler()
          // 		}
          // 	}).connect()
          // })
          const signInViewModel = new SignInViewModel().mountView((await sourceManageSeletor().getFileAsync(PrefabPathDefine._HELL_SIGN_IN, Prefab)).source).appendTo(nodeWrap || this.parentNode, {
            effectType: EffectType.EFFECT1,
            isModal: true
          }).setEvent({
            close: () => {
              signInViewModel.unMount(EffectType.EFFECT2);
              closeHandler && closeHandler();
            }
          }).connect();
        }

        /**打开每日任务 */
        async openDailyTaskPanel(nodeWrap, closeHandler) {
          const dailyTaskViewModel = new DailyTaskViewModel().mountView((await sourceManageSeletor().getFileAsync(PrefabPathDefine._DAILY_TASK, Prefab)).source).appendTo(nodeWrap || this.parentNode, {
            effectType: EffectType.EFFECT1,
            isModal: true
          }).setEvent({
            onCloseHandler: () => {
              dailyTaskViewModel.unMount(EffectType.EFFECT2);
              closeHandler && closeHandler();
            }
          }).connect();
        }
        async openVipUp(nodeWrap) {
          new VipUpViewModel().mountView((await sourceManageSeletor().getFileAsync(PrefabPathDefine._HELL_VIP_UP, Prefab)).source).appendTo(nodeWrap || this.parentNode, {
            isModal: true
          }).connect();
        }
        async openVipMain(nodeWrap) {
          this.dispatch(setLoadingAction({
            isShow: true,
            flagId: 'vip'
          }));
          this.vipMainVm = new VipMainViewModel().mountView((await sourceManageSeletor().getFileAsync(PrefabPathDefine._HELL_VIP_MAIN, Prefab)).source).appendTo(nodeWrap || this.parentNode, {
            effectType: EffectType.EFFECT1,
            isModal: true
          }).connect();
          this.getVipBonus();
        }
        onOpenShareHelp(nodeWrap) {
          this.dispatch(changeWebView(false));
          sourceManageSeletor().getFileAsync(PrefabPathDefine._SHARE_HELP, Prefab).then(file => {
            new ShareHelpViewModel().mountView(file.source).appendTo(nodeWrap || this.parentNode, {
              effectType: EffectType.EFFECT1,
              isModal: true
            }).connect();
          });
        }
        /**打开救济金面板 */
        async openReliefPanel(benefit) {
          // if (config.relief > this.comp.props.memberAssetGoldPieces) {
          if (!this.isOpenBenefit) {
            const reLiefPanel = new BaseViewModel('Hall_ReliefPanel').mountView((await sourceManageSeletor().getFileAsync(PrefabPathDefine._HELL_RE_LIEF, Prefab)).source).appendTo(this.parentNode, {
              effectType: EffectType.EFFECT1,
              isModal: true
            }).setEvent({
              onClosePanel: () => {
                fetcher.send(ApiUrl.BENEFIT, undefined, undefined, undefined, {
                  isLoading: false
                }).then(async data => {
                  if (data) {
                    this.dispatch(setMemberInfo({
                      ...data
                    }));
                    reLiefPanel.unMount(EffectType.EFFECT2);
                    this.isOpenBenefit = false;
                  }
                }).catch(() => {});
              }
            }).setProps({
              amount: benefit
            });
            this.isOpenBenefit = true;
          }
          // }
        }
        /**是否游客验证 */
        isTouristPass() {
          if (this.comp.props.tourist) {
            this.dispatch(addToastAction({
              content: lang.write(k => k.HallModule.CantEditProfile, {}, {
                placeStr: "对不起，请认证用户资料再操作"
              })
            }));
            this.openUpgradePanel();
            return false;
          }
          return true;
        }
        /**
         * 打开绑定代理确认窗口
         * @param actingId 输入的推荐码
         * @param promotionCode 自己的推荐码
         * @param nodeWrap 
         * @returns 
         */
        onOpenShareSure(actingId, promotionCode, nodeWrap) {
          if (actingId === promotionCode) {
            this.dispatch(addToastAction({
              content: lang.write(k => k.MainPaneModule.MainPanelCodeError, {}, {
                placeStr: "不能输入自己的推荐码"
              }),
              type: ToastType.NORMAL
            }));
            return;
          }
          fetcher.send(ApiUrl.RECOMMEND_MEMBER_INFO, {
            promotionCode: actingId
          }, "post").then(rsp => {
            if (!rsp || !rsp.memberId) {
              this.dispatch(addToastAction({
                content: lang.write(k => k.MainPaneModule.MainPanelPromotion, {}, {
                  placeStr: "推荐人不存在"
                }),
                type: ToastType.NORMAL
              }));
              return;
            }
            this.dispatch(changeWebView(false));
            sourceManageSeletor().getFileAsync(PrefabPathDefine._SHARE_SURE, Prefab).then(file => {
              new ShareSureViewModel().mountView(file.source).appendTo(nodeWrap || this.parentNode, {
                effectType: EffectType.EFFECT1,
                isModal: true
              }).connect().setProps({
                avatarIndex: rsp.avatarIndex,
                nickName: rsp.nickName,
                memberId: rsp.memberId,
                actingId
              });
            });
          }).catch(e => {
            //this.dispatch(addToastAction({ content: e }))
          });
        }

        /**充值回调处理 */
        rechangeCallbackHandle(data) {
          if (data.orderOperations === 2) {
            purchaseAppsflyerEvents(data.rechargeAmount, data.currency, data.isFirstRecharge, data.id);
          } else if (data.orderOperations === 1) {
            pullPurchaseEvents(data.rechargeAmount, data.currency, data.isFirstRecharge, data.id);
          }
          fetcher.send(ApiUrl.ADJUST_ACCEPT, {
            id: data.id
          }, "post", undefined, {
            isThrottler: false
          }).then(rsp => {
            // this.dispatch(setLoadingAction({ isShow: false, flagId: '' }))
            this.vipMainVm && this.getVipBonus();
            this.shopViewModel && this.shopViewModel.getRechargeList();
            // console.log("adjust rechange callback success");
          }).catch(e => {
            // console.log("adjust rechange callback failed!!", e);
          });
        }
        /**绑定token */
        bingFcmToken() {
          // Firebase 相关逻辑已关闭，这里不再绑定 FCM token
          // if (!NATIVE) {
          // 	return;
          // }
          // const memberId = this.comp.props.memberId;
          // // 加盐密钥
          // const salt = "HuGe:UBGFlKh3DcU5uO76";
          // const token = getFirebaseToken();
          // const keys = md5(memberId + salt);
          // console.log(`fcm keys ${keys}, memberId: ${memberId}, token: ${token}`);
          // if (memberId && token) {
          // 	fetcher.send(ApiUrl.FCM_TOKEN_BIND, { keys: keys, memberId: memberId, token: token }, "post").then((rsp) => {
          // 		console.log("fcm bind firebase token success");
          // 	}).catch((e) => {
          // 		console.log("fcm bind firebase token failed!!", e);
          // 	})
          // } else {
          // 	// 重试超过5次就不处理了
          // 	this.retryCount < 5 && this.comp.scheduleOnce(() => {
          // 		this.retryCount++;
          // 		console.log("fcm bind firebase token retry get!! retryCount: " + this.retryCount);
          // 		this.bingFcmToken();
          // 	}, 5)
          // }
        }
        initActivityUnreadStatus() {
          new ActivityViewModel().initReadStatus();
        }
        connect() {
          this.inject({}, state => {
            return {
              memberAssetGoldPieces: state.memberInfo.memberAssetGoldPieces,
              nickName: state.memberInfo.nickName,
              avatarIndex: state.memberInfo.avatarIndex,
              vipLevel: state.memberInfo.vipLevel,
              level: state.memberInfo.level,
              subGameInfo: state.baseBoard.subGameInfo,
              tourist: state.memberInfo.tourist,
              memberId: state.memberInfo.memberId,
              memberName: state.memberInfo.memberName,
              isConnect: state.baseBoard.isConnect,
              // retryConnectTimes: state.baseBoard.retryConnectTimes,
              appDownLoadGuide: state.baseBoard.appDownLoadGuide,
              isUnreadActivity: state.memberInfo.isUnreadActivity,
              UnreadMailNum: state.baseBoard.UnreadMailNum
            };
          });
          return this;
        }
      }
      exports('default', MainPanelViewModel);
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/MarqueeViewModel.ts", ['cc', './ViewModel.ts', './socketConnect.ts'], function (exports) {
  var cclegacy, ViewModel, hallWebSocketDriver, SKT_MAG_TYPE;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      ViewModel = module.default;
    }, function (module) {
      hallWebSocketDriver = module.hallWebSocketDriver;
      SKT_MAG_TYPE = module.SKT_MAG_TYPE;
    }],
    execute: function () {
      cclegacy._RF.push({}, "de45fN3KftCgaBGW0F2ejga", "MarqueeViewModel", undefined);
      class MarqueeViewModel extends ViewModel {
        constructor() {
          super('Common_Marquee');
        }
        begin() {
          // this.setProps({
          //   addInfoQueue: [{
          //     content: "这是一段测试跑马灯信息，跑5次",
          //     count: 5,
          //     intervalSeconds: 0,
          //     priority: 1
          //   }]
          // })
          hallWebSocketDriver.sktMsgListener.add(SKT_MAG_TYPE.MAEQUEE, "main", (data, error) => {
            !error && this.setProps({
              addInfoQueue: data
            });
            console.log("跑马灯推送.......", data);
          });
        }
        connect() {
          this.inject({}, state => {
            return {
              isInSubGame: false //state.baseBoard.subGameInfo ? true : false
            };
          });

          return this;
        }
      }
      exports('default', MarqueeViewModel);
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/memberInfo.ts", ['cc', './memberInfo2.ts', './index.mjs_cjs=&original=.js', './languagePkg.ts', './hallConfig.ts', './index.js'], function (exports) {
  var cclegacy, ActionTypes, defaultLanguageType, config, _cjsExports;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      ActionTypes = module.ActionTypes;
    }, null, function (module) {
      defaultLanguageType = module.defaultLanguageType;
    }, function (module) {
      config = module.config;
    }, function (module) {
      _cjsExports = module.default;
    }],
    execute: function () {
      cclegacy._RF.push({}, "61424RBSPxICYaLsdjmD37Y", "memberInfo", undefined);
      const initState = {
        memberName: "",
        avatarIndex: 0,
        memberAssetGoldPieces: 0,
        memberAssetSafeGoldPieces: 0,
        memberId: '',
        nickName: '',
        vipLevel: 0,
        vipLevelExperience: 0,
        gender: 0,
        level: 0,
        levelExperience: 0,
        phone: "",
        tourist: 1,
        memberRechargeWater: 0,
        minimumWithdrawal: 0,
        totalFlowingWater: 0,
        canExtractRebateGold: 0,
        rebateScale: 0,
        totalReturnWaterAmount: 0,
        flowingWater: 0,
        isUnreadActivity: false
      };
      var memberInfoReducer = exports('default', _cjsExports.createReducer({
        [ActionTypes.SET_MEMBER_INFO]: (state, payload) => {
          var _defaultLanguageType$;
          // 安全获取 phoneAreaNum，如果不存在则使用空字符串
          const phoneAreaNum = ((_defaultLanguageType$ = defaultLanguageType[config.country]) == null ? void 0 : _defaultLanguageType$.phoneAreaNum) || "";
          return {
            ...state,
            memberName: payload.memberName && phoneAreaNum ? payload.memberName.replace(new RegExp(`^${phoneAreaNum}`, 'g'), "") : payload.memberName,
            avatarIndex: payload.avatarIndex,
            memberAssetGoldPieces: payload.memberAssetGoldPieces,
            memberAssetSafeGoldPieces: payload.memberAssetSafeGoldPieces,
            memberId: payload.memberId,
            nickName: payload.nickName,
            vipLevel: payload.vipLevel,
            level: payload.level,
            phone: payload.phone,
            gender: payload.gender,
            vipLevelExperience: payload.vipLevelExperience,
            levelExperience: payload.levelExperience,
            tourist: payload.tourist,
            memberRechargeWater: payload.memberRechargeWater,
            minimumWithdrawal: payload.minimumWithdrawal,
            canExtractRebateGold: payload.canExtractRebateGold,
            rebateScale: payload.rebateScale,
            totalReturnWaterAmount: payload.totalReturnWaterAmount,
            totalFlowingWater: payload.totalFlowingWater,
            flowingWater: payload.flowingWater
          };
        },
        [ActionTypes.RESET_MEMBER_INFO_DATA]: state => ({
          ...Object.assign({}, initState)
        }),
        [ActionTypes.SET_VIP]: (state, payload) => {
          return {
            ...state,
            vipLevel: payload.vipLevel,
            vipLevelExperience: payload.vipLevelExperience
          };
        },
        [ActionTypes.CHANGE_GOLD]: (state, payload) => {
          return {
            ...state,
            memberAssetGoldPieces: state.memberAssetGoldPieces + payload.value
          };
        },
        [ActionTypes.UPDATE_ACTIVITY_STATUS]: (state, payload) => {
          return {
            ...state,
            isUnreadActivity: payload.isUnreadActivity
          };
        }
      }, initState));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/memberInfo2.ts", ['cc', './index.mjs_cjs=&original=.js', './index.js'], function (exports) {
  var cclegacy, _cjsExports;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, null, function (module) {
      _cjsExports = module.default;
    }],
    execute: function () {
      cclegacy._RF.push({}, "6ba63veJuRNMZ7HTtlEybBC", "memberInfo", undefined);
      /**必须大写，不然redux-act这狗日的要自动加序列号 */
      let ActionTypes = exports('ActionTypes', /*#__PURE__*/function (ActionTypes) {
        ActionTypes["SET_MEMBER_INFO"] = "SET_MEMBER_INFO";
        ActionTypes["RESET_MEMBER_INFO_DATA"] = "RESET_MEMBER_INFO_DATA";
        ActionTypes["SET_VIP"] = "SET_VIP";
        ActionTypes["CHANGE_GOLD"] = "CHANGE_GOLD";
        ActionTypes["UPDATE_ACTIVITY_STATUS"] = "UPDATE_ACTIVITY_STATUS";
        return ActionTypes;
      }({}));

      /**定义action的payLoad类型 */

      const setMemberInfo = exports('setMemberInfo', _cjsExports.createAction(ActionTypes.SET_MEMBER_INFO, memberInfo => {
        return {
          ...memberInfo
        };
      }));
      const resetMemberInfo = exports('resetMemberInfo', _cjsExports.createAction(ActionTypes.RESET_MEMBER_INFO_DATA, () => {}));
      const setVip = exports('setVip', _cjsExports.createAction(ActionTypes.SET_VIP, (vipLevel, vipLevelExperience) => {
        return {
          vipLevel,
          vipLevelExperience
        };
      }));
      const changeGold = exports('changeGold', _cjsExports.createAction(ActionTypes.CHANGE_GOLD, value => {
        return {
          value
        };
      }));
      const updateActivityStatus = exports('updateActivityStatus', _cjsExports.createAction(ActionTypes.UPDATE_ACTIVITY_STATUS, isUnreadActivity => {
        return {
          isUnreadActivity
        };
      }));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/mockData.ts", ['cc', './apiUrl.ts', './hallType2.ts', './languagePkg.ts'], function (exports) {
  var cclegacy, ApiUrl, GameState, Country;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      ApiUrl = module.ApiUrl;
    }, function (module) {
      GameState = module.GameState;
    }, function (module) {
      Country = module.Country;
    }],
    execute: function () {
      exports('getMockResponse', getMockResponse);
      cclegacy._RF.push({}, "fe4bf//mZ9LvJOZyX75fefC", "mockData", undefined);

      /**
       * Mock 数据配置
       * 用于开发测试，避免依赖真实接口
       */

      // 是否启用 mock 模式
      const ENABLE_MOCK = exports('ENABLE_MOCK', true); // 设置为 true 启用 mock，false 使用真实接口

      /**
       * Mock 游戏配置数据
       */
      const mockGameConfig = exports('mockGameConfig', {
        appDumpUrl: "https://play.google.com/store/apps/details?id=com.google.android.googlequicksearchbox",
        appleAppDumpUrl: "",
        appOnlineVersion: "V1.0.1",
        upgradeDesc: "版本更新说明",
        forceUpgrade: false,
        bankHelpUrl: "https://www.google.com",
        buryPoint: true,
        gameBundleUrl: "https://static-resources-hoster-snowy.vercel.app/hotupdate",
        hotUpdateUrl: "https://static-resources-hoster-snowy.vercel.app/hotupdate",
        httpBaseUrl: "http://192.168.156.30:8091",
        socketBaseUrl: "ws://192.168.110.248:10000/socket",
        goldRecordUrl: "",
        maintenanceStatus: false,
        isCheckHotUpdate: true,
        shareUrl: "http://11game.com",
        agentPageUrl: "http://11game.com",
        customerUrl: "",
        customerOutUrl: "https://www.google.com",
        relief: 1000,
        gameSort: JSON.stringify({
          domino: [],
          slots: [[6], [14, 15], [3, 10]],
          other: [[17], [5]]
        }),
        backwaterHelpUrl: "",
        faceSwitch: true,
        fristLogin: {
          main: false
        },
        wsList: [{
          id: 1,
          ws: "ws://192.168.110.248:10000/socket",
          name: "Rummy",
          md5: "test-md5",
          isHot: false,
          isNew: false,
          vip: 0,
          status: GameState.WORKING,
          agreement: ""
        }, {
          id: 2,
          ws: "ws://192.168.110.248:10000/socket",
          name: "Domino",
          md5: "test-md5",
          isHot: false,
          isNew: false,
          vip: 0,
          status: GameState.WORKING,
          agreement: ""
        }],
        country: Country.CHINA
      });

      /**
       * Mock API 响应数据
       */
      const mockApiResponses = exports('mockApiResponses', {
        // 登录相关
        [ApiUrl.LOGIN_FAST]: "mock_token_12345,false",
        // token,isReg
        [ApiUrl.LOGIN_PWD]: "mock_token_12345,false",
        [ApiUrl.REG]: {
          success: true
        },
        [ApiUrl.LOGIN_OUT]: {
          success: true
        },
        // 用户信息相关（通过 WebSocket 发送，这里只是占位）
        MEMBER_INFO: {
          memberId: "mock_member_001",
          memberName: "testuser",
          nickName: "测试用户",
          memberAssetGoldPieces: 10000,
          avatarIndex: 1,
          vipLevel: 1,
          level: 1,
          tourist: false,
          benefit: 0
        },
        // 弹窗信息
        POP_UPS: {
          activityVo: {
            popUps: false,
            sort: 1
          },
          signInVo: {
            popUps: false,
            sort: 2
          },
          upgradesVo: {
            popUps: false,
            sort: 3
          },
          mallVo: {
            popUps: false,
            sort: 4
          }
        },
        // 其他接口
        [ApiUrl.SEND_SMS]: {
          success: true
        },
        [ApiUrl.IS_SET_PWD]: false,
        [ApiUrl.GET_MEMBER_SIGN_IN_LIST]: [{
          gold: 100,
          day: 1,
          status: 1,
          tap: 0,
          vip: 0,
          vipGold: 0
        }, {
          gold: 200,
          day: 2,
          status: 0,
          tap: 1,
          vip: 0,
          vipGold: 0
        },
        // Current day, ready to sign
        {
          gold: 300,
          day: 3,
          status: 0,
          tap: 0,
          vip: 0,
          vipGold: 0
        }, {
          gold: 400,
          day: 4,
          status: 0,
          tap: 0,
          vip: 0,
          vipGold: 0
        }, {
          gold: 500,
          day: 5,
          status: 0,
          tap: 0,
          vip: 0,
          vipGold: 0
        }, {
          gold: 600,
          day: 6,
          status: 0,
          tap: 0,
          vip: 0,
          vipGold: 0
        }, {
          gold: 1000,
          day: 7,
          status: 0,
          tap: 0,
          vip: 0,
          vipGold: 0
        }],
        [ApiUrl.SIGN_IN]: {
          success: true
        },
        [ApiUrl.ACTIVITY_LIST]: [{
          id: "activity_01",
          name: "Lottery",
          content: "Spin the wheel to win big!",
          gameId: 998,
          // ActivityType.TURNPLATE
          detailUrl: "",
          pictureUrl: "https://via.placeholder.com/300x200?text=Lottery",
          autoPopUp: 1
        }, {
          id: "activity_02",
          name: "Telegram",
          content: "Join our Telegram channel",
          gameId: 999,
          // ActivityType.TELEGRAM
          detailUrl: "https://t.me/example",
          pictureUrl: "https://via.placeholder.com/300x200?text=Telegram",
          autoPopUp: 0
        }],
        // 活动列表，返回数组
        [ApiUrl.GAME_SWIPE]: [],
        // 游戏轮播图列表，返回数组
        [ApiUrl.EMAIL_LIST]: {
          list: [{
            id: "mail_001",
            title: "Welcome to Rummy",
            content: "Welcome to the game! We hope you enjoy your stay. <br>Here is a link to our website: https://www.google.com",
            createTime: "2023-10-27 10:00:00",
            sendName: "System",
            status: 0,
            // Unread
            emailAnnex: 0,
            emailAnnexVos: [],
            receive: 0
          }, {
            id: "mail_002",
            title: "Daily Reward",
            content: "Here is your daily login reward! Claim it now.",
            createTime: "2023-10-26 09:00:00",
            sendName: "Admin",
            status: 0,
            // Unread
            emailAnnex: 1,
            // Has attachment
            emailAnnexVos: [{
              type: 1,
              // Gold
              num: 1000,
              severalTimesWager: 1,
              memberFundLogOperationType: 1
            }],
            receive: 0 // Not received
          }, {
            id: "mail_003",
            title: "Maintenance Notice",
            content: "Server maintenance is scheduled for tomorrow at 2:00 AM.",
            createTime: "2023-10-25 14:30:00",
            sendName: "System",
            status: 1,
            // Read
            emailAnnex: 0,
            emailAnnexVos: [],
            receive: 0
          }],
          total: 3,
          pageNum: 1,
          pageSize: 10
        },
        [ApiUrl.GET_VIP_BONUS]: {
          bonus: 0
        },
        [ApiUrl.GET_RECHARGE_LIST]: [{
          channelType: 1,
          iconMax: "",
          iconMin: "",
          iconUrl: "https://via.placeholder.com/100",
          id: "mock_channel_01",
          limitDown: 100,
          limitUp: 10000,
          rateOfExchange: 1,
          type: 1,
          // Rookie Rechange
          name: "Mock Channel",
          preinstallList: [{
            defaultGold: 100,
            firstDepositBonusGold: 10,
            activityDailyFirstDepositProportion: 0,
            type: 1
          }, {
            defaultGold: 500,
            firstDepositBonusGold: 50,
            activityDailyFirstDepositProportion: 0,
            type: 1
          }]
        }, {
          channelType: 2,
          iconMax: "",
          iconMin: "",
          iconUrl: "https://via.placeholder.com/100",
          id: "mock_channel_02",
          limitDown: 100,
          limitUp: 20000,
          rateOfExchange: 1,
          type: 0,
          // Normal/Daily Recharge
          name: "Dana",
          preinstallList: [{
            defaultGold: 200,
            firstDepositBonusGold: 0,
            activityDailyFirstDepositProportion: 5,
            type: 2
          }, {
            defaultGold: 1000,
            firstDepositBonusGold: 0,
            activityDailyFirstDepositProportion: 10,
            type: 2
          }, {
            defaultGold: 5000,
            firstDepositBonusGold: 0,
            activityDailyFirstDepositProportion: 15,
            type: 2
          }]
        }],
        [ApiUrl.WITHDRAW_BANK_CHANNEL_LIST]: [],
        [ApiUrl.USER_ORDER_LIST]: [],
        [ApiUrl.RECOMMEND_DATA]: {},
        [ApiUrl.RECOMMEND_MEMBER_INFO]: null,
        [ApiUrl.BENEFIT]: {
          memberId: "mock_member_001",
          memberAssetGoldPieces: 10000
        },
        [ApiUrl.FCM_TOKEN_BIND]: {
          success: true
        },
        [ApiUrl.ADJUST_ACCEPT]: {
          success: true
        },
        [ApiUrl.GET_DAILY_TASK_LIST]: [],
        [ApiUrl.DAILY_TASK_RECEIVE]: {
          success: true
        },
        [ApiUrl.CHANNEL_PACKAGE]: {
          content: null
        },
        [ApiUrl.INVITE]: {
          success: true
        },
        [ApiUrl.GET_BIND_PHONE_GOLD]: {
          gold: 0
        },
        [ApiUrl.CODE_CONVER]: {
          success: true
        },
        [ApiUrl.DRAW_WATER]: {
          success: true
        },
        [ApiUrl.MYRECOMMENDINFO]: {},
        [ApiUrl.RECOMMEND_BIND]: {
          success: true
        },
        [ApiUrl.RECOMMENDDATATOTODAY]: 0,
        [ApiUrl.RECEIVE_EMAIL_ANNEX]: {
          success: true
        }
      });

      /**
       * 获取 mock 响应数据
       * @param url API URL
       * @param sendData 请求数据
       * @returns Mock 响应数据
       */
      function getMockResponse(url, sendData) {
        // 延迟模拟网络请求
        return new Promise(resolve => {
          setTimeout(() => {
            // 处理带查询参数的 URL，去掉查询参数再匹配
            const urlWithoutQuery = url.split('?')[0];
            let response = mockApiResponses[url] || mockApiResponses[urlWithoutQuery];

            // 特殊处理登录接口
            if (url === ApiUrl.LOGIN_FAST || url === ApiUrl.LOGIN_PWD || urlWithoutQuery === ApiUrl.LOGIN_FAST || urlWithoutQuery === ApiUrl.LOGIN_PWD) {
              // 如果是游客登录（type: 5），返回 token
              if ((sendData == null ? void 0 : sendData.type) === 5) {
                response = "mock_token_12345,false";
              } else {
                response = "mock_token_12345,false";
              }
            }

            // 如果没有找到对应的 mock 数据，根据 URL 推断返回类型
            if (response === undefined) {
              // 根据 URL 路径推断应该返回什么类型的数据
              if (urlWithoutQuery.includes('/list') || urlWithoutQuery.includes('/swipe')) {
                // 列表接口返回空数组
                response = [];
                console.log(`[Mock] 未找到 ${url} 的 mock 数据，返回空数组`);
              } else {
                // 其他接口返回空对象
                response = {};
                console.log(`[Mock] 未找到 ${url} 的 mock 数据，返回空对象`);
              }
            }
            console.log(`[Mock] 返回 ${url} 的 mock 数据:`, response);
            resolve(response);
          }, 100); // 模拟 100ms 延迟
        });
      }

      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/ModalBox.ts", ['cc', './globals.ts', './index5.ts', './NodeIOEffect.ts', './Singleton.ts', './prefabDefine.ts', './BaseViewModel2.ts'], function (exports) {
  var cclegacy, sourceManageSeletor, baseBoardView, getStore, EffectType, Singleton, PrefabPathDefine, BaseViewModel;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      sourceManageSeletor = module.sourceManageSeletor;
      baseBoardView = module.baseBoardView;
    }, function (module) {
      getStore = module.getStore;
    }, function (module) {
      EffectType = module.EffectType;
    }, function (module) {
      Singleton = module.default;
    }, function (module) {
      PrefabPathDefine = module.PrefabPathDefine;
    }, function (module) {
      BaseViewModel = module.default;
    }],
    execute: function () {
      cclegacy._RF.push({}, "ad1f6bZHTNFYL8Og6e8Tbea", "ModalBox", undefined);
      class ModalBox extends Singleton {
        constructor() {
          super();
          /**模态框是否是打开状态 */
          this.isShow = false;
          this.contentStr = '';
        }
        show(option, okHandler = () => true, cancleHandler = () => true) {
          this.isShow = true;
          this.contentStr = option.content;
          const modalBox = new BaseViewModel("Common_ModalBox").mountView(sourceManageSeletor("common").getFile(PrefabPathDefine.MODAL_BOX).source).appendTo(baseBoardView.viewNode, {
            effectType: EffectType.EFFECT1
          }).setProps({
            content: option.content,
            type: option.type,
            url: option.url,
            isVertical: !option.forceLandscape && getStore().getState().baseBoard.subGameInfo && getStore().getState().baseBoard.subGameInfo.isVertical
          }).setEvent({
            onCloseHandler: () => {
              this.isShow = false;
              this.contentStr = '';
              modalBox.unMount(EffectType.EFFECT1);
            },
            onCancleHandler: () => {
              this.isShow = false;
              this.contentStr = '';
              return cancleHandler();
            },
            onOkHandler: () => {
              this.isShow = false;
              this.contentStr = '';
              return okHandler();
            }
          });
        }
      }
      exports('default', ModalBox);
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/NodeIOEffect.ts", ['cc'], function (exports) {
  var UIOpacity, tween, cclegacy, Vec3;
  return {
    setters: [function (module) {
      UIOpacity = module.UIOpacity;
      tween = module.tween;
      cclegacy = module.cclegacy;
      Vec3 = module.Vec3;
    }],
    execute: function () {
      cclegacy._RF.push({}, "ddf30mMoqdEkbE/TKV3DhbY", "NodeIOEffect", undefined);
      let EffectType = exports('EffectType', /*#__PURE__*/function (EffectType) {
        EffectType[EffectType["EFFECT1"] = 0] = "EFFECT1";
        EffectType[EffectType["EFFECT2"] = 1] = "EFFECT2";
        EffectType[EffectType["EFFECT_FADE"] = 2] = "EFFECT_FADE";
        return EffectType;
      }({}));
      const getEffectByType = exports('getEffectByType', effectType => {
        switch (effectType) {
          case EffectType.EFFECT1:
            return effect1;
          case EffectType.EFFECT2:
            return effect2;
          case EffectType.EFFECT_FADE:
            return effectFade;
        }
      });

      /**缩放0.9，并渐变 */
      const effect1 = exports('effect1', target => {
        return {
          enter: option => {
            return new Promise(resolve => {
              const _option = Object.assign({
                tweenDuration: 0.5,
                scaleOrigin: {
                  x: 1,
                  y: 1
                }
              }, option || {});
              try {
                let opacityUI = target.getComponent(UIOpacity);
                !target.getComponent(UIOpacity) && (opacityUI = target.addComponent(UIOpacity));
                opacityUI.opacity = 0;
                target.setScale(_option.scaleOrigin.x * 0.7, _option.scaleOrigin.y * 0.7);
                tween(opacityUI).to(_option.tweenDuration, {
                  opacity: 255
                }).start();
                tween(target).to(_option.tweenDuration, {
                  scale: new Vec3(_option.scaleOrigin.x * 1, _option.scaleOrigin.x * 1, 1)
                }, {
                  easing: "backOut" //"elasticOut"
                }).call(() => {
                  resolve(target);
                }).start();
              } catch (e) {
                resolve(target);
              }
            });
          },
          out: (isDestroy = true, tweenDuration = 0.2) => {
            return new Promise(resolve => {
              try {
                let opacityUI = target.getComponent(UIOpacity);
                !target.getComponent(UIOpacity) && (opacityUI = target.addComponent(UIOpacity));
                tween(opacityUI).to(tweenDuration, {
                  opacity: 0
                }).start();
                tween(target).to(tweenDuration, {
                  scale: new Vec3(0.9, 0.9, 1)
                }).call(() => {
                  isDestroy && target.destroy();
                  resolve(target);
                }).start();
              } catch (e) {
                resolve(target);
              }
            });
          }
        };
      });

      /**放大1.1，并渐变 */
      const effect2 = exports('effect2', target => {
        return {
          enter: option => {
            return new Promise(resolve => {
              const _option = Object.assign({
                tweenDuration: 0.2,
                scaleOrigin: {
                  x: 1,
                  y: 1
                }
              }, option || {});
              try {
                let opacityUI = target.getComponent(UIOpacity);
                !target.getComponent(UIOpacity) && (opacityUI = target.addComponent(UIOpacity));
                opacityUI.opacity = 0;
                target.setScale(_option.scaleOrigin.x * 1.1, _option.scaleOrigin.y * 1.1);
                tween(opacityUI).to(_option.tweenDuration, {
                  opacity: 255
                }).start();
                tween(target).to(_option.tweenDuration, {
                  scale: new Vec3(_option.scaleOrigin.x * 1, _option.scaleOrigin.y * 1, 1)
                }).call(() => {
                  resolve(target);
                }).start();
              } catch (e) {
                resolve(target);
              }
            });
          },
          out: (isDestroy = true, tweenDuration = 0.2) => {
            return new Promise(resolve => {
              try {
                let opacityUI = target.getComponent(UIOpacity);
                !target.getComponent(UIOpacity) && (opacityUI = target.addComponent(UIOpacity));
                tween(opacityUI).to(tweenDuration, {
                  opacity: 0
                }).start();
                tween(target).to(tweenDuration, {
                  scale: new Vec3(1.1, 1.1, 1)
                }).call(() => {
                  isDestroy && target.destroy();
                  resolve(target);
                }).start();
              } catch (e) {
                resolve(target);
              }
            });
          }
        };
      });
      const effectFade = exports('effectFade', target => {
        return {
          enter: option => {
            return new Promise(resolve => {
              try {
                const _option = Object.assign({
                  tweenDuration: 0.3
                }, option || {});
                let opacityUI = target.getComponent(UIOpacity);
                !target.getComponent(UIOpacity) && (opacityUI = target.addComponent(UIOpacity));
                opacityUI.opacity = 0;
                tween(opacityUI).to(_option.tweenDuration, {
                  opacity: 255
                }).call(() => {
                  resolve(target);
                }).start();
              } catch (e) {
                resolve(target);
              }
            });
          },
          out: (isDestroy = true, tweenDuration = 0.3) => {
            return new Promise(resolve => {
              try {
                let opacityUI = target.getComponent(UIOpacity);
                !target.getComponent(UIOpacity) && (opacityUI = target.addComponent(UIOpacity));
                tween(opacityUI).to(tweenDuration, {
                  opacity: 0
                }).call(() => {
                  isDestroy && target.destroy();
                  resolve(target);
                }).start();
              } catch (e) {
                resolve(target);
              }
            });
          }
        };
      });
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/PersonCenterViewModel.ts", ['cc', './ViewModel.ts', './socketConnect.ts', './globals.ts', './baseBoard.ts', './Throttler.ts'], function (exports) {
  var cclegacy, ViewModel, hallWebSocketDriver, SKT_MAG_TYPE, lang, baseBoardView, addToastAction, Throttler;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      ViewModel = module.default;
    }, function (module) {
      hallWebSocketDriver = module.hallWebSocketDriver;
      SKT_MAG_TYPE = module.SKT_MAG_TYPE;
    }, function (module) {
      lang = module.lang;
      baseBoardView = module.baseBoardView;
    }, function (module) {
      addToastAction = module.addToastAction;
    }, function (module) {
      Throttler = module.default;
    }],
    execute: function () {
      cclegacy._RF.push({}, "94976Jrm9RD1afeyK6uQ2OY", "PersonCenterViewModel", undefined);
      class PersonCenterViewModel extends ViewModel {
        constructor() {
          super('Hall_PcMainPanel');
          this.memberInfoMedifyDone = void 0;
        }
        begin() {
          hallWebSocketDriver.sendSktMessage(SKT_MAG_TYPE.MEMBER_INFO, '', {
            isLoading: true
          });
          hallWebSocketDriver.sktMsgListener.add(SKT_MAG_TYPE.MODIFY_MEMBER_INFO, "member", (data, error) => {
            if (error) return;
            this.memberInfoMedifyDone && this.memberInfoMedifyDone();
            this.dispatch(addToastAction({
              content: lang.write(k => k.PersonCenterModule.PersonCenterEdit, {}, {
                placeStr: "玩家资料编辑成功"
              })
            }));
            hallWebSocketDriver.sendSktMessage(SKT_MAG_TYPE.MEMBER_INFO, {}, {
              isLoading: true
            });
          });
          // sktMsgListener.add(SKT_MAG_TYPE.CONVERSION, 'member', () => {
          //   this.dispatch(addToastAction({ content: lang.write(k => k.BaseBoardModule.OPERATE_DONE, {}, { placeStr: "操作成功" }) }))
          // })
          this.setEvent({
            memberInfoDone: (gender, nickName, avatarIndex, done) => {
              Throttler.isDebouncerAsync(SKT_MAG_TYPE.MODIFY_MEMBER_INFO, 1000, true, () => {
                this.dispatch(addToastAction({
                  content: lang.write(k => k.PersonCenterModule.PersonCenterSumbit, {}, {
                    placeStr: "操作过于频繁，请稍等~"
                  })
                }));
              }).then(isPass => {
                if (!baseBoardView.mainPanelViewModel.isTouristPass()) return;
                this.memberInfoMedifyDone = done;
                hallWebSocketDriver.sendSktMessage(SKT_MAG_TYPE.MODIFY_MEMBER_INFO, {
                  gender,
                  nickName,
                  avatarIndex
                }, {
                  isLoading: true
                });
              });
            }
          });
        }
        unMountCallBack() {
          hallWebSocketDriver.sktMsgListener.removeById("member");
        }
        connect() {
          const storeState = this.store.getState();
          this.inject({
            memberInfo: storeState.memberInfo,
            tourist: storeState.memberInfo.tourist
          }, state => {
            return {
              memberInfo: state.memberInfo,
              isShowWebView: state.baseBoard.isShowWebView,
              isLoadRecommendData: state.baseBoard.isLoadRecommendData,
              tourist: state.memberInfo.tourist
            };
          });
          return this;
        }
      }
      exports('default', PersonCenterViewModel);
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/prefabDefine.ts", ['cc', './SourceManage.ts'], function (exports) {
  var cclegacy, Prefab, loopFiles;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      Prefab = module.Prefab;
    }, function (module) {
      loopFiles = module.loopFiles;
    }],
    execute: function () {
      cclegacy._RF.push({}, "45167n7RG1ENKnkKiToiTf3", "prefabDefine", undefined);
      let PrefabPathDefine = exports('PrefabPathDefine', /*#__PURE__*/function (PrefabPathDefine) {
        PrefabPathDefine["MARQUEE"] = "prefabs/marquee";
        PrefabPathDefine["MARQUEE_INSERT"] = "prefabs/marquee_insert";
        PrefabPathDefine["MODAL_BOX"] = "prefabs/modalBoxSingle";
        PrefabPathDefine["GIFT_USER"] = "gift/prefabs/prefabs_gift_user";
        PrefabPathDefine["GIFT_ANIMATION"] = "gift/prefabs/prefabs_gift_animation";
        return PrefabPathDefine;
      }({}));
      var prefabDefine = exports('default', bundlePkgName => loopFiles(bundlePkgName, Prefab, PrefabPathDefine));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/prefabDefine2.ts", ['cc', './SourceManage.ts'], function (exports) {
  var cclegacy, Prefab, loopFiles;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      Prefab = module.Prefab;
    }, function (module) {
      loopFiles = module.loopFiles;
    }],
    execute: function () {
      cclegacy._RF.push({}, "9f6e8BGCJNHjZ+FN6WzjP7p", "prefabDefine", undefined);
      let PrefabPathDefine = exports('PrefabPathDefine', /*#__PURE__*/function (PrefabPathDefine) {
        PrefabPathDefine["LOADER_PANEL"] = "prefabs/loaderPanel";
        PrefabPathDefine["_LOGIN_PAGE_V2"] = "login/prefabs/V2/loginPage";
        PrefabPathDefine["_LOGIN_DIALOG_LOGIN_V2"] = "login/prefabs/V2/loginAkunLogin";
        PrefabPathDefine["_LOGIN_DIALOG_REG_V2"] = "login/prefabs/V2/loginRegister";
        PrefabPathDefine["_PROHIBIT_PANEL"] = "login/prefabs/V2/prohibitLogin";
        PrefabPathDefine["_LOGIN_SET_PASSWORD"] = "login/prefabs/loginSetPassword";
        PrefabPathDefine["BASE_BOARD"] = "prefabs/baseBoard";
        PrefabPathDefine["MAIN_PANEL"] = "prefabs/mainPanel";
        PrefabPathDefine["SUB_GAME_GATE"] = "prefabs/subGameGate";
        PrefabPathDefine["PC_MAIN_PANEL"] = "personalCenter/prefabs/pcMainPanel";
        PrefabPathDefine["PC_BACK_WATER"] = "personalCenter/prefabs/node_layout_water";
        PrefabPathDefine["_PC_CHANGE_NICKNAME"] = "personalCenter/prefabs/node_changeName_bg";
        PrefabPathDefine["_SHARE_HELP"] = "personalCenter/prefabs/node_share_help";
        PrefabPathDefine["_SHARE_SURE"] = "personalCenter/prefabs/node_share_sure";
        PrefabPathDefine["SHARE_Info"] = "personalCenter/prefabs/node_share_info";
        PrefabPathDefine["SHARE_MEMBER_LIST"] = "personalCenter/prefabs/node_share_member";
        PrefabPathDefine["_SHARE_SHARE_HELP"] = "personalCenter/prefabs/node_share_help";
        PrefabPathDefine["_HELL_ACTIVITY"] = "activity/prefabs/node_aktivitas";
        PrefabPathDefine["HELL_ACTIVITY_TURNTABLEPANL"] = "activity/prefabs/node_turntable";
        PrefabPathDefine["HELL_ACTIVITY_TURNTABLE_INTRO"] = "activity/prefabs/node_turntable_intro";
        PrefabPathDefine["HELL_ACTIVITY_TURNTABLE"] = "activity/prefabs/node_turntable2";
        PrefabPathDefine["HELL_ACTIVITY_TURNTABLEWIN"] = "activity/prefabs/note_turntable_win";
        PrefabPathDefine["_HELL_AWARD"] = "award/prefabs/node_award_level";
        PrefabPathDefine["_HELL_BANK"] = "bank/prefabs/node_bank";
        PrefabPathDefine["_HELL_MAIL"] = "mail/prefabs/node_mail";
        PrefabPathDefine["HELL_SHOP"] = "shop/prefabs/node_shop";
        PrefabPathDefine["HELL_SHOP_HISTORY"] = "shop/prefabs/node_history";
        PrefabPathDefine["HELL_SHOP_RACHARGE"] = "shop/prefabs/node_racharge_rule";
        PrefabPathDefine["HELL_WITHDRAWAL"] = "withdrawal/prefabs/node_withdrawal";
        PrefabPathDefine["_HELL_WITHDRAWAL_BANK_LIST"] = "withdrawal/prefabs/node_withdrawal_metode";
        PrefabPathDefine["_HELL_WITHDRAW_TIPS"] = "withdrawal/prefabs/node_withdrawal_tips";
        PrefabPathDefine["_HELL_WITHDRAW_BANK_BIND"] = "withdrawal/prefabs/node_withdrawal_nformasi";
        PrefabPathDefine["_HELL_WITHDRAW_WALLET_BIND"] = "withdrawal/prefabs/node_withdrawal_rekening";
        PrefabPathDefine["_HELL_WITHDRAW_BILL"] = "withdrawal/prefabs/node_withdrawal_catatan";
        PrefabPathDefine["_HELL_BIND_PHONE"] = "personalCenter/prefabs/node_prefabs_bindPhone";
        PrefabPathDefine["_HELL_SERVICE_WEBVIEW"] = "service/prefabs/prefabs_service";
        PrefabPathDefine["_HELL_UPGRADE"] = "personalCenter/prefabs/node_account_upgrade";
        PrefabPathDefine["_HELL_CHANGE_PASSWORD"] = "personalCenter/prefabs/node_account_changePassword";
        PrefabPathDefine["_HELL_RE_LIEF"] = "welcome/prefabs/benefit";
        PrefabPathDefine["_HELL_WELCOME"] = "welcome/prefabs/welcome";
        PrefabPathDefine["_HELL_GIFT_BAG"] = "shop/prefabs/node_tas";
        PrefabPathDefine["_HELL_CHOOSE_BANK"] = "shop/prefabs/node_chooseBank";
        PrefabPathDefine["HELL_WATER_HELP"] = "personalCenter/prefabs/node_water_help";
        PrefabPathDefine["_HELL_APP_DOWNLOAD_PANEL"] = "downloadGuide/prefabs/node_download_guide";
        PrefabPathDefine["_HELL_APP_DOWNLOAD_PANEL_IOS"] = "downloadGuide/prefabs/node_download_guide_ios";
        PrefabPathDefine["_HELL_SIGN_IN"] = "signIn/prefabs/hallSignIn";
        PrefabPathDefine["_HELL_VIP_UP"] = "vip/prefabs/vipUp";
        PrefabPathDefine["_HELL_VIP_MAIN"] = "vip/prefabs/VipMain_Alls";
        PrefabPathDefine["_WINNING_BOX"] = "prefabs/winningCar";
        PrefabPathDefine["_GUIDE_PANEL"] = "prefabs/guidePanel";
        PrefabPathDefine["_DAILY_TASK"] = "task/prefabs/prafabs_task";
        return PrefabPathDefine;
      }({}));
      var prefabDefine = exports('default', bundlePkgName => loopFiles(bundlePkgName, Prefab, PrefabPathDefine));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/RegV2ViewModel.ts", ['cc', './ViewModel.ts', './NodeIOEffect.ts', './apiUrl.ts', './index4.ts', './bridge.ts', './baseBoard.ts', './globals.ts'], function (exports) {
  var cclegacy, ViewModel, EffectType, ApiUrl, registerAdjustEvents, addToastAction, fetcher, lang;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      ViewModel = module.default;
    }, function (module) {
      EffectType = module.EffectType;
    }, function (module) {
      ApiUrl = module.ApiUrl;
    }, null, function (module) {
      registerAdjustEvents = module.registerAdjustEvents;
    }, function (module) {
      addToastAction = module.addToastAction;
    }, function (module) {
      fetcher = module.fetcher;
      lang = module.lang;
    }],
    execute: function () {
      cclegacy._RF.push({}, "fc09fJVgvpMHp8RfvM3D98U", "RegV2ViewModel", undefined);
      class RegV2ViewModel extends ViewModel {
        constructor() {
          super('Hall_RegPageV2');
        }
        begin() {
          this.setProps({});
          this.setEvent({
            closeHandler: () => {
              this.unMount(EffectType.EFFECT2);
            },
            regHandler: (loginName, password, verificationCode) => {
              console.log('regHandler', loginName, password, verificationCode);
              // fetcher.send(ApiUrl.REG, {
              //   pkgCode: getPackageName(),
              //   macCode: deviceInfo.getUniqueId(),
              //   memberName: defaultLanguageType[config.country].phoneAreaNum + loginName, password,
              //   verificationCode
              // }).then((data) => {
              //   const values = data.split(",")
              //   let token = values.length === 1 ? data : values[0];
              //   //注册成功
              //   sys.localStorage.setItem('token', token)
              //   this.comp.events.regDoneHandler()
              registerAdjustEvents();
              // }).catch((e) => {
              //   console.log(e)
              // })
            },

            sendSmsCode: phoneNumber => {
              return new Promise((reslove, reject) => {
                fetcher.send(ApiUrl.SEND_SMS, {
                  phone: phoneNumber
                }).then(rsp => {
                  this.dispatch(addToastAction({
                    content: lang.write(k => k.BindPhoneModule.BindPhoneSend, {}, {
                      placeStr: "验证信息已经发送，请注意查收"
                    })
                  }));
                  reslove(rsp);
                }).catch(e => {
                  this.dispatch(addToastAction({
                    content: lang.write(k => k.BindPhoneModule.BindPhonesSendError, {}, {
                      placeStr: "请求失败：${e}"
                    })
                  }));
                  reject(e);
                });
              });
            }
          });
        }
        connect(initProps = {}) {
          this.inject(initProps, state => {
            return {};
          });
          return this;
        }
      }
      exports('default', RegV2ViewModel);
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/ResetPasswordViewModel.ts", ['cc', './ViewModel.ts', './baseBoard.ts', './globals.ts'], function (exports) {
  var cclegacy, ViewModel, addToastAction, lang;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      ViewModel = module.default;
    }, function (module) {
      addToastAction = module.addToastAction;
    }, function (module) {
      lang = module.lang;
    }],
    execute: function () {
      cclegacy._RF.push({}, "ea16dh3kFxN1Zhgx1qV9erS", "ResetPasswordViewModel", undefined);
      class ResetPasswordViewModel extends ViewModel {
        constructor() {
          super('Hall_ResetPassword');
        }
        begin() {
          this.setEvent({
            sendSmsHandler: phoneNumber => {
              this.dispatch(addToastAction({
                content: lang.write(k => k.BindPhoneModule.BindPhoneSend, {}, {
                  placeStr: "验证信息已经发送，请注意查收"
                })
              }));
            },
            inputError: error => {
              this.dispatch(addToastAction({
                content: error
              }));
            }
          });
        }
        connect() {
          this.inject({}, state => {
            return {};
          });
          return this;
        }
      }
      exports('default', ResetPasswordViewModel);
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/RollerIcon.ts", ['cc'], function (exports) {
  var cclegacy, Component, _decorator;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      Component = module.Component;
      _decorator = module._decorator;
    }],
    execute: function () {
      var _dec, _class;
      cclegacy._RF.push({}, "ae1a0AJIBxMvKC73bPOAo9w", "RollerIcon", undefined);
      const {
        ccclass,
        property
      } = _decorator;
      let RollerIcon = exports('RollerIcon', (_dec = ccclass('RollerIcon'), _dec(_class = class RollerIcon extends Component {
        start() {}
        update(deltaTime) {}
      }) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/RollerListPanel.ts", ['cc'], function (exports) {
  var cclegacy, Component, _decorator;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      Component = module.Component;
      _decorator = module._decorator;
    }],
    execute: function () {
      var _dec, _class;
      cclegacy._RF.push({}, "636f4EuFZpJtJTldolsyKPi", "RollerListPanel", undefined);
      const {
        ccclass,
        property
      } = _decorator;
      let RollerListPanel = exports('RollerListPanel', (_dec = ccclass('RollerListPanel'), _dec(_class = class RollerListPanel extends Component {
        start() {}
        update(deltaTime) {}
      }) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/RollerSingle.ts", ['cc'], function (exports) {
  var cclegacy, Component, _decorator;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      Component = module.Component;
      _decorator = module._decorator;
    }],
    execute: function () {
      var _dec, _class;
      cclegacy._RF.push({}, "5b748fm7rJGTJr5dyNgWh4W", "RollerSingle", undefined);
      const {
        ccclass,
        property
      } = _decorator;
      let RollerSingle = exports('RollerSingle', (_dec = ccclass('RollerSingle'), _dec(_class = class RollerSingle extends Component {
        start() {}
        update(deltaTime) {}
      }) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/RSA.ts", ['cc'], function (exports) {
  var cclegacy;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }],
    execute: function () {
      cclegacy._RF.push({}, "f447akODYxEHKda3UUdGkn2", "RSA", undefined); // import JSEncrypt from 'jsencrypt'
      // import './jsencrypt.min.js'
      // var encrypt = new JSEncrypt();
      // encrypt.setPublicKey(`-----BEGIN PUBLIC KEY-----${keyPem.key_2048.publicStr}-----END PUBLIC KEY-----`);
      // var encryptedStr = encrypt.encrypt('Message too long for RSAMessage too long for RSAMessage too long for RSAMessage too long for RSAMessage too long for RSAMessage too long for RSAMessage too long for RSAMessage too long for RSAMessage too long for RSAMessage too long for RSAMessage too long for RSAMessage too long for RSAMessage too long for RSAMessage too long for RSAMessage too long for RSA')
      // console.log('encryptedStr', encryptedStr)

      // var decrypt = new JSEncrypt();
      // decrypt.setPrivateKey(`-----BEGIN PRIVATE KEY-----${keyPem.key_2048.privateStr}-----END PRIVATE KEY-----`);
      // var decryptedStr = decrypt.decrypt(encryptedStr as string);
      // console.log('decryptedStr', decryptedStr)
      /**
       * 使用私钥解密数据
       * @param dataToEncrypt 要解密的数据
       * @returns 
       */
      const encodeRSA = exports('encodeRSA', dataToEncrypt => {
        // const encrypt = new window.JSEncrypt()
        // encrypt.setPublicKey(`-----BEGIN PUBLIC KEY-----${keyPem.key1.publicStr}-----END PUBLIC KEY-----`)
        // return encrypt.encrypt(dataToEncrypt)
      });

      /**
       * 使用公钥加密数据
       * @param dataToDecrypt 要解密的数据
       * @returns 
       */
      const decodeRSA = exports('decodeRSA', dataToDecrypt => {
        // const decrypt = new window.JSEncrypt()
        // decrypt.setPrivateKey(`-----BEGIN PRIVATE KEY-----${keyPem.key1.privateStr}-----END PRIVATE KEY-----`)
        // return decrypt.decrypt(dataToDecrypt)
      });
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Schedule.ts", ['cc'], function (exports) {
  var cclegacy;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }],
    execute: function () {
      cclegacy._RF.push({}, "4e941kIf0VJbI0QS1GXWiGI", "Schedule", undefined);
      /**
       * 自定义的定时任务
       */
      class Schedule {
        constructor(component, callbackFun, interval, repeat) {
          /**定时任务方法 */
          this.scheduleFun = void 0;
          this.callbackFun = void 0;
          /**重复次数 */
          this.repeat = 0;
          /**间隔时间 */
          this.interval = 1;
          /**执行定时任务的组件 */
          this.component = void 0;
          this.running = false;
          this.component = component;
          this.callbackFun = callbackFun;
          this.interval = interval;
          this.repeat = repeat;
        }

        /**
         * 构建定时器
         * @param component 
         * @param interval 
         * @param scheduleFun 
         * @param repeat 重复次数，默认为0，标识执行一次
         * @returns 
         */
        static build(component, interval, scheduleFun, repeat = 0) {
          return new Schedule(component, scheduleFun, interval, repeat);
        }
        start() {
          this.stop();
          this.running = true;
          let count = 0;
          this.scheduleFun = () => {
            count++;
            this.callbackFun && this.callbackFun();
            if (count > this.repeat) {
              this.running = false;
            }
          };
          this.component.schedule(this.scheduleFun, this.interval, this.repeat);
        }
        stop() {
          this.running = false;
          this.component && this.component.isValid && this.component.unschedule(this.scheduleFun);
          this.scheduleFun = undefined;
        }
        isRunning() {
          return this.running;
        }
        destory() {
          this.stop();
          this.scheduleFun = undefined;
        }
      }
      exports('Schedule', Schedule);
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Shake.ts", ['cc'], function (exports) {
  var cclegacy, Vec3, tween;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      Vec3 = module.Vec3;
      tween = module.tween;
    }],
    execute: function () {
      cclegacy._RF.push({}, "23d7ep0+odKEonEVFqejynO", "Shake", undefined);

      /**
       * 摇动
       */
      class Shake {
        constructor() {
          this._originalPos = new Vec3();
        }
        _shakeX(target, duration, offset) {
          return tween(target).to(duration / 7, {
            position: new Vec3(target.position).add3f(offset + 1, 0, 0)
          }, {
            easing: "sineInOut"
          }).to(duration / 7, {
            position: new Vec3(target.position).add3f(-offset * 2 - 2, 0, 0)
          }, {
            easing: "sineInOut"
          }).to(duration / 7, {
            position: new Vec3(target.position).add3f(offset * 3 + 3, 0, 0)
          }, {
            easing: "sineInOut"
          }).to(duration / 7, {
            position: new Vec3(target.position).add3f(-offset * 4 - 4, 0, 0)
          }, {
            easing: "sineInOut"
          }).to(duration / 7, {
            position: new Vec3(target.position).add3f(offset * 3 + 3, 0, 0)
          }, {
            easing: "sineInOut"
          }).to(duration / 7, {
            position: new Vec3(target.position).add3f(-offset * 2 - 2, 0, 0)
          }, {
            easing: "sineInOut"
          }).to(duration / 7, {
            position: new Vec3(target.position).add3f(offset + 1, 0, 0)
          }, {
            easing: "sineInOut"
          });
        }
        _shakeY(target, duration, offset) {
          return tween(target).to(duration / 7, {
            position: new Vec3(target.position).add3f(0, offset + 1, 0)
          }, {
            easing: "sineInOut"
          }).to(duration / 7, {
            position: new Vec3(target.position).add3f(0, -offset * 2 - 2, 0)
          }, {
            easing: "sineInOut"
          }).to(duration / 7, {
            position: new Vec3(target.position).add3f(0, offset * 3 + 3, 0)
          }, {
            easing: "sineInOut"
          }).to(duration / 7, {
            position: new Vec3(target.position).add3f(0, -offset * 4 - 4, 0)
          }, {
            easing: "sineInOut"
          }).to(duration / 7, {
            position: new Vec3(target.position).add3f(0, offset * 3 + 3, 0)
          }, {
            easing: "sineInOut"
          }).to(duration / 7, {
            position: new Vec3(target.position).add3f(0, -offset * 2 - 2, 0)
          }, {
            easing: "sineInOut"
          }).to(duration / 7, {
            position: new Vec3(target.position).add3f(0, offset + 1, 0)
          }, {
            easing: "sineInOut"
          });
        }
        _shakeXY(target, duration, offset) {
          return tween(target).to(duration / 14, {
            position: new Vec3(target.position).add3f(offset + 1, 0, 0)
          }, {
            easing: "sineInOut"
          }).to(duration / 14, {
            position: new Vec3(target.position).add3f(0, offset + 1, 0)
          }, {
            easing: "sineInOut"
          }).to(duration / 14, {
            position: new Vec3(target.position).add3f(0, -offset * 2 - 2, 0)
          }, {
            easing: "sineInOut"
          }).to(duration / 14, {
            position: new Vec3(target.position).add3f(-offset * 2 - 2, 0, 0)
          }, {
            easing: "sineInOut"
          }).to(duration / 14, {
            position: new Vec3(target.position).add3f(offset * 3 + 3, 0, 0)
          }, {
            easing: "sineInOut"
          }).to(duration / 14, {
            position: new Vec3(target.position).add3f(0, offset * 3 + 3, 0)
          }, {
            easing: "sineInOut"
          }).to(duration / 14, {
            position: new Vec3(target.position).add3f(0, -offset * 4 - 4, 0)
          }, {
            easing: "sineInOut"
          }).to(duration / 14, {
            position: new Vec3(target.position).add3f(-offset * 4 - 4, 0, 0)
          }, {
            easing: "sineInOut"
          }).to(duration / 14, {
            position: new Vec3(target.position).add3f(0, offset * 3 + 3, 0)
          }, {
            easing: "sineInOut"
          }).to(duration / 14, {
            position: new Vec3(target.position).add3f(offset * 3 + 3, 0, 0)
          }, {
            easing: "sineInOut"
          }).to(duration / 14, {
            position: new Vec3(target.position).add3f(0, -offset * 2 - 2, 0)
          }, {
            easing: "sineInOut"
          }).to(duration / 14, {
            position: new Vec3(target.position).add3f(-offset * 2 - 2, 0, 0)
          }, {
            easing: "sineInOut"
          }).to(duration / 14, {
            position: new Vec3(target.position).add3f(0, offset + 1, 0)
          }, {
            easing: "sineInOut"
          }).to(duration / 14, {
            position: new Vec3(target.position).add3f(offset + 1, 0, 0)
          }, {
            easing: "sineInOut"
          });
        }

        /*
        Shake the target.
        Pass "x" to shake to the left and right.
        Pass "y" to shake to the top and bottom.
        Pass "xy" to shake in all directions.
        */
        shake(target, duration = 0.5, offset = 1, repeat = 1, direction = "xy", done = null) {
          if (Shake.isShakeIn(target)) {
            return tween();
          }
          this._originalPos = target.getWorldPosition().clone();
          let tw;
          if (direction.toLowerCase() === "x") {
            tw = this._shakeX(target, duration, offset);
          } else if (direction.toLowerCase() === "y") {
            tw = this._shakeY(target, duration, offset);
          } else {
            tw = this._shakeXY(target, duration, offset);
          }
          tw.to(0, {
            worldPosition: this._originalPos
          });
          tw.union();
          if (repeat === -1) {
            tw.repeatForever();
          } else {
            tw.repeat(repeat);
          }
          tw.call(() => {
            // target.setWorldPosition(this._originalPos);
            Shake.remove(target);
            done && done();
          });
          return tw;
        }
        static isShakeIn(node) {
          const bool = Shake.currentShakeNodes.hasOwnProperty(node.uuid);
          if (bool) {
            return true;
          }
          Shake.currentShakeNodes[node.uuid] = true;
          return false;
        }
        static remove(node) {
          delete Shake.currentShakeNodes[node.uuid];
        }
        static create() {
          return new Shake();
        }
      }
      exports('Shake', Shake);
      Shake.currentShakeNodes = {};
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/ShareHelpViewModel.ts", ['cc', './ViewModel.ts', './NodeIOEffect.ts', './baseBoard.ts'], function (exports) {
  var cclegacy, ViewModel, EffectType, changeWebView;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      ViewModel = module.default;
    }, function (module) {
      EffectType = module.EffectType;
    }, function (module) {
      changeWebView = module.changeWebView;
    }],
    execute: function () {
      cclegacy._RF.push({}, "d7a689AXg5E86/4nmh+Ipit", "ShareHelpViewModel", undefined);
      class ShareHelpViewModel extends ViewModel {
        constructor() {
          super('Hall_ShareHelp');
        }
        begin() {
          this.dispatch(changeWebView(false));
          this.setEvent({
            close: () => {
              this.unMount(EffectType.EFFECT2);
              this.dispatch(changeWebView(true));
            }
          });
        }
        connect() {
          this.inject({}, state => {
            return {};
          });
          return this;
        }
      }
      exports('default', ShareHelpViewModel);
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/ShareSureViewModel.ts", ['cc', './globals.ts', './ViewModel.ts', './NodeIOEffect.ts', './baseBoard.ts', './apiUrl.ts'], function (exports) {
  var cclegacy, fetcher, lang, ViewModel, EffectType, changeWebView, addToastAction, loadRecommendData, ApiUrl;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      fetcher = module.fetcher;
      lang = module.lang;
    }, function (module) {
      ViewModel = module.default;
    }, function (module) {
      EffectType = module.EffectType;
    }, function (module) {
      changeWebView = module.changeWebView;
      addToastAction = module.addToastAction;
      loadRecommendData = module.loadRecommendData;
    }, function (module) {
      ApiUrl = module.ApiUrl;
    }],
    execute: function () {
      cclegacy._RF.push({}, "dce23oBx4dB9Lz1BbHJGmPo", "ShareSureViewModel", undefined);
      class ShareSureViewModel extends ViewModel {
        constructor() {
          super('Hall_ShareSure');
        }
        begin() {
          this.dispatch(changeWebView(false));
          this.setEvent({
            close: () => {
              this.unMount(EffectType.EFFECT2);
              this.dispatch(changeWebView(true));
            },
            batalActing: actingId => {
              fetcher.send(ApiUrl.RECOMMEND_BIND, {
                promotionCode: actingId
              }, "post").then(rsp => {
                this.dispatch(addToastAction({
                  content: lang.write(k => k.MainPaneModule.ShareSure, {}, {
                    placeStr: "绑定成功"
                  })
                }));
                // 绑定之后重新加载推荐数据
                this.dispatch(loadRecommendData(0));
                this.comp.events.close();
              }).catch(e => {
                //this.dispatch(addToastAction({ content: e }))
              });
            }
          });
        }
        connect() {
          this.inject({}, state => {
            return {};
          });
          return this;
        }
      }
      exports('default', ShareSureViewModel);
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/ShopHistoryViewModel.ts", ['cc', './ViewModel.ts'], function (exports) {
  var cclegacy, ViewModel;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      ViewModel = module.default;
    }],
    execute: function () {
      cclegacy._RF.push({}, "53e4a31RrhNx69oSJ02cax8", "ShopHistoryViewModel", undefined);
      class ShopHistoryViewModel extends ViewModel {
        constructor() {
          super('Hall_shopHistoryPanel');
        }
        begin() {}
        connect() {
          this.inject({}, state => {
            return {};
          });
          return this;
        }
      }
      exports('default', ShopHistoryViewModel);
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/ShopRachargeRuleViewModel.ts", ['cc', './ViewModel.ts'], function (exports) {
  var cclegacy, ViewModel;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      ViewModel = module.default;
    }],
    execute: function () {
      cclegacy._RF.push({}, "bdfb6RJW9xNmKbmh73ZQKJ9", "ShopRachargeRuleViewModel", undefined);
      class ShopRachargeRuleViewModel extends ViewModel {
        constructor() {
          super('Hall_ShopRachargeRule');
        }
        begin() {}
        connect() {
          this.inject({}, state => {
            return {};
          });
          return this;
        }
      }
      exports('default', ShopRachargeRuleViewModel);
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/ShopViewModel.ts", ['cc', './ViewModel.ts', './socketConnect.ts', './InputValidator.ts', './baseBoard.ts', './index5.ts', './globals.ts', './ShopHistoryViewModel.ts', './prefabDefine2.ts', './NodeIOEffect.ts', './apiUrl.ts', './ShopRachargeRuleViewModel.ts', './types.ts'], function (exports) {
  var cclegacy, sys, Prefab, ViewModel, hallWebSocketDriver, SKT_MAG_TYPE, InputValidator, addToastAction, getStore, lang, sourceManageSeletor, fetcher, ShopHistoryViewModel, PrefabPathDefine, EffectType, ApiUrl, ShopRachargeRuleViewModel, ToastType;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      sys = module.sys;
      Prefab = module.Prefab;
    }, function (module) {
      ViewModel = module.default;
    }, function (module) {
      hallWebSocketDriver = module.hallWebSocketDriver;
      SKT_MAG_TYPE = module.SKT_MAG_TYPE;
    }, function (module) {
      InputValidator = module.default;
    }, function (module) {
      addToastAction = module.addToastAction;
    }, function (module) {
      getStore = module.getStore;
    }, function (module) {
      lang = module.lang;
      sourceManageSeletor = module.sourceManageSeletor;
      fetcher = module.fetcher;
    }, function (module) {
      ShopHistoryViewModel = module.default;
    }, function (module) {
      PrefabPathDefine = module.PrefabPathDefine;
    }, function (module) {
      EffectType = module.EffectType;
    }, function (module) {
      ApiUrl = module.ApiUrl;
    }, function (module) {
      ShopRachargeRuleViewModel = module.default;
    }, function (module) {
      ToastType = module.ToastType;
    }],
    execute: function () {
      cclegacy._RF.push({}, "80937vRm7BGyKZUvpR+G/fy", "ShopViewModel", undefined);
      class ShopViewModel extends ViewModel {
        constructor() {
          super('Hall_ShopPanel');
          this.isDana = false;
        }
        begin() {
          this.getRechargeList();
          // hallWebSocketDriver.sktMsgListener.add(SKT_MAG_TYPE.GET_WITH_DRAW_CHANNEL, 'shop', (data, error) => {
          //   !error && this.setProps({
          //     dataList: data
          //   })
          //   // this.dispatch(setLoadingAction({ isShow: false }))
          // })
          hallWebSocketDriver.sktMsgListener.add(SKT_MAG_TYPE.RECHARGE_ORDER, 'shop', (data, error) => {
            if (error) return;
            // this.dispatch(setLoadingAction({ isShow: false }))
            if (data) {
              // if (!this.isDana) {
              //   //DANA渠道不支持ifream
              //   ModalBox.Instance().show({ url: data })
              // } else {
              //   sys.openURL(data)
              // }
              sys.openURL(data);
            } else {
              this.dispatch(addToastAction({
                content: lang.write(k => k.WebSocketModule.WebSocketError, {}, {
                  placeStr: "network error"
                }),
                type: ToastType.ERROR
              }));
            }
          });
          // hallWebSocketDriver.sendSktMessage(SKT_MAG_TYPE.GET_WITH_DRAW_CHANNEL, {}, { isLoading: true })
          this.setEvent({
            rechargeHandler: (channelItem, amount) => {
              this.isDana = channelItem.name === "DANA" ? true : false;
              // 暂时不限制游客充值
              // if (!baseBoardView.mainPanelViewModel.isTouristPass()) return
              new InputValidator().begin().isDecimal(amount, false).done(() => {
                hallWebSocketDriver.sendSktMessage(SKT_MAG_TYPE.RECHARGE_ORDER, {
                  "rechargeChannelId": channelItem.id,
                  "money": amount
                }, {
                  isLoading: true
                });
                // purchaseAppsflyerEvents(amount, 'IDR')
              });
            },

            openShopHistory: async () => {
              const shopHistoryViewModel = new ShopHistoryViewModel().mountView((await sourceManageSeletor().getFileAsync(PrefabPathDefine.HELL_SHOP_HISTORY, Prefab)).source).appendTo(this.parentNode, {
                effectType: EffectType.EFFECT1,
                isModal: true
              }).setEvent({
                onClosePanel: () => {
                  shopHistoryViewModel.unMount(EffectType.EFFECT2);
                }
              }).connect();
              //列表
              fetcher.send(ApiUrl.USER_ORDER_LIST, {
                data: 1
              }).then(async rsp => {
                shopHistoryViewModel.setProps({
                  shopHistoryList: rsp
                });
              }).catch(e => {
                console.log(e);
              });
            },
            openRachargeRule: () => {
              const shopRachargeRuleViewModel = new ShopRachargeRuleViewModel().mountView(sourceManageSeletor().getFile(PrefabPathDefine.HELL_SHOP_RACHARGE).source).appendTo(this.parentNode, {
                effectType: EffectType.EFFECT1,
                isModal: true
              }).setEvent({
                onClosePanel: () => {
                  shopRachargeRuleViewModel.unMount(EffectType.EFFECT2);
                }
              }).connect();
            }
          });
        }
        getRechargeList() {
          fetcher.send(ApiUrl.GET_RECHARGE_LIST, {}, "get").then(async rsp => {
            let rechargeType = this.comp.getTypeValue(rsp);
            this.setProps({
              dataList: rsp,
              rechargeType
            });
          }).catch(e => {
            console.log(e);
          });
        }
        unMountCallBack() {
          hallWebSocketDriver.sktMsgListener.removeById('shop');
        }
        connect() {
          this.inject({
            memberInfo: getStore().getState().memberInfo
          }, state => {
            return {
              memberInfo: state.memberInfo,
              chooseAmount: state.baseBoard.chooseAmount
            };
          });
          return this;
        }
      }
      exports('default', ShopViewModel);
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/SignInViewModel.ts", ['cc', './ViewModel.ts', './apiUrl.ts', './globals.ts', './memberInfo2.ts'], function (exports) {
  var cclegacy, ViewModel, ApiUrl, fetcher, changeGold;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      ViewModel = module.default;
    }, function (module) {
      ApiUrl = module.ApiUrl;
    }, function (module) {
      fetcher = module.fetcher;
    }, function (module) {
      changeGold = module.changeGold;
    }],
    execute: function () {
      cclegacy._RF.push({}, "9074a4WVpdAqojphW6PpOCi", "SignInViewModel", undefined);
      class SignInViewModel extends ViewModel {
        constructor() {
          super('Hall_SignIn');
        }
        begin() {
          this.getSignInList();
          this.setEvent({
            requestGetSignInList: () => {
              this.getSignInList();
            },
            requestSign: weekType => {
              this.signIn(weekType);
            },
            // close: () => {
            //   this.unMount(EffectType.EFFECT2);
            // },
            onChangeGold: value => {
              this.dispatch(changeGold(value));
            }
          });
        }
        unMountCallBack() {}
        connect() {
          this.inject({}, state => {
            return {
              memberInfo: state.memberInfo
            };
          });
          return this;
        }
        getSignInList() {
          fetcher.send(ApiUrl.GET_MEMBER_SIGN_IN_LIST, {}, "get").then(rsp => {
            this.setProps({
              signInDatas: rsp,
              signSuccess: false
            });
          }).catch(e => {
            //this.dispatch(addToastAction({ content: e }))
          });
        }
        signIn(weekType) {
          fetcher.send(ApiUrl.SIGN_IN, {}, "post").then(rsp => {
            this.setProps({
              signSuccess: true
            });
          }).catch(e => {
            //this.dispatch(addToastAction({ content: e }))
          });
        }
      }
      exports('default', SignInViewModel);
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/SimpleHtmlParser.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc'], function (exports) {
  var _applyDecoratedDescriptor, _initializerDefineProperty, cclegacy, Node, SpriteAtlas, _decorator, Component, RichText, UITransform;
  return {
    setters: [function (module) {
      _applyDecoratedDescriptor = module.applyDecoratedDescriptor;
      _initializerDefineProperty = module.initializerDefineProperty;
    }, function (module) {
      cclegacy = module.cclegacy;
      Node = module.Node;
      SpriteAtlas = module.SpriteAtlas;
      _decorator = module._decorator;
      Component = module.Component;
      RichText = module.RichText;
      UITransform = module.UITransform;
    }],
    execute: function () {
      var _dec, _dec2, _dec3, _dec4, _class, _class2, _descriptor, _descriptor2, _descriptor3;
      cclegacy._RF.push({}, "a3087toTZpBpJTFy9HhXlVr", "SimpleHtmlParser", undefined);
      const {
        ccclass,
        property
      } = _decorator;
      class SimpleHtmlParser {
        /**
         * 将 HTML 转换为 Cocos RichText 支持的 BBCode 格式
         */
        static toRichText(html) {
          if (!html) return "";

          // 预处理：将 <br> 替换为换行符
          let processedHtml = html.replace(/<br\s*\/?>/gi, '\n');

          // 匹配标签或文本
          const tokenRegex = /<[^>]+>|[^<]+/g;
          const tokens = processedHtml.match(tokenRegex) || [];
          let result = "";
          const tagStack = [];
          for (const token of tokens) {
            if (token.startsWith('<')) {
              // 标签处理
              if (token.startsWith('</')) {
                // 结束标签
                // 简单处理：只要栈里有对应的开始标签产生的 BBCode，就闭合它
                // 注意：这里假设 HTML 结构是良好的，或者我们只闭合我们生成的标签
                // 由于我们需要对应闭合，这里我们维护一个生成的 BBCode 标签栈会更准确
                // 但为了简化，我们假设 closing tag 对应最近的一个需要闭合的样式

                // 更健壮的做法：
                // 我们在开始标签时，如果生成了 BBCode (如 <color=...>), 我们就压入 </color> 到栈中
                // 遇到结束标签时，我们弹出栈顶并追加到结果

                const closingTags = tagStack.pop();
                if (closingTags) {
                  result += closingTags;
                }
              } else {
                // 开始标签
                const tagNameMatch = token.match(/<([a-zA-Z0-9]+)/);
                if (!tagNameMatch) continue;
                const tagName = tagNameMatch[1].toLowerCase();
                const isSelfClosing = token.endsWith('/>');

                // 解析属性
                const attrs = {};
                const attrRegex = /([a-zA-Z0-9-]+)=['"]([^'"]*)['"]/g;
                let attrMatch;
                while ((attrMatch = attrRegex.exec(token)) !== null) {
                  attrs[attrMatch[1]] = attrMatch[2];
                }
                let openTags = "";
                let closeTags = "";

                // 1. 处理 style 属性
                if (attrs.style) {
                  const style = attrs.style.toLowerCase();

                  // color
                  const colorMatch = style.match(/color:\s*([^;]+)/);
                  if (colorMatch) {
                    openTags += `<color=${colorMatch[1].trim()}>`;
                    closeTags = `</color>` + closeTags;
                  }

                  // font-size
                  const sizeMatch = style.match(/font-size:\s*(\d+)/);
                  if (sizeMatch) {
                    openTags += `<size=${sizeMatch[1]}>`;
                    closeTags = `</size>` + closeTags;
                  }

                  // font-weight: bold
                  if (style.includes('font-weight:bold') || style.includes('font-weight: bold')) {
                    openTags += `<b>`;
                    closeTags = `</b>` + closeTags;
                  }

                  // font-style: italic
                  if (style.includes('font-style:italic') || style.includes('font-style: italic')) {
                    openTags += `<i>`;
                    closeTags = `</i>` + closeTags;
                  }

                  // text-decoration: underline
                  if (style.includes('text-decoration:underline') || style.includes('text-decoration: underline')) {
                    openTags += `<u>`;
                    closeTags = `</u>` + closeTags;
                  }
                }

                // 2. 处理标签本身的属性映射
                if (tagName === 'font') {
                  if (attrs.color) {
                    openTags += `<color=${attrs.color}>`;
                    closeTags = `</color>` + closeTags;
                  }
                  if (attrs.size) {
                    openTags += `<size=${attrs.size}>`;
                    closeTags = `</size>` + closeTags;
                  }
                } else if (tagName === 'b' || tagName === 'strong') {
                  openTags += `<b>`;
                  closeTags = `</b>` + closeTags;
                } else if (tagName === 'i' || tagName === 'em') {
                  openTags += `<i>`;
                  closeTags = `</i>` + closeTags;
                } else if (tagName === 'u') {
                  openTags += `<u>`;
                  closeTags = `</u>` + closeTags;
                } else if (tagName === 'color') {
                  // 自定义标签支持
                  if (attrs.value) {
                    // <color value=...>
                    openTags += `<color=${attrs.value}>`;
                    closeTags = `</color>` + closeTags;
                  }
                } else if (tagName === 'div' || tagName === 'p') {
                  // 块级元素，开始标签前添加换行
                  if (result.length > 0 && !result.endsWith('\n')) {
                    result += '\n';
                  }
                  // 结束标签时也换行
                  closeTags = `\n` + closeTags;
                } else ;

                // 3. 处理 img (RichText 支持 <img src=.../>)
                if (tagName === 'img' && attrs.src) {
                  // RichText 的 img 标签 src 对应的是 ImageAtlas 中的 SpriteFrame 名称
                  // 或者在 imageAtlas 未设置时，对应 resources 下的路径（Cocos Creator 版本差异可能不同，通常推荐使用 imageAtlas）
                  // 格式: <img src='name' width=... height=... align=... />
                  let imgTag = `<img src='${attrs.src}'`;

                  // 处理宽高
                  // 注意：HTML style 中的 width/height 优先级可能更高，但这里先处理属性
                  // 如果有 style="width: 100px..." 需要解析 style
                  let width = attrs.width;
                  let height = attrs.height;
                  if (attrs.style) {
                    const style = attrs.style.toLowerCase();
                    const wMatch = style.match(/width:\s*(\d+)/);
                    if (wMatch) width = wMatch[1];
                    const hMatch = style.match(/height:\s*(\d+)/);
                    if (hMatch) height = hMatch[1];
                  }
                  if (width) imgTag += ` width=${width}`;
                  if (height) imgTag += ` height=${height}`;
                  imgTag += ` />`;
                  openTags += imgTag;
                  // img 是自闭合的，不需要 closeTags
                }

                result += openTags;
                if (!isSelfClosing) {
                  tagStack.push(closeTags);
                } else {
                  // 自闭合标签，如果有产生的 closeTags (比如 style 产生的)，立即闭合
                  // 但通常自闭合标签如 img, br 不会有内容样式包裹
                  result += closeTags;
                }
              }
            } else {
              // 文本内容
              let content = token;
              // 1. 归一化空白字符：将所有空白字符序列（包括换行）替换为单个空格
              content = content.replace(/\s+/g, ' ');

              // 2. 如果当前结果以换行结尾，且文本以空格开头，移除开头的空格
              // 这避免了 </div>\n<p> 产生额外的空格或空行
              if (result.endsWith('\n') && content.startsWith(' ')) {
                content = content.substring(1);
              }

              // 转义字符还原
              content = content.replace(/&nbsp;/g, ' ').replace(/&lt;/g, '<').replace(/&gt;/g, '>').replace(/&amp;/g, '&');
              result += content;
            }
          }
          return result;
        }
      }
      exports('SimpleHtmlParser', SimpleHtmlParser);
      let CustomHtmlRenderer = exports('CustomHtmlRenderer', (_dec = ccclass('CustomHtmlRenderer'), _dec2 = property(Node), _dec3 = property({
        tooltip: "最大宽度，用于自动换行"
      }), _dec4 = property({
        type: SpriteAtlas,
        tooltip: "用于 RichText 的图片图集"
      }), _dec(_class = (_class2 = class CustomHtmlRenderer extends Component {
        constructor(...args) {
          super(...args);
          _initializerDefineProperty(this, "contentContainer", _descriptor, this);
          _initializerDefineProperty(this, "maxWidth", _descriptor2, this);
          _initializerDefineProperty(this, "imageAtlas", _descriptor3, this);
        }
        renderHtml(html) {
          if (!this.contentContainer) {
            this.contentContainer = this.node;
          }
          // 获取或添加 RichText 组件
          let richText = this.contentContainer.getComponent(RichText);
          if (!richText) {
            richText = this.contentContainer.addComponent(RichText);
          }

          // 设置 RichText 属性
          if (this.maxWidth > 0) {
            richText.maxWidth = this.maxWidth;
            const trans = this.contentContainer.getComponent(UITransform);
            if (trans) trans.width = this.maxWidth;
          }
          if (this.imageAtlas) {
            richText.imageAtlas = this.imageAtlas;
          }

          // 转换并设置文本
          richText.string = SimpleHtmlParser.toRichText(html).trim();
        }
      }, (_descriptor = _applyDecoratedDescriptor(_class2.prototype, "contentContainer", [_dec2], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function () {
          return null;
        }
      }), _descriptor2 = _applyDecoratedDescriptor(_class2.prototype, "maxWidth", [_dec3], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function () {
          return 0;
        }
      }), _descriptor3 = _applyDecoratedDescriptor(_class2.prototype, "imageAtlas", [_dec4], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function () {
          return null;
        }
      })), _class2)) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Singleton.ts", ['cc'], function (exports) {
  var cclegacy;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }],
    execute: function () {
      cclegacy._RF.push({}, "18dbcMbF6dMVb1b7Ycn7kfd", "Singleton", undefined);
      class Singleton {
        constructor() {}
        static Instance() {
          if (!this.instance) {
            this.instance = new this();
          }
          return this.instance;
        }
      }
      exports('default', Singleton);
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/skeletalDefine.ts", ['cc', './SourceManage.ts'], function (exports) {
  var sp, cclegacy, loopFiles;
  return {
    setters: [function (module) {
      sp = module.sp;
      cclegacy = module.cclegacy;
    }, function (module) {
      loopFiles = module.loopFiles;
    }],
    execute: function () {
      cclegacy._RF.push({}, "f6784QLug9G365pq852QlHr", "skeletalDefine", undefined);
      let SkeletalPathDefine = exports('SkeletalPathDefine', /*#__PURE__*/function (SkeletalPathDefine) {
        SkeletalPathDefine["_GEMINI_GATE"] = "icon/binaryStar/small/szj_rk";
        SkeletalPathDefine["_DOMINO_GATE_S"] = "icon/domino/small/domino";
        SkeletalPathDefine["_DOMINO_GATE_L"] = "icon/domino/large/rk_dmn_da";
        SkeletalPathDefine["_FRUITS_GATE_S"] = "icon/fruits777/small/shuiguo";
        SkeletalPathDefine["_FRUITS_GATE_L"] = "icon/fruits777/large/rk_shuiguo_da";
        SkeletalPathDefine["_QIU_QIU_S"] = "icon/qiuqiu/small/qiuqiu";
        SkeletalPathDefine["_QIU_QIU_L"] = "icon/qiuqiu/large/qiuqiuda";
        SkeletalPathDefine["_CRASH_GATE_S"] = "icon/crash/small/Crash";
        SkeletalPathDefine["_CRASH_GATE_L"] = "icon/crash/large/Crash_da";
        SkeletalPathDefine["_CSRUKOU_GATE_S"] = "icon/csrukou/small/rukou_caishen_xiao";
        SkeletalPathDefine["_CSRUKOU_GATE_L"] = "icon/csrukou/large/csrukou";
        SkeletalPathDefine["_GXFC_GATE_S"] = "icon/gxfc/small/gongxifacai02";
        SkeletalPathDefine["_GXFC_GATE_L"] = "icon/gxfc/large/rk_gxfc_da";
        SkeletalPathDefine["_EGYPT_GATE_S"] = "icon/egypt/small/rk_aiji_s";
        SkeletalPathDefine["_EGYPT_GATE_L"] = "icon/egypt/large/rk_aiji_da";
        SkeletalPathDefine["_LONG_RK_GATE_S"] = "icon/dragon/small/longrk";
        SkeletalPathDefine["_LONG_RK_GATE_L"] = "icon/dragon/large/rk_long_da";
        SkeletalPathDefine["_GENG_HUANG_GATE_S"] = "icon/phoenix/small/fenghuangrk";
        SkeletalPathDefine["_GENG_HUANG_GATE_L"] = "icon/phoenix/large/rk_fenghuang_da";
        SkeletalPathDefine["_DFDC_S"] = "icon/dfdc/small/duocaiduofu_xiao";
        SkeletalPathDefine["_DFDC_L"] = "icon/dfdc/large/duocaiduofu_big";
        SkeletalPathDefine["_YXXRK_GATE_S"] = "icon/yxx/small/yxxrk";
        SkeletalPathDefine["_YXXRK_GATE_L"] = "icon/yxx/large/rk_yxx_da";
        SkeletalPathDefine["_DRAGON_TIGER_GATE_S"] = "icon/dragonTiger/small/longhurk";
        SkeletalPathDefine["_DRAGON_TIGER_GATE_L"] = "icon/dragonTiger/large/rk_longhu_da";
        SkeletalPathDefine["_BANDAR_S"] = "icon/bandar/small/rk_bandar";
        SkeletalPathDefine["_BANDAR_L"] = "icon/bandar/large/rk_bandar_da";
        SkeletalPathDefine["_BANDARQIUQIU_S"] = "icon/bandarQiuQiu/small/rukou_bdqiuqiu_big";
        SkeletalPathDefine["_BANDARQIUQIU_L"] = "icon/bandarQiuQiu/large/rukou_bdqiuqiu_big";
        SkeletalPathDefine["_THOR_S"] = "icon/olympus/small/rk_leishen_xiao";
        SkeletalPathDefine["_THOR_L"] = "icon/olympus/large/rk_leishen_da";
        SkeletalPathDefine["_STAR_S"] = "icon/starlight/small/rukou_xggz_x";
        SkeletalPathDefine["_STAR_L"] = "icon/starlight/large/rukou_xggz_da";
        SkeletalPathDefine["_FISHING_S"] = "icon/fish/small/buyu_xiao";
        SkeletalPathDefine["_FISHING_L"] = "icon/fish/large/buyu";
        SkeletalPathDefine["_RUMMY_S"] = "icon/rummy/small/rummy_xiao";
        SkeletalPathDefine["_RUMMY_L"] = "icon/rummy/large/rummy_big";
        SkeletalPathDefine["_FORTUNET_TIGER_S"] = "icon/fortuneTiger/small/rk_zch_xiao";
        SkeletalPathDefine["_FORTUNET_TIGER_L"] = "icon/fortuneTiger/large/rk_zch_da";
        return SkeletalPathDefine;
      }({}));
      var skeletalDefine = exports('default', bundlePkgName => loopFiles(bundlePkgName, sp.SkeletonData, SkeletalPathDefine));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/skeletonDefine.ts", ['cc', './SourceManage.ts'], function (exports) {
  var sp, cclegacy, loopFiles;
  return {
    setters: [function (module) {
      sp = module.sp;
      cclegacy = module.cclegacy;
    }, function (module) {
      loopFiles = module.loopFiles;
    }],
    execute: function () {
      cclegacy._RF.push({}, "f9afbds45RJMJoGyO0dxKtO", "skeletonDefine", undefined);
      let SkeletonPathDefine = exports('SkeletonPathDefine', /*#__PURE__*/function (SkeletonPathDefine) {
        SkeletonPathDefine["egg"] = "gift/car/jidan";
        SkeletonPathDefine["durian"] = "gift/car/liulian";
        SkeletonPathDefine["rose"] = "gift/car/meigui";
        SkeletonPathDefine["pan"] = "gift/car/pdg";
        SkeletonPathDefine["beer"] = "gift/car/pjgb";
        SkeletonPathDefine["money"] = "gift/car/qian";
        SkeletonPathDefine["bucket"] = "gift/car/shuitong";
        SkeletonPathDefine["shoe"] = "gift/car/tuoxie";
        SkeletonPathDefine["kiss"] = "gift/car/wen";
        SkeletonPathDefine["cock"] = "gift/car/zhuaji";
        SkeletonPathDefine["brick"] = "gift/car/zhuantou";
        SkeletonPathDefine["tomato"] = "gift/car/xihongshi";
        return SkeletonPathDefine;
      }({}));
      var skeletonDefine = exports('default', bundlePkgName => loopFiles(bundlePkgName, sp.SkeletonData, SkeletonPathDefine));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/SkeletonPlay.ts", ['cc'], function (exports) {
  var cclegacy, _decorator;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      _decorator = module._decorator;
    }],
    execute: function () {
      var _class;
      cclegacy._RF.push({}, "2109caDYxBNXbBZbmiEGGur", "SkeletonPlay", undefined);
      const {
        ccclass,
        property
      } = _decorator;
      /* Skeleton播放类 new SkeletonAnimationPlayer(sp.Skeleton, 动画string, 循环true,是否需要回调()=>{}).playAnimation();*/
      let SkeletonAnimationPlayer = exports('default', ccclass(_class = class SkeletonAnimationPlayer {
        constructor(skeleton, animationName, loop = false, onAnimationComplete) {
          this.skeleton = null;
          this.animationName = "";
          this.loop = false;
          this.onAnimationComplete = null;
          this.skeleton = skeleton;
          this.animationName = animationName;
          this.loop = loop;
          this.onAnimationComplete = onAnimationComplete || null; // 使用默认值为 null
        }
        /* 播放 */
        playAnimation() {
          if (this.skeleton && this.animationName) {
            // 监听动画播放完成事件
            this.skeleton && this.skeleton.setCompleteListener(trackEntry => {
              if (trackEntry.animation.name === this.animationName && this.onAnimationComplete) {
                this.onAnimationComplete();
              }
            });

            // 设置循环
            this.skeleton.setAnimation(0, this.animationName, this.loop);
          } else {
            console.error("Skeleton or animation name not assigned.");
          }
        }
        /* 暂停 */
        stopAnimation() {
          if (this.skeleton) {
            this.skeleton.clearTracks();
          }
        }
        getAnimationName() {
          return this.animationName;
        }
        /*切换到不同的动画 */
        changeAnimation(animationName, isLoop = false, onAnimationComplete = null) {
          this.animationName = animationName;
          this.loop = isLoop;
          this.onAnimationComplete = onAnimationComplete;
          this.playAnimation();
        }
      }) || _class);
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/SktListener.ts", ['cc'], function (exports) {
  var cclegacy;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }],
    execute: function () {
      cclegacy._RF.push({}, "b83feuUbq5NQZNvhZXmT7+G", "SktListener", undefined);
      class SktListener {
        constructor() {
          this.dataMap = [];
        }
        addOnce(key, id, handler, sortId = 0) {
          const listenerItem = this.add(key, id, handler, sortId);
          listenerItem.isAutoRemove = true;
        }
        add(key, id, handler, sortId = 0) {
          let item = this.dataMap.find(i => i.key === key);
          if (!item) {
            item = {
              key,
              isAutoRemove: false,
              handlerList: [{
                id,
                sortId,
                handler
              }]
            };
            this.dataMap.push(item);
          } else {
            item.handlerList.push({
              id,
              sortId,
              handler
            });
          }
          return item;
        }
        dispath(key, data, error) {
          const item = this.dataMap.find(i => i.key === key);
          if (item) {
            item.handlerList.sort((a, b) => a.sortId - b.sortId).forEach(item => item.handler(data, error));
            item.isAutoRemove && (this.dataMap = this.dataMap.filter(i => i.key !== key));
          }
        }
        clearLinster() {
          this.dataMap = [];
        }
        // remove(key: SKT_MAG_TYPE, id?: string) {
        //   if (id) {
        //     let item = this.dataMap.find(item => item.key === key)
        //     item.handlerList = item.handlerList.filter(item => item.id !== id)
        //   } else {
        //     this.dataMap = this.dataMap.filter(item => item.key !== key)
        //   }
        // }
        remove(key, id) {
          if (id) {
            let item = this.dataMap.find(item => item.key === key);
            item && (item.handlerList = item.handlerList.filter(item => item.id !== id));
          } else {
            this.dataMap = this.dataMap.filter(item => item.key !== key);
          }
        }
        removeById(id) {
          this.dataMap.forEach(item => {
            item.handlerList = item.handlerList.filter(item => item.id !== id);
          });
        }
      }
      exports('default', SktListener);
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/SlotSpeedConfig.ts", ['cc'], function (exports) {
  var cclegacy;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }],
    execute: function () {
      cclegacy._RF.push({}, "18a7e9CEL9GQqWIwBqZn4sN", "SlotSpeedConfig", undefined);
      const ROLL_TIME = exports('ROLL_TIME', 200);
      const getSpeedTime = exports('getSpeedTime', isSpeed => {
        // 这里调停止滚动的速度
        return isSpeed ? 0.01 : 0.5;
      });
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/socketConnect.ts", ['cc', './config.ts', './hallConfig.ts', './baseBoard.ts', './globals.ts', './WebSocketStarter.ts', './ModalBox.ts', './TaskScheduler.ts', './types.ts'], function (exports) {
  var cclegacy, initConfig, subGameList, config, EVEVT_TYPE, SKT_OPERATION, setSocketConnectStatus, addToastAction, hallDispatch, lang, baseBoardView, WebSocketStarter, WebSocketDriver, ModalBox, TaskSchedulerDefault, Task, ToastType;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      initConfig = module.initConfig;
      subGameList = module.subGameList;
    }, function (module) {
      config = module.config;
      EVEVT_TYPE = module.EVEVT_TYPE;
      SKT_OPERATION = module.SKT_OPERATION;
      var _setter = {};
      _setter.EVEVT_TYPE = module.EVEVT_TYPE;
      _setter.SKT_OPERATION = module.SKT_OPERATION;
      exports(_setter);
    }, function (module) {
      setSocketConnectStatus = module.setSocketConnectStatus;
      addToastAction = module.addToastAction;
    }, function (module) {
      hallDispatch = module.hallDispatch;
      lang = module.lang;
      baseBoardView = module.baseBoardView;
    }, function (module) {
      WebSocketStarter = module.default;
      WebSocketDriver = module.WebSocketDriver;
    }, function (module) {
      ModalBox = module.default;
    }, function (module) {
      TaskSchedulerDefault = module.TaskSchedulerDefault;
      Task = module.Task;
    }, function (module) {
      ToastType = module.ToastType;
    }],
    execute: function () {
      cclegacy._RF.push({}, "f5017UjeUFOsbnUONMayQ7i", "socketConnect", undefined);
      let SKT_MAG_TYPE = exports('SKT_MAG_TYPE', /*#__PURE__*/function (SKT_MAG_TYPE) {
        SKT_MAG_TYPE["LOG_EXIT"] = "0";
        SKT_MAG_TYPE["HEART_BEAT"] = "1";
        SKT_MAG_TYPE["AUTH"] = "2";
        SKT_MAG_TYPE["EXIT"] = "3";
        SKT_MAG_TYPE["GET_WITH_DRAW_CHANNEL"] = "411";
        SKT_MAG_TYPE["RECHARGE_ORDER"] = "412";
        SKT_MAG_TYPE["MEMBER_INFO"] = "400";
        SKT_MAG_TYPE["MODIFY_MEMBER_INFO"] = "416";
        SKT_MAG_TYPE["MODIFY_BIND_PHONE"] = "408";
        SKT_MAG_TYPE["NEW_MAIL"] = "409";
        SKT_MAG_TYPE["POP_UPS"] = "403";
        SKT_MAG_TYPE["MAEQUEE"] = "404";
        SKT_MAG_TYPE["WITH_DRAW_LIST"] = "419";
        SKT_MAG_TYPE["VIP_CHANGE"] = "420";
        SKT_MAG_TYPE["GIVE_GLOD"] = "423";
        SKT_MAG_TYPE["GIFT_LIST"] = "424";
        SKT_MAG_TYPE["WINNING_BOX"] = "425";
        SKT_MAG_TYPE["TURNTABLEDATA"] = "426";
        SKT_MAG_TYPE["TURNTABLESEND"] = "427";
        SKT_MAG_TYPE["TURNTABLETNOTIFICATION"] = "428";
        SKT_MAG_TYPE["RECHANGE_CALLBACK"] = "429";
        SKT_MAG_TYPE["FRIST_LOGIN"] = "430";
        return SKT_MAG_TYPE;
      }({}));

      // export const sktMsgListener = listenerFactoy<SKT_MAG_TYPE>()
      // export let sktInstance: WebSocketToDo<SKT_MAG_TYPE> = null
      // 使用 hallConfig 创建 hallWebSocketDriver
      // hallConfig 从独立的 hall-config.ts 导入，避免了循环依赖
      let hallWebSocketDriver = exports('hallWebSocketDriver', new WebSocketDriver(config.gameId, config.gameHost));
      const setupHallWebSocketDriverFilter = () => {
        hallWebSocketDriver.filterData = (data, source) => {
          if (source.operation === SKT_OPERATION.RECOVER && baseBoardView) {
            if (!baseBoardView.comp.props.openGameInfo) {
              const hallGameGate = subGameList.find(i => i.gameId === source.gameId);
              if (hallGameGate) {
                const openResetConfirm = callback => {
                  window.setTimeout(() => {
                    ModalBox.Instance().show({
                      content: lang.write(k => k.HallModule.UnfinishedGames, {
                        game: hallGameGate.gameName
                      }, {
                        placeStr: "您还有未完成的游戏，请继续"
                      }),
                      type: "Prompt"
                    }, () => {
                      try {
                        const gateViewModel = baseBoardView.mainPanelViewModel.comp.gateViewModelList.find(vm => vm.comp.props.gamesIds.indexOf(hallGameGate.gameId) !== -1);
                        if (gateViewModel && gateViewModel.comp) {
                          gateViewModel.comp.openGateGame(hallGameGate.gameId);
                        } else {
                          hallDispatch(addToastAction({
                            content: `gameId error:${source.gameId}`,
                            type: ToastType.ERROR,
                            forceLandscape: false
                          }));
                        }
                      } catch (e) {
                        hallDispatch(addToastAction({
                          content: e,
                          type: ToastType.ERROR,
                          forceLandscape: false
                        }));
                      }
                      callback && callback();
                      return true;
                    });
                  }, 1000);
                };
                if (baseBoardView.mainPanelViewModel && baseBoardView.mainPanelViewModel.isBeginPop) {
                  //已经开始弹窗了
                  TaskSchedulerDefault().joinQueue(new Task(done => {
                    openResetConfirm(done);
                  }));
                } else {
                  //还没开始弹窗，那弹个der，直接弹恢复游戏的弹窗
                  baseBoardView.mainPanelViewModel && (baseBoardView.mainPanelViewModel.isBeginPop = true);
                  openResetConfirm();
                }
              }
            }
            return;
          }
          if (data.code === '200') {
            return {
              data: data.data,
              error: undefined
            };
          } else {
            console.error(data, source);
            hallDispatch(addToastAction({
              content: `${data.message}[${data.code}]`,
              type: ToastType.ERROR,
              forceLandscape: false
            }));
            return {
              data: '',
              error: data.message
            };
          }
        };
      };

      // 设置 filterData
      setupHallWebSocketDriverFilter();
      var socketConnect = exports('default', () => {
        return new Promise((resolve, reject) => {
          initConfig().then(() => {
            // 在配置加载完成后更新 WebSocket Driver 的配置
            hallWebSocketDriver.gameId = config.gameId;
            hallWebSocketDriver.host = config.gameHost;
            WebSocketStarter.Instance().initSocket().then(() => {
              const wss = WebSocketStarter.Instance();
              wss.eventListener.add(EVEVT_TYPE.HEART_BEAT, '', () => {
                if (!wss.isConnect || wss.isReconnecting) {
                  hallDispatch(setSocketConnectStatus({
                    isConnect: true,
                    remainRetryCount: wss.maxReconnectTime
                  }));
                }
              });
              wss.eventListener.add(EVEVT_TYPE.DISCONNECT, '', () => {
                hallDispatch(setSocketConnectStatus({
                  isConnect: false,
                  remainRetryCount: wss.remainRetryCount
                }));
              });
              wss.eventListener.add(EVEVT_TYPE.OPEN, '', () => {
                hallDispatch(setSocketConnectStatus({
                  isConnect: true,
                  remainRetryCount: wss.maxReconnectTime
                }));
              });
              wss.eventListener.add(EVEVT_TYPE.WARN, '', () => {
                hallDispatch(addToastAction({
                  content: lang.write(k => k.WebSocketModule.NetworkInstability, {}, {
                    placeStr: "网络不稳定"
                  }),
                  type: ToastType.ERROR,
                  forceLandscape: false
                }));
              });
              wss.eventListener.add(EVEVT_TYPE.RECONNECT, '', remainRetryCount => {
                hallDispatch(setSocketConnectStatus({
                  isConnect: false,
                  remainRetryCount
                }));
              });
              resolve(hallWebSocketDriver);
            });
          }).catch(e => {
            reject(e);
          });
        });
      });
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/soundDefine.ts", ['cc', './SourceManage.ts'], function (exports) {
  var cclegacy, AudioClip, loopFiles;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      AudioClip = module.AudioClip;
    }, function (module) {
      loopFiles = module.loopFiles;
    }],
    execute: function () {
      cclegacy._RF.push({}, "0dd1cqXKtZIvb68VdSCK6WT", "soundDefine", undefined);
      let SoundPathDefine = exports('SoundPathDefine', /*#__PURE__*/function (SoundPathDefine) {
        SoundPathDefine["egg"] = "gift/dub/ani_egg";
        SoundPathDefine["durian"] = "gift/dub/ani_durian";
        SoundPathDefine["rose"] = "gift/dub/ani_rose";
        SoundPathDefine["pan"] = "gift/dub/ani_pot";
        SoundPathDefine["beer"] = "gift/dub/ani_beer";
        SoundPathDefine["money"] = "gift/dub/ani_money";
        SoundPathDefine["bucket"] = "gift/dub/ani_labber";
        SoundPathDefine["shoe"] = "gift/dub/ani_slipper";
        SoundPathDefine["kiss"] = "gift/dub/ani_kiss";
        SoundPathDefine["cock"] = "gift/dub/ani_chicken";
        SoundPathDefine["brick"] = "gift/dub/ani_gold";
        SoundPathDefine["tomato"] = "gift/dub/ani_tomato";
        SoundPathDefine["rocket"] = "gift/dub/ani_rocket";
        SoundPathDefine["spin"] = "gift/dub/ani_spin";
        return SoundPathDefine;
      }({}));
      var soundPathDefine = exports('default', bundlePkgName => loopFiles(bundlePkgName, AudioClip, SoundPathDefine));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/soundDefine2.ts", ['cc', './SourceManage.ts'], function (exports) {
  var cclegacy, AudioClip, loopFiles;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      AudioClip = module.AudioClip;
    }, function (module) {
      loopFiles = module.loopFiles;
    }],
    execute: function () {
      cclegacy._RF.push({}, "3a985/MknlKZqgxGBTzemNJ", "soundDefine", undefined);
      let SoundPathDefine = exports('SoundPathDefine', /*#__PURE__*/function (SoundPathDefine) {
        SoundPathDefine["BTU_CLICK"] = "sound/hall_btn_click";
        SoundPathDefine["ERROR"] = "sound/hall_error";
        SoundPathDefine["GAME_CLICK"] = "sound/hall_game_click";
        SoundPathDefine["LOADING"] = "sound/hall_game_loading";
        SoundPathDefine["MAIN_BGM"] = "sound/hall_main_bgm";
        SoundPathDefine["POP_UP"] = "sound/hall_pop_up";
        SoundPathDefine["WINNING"] = "sound/hall_winning";
        SoundPathDefine["WHIRL"] = "sound/whirl";
        SoundPathDefine["WINLOTTERY"] = "sound/Winlottery";
        return SoundPathDefine;
      }({}));
      var soundDefine = exports('default', bundlePkgName => loopFiles(bundlePkgName, AudioClip, SoundPathDefine));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/SourceManage.ts", ['cc'], function (exports) {
  var assetManager, cclegacy;
  return {
    setters: [function (module) {
      assetManager = module.assetManager;
      cclegacy = module.cclegacy;
    }],
    execute: function () {
      cclegacy._RF.push({}, "85baao0bORAqpFb7cLR1whg", "SourceManage", undefined);
      /**将枚举的文件转换为ISourceFile的列表 */
      const loopFiles = exports('loopFiles', (bundlePkgName, sourceType, defineList) => {
        const _arr = [];
        for (let key in defineList) {
          _arr.push({
            bundlePkgName,
            path: defineList[key],
            sourceType,
            source: null,
            isPreLoad: key.substring(0, 1) === "_" ? false : true
          });
        }
        return _arr;
      });

      // export const loopFilesDir = (bundlePkgName: string, sourceType: __private._types_globals__Constructor<Asset>, dirPath: string) => {
      //   const _arr: ISourceFile[] = []
      //   for (let key in defineList) {
      //     _arr.push({
      //       bundlePkgName,
      //       path: defineList[key],
      //       sourceType,
      //       source: null
      //     })
      //   }
      //   return _arr
      // }

      /**保存了一组资源的类，具备预加载，获取单个文件的能力 */
      class SourceManage {
        constructor(bundle, fileMap) {
          this.bundle = void 0;
          this.fileMap = void 0;
          this.num = 0;
          this.isStop = false;
          this.fileMap = fileMap;
          this.bundle = bundle;
          this.num = 0;
        }
        stopPreLoad() {
          this.isStop = true;
        }
        preLoadAllFiles1(progressHandler, done, logLabel) {
          const _fileMap = this.fileMap;
          const file = _fileMap[this.num];
          if (file) {
            // logLabel.string += `=>开始${file.path}`
            // assetManager.loadBundle(file.bundlePkgName, (err, _bundle) => {
            // logLabel.string += `=>bundlePkgName（${err}）`
            // if (!err) {
            // console.log(this.bundle.name, file.path)
            this.bundle.load(file.path, file.sourceType, (err2, asset) => {
              // logLabel.string += `=>load${err2}）`
              if (!err2) {
                file.source = asset;
                this.num++;
                // console.log(this.fileMap.length, this.num, this)
                progressHandler(_fileMap.length, this.num, file);
                // logLabel.string += `=>完成${file.path}`
                if (!this.isStop) {
                  this.preLoadAllFiles1(progressHandler, done, logLabel);
                } else {
                  this.isStop = false;
                }
              } else {
                if (logLabel) {
                  logLabel.string += `资源加载错误:${file.path}`;
                }
                console.error(`加载资源错误：${this.bundle.name}-${file.path}`);
                // Continue loading even if error occurs
                this.num++;
                progressHandler(_fileMap.length, this.num, file);
                if (!this.isStop) {
                  this.preLoadAllFiles1(progressHandler, done, logLabel);
                } else {
                  this.isStop = false;
                }
              }
            });
            // }
            // })
          } else {
            done();
          }
        }

        /**预加载所有的文件 */
        // public preLoadAllFiles(progressHandler: (
        //   total: number, remain: number,
        //   sourceFileloading: ISourceFile | null) => void) {
        //   return new Promise((resolve, reject) => {
        //     const fileCount = this.fileMap.length
        //     let remainLoadCount = this.fileMap.length
        //     this.fileMap.forEach((file, index) => {
        //       console.log('Load the local manifest lose ...', index);
        //       assetManager.loadBundle(file.bundlePkgName, (err, _bundle) => {
        //         if (!err) {
        //           _bundle.load(file.path, file.sourceType, (err, asset) => {
        //             if (!err) {
        //               file.source = asset
        //               // console.log(`文件${file.path}已读取`)
        //             } else {
        //               console.error(`文件<${file.path}>错误或未找到：${err}`)
        //               reject(`文件<${file.path}>错误或未找到：${err}`)
        //             }
        //             remainLoadCount--
        //             progressHandler(fileCount, remainLoadCount, file)
        //             if (remainLoadCount === 0) {
        //               resolve(true)
        //             }
        //           })
        //         } else {
        //           console.log(`bundle包<${file.bundlePkgName}>错误或未找到：${err}`);
        //           reject(`bundle包<${file.bundlePkgName}>错误或未找到：${err}`)
        //         }
        //       })
        //     })
        //   })

        // }

        getFileAsync(filePath, sourceType) {
          return new Promise((resolve, reject) => {
            const sourceFile = this.getFile(filePath);
            if (sourceFile) {
              resolve(sourceFile);
              return;
            }
            assetManager.loadBundle(this.bundle.name, (err, _bundle) => {
              if (!err) {
                console.log(`[SourceManage] Loading file: ${filePath} from bundle: ${this.bundle.name}`);
                _bundle.load(filePath, sourceType, (err, asset) => {
                  if (err) {
                    reject(err);
                  } else {
                    resolve({
                      bundlePkgName: this.bundle.name,
                      path: filePath,
                      sourceType,
                      source: asset,
                      isPreLoad: false
                    });
                  }
                });
              } else {
                console.log(`bundle包<${filePath}>错误或未找到：${err}`);
                reject(`bundle包<${filePath}>错误或未找到：${err}`);
              }
            });
          });
        }
        getFile(filePath) {
          const result = this.fileMap.find(file => file.path === filePath);
          if (!result) {
            // console.log(`No file found：${this.bundle.name}/${filePath}`)
            return undefined;
          }
          return result;
        }
        getSourceFile(filePath) {
          return this.bundle.get(filePath);
        }
      }
      exports('default', SourceManage);
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/spriteDefine.ts", ['cc', './SourceManage.ts'], function (exports) {
  var cclegacy, SpriteFrame, loopFiles;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      SpriteFrame = module.SpriteFrame;
    }, function (module) {
      loopFiles = module.loopFiles;
    }],
    execute: function () {
      cclegacy._RF.push({}, "4a37erFtNNP5JSaA+5eDXuM", "spriteDefine", undefined);
      let SpriteFramePathDefine = exports('SpriteFramePathDefine', /*#__PURE__*/function (SpriteFramePathDefine) {
        SpriteFramePathDefine["_GEMINI_NAME_SMALL"] = "icon/binaryStar/title/large/spriteFrame";
        SpriteFramePathDefine["_GEMINI_NAME_LARGE"] = "icon/binaryStar/title/large/spriteFrame";
        SpriteFramePathDefine["_DOMINO_NAME_SMALL"] = "icon/domino/title/large/spriteFrame";
        SpriteFramePathDefine["_DOMINO_NAME_LARGE"] = "icon/domino/title/small/spriteFrame";
        SpriteFramePathDefine["FRUITS_NAME_SMALL"] = "icon/fruits777/title/large/spriteFrame";
        SpriteFramePathDefine["FRUITS_NAME_LARGE"] = "icon/fruits777/title/small/spriteFrame";
        SpriteFramePathDefine["_QIU_QIU_NAME_SMALL"] = "icon/qiuqiu/title/large/spriteFrame";
        SpriteFramePathDefine["_QIU_QIU_NAME_LARGE"] = "icon/qiuqiu/title/small/spriteFrame";
        SpriteFramePathDefine["_CRASH_NAME_SMALL"] = "icon/crash/title/large/spriteFrame";
        SpriteFramePathDefine["_CRASH_NAME_LARGE"] = "icon/crash/title/small/spriteFrame";
        SpriteFramePathDefine["_CSRUKOU_NAME_SMALL"] = "icon/csrukou/title/large/spriteFrame";
        SpriteFramePathDefine["_CSRUKOU_NAME_LARGE"] = "icon/csrukou/title/small/spriteFrame";
        SpriteFramePathDefine["_GXFC_NAME_SMALL"] = "icon/gxfc/title/large/spriteFrame";
        SpriteFramePathDefine["_GXFC_NAME_LARGE"] = "icon/gxfc/title/small/spriteFrame";
        SpriteFramePathDefine["_EGYPT_NAME_SMALL"] = "icon/egypt/title/large/spriteFrame";
        SpriteFramePathDefine["_EGYPT_NAME_LARGE"] = "icon/egypt/title/small/spriteFrame";
        SpriteFramePathDefine["_LONG_RK_NAME_SMALL"] = "icon/dragon/title/large/spriteFrame";
        SpriteFramePathDefine["_LONG_RK_NAME_LARGE"] = "icon/dragon/title/small/spriteFrame";
        SpriteFramePathDefine["_GENG_HUANG_NAME_SMALL"] = "icon/phoenix/title/large/spriteFrame";
        SpriteFramePathDefine["_GENG_HUANG_NAME_LARGE"] = "icon/phoenix/title/small/spriteFrame";
        SpriteFramePathDefine["_YXXRK_NAME_SMALL"] = "icon/yxx/title/large/spriteFrame";
        SpriteFramePathDefine["_YXXRK_NAME_LARGE"] = "icon/yxx/title/small/spriteFrame";
        SpriteFramePathDefine["_DRAGON_TIGER_SMALL"] = "icon/dragonTiger/title/large/spriteFrame";
        SpriteFramePathDefine["_DRAGON_TIGER_LARGE"] = "icon/dragonTiger/title/small/spriteFrame";
        SpriteFramePathDefine["_BANDAR_SMALL"] = "icon/bandar/title/large/spriteFrame";
        SpriteFramePathDefine["_BANDAR_LARGE"] = "icon/bandar/title/small/spriteFrame";
        SpriteFramePathDefine["_BANDARQIUQIU_SMALL"] = "icon/bandarQiuQiu/title/large/spriteFrame";
        SpriteFramePathDefine["_BANDARQIUQIU_LARGE"] = "icon/bandarQiuQiu/title/small/spriteFrame";
        SpriteFramePathDefine["_THOR_SMALL"] = "icon/olympus/title/large/spriteFrame";
        SpriteFramePathDefine["_THOR_LARGE"] = "icon/olympus/title/small/spriteFrame";
        SpriteFramePathDefine["_DFDC_SMALL"] = "icon/dfdc/title/large/spriteFrame";
        SpriteFramePathDefine["_DFDC_LARGE"] = "icon/dfdc/title/small/spriteFrame";
        SpriteFramePathDefine["_STAR_SMALL"] = "icon/starlight/title/large/spriteFrame";
        SpriteFramePathDefine["_STAR_LARGE"] = "icon/starlight/title/small/spriteFrame";
        SpriteFramePathDefine["_FISH_SMALL"] = "icon/fish/title/large/spriteFrame";
        SpriteFramePathDefine["_FISH_LARGE"] = "icon/fish/title/small/spriteFrame";
        SpriteFramePathDefine["_RUMMY_SMALL"] = "icon/rummy/title/large/spriteFrame";
        SpriteFramePathDefine["_RUMMY_LARGE"] = "icon/rummy/title/small/spriteFrame";
        SpriteFramePathDefine["_FORTUNET_TIGER_SMALL"] = "icon/fortuneTiger/title/large/spriteFrame";
        SpriteFramePathDefine["_FORTUNET_TIGER_LARGE"] = "icon/fortuneTiger/title/small/spriteFrame";
        SpriteFramePathDefine["_MONEY_COMING_SMALL"] = "icon/domino/title/large/spriteFrame";
        SpriteFramePathDefine["_MONEY_COMING_LARGE"] = "icon/domino/title/small/spriteFrame";
        SpriteFramePathDefine["_SHARE_LOGO"] = "personalCenter/resource/logo/spriteFrame";
        SpriteFramePathDefine["_GOLD"] = "mail/resource/icon_dating_jinbi/spriteFrame";
        return SpriteFramePathDefine;
      }({}));
      var spriteDefine = exports('default', bundlePkgName => loopFiles(bundlePkgName, SpriteFrame, SpriteFramePathDefine));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/spriteDefine2.ts", ['cc', './SourceManage.ts'], function (exports) {
  var cclegacy, SpriteFrame, loopFiles;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      SpriteFrame = module.SpriteFrame;
    }, function (module) {
      loopFiles = module.loopFiles;
    }],
    execute: function () {
      cclegacy._RF.push({}, "5722dW17o5Hg4r1/7H0jYI4", "spriteDefine", undefined);
      let SpriteFramePathDefine = exports('SpriteFramePathDefine', /*#__PURE__*/function (SpriteFramePathDefine) {
        SpriteFramePathDefine["img_icon_beer"] = "gift/img/img_icon_beer/spriteFrame";
        SpriteFramePathDefine["img_icon_brick"] = "gift/img/img_icon_brick/spriteFrame";
        SpriteFramePathDefine["img_icon_bucket"] = "gift/img/img_icon_bucket/spriteFrame";
        SpriteFramePathDefine["img_icon_cock"] = "gift/img/img_icon_cock/spriteFrame";
        SpriteFramePathDefine["img_icon_durian"] = "gift/img/img_icon_durian/spriteFrame";
        SpriteFramePathDefine["img_icon_egg"] = "gift/img/img_icon_egg/spriteFrame";
        SpriteFramePathDefine["img_icon_kiss"] = "gift/img/img_icon_kiss/spriteFrame";
        SpriteFramePathDefine["img_icon_money"] = "gift/img/img_icon_money/spriteFrame";
        SpriteFramePathDefine["img_icon_pan"] = "gift/img/img_icon_pan/spriteFrame";
        SpriteFramePathDefine["img_icon_rose"] = "gift/img/img_icon_rose/spriteFrame";
        SpriteFramePathDefine["img_icon_shoe"] = "gift/img/img_icon_shoe/spriteFrame";
        SpriteFramePathDefine["img_icon_tomato"] = "gift/img/img_icon_tomato/spriteFrame";
        return SpriteFramePathDefine;
      }({}));
      var spriteDefine = exports('default', bundlePkgName => loopFiles(bundlePkgName, SpriteFrame, SpriteFramePathDefine));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/StepNumber.ts", ['cc'], function (exports) {
  var instantiate, Label, tween, Vec3, UITransform, UIOpacity, cclegacy;
  return {
    setters: [function (module) {
      instantiate = module.instantiate;
      Label = module.Label;
      tween = module.tween;
      Vec3 = module.Vec3;
      UITransform = module.UITransform;
      UIOpacity = module.UIOpacity;
      cclegacy = module.cclegacy;
    }],
    execute: function () {
      cclegacy._RF.push({}, "04cbaiipWNOxrKkFPiVvR4w", "StepNumber", undefined);
      /**
       * 步进数字
       */
      class StepNumber {
        constructor(beginNum, endNum, update, done) {
          this.targetNode = void 0;
          this.flyLabelNode = void 0;
          this.flyHeight = void 0;
          this.flyHandler = void 0;
          this.update = void 0;
          this.done = void 0;
          this.timer = void 0;
          /**默认的步进时间 */
          this.defaultStepTime = 20;
          /**最小持续时间 */
          this.minKeepTime = 500;
          /**最大持续时间 */
          this.maxKeepTime = 2000;
          /**步进量 */
          this.step = 10;
          /**在变化的值 */
          this.currNum = 0;
          this.beginNum = 0;
          this.endNum = 0;
          this.beginNum = (beginNum || 0).toFixedFix();
          this.endNum = (endNum || 0).toFixedFix();
          this.update = update;
          this.done = done;
          this.set();
        }
        /**
         * 激活飘数字效果
         * @param targetNode 
         * @param flyLabelNode 
         */
        setFlyNode(targetNode, flyLabelNode, flyHeight) {
          flyHeight && (this.flyHeight = flyHeight);
          this.targetNode = targetNode;
          this.flyLabelNode = flyLabelNode;
          this.flyHandler = num => {
            if (!this.flyLabelNode || num === 0) return;
            const flyNode = instantiate(this.flyLabelNode);
            flyNode.active = true;
            if (this.targetNode) {
              flyNode.getComponent(Label).string = (num > 0 ? '+' : '-') + Math.abs(num).formatAmountWithCommas();
              flyNode.setScale(0.9, 0.9);
              this.targetNode.addChild(flyNode);
              const {
                x,
                y,
                z
              } = flyNode.position;
              tween(flyNode).to(0.7, {
                position: new Vec3(x, y + (this.flyHeight || flyNode.getComponent(UITransform).height), z)
              }, {
                easing: "backOut"
              }).start();
              !flyNode.getComponent(UIOpacity) && flyNode.addComponent(UIOpacity);
              tween(flyNode.getComponent(UIOpacity)).to(0.8, {
                opacity: 0
              }).call(() => {
                flyNode.destroy();
              }).start();
            }
          };
        }
        /**设置步进时间(默认步进时间20ms)，传入步进时间，你可以通过控制步进时间间接控制步进量 */
        set(stepTime = 20) {
          stepTime && (this.defaultStepTime = stepTime);
          // 比如50ms一次，每次变量10，持续时间最低1000ms~5000ms，那么数字间隔最低为1000/50 * 10 = 200,最高5000/50 * 10=1000，如果超越这个区间，将动态调整变量
          const minDistance = this.minKeepTime / this.defaultStepTime * this.step;
          const maxDistance = this.maxKeepTime / this.defaultStepTime * this.step;
          const distance = this.endNum - this.beginNum;
          if (Math.abs(distance) <= minDistance || Math.abs(distance) >= maxDistance) {
            // 重算步进量
            this.step = distance / (this.minKeepTime / this.defaultStepTime);
          } else {
            distance < 0 && (this.step = this.step * -1);
          }
          // distance < 0 && (this.step = this.step * -1)
          return this;
        }
        /**
         * 开始执行
         * @param isFlyNumber 是否激活数字飘动效果，前提是要设置flyHandler
         * @returns 
         */
        start(isFlyNumber = true) {
          this.timer && window.clearInterval(this.timer);
          if (Math.abs(this.endNum - this.beginNum) < this.step) {
            //如果间隔都没有步进量来的大，直接结束
            this.update(this.endNum);
            this.done && this.done();
            return;
          }
          this.currNum = this.beginNum;
          // console.log(this.endNum - this.beginNum)
          this.flyHandler && isFlyNumber && this.flyHandler(+(this.endNum - this.beginNum).toFixed(2));
          this.timer = window.setInterval(() => {
            this.currNum += this.step;
            //乘以2是怕越过终点，这样就停不下来了
            if (Math.abs(this.currNum - this.endNum) <= Math.abs(this.step)) {
              this.stop();
            } else {
              this.update(this.currNum);
            }
          }, this.defaultStepTime);
        }
        /**调过过程，直接变成目标值 */
        stop() {
          this.currNum = this.endNum;
          this.update(this.endNum);
          window.clearInterval(this.timer);
          this.done && this.done();
        }
      }
      exports('default', StepNumber);
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/StepNumberV2.ts", ['cc'], function (exports) {
  var instantiate, Label, tween, Vec3, UITransform, UIOpacity, cclegacy;
  return {
    setters: [function (module) {
      instantiate = module.instantiate;
      Label = module.Label;
      tween = module.tween;
      Vec3 = module.Vec3;
      UITransform = module.UITransform;
      UIOpacity = module.UIOpacity;
      cclegacy = module.cclegacy;
    }],
    execute: function () {
      cclegacy._RF.push({}, "d51545G2NhN7J4nczFE+kn2", "StepNumberV2", undefined);
      /**
       * 步进数字
       */
      class StepNumberV2 {
        constructor(component) {
          this.targetNode = void 0;
          this.flyLabelNode = void 0;
          this.flyHeight = void 0;
          this.flyHandler = void 0;
          this.component = void 0;
          this.update = void 0;
          this.done = void 0;
          /**默认的步进时间 */
          this.defaultStepTime = 20;
          /**最小持续时间 */
          this.minKeepTime = 500;
          /**最大持续时间 */
          this.maxKeepTime = 2000;
          /**步进量 */
          this.step = 10;
          /**在变化的值 */
          this.currNum = 0;
          this.beginNum = 0;
          this.endNum = 0;
          this.callback_fn = void 0;
          this.component = component;
        }
        /**
         * 激活飘数字效果
         * @param targetNode 
         * @param flyLabelNode 
         */
        setFlyNode(targetNode, flyLabelNode, flyHeight) {
          flyHeight && (this.flyHeight = flyHeight);
          this.targetNode = targetNode;
          this.flyLabelNode = flyLabelNode;
          this.flyHandler = num => {
            if (!this.flyLabelNode) return;
            const flyNode = instantiate(this.flyLabelNode);
            flyNode.active = true;
            if (this.targetNode) {
              flyNode.getComponent(Label).string = (num > 0 ? '+' : '-') + Math.abs(num).formatAmountWithCommas();
              flyNode.setScale(0.9, 0.9);
              this.targetNode.addChild(flyNode);
              const {
                x,
                y,
                z
              } = flyNode.position;
              tween(flyNode).to(0.7, {
                position: new Vec3(x, y + this.flyHeight || flyNode.getComponent(UITransform).height, z)
              }, {
                easing: "backOut"
              }).start();
              !flyNode.getComponent(UIOpacity) && flyNode.addComponent(UIOpacity);
              tween(flyNode.getComponent(UIOpacity)).to(0.8, {
                opacity: 0
              }).call(() => {
                flyNode.destroy();
              }).start();
            }
          };
        }
        /**设置步进时间(默认步进时间20ms)，传入步进时间，你可以通过控制步进时间间接控制步进量 */
        set(stepTime = 20) {
          stepTime && (this.defaultStepTime = stepTime);
          // 比如50ms一次，每次变量10，持续时间最低1000ms~5000ms，那么数字间隔最低为1000/50 * 10 = 200,最高5000/50 * 10=1000，如果超越这个区间，将动态调整变量
          const minDistance = this.minKeepTime / this.defaultStepTime * this.step;
          const maxDistance = this.maxKeepTime / this.defaultStepTime * this.step;
          const distance = this.endNum - this.beginNum;
          if (Math.abs(distance) <= minDistance || Math.abs(distance) >= maxDistance) {
            // 重算步进量
            this.step = distance / (this.minKeepTime / this.defaultStepTime);
          } else {
            distance < 0 && (this.step = this.step * -1);
          }
          // distance < 0 && (this.step = this.step * -1)
          return this;
        }
        /**
         * 开始执行
         * @param isFlyNumber 是否激活数字飘动效果，前提是要设置flyHandler
         * @returns 
         */
        start(beginNum, endNum, update, done, stepTime = 20, isFlyNumber = true) {
          this.beginNum = beginNum;
          this.endNum = endNum;
          this.update = update;
          this.done = done;
          this.set(stepTime);
          this.currNum = this.beginNum;
          this.callback_fn && this.component.unschedule(this.callback_fn);
          // console.log(this.endNum - this.beginNum)
          this.flyHandler && isFlyNumber && this.flyHandler(this.endNum - this.beginNum);
          this.callback_fn = this.timeHandle.bind(this);
          this.component.schedule(this.callback_fn, stepTime / 1000);
        }
        timeHandle() {
          this.currNum += this.step;
          //乘以2是怕越过终点，这样就停不下来了
          if (Math.abs(this.currNum - this.endNum) <= Math.abs(this.step)) {
            this.stop();
          } else {
            this.update(this.currNum);
          }
        }

        /**调过过程，直接变成目标值 */
        stop() {
          this.currNum = this.endNum;
          this.update && this.update(this.endNum);
          this.component.unschedule(this.callback_fn);
          this.update = undefined;
          this.callback_fn = undefined;
          this.done && this.done();
          this.done = undefined;
        }
      }
      exports('default', StepNumberV2);
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/SubGameGateViewModel.ts", ['cc', './ViewModel.ts'], function (exports) {
  var cclegacy, ViewModel;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      ViewModel = module.default;
    }],
    execute: function () {
      cclegacy._RF.push({}, "299c8retRhCf4l6ZMsCvnyg", "SubGameGateViewModel", undefined);
      class SubGameGateViewModel extends ViewModel {
        constructor() {
          super('Hall_SubGameGate');
        }
        begin() {}
        connect() {
          this.inject({}, state => {
            return {
              useVip: state.memberInfo.vipLevel,
              activeSubGameInfo: state.baseBoard.subGameInfo
            };
          });
          return this;
        }
      }
      exports('default', SubGameGateViewModel);
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/TaskScheduler.ts", ['cc'], function (exports) {
  var cclegacy;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }],
    execute: function () {
      cclegacy._RF.push({}, "3f379nxaHVF5K33KSNWIeq0", "TaskScheduler", undefined);
      class Task {
        /**切记，声明主执行函数中，done一定要确保执行，否则任务无法停止，若在此情况下使用了任务调度器，那么队列将会被挂起 */
        constructor(fn, name) {
          this.name = `task_${Date.parse(new Date()) + parseInt(Math.random() * 1000 + '')}`;
          /**完成后是否自爆，为调度器预留使用的字段，不要手贱自行设置。当然也有脱离调度器使用的方式，但是劳资不告诉你，要么自己看代码 */
          this.isAutoDestroy = true;
          /**任务是否已经完整执行了，要重启，需要重新执行execute函数 */
          this.hasDone = true;
          this.isExecute = false;
          this.isForceComplete = false;
          this.doneHandlerMap = [];
          this.startUpHandler = void 0;
          this.startUpHandler = fn;
          name && (this.name = name);
          this.isExecute = false;
          // taskMap[this.name] = this
        }

        /**结束 */
        finally() {}
        /**绑定任务执行完之后的函数，主要为任务调度器使用，判断是否需要销毁，所以，若使用了调度器，请勿手动调用此函数，因为调用了也没啥卵用，会被覆盖掉 */
        bindFinally(fn) {
          this.finally = fn;
        }
        execute() {
          if (!this.hasDone) {
            console.error('The task has not been completed');
            return;
          }
          this.hasDone = false;
          try {
            this.startUpHandler(() => {
              try {
                if (!this.isForceComplete) {
                  //有可能已经提前终止了任务
                  this.doneHandlerMap.forEach(item => item.handler(item.key));
                  this.hasDone = true;
                  this.isExecute = true;
                  this.finally();
                }
              } catch (e) {
                console.error(e);
              }
            });
          } catch (e) {
            console.error(e);
          }
        }
        /**
         * 声明完成的事件函数
         * @param key 识别字符串
         * @param handler 函数体
         * @param isClear 加入之前是否删除之前的完成函数，为避免意外的情况，慎用（一般情况下，若要重启函数，且要清除之前已经执行过的函数，可以置为true）
         * @returns 
         */
        subscribeDone(key, handler, isClear = false) {
          // this.hasDone && console.warn('The task has been done')
          isClear && (this.doneHandlerMap = []);
          this.doneHandlerMap.push({
            key,
            handler
          });
          return this;
        }

        /**
         * 越过主函数，提前强制完成
         * @param isDoneExecute 是否还要执行done函数
         */
        forceComplete(isDoneExecute = true) {
          this.isForceComplete = true;
          isDoneExecute && this.doneHandlerMap.forEach(item => {
            try {
              item.handler(item.key);
            } catch (e) {
              console.error(e);
            }
          });
          this.hasDone = true;
          this.isExecute = true;
          this.finally();
        }
      }
      exports('Task', Task);

      /**任务调度器，使用方法：TaskScheduler.Instance().joinQueue(task1, false).joinQueue(task2, false) 
       * 
       * 传入的doneFn是通道里的任务都执行完之后要执行的函数，如果再加入队列，此函数都会在队列执行完之后执行
      */
      class TaskScheduler {
        constructor(doneFn) {
          this.isDone = true;
          this.doneFn = void 0;
          /**异步队列 */
          this.asyncQueue = [];
          this.syncQueue = void 0;
          this.doneFn = doneFn;
          while (this.asyncQueue.length) {
            this.start();
          }
        }
        /**干活 */
        start() {
          if (!this.asyncQueue.length) {
            this.isDone = true;
            this.doneFn && this.doneFn();
            return;
          }
          let _task = this.asyncQueue.shift();
          _task.bindFinally(() => {
            _task && _task.isAutoDestroy && (_task = undefined);
            this.start();
          });
          _task.execute();
        }
        /**
         * 加入任务调度器
         * @param taskStacker 任务实体
         * @param sync 立即执行，还是排队执行（true:立即执行，false：排队执行）遵循先进先出原则
         * @param autoDestroy 是否执行完之后自动销毁，如果不销毁，可以调用restart重启，默认销毁
         */
        joinQueue(task, sync = false, autoDestroy = true) {
          if (autoDestroy) {
            task.isAutoDestroy = autoDestroy;
            task.bindFinally(() => {
              task = undefined;
              // console.log("task", gameBoardViewModel.changeGameTypeTask)
            });
          }
          // sync ? task.execute() : this.asyncQueue.push(task)
          if (sync) {
            task.execute();
            return this;
          } else {
            this.asyncQueue.push(task);
          }
          if (this.isDone) {
            this.isDone = false;
            this.start();
          }
          return this;
        }
        /**
         * 提前终止队列
         * @param isDoneExecute 是否还执行每一个task任务的结束函数
         */
        stopQueue(isDoneExecute = true) {
          this.isDone = true;
          while (this.asyncQueue.length) {
            const task = this.asyncQueue.shift();
            isDoneExecute && task.forceComplete();
          }
        }
        /**清除掉所有后续任务队列 */
        destoryQueue() {
          this.isDone = true;
          while (this.asyncQueue.length) {
            const task = this.asyncQueue.shift();
            task.forceComplete(false);
          }
        }
      }
      exports('default', TaskScheduler);
      let taskScheduler;
      const TaskSchedulerDefault = exports('TaskSchedulerDefault', () => {
        if (taskScheduler) {
          return taskScheduler;
        } else {
          taskScheduler = new TaskScheduler();
          return taskScheduler;
        }
      });
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/template.ts", ['cc', './BaseComponent.ts'], function (exports) {
  var cclegacy, _decorator, BaseComponent;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      _decorator = module._decorator;
    }, function (module) {
      BaseComponent = module.BaseComponent;
    }],
    execute: function () {
      var _dec, _class;
      cclegacy._RF.push({}, "9ffb7qPvnVFZY3zTsfdT1M6", "template", undefined);
      const {
        ccclass,
        property
      } = _decorator;
      let Hall_Template = exports('Hall_Template', (_dec = ccclass('Hall_Template'), _dec(_class = class Hall_Template extends BaseComponent {
        constructor(...args) {
          super(...args);
          this.propertyNode = {};
          this.props = {};
          this.events = {};
        }
        start() {}
        initState() {
          return {};
        }
        bindEvent() {}
        useProps(key, value) {}
        bindUI() {}
        update(deltaTime) {}
      }) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Throttler.ts", ['cc'], function (exports) {
  var cclegacy;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }],
    execute: function () {
      cclegacy._RF.push({}, "73d24UhPIVOyZ+Gw94pPgcN", "Throttler", undefined);
      /**节流/防抖辅助类 */
      class Throttler {
        static getInstance() {
          if (!this.throttler) this.throttler = new Throttler();
          return this.throttler;
        }
        /**
         * 节流：使用示例：if (!await Throttler.isDebouncerAsync(soleKey, 200, true)) return; trip：非async函数使用then
         * @param key 输入唯一的字符串，一般可以是url、path、id等
         * @param time 节流等待时间
         * @param debounce 防抖，设为true，time时间内的事件都会被取消的同时，禁用期内发生的调用，在倒计时完成亦不会发生调用，直到再次发起，值为false：倒计时结束自动发起一次
         * @returns reslove：正常执行
         */
        static async isDebouncerAsync(key, time, debounce = false, inform) {
          return new Promise(reslove => {
            if (this.debouncerMap[key] && this.debouncerMap[key].waiting) {
              inform && inform();
              if (debounce || this.debouncerMap[key].done) {
                return;
              }
              this.debouncerMap[key].done = true;
              this.debouncerMap[key].endHeadler = reslove;
            } else {
              this.debouncerMap[key] = {
                waiting: true,
                done: false
              };
              window.setTimeout(() => {
                if (this.debouncerMap[key].done && this.debouncerMap[key].endHeadler) {
                  this.debouncerMap[key].endHeadler(true);
                }
                delete this.debouncerMap[key];
              }, time);
              reslove(true);
            }
          });
        }
      }
      exports('default', Throttler);
      Throttler.throttler = void 0;
      Throttler.debouncerMap = {};
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/tool.ts", ['cc', './fingerprint2.mjs_cjs=&original=.js', './fastCopy.ts', './index.ts', './fingerprint2.js'], function (exports) {
  var cclegacy, Node, tween, Vec3, view, screen, ToggleContainer, assetManager, log, SpriteFrame, Texture2D, UITransform, createCopier, circularDeepEqual, strictShallowEqual, _cjsExports;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      Node = module.Node;
      tween = module.tween;
      Vec3 = module.Vec3;
      view = module.view;
      screen = module.screen;
      ToggleContainer = module.ToggleContainer;
      assetManager = module.assetManager;
      log = module.log;
      SpriteFrame = module.SpriteFrame;
      Texture2D = module.Texture2D;
      UITransform = module.UITransform;
    }, null, function (module) {
      createCopier = module.createCopier;
    }, function (module) {
      circularDeepEqual = module.circularDeepEqual;
      strictShallowEqual = module.strictShallowEqual;
    }, function (module) {
      _cjsExports = module.default;
    }],
    execute: function () {
      cclegacy._RF.push({}, "338b7/RUf1LUJmiaeBw10nf", "tool", undefined);
      let EffectType = exports('EffectType', /*#__PURE__*/function (EffectType) {
        EffectType["SCALE"] = "scale";
        return EffectType;
      }({}));
      const bindClickEvent = exports('bindClickEvent', (node, effectType = EffectType.SCALE, handler) => {
        node.on(Node.EventType.TOUCH_START, () => {
          tween(node).to(0.1, {
            position: new Vec3(node.getPosition().x, node.getPosition().y - 5)
          }).start();
        });
        node.on(Node.EventType.TOUCH_END, () => {
          tween(node).to(0.1, {
            position: new Vec3(node.getPosition().x, node.getPosition().y + 5)
          }).call(() => {
            handler && handler();
          }).start();
        });
      });
      const getRootPosition = exports('getRootPosition', (node, totalX, totalY) => {
        if (node.parent.name === 'Canvas') {
          return new Vec3(totalX, totalY, 0);
        } else {
          const x = node.position.x + node.parent.position.x;
          const y = node.position.y + node.parent.position.y;
          return getRootPosition(node.parent, x, y);
        }
      });
      const getUrlParams = exports('getUrlParams', name => {
        var reg = new RegExp('(^|&)' + name + '=([^&]*)(&|$)', 'i');
        var r = window.location.search.substring(1).match(reg);
        if (r != null) {
          return unescape(r[2]);
        }
        return null;
      });

      /**深度搜寻第一个符合名称的节点 */
      const getNodeByNameDeep = exports('getNodeByNameDeep', (nodeName, parentNode) => {
        if (parentNode.name === nodeName) {
          return parentNode;
        } else {
          const l = parentNode.children.length;
          for (let i = 0; i < l; i++) {
            if (parentNode.children[i].name === nodeName) {
              return parentNode.children[i];
            } else {
              // if (parentNode.children[i].children.length) {
              //   result = getNodeByNameDeep(nodeName, parentNode.children[i])
              // }
              const res = getNodeByNameDeep(nodeName, parentNode.children[i]);
              if (res) {
                return res;
              }
            }
          }
        }
      });
      const setByScreenScale = exports('setByScreenScale', target => {
        //原配比
        const resSize = view.getDesignResolutionSize();
        const resRatio = resSize.width / resSize.height;
        const curSize = screen.windowSize.width / screen.windowSize.height;
        const result = resRatio / curSize;
        // target.setScale(result, result)
        target && target.setScale(0.5, 0.5);
        return result;
      });
      const initToggle = exports('initToggle', (target, thisNode, eventHandler, CompStr, handerStr) => {
        const subContainer = target.getComponent(ToggleContainer);
        // const containerEventHandler = eventHandler;
        eventHandler.target = thisNode;
        eventHandler.component = CompStr;
        eventHandler.handler = handerStr;
        subContainer.checkEvents.push(eventHandler);
        return subContainer;
      });
      const setCookie = exports('setCookie', (name, value, expirationDays) => {
        const expirationDate = new Date();
        expirationDate.setDate(expirationDate.getDate() + expirationDays);
        const cookieValue = encodeURIComponent(value) + '; expires=' + expirationDate.toUTCString();
        document.cookie = name + '=' + cookieValue + '; path=/';
      });
      const getCookie = exports('getCookie', name => {
        const cookieStr = document.cookie;
        const cookies = cookieStr.split('; ');
        for (const cookie of cookies) {
          const [cookieName, cookieValue] = cookie.split('=');
          if (decodeURIComponent(cookieName) === name) {
            return decodeURIComponent(cookieValue);
          }
        }
        return null; // 如果找不到指定名称的cookie，返回null
      });
      /**
       * 对一串数字进行脱敏
       * @param cardNumber 输入的数字
       * @param visibleDigits 可见的数字位数，可以根据需要调整
       * @param isExposeLength 是否要暴露字符串长度，true：脱敏多少位，显示多少位*，false：默认显示4个*
       * @returns 
       */
      const maskBankCardNumber = exports('maskBankCardNumber', (cardNumber, visibleDigits = 4, isExposeLength = false) => {
        if (cardNumber.length <= visibleDigits * 2) {
          return cardNumber;
        }
        const maskedChar = '*';
        // 去除非数字字符
        const trimmedNumber = cardNumber.replace(/\D/g, '');

        // 获取前几位和后几位
        const firstVisiblePart = trimmedNumber.slice(0, visibleDigits);
        const lastVisiblePart = trimmedNumber.slice(-visibleDigits);

        // 获取需要隐藏的中间部分的长度
        const maskedPartLength = trimmedNumber.length - visibleDigits * 2;

        // 生成脱敏后的银行卡号
        const maskedPart = maskedChar.repeat(maskedPartLength);
        const maskedCardNumber = `${firstVisiblePart}${isExposeLength ? maskedPart : "****"}${lastVisiblePart}`;
        return maskedCardNumber;
      });

      /**获取以canvas画布为基准的坐标 */
      const getNodePositionInCanvas = exports('getNodePositionInCanvas', (node, x = 0, y = 0) => {
        const t_x = node.position.x + x;
        const t_y = node.position.y + y;
        if (node.parent.name !== "Canvas") {
          return getNodePositionInCanvas(node.parent, t_x, t_y);
        } else {
          return new Vec3(t_x, t_y, 1);
        }
      });

      /**
       * 加载远程图片
       * @param url 图片远程地址
       * @returns 
       */
      const loadRemoteImage = exports('loadRemoteImage', url => {
        return new Promise((resolve, reject) => {
          assetManager.loadRemote(url, (err, data) => {
            if (err) {
              log("加载远程图片资源失败", url);
              reject(err);
            } else {
              const spriteFrame = new SpriteFrame();
              const texture = new Texture2D();
              texture.image = data;
              spriteFrame.texture = texture;
              return resolve(spriteFrame);
            }
          });
        });
      });

      /**
       * 获得缩短的金币，展示用
       * @param gold 
       * @returns 
       */
      const getGoldShorten = exports('getGoldShorten', gold => {
        return gold.formatAmountWithLetter();
      });

      /**格式化数字 */
      const formatNumber = exports('formatNumber', gold => {
        if (!gold) return "0";
        return gold.formatAmountWithCommas();
      });

      /**
       * 省略字符（双字节算2位）
       * @param value 要省略的字符串
       * @param length 超过多少位就加省略符号
       * @returns 
       */
      const omitStr = exports('omitStr', (value, length) => {
        let singleByteLength = 0;
        let count = 0;
        for (let i = 0; i < value.length; i++) {
          if (hasDoubleByteChar(value.charAt(i))) {
            singleByteLength += 2;
          } else {
            singleByteLength++;
          }
        }
        let newValue = "";
        for (let i = 0; i < value.length; i++) {
          newValue += value.charAt(i);
          if (hasDoubleByteChar(value.charAt(i))) {
            count += 2;
          } else {
            count++;
          }
          if (count >= length) {
            break;
          }
        }
        return singleByteLength > length ? newValue + "···" : newValue;
      });
      function hasDoubleByteChar(str) {
        const regex = /[\u0080-\uFFFF]/;
        return regex.test(str);
      }
      const arrowDisplay = exports('arrowDisplay', (scrollView, left, right, diff, setEvent = false) => {
        const scrollViewWidth = scrollView.getComponent(UITransform).width;
        const contentWidth = scrollView.content.getComponent(UITransform).width;
        const scrollDistance = scrollView.content.position.x;
        right.active = false;
        left.active = false;
        if (scrollDistance === 0) {
          left.active = false;
          right.active = true;
        } else if (scrollDistance < 0) {
          left.active = true;
          right.active = true;
          if (Math.abs(contentWidth - (scrollViewWidth + Math.abs(scrollDistance))) < diff) {
            left.active = true;
            right.active = false;
          }
        }
        if (contentWidth < scrollViewWidth && right) {
          right.active = false;
        }
      });
      const generateUniqueId = exports('generateUniqueId', () => {
        return new Promise((reslove, reject) => {
          const options = {
            excludes: {
              touchSupport: true
            }
          };
          _cjsExports.getV18(options, result => {
            reslove(`web-${result}`);
          });
          // Fingerprint2.get(function (result) {
          //   reslove(result)
          // })
        });
      });

      const getUUID = exports('getUUID', () => {
        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {
          const r = Math.random() * 16 | 0;
          const v = c === 'x' ? r : r & 0x3 | 0x8;
          return v.toString(16);
        });
      });
      const copy = exports('copy', target => {
        if (!target) return target;
        if (Object.prototype.toString.call(target) === '[object Object]') {
          const copyShallow = createCopier({
            array: array => [...array],
            object: object => ({
              ...object
            })
          });
          return copyShallow(target);
          // return instantiate(target)
        } else if (Object.prototype.toString.call(target) === '[object Array]') {
          return deepCopy(target);
        } else {
          return target;
        }
      });
      const deepCopy = obj => {
        if (Array.isArray(obj)) {
          return obj.map(deepCopy);
        } else if (typeof obj === 'object' && obj !== null) {
          const newObj = {};
          for (const key in obj) {
            if (obj.hasOwnProperty(key)) {
              newObj[key] = deepCopy(obj[key]);
            }
          }
          return newObj;
        } else {
          return obj;
        }
      };
      const equalValue = exports('equalValue', (target1, target2, isDeep = false) => {
        const type1 = Object.prototype.toString.call(target1);
        const type2 = Object.prototype.toString.call(target2);
        if (type1 !== type2) return false;
        if (type1 === '[object Object]') {
          // return fe.circularDeepEqual(target1, target2)
          return isDeep ? circularDeepEqual(target1, target2) : strictShallowEqual(target1, target2);
        } else if (type1 === '[object Array]') {
          if (target1.length !== target2.length) return false;
          return circularDeepEqual(target1, target2);
        } else {
          return target1 === target2;
        }
      });

      /**复制一个Node并给一些函数 */
      // export const nodeCopier = (nodeTemplate: Node) => {
      //   const node = instantiate(nodeTemplate)
      // }

      /**添加聊天限制用户 */
      const putChatShieldingUser = exports('putChatShieldingUser', memberId => {
        const json = localStorage.getItem("chat_shielding_user");
        let values = JSON.parse(json);
        if (!values) {
          values = [];
        }
        const value = values.find(v => v === memberId);
        if (!value) {
          values.push(memberId);
          localStorage.setItem("chat_shielding_user", JSON.stringify(values));
        }
      });

      /**删除聊天限制用户 */
      const removeChatShieldingUser = exports('removeChatShieldingUser', memberId => {
        const json = localStorage.getItem("chat_shielding_user");
        if (!json) {
          return;
        }
        let values = JSON.parse(json);
        values = values.filter(v => v !== memberId);
        localStorage.setItem("chat_shielding_user", JSON.stringify(values));
      });

      /**判断是否为聊天限制用户 */
      const isChatShieldingUser = exports('isChatShieldingUser', memberId => {
        const json = localStorage.getItem("chat_shielding_user");
        if (!json) {
          return false;
        }
        let values = JSON.parse(json);
        const value = values.find(v => v === memberId);
        return value ? true : false;
      });
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Turntable.ts", ['cc', './BaseComponent.ts', './NodeIOEffect.ts', './index4.ts', './socketConnect.ts', './BaseViewModel.ts', './soundDefine2.ts', './baseBoard.ts', './Hall_ActivityPanel.ts', './prefabDefine2.ts', './globals.ts', './types.ts'], function (exports) {
  var cclegacy, Button, Node, Sprite, Label, instantiate, assetManager, SpriteFrame, tween, _decorator, BaseComponent, EffectType, hallWebSocketDriver, SKT_MAG_TYPE, BaseViewModel, SoundPathDefine, addToastAction, ActivityType, PrefabPathDefine, global, lang, hallAudio, sourceManageSeletor, ToastType;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      Button = module.Button;
      Node = module.Node;
      Sprite = module.Sprite;
      Label = module.Label;
      instantiate = module.instantiate;
      assetManager = module.assetManager;
      SpriteFrame = module.SpriteFrame;
      tween = module.tween;
      _decorator = module._decorator;
    }, function (module) {
      BaseComponent = module.BaseComponent;
    }, function (module) {
      EffectType = module.EffectType;
    }, null, function (module) {
      hallWebSocketDriver = module.hallWebSocketDriver;
      SKT_MAG_TYPE = module.SKT_MAG_TYPE;
    }, function (module) {
      BaseViewModel = module.default;
    }, function (module) {
      SoundPathDefine = module.SoundPathDefine;
    }, function (module) {
      addToastAction = module.addToastAction;
    }, function (module) {
      ActivityType = module.ActivityType;
    }, function (module) {
      PrefabPathDefine = module.PrefabPathDefine;
    }, function (module) {
      global = module.global;
      lang = module.lang;
      hallAudio = module.hallAudio;
      sourceManageSeletor = module.sourceManageSeletor;
    }, function (module) {
      ToastType = module.ToastType;
    }],
    execute: function () {
      var _dec, _class;
      cclegacy._RF.push({}, "3ce41TK4upIxod5qSqOObKb", "Turntable", undefined);
      const {
        ccclass,
        property
      } = _decorator;
      let Turntable = exports('Turntable', (_dec = ccclass('Turntable'), _dec(_class = class Turntable extends BaseComponent {
        constructor(...args) {
          super(...args);
          this.speed = 100;
          // 每秒移动的像素
          this.resetPosition = -200;
          // 当节点移动到此位置时重置
          this.startPosition = 0;
          // 节点的起始位置
          this.CarouselData = [{
            str: 1
          }, {
            str: 2
          }, {
            str: 3
          }];
          this.interval = 5;
          // 每条信息显示的时间（秒）
          this.timer = 0;
          this.currentIndex = 0;
          this.moveDistance = 50;
          // 文本向上移动的距离
          this.count = 0;
          // 文本移动完成所需的时间（秒）
          this.startSpinning = true;
          this.isSpinning = false;
          // 转盘是否正在旋转
          this.quickStop = false;
          // 是否快速停止
          this.theRotationIsComplete = true;
          // 是否停止状态
          this.slowingDown = false;
          // 是否正在减速
          this.spinTime = 0;
          // 当前旋转的时间
          this.totalSpinTime = 4;
          // 总旋转时间
          this.maxAngle = 3600;
          // 最大旋转角度（10圈）
          this.slowdownTime = 5;
          // 减速时间
          this.totalSlowdownTime = 3;
          // 总减速时间
          this.turntableData = void 0;
          this.winData = void 0;
          this.winState = false;
          this.propertyNode = {
            props_btn_off: new Button(),
            props_btn_turntable_arow: new Button(),
            props_spr_truntable: new Node(),
            props_label_times: new Node(),
            props_tum_gift: new Node()
          };
          this.stopRaAge = 0;
          this.rotationData = {
            gift_1: [46, 80],
            gift_2: [-14, 28],
            gift_3: [290, 336],
            gift_4: [234, 280],
            gift_5: [180, 226],
            gift_6: [126, 170],
            gift_7: [95, 115]
          };
          this.props = {
            TurntableData: {}
          };
          this.events = {
            onClosePanel: () => {},
            setCount: num => {},
            setReadStatus: value => {}
          };
        }
        start() {}
        initState() {
          return {};
        }
        onDestroy() {
          hallWebSocketDriver.sktMsgListener.remove(SKT_MAG_TYPE.TURNTABLESEND, "turntable");
        }
        bindEvent() {
          this.propertyNode.props_btn_off.node.on(Button.EventType.CLICK, () => {
            if (!this.theRotationIsComplete) {
              global.hallDispatch(addToastAction({
                content: lang.write(k => k.palyingModule.GameExit, {}, {
                  placeStr: "正在游戏中"
                }),
                type: ToastType.ERROR
              }));
            } else {
              hallWebSocketDriver.sktMsgListener.remove(SKT_MAG_TYPE.TURNTABLESEND, "turntable");
              this.events.onClosePanel();
            }
          });
          this.propertyNode.props_btn_turntable_arow.node.on(Button.EventType.CLICK, this.onMouseDown, this);
          hallWebSocketDriver.sktMsgListener.add(SKT_MAG_TYPE.TURNTABLESEND, "turntable", (data, error) => {
            if (error) return;
            if (this.count > 0) {
              this.count--;
              this.winData = data;
              if (data.count == 0) {
                this.events.setReadStatus(ActivityType.TURNPLATE + '');
                this.propertyNode.props_btn_turntable_arow.getComponent(Sprite).grayscale = true;
              }
              this.events.setCount(data);
              hallAudio.playOneShot(SoundPathDefine.WHIRL);
              this.propertyNode.props_label_times.getComponent(Label).string = this.count + ' times';
              this.propertyNode.props_spr_truntable.children.forEach(item => {
                if (item.turntableId == data.turntablePrizeEntity.id) {
                  let values = this.rotationData[item.name];
                  this.stopRaAge = Number(this.getRandomBetween(values[0], values[1]));
                  this.startSpinning = true;
                  this.isSpinning = true;
                  this.quickStop = false;
                  this.slowingDown = false;
                  this.spinTime = 0;
                }
              });
            } else {
              global.hallDispatch(addToastAction({
                content: data.reasonlang.write(k => k.WebSocketModule.ConfigGameFaild, {}, {
                  placeStr: data.reason
                }),
                type: ToastType.ERROR
              }));
            }
          });
        }
        // 处理鼠标点击事件
        onMouseDown(event) {
          if (this.count <= 0) {
            this.events.setReadStatus(ActivityType.TURNPLATE + '');
            this.propertyNode.props_btn_turntable_arow.getComponent(Sprite).grayscale = true;
          } else if (this.startSpinning) {
            if (!this.winState) {
              this.startSpinning = false;
              if (this.isSpinning) {
                // 如果已经在旋转，启动快速停止
                this.quickStop = true;
                this.slowingDown = true;
                this.slowdownTime = 0;
                this.startSpinning = true;
              } else {
                hallWebSocketDriver.sendSktMessage(SKT_MAG_TYPE.TURNTABLESEND, {
                  turntableId: this.turntableData.turntable.id
                });
              }
            }
          }
        }
        useProps(key, value) {
          if (key == 'TurntableData') {
            let {
              turntable,
              turntablePrizeEntities,
              count
            } = value.cur;
            this.count = count;
            if (this.count <= 0) {
              this.propertyNode.props_btn_turntable_arow.getComponent(Sprite).grayscale = true;
            }
            this.turntableData = value.cur;
            this.propertyNode.props_label_times.getComponent(Label).string = count + ' times';
            turntablePrizeEntities.forEach((j, I) => {
              let node = instantiate(this.propertyNode.props_tum_gift);
              this.loadTurntableImg(j, node);
              node.setPosition(0, 0);
              this.propertyNode.props_spr_truntable.children.forEach((k, i) => {
                if (I === i) {
                  k.turntableId = j.id;
                  k.addChild(node);
                }
              });
            });
          }
        }
        bindUI() {}
        getRandomBetween(min, max) {
          return (Math.random() * (max - min) + min).toFixed(0);
        }
        loadTurntableImg(item, node) {
          item.picture && assetManager.loadRemote(item.picture, (err, asset) => {
            if (this.propertyNode && !err && item.picture === asset.nativeUrl) {
              node.getComponent(Sprite).spriteFrame = SpriteFrame.createWithImage(asset);
              node.getChildByName('props_gift_name').getComponent(Label).string = item.prizeValue + '';
              node.active = true;
            }
            if (err) {
              global.hallDispatch(addToastAction({
                content: lang.write(k => k.HallModule.LoadFaild, {}, {
                  placeStr: "加载资源失败"
                }),
                type: ToastType.ERROR
              }));
            }
          });
        }
        update(dt) {
          if (this.isSpinning) {
            this.theRotationIsComplete = false;
            if (this.slowingDown) {
              this.slowingDown = false;
              this.propertyNode.props_spr_truntable.angle = 720;
              this.winState = true;
              tween(this.propertyNode.props_spr_truntable).to(5, {
                angle: this.stopRaAge
              }, {
                easing: 'quartOut'
              }).call(() => {
                this.theRotationIsComplete = true;
                this.loadWin();
              }).start();
              this.isSpinning = false;
            } else {
              this.spinTime += dt;
              let t = this.spinTime / this.totalSpinTime;
              if (t >= 1) {
                // 时间到达，停止旋转
                this.spinTime = 0;
                this.propertyNode.props_spr_truntable.angle = 720;
                this.winState = true;
                tween(this.propertyNode.props_spr_truntable).to(5, {
                  angle: this.stopRaAge
                }, {
                  easing: 'quartOut'
                }).call(() => {
                  this.theRotationIsComplete = true;
                  this.loadWin();
                }).start();
                this.isSpinning = false;
                return;
              }
              let speed = this.easeInOut(t);
              this.propertyNode.props_spr_truntable.angle -= speed * dt * this.maxAngle / this.totalSpinTime;
            }
          }
        }
        loadWin() {
          if (this.winData) {
            hallAudio.playOneShot(SoundPathDefine.WINLOTTERY);
            const win = new BaseViewModel('TurntableWin').mountView(sourceManageSeletor().getFile(PrefabPathDefine.HELL_ACTIVITY_TURNTABLEWIN).source).appendTo(this.node, {
              effectType: EffectType.EFFECT1,
              isModal: true
            }).setEvent({
              onClosePanel: () => {
                win.unMount(EffectType.EFFECT2);
              }
            }).setProps({
              TurntableData: this.winData
            });
            this.winState = false;
          }
        }
        // 自定义缓动函数，启动时更快
        easeInOut(t) {
          if (t < 0.5) {
            return 10 * t * t * t * t; // 初期更加迅速
          } else {
            return 1 - Math.pow(-2 * t + 2, 4) / 2; // 中期加速
          }
        }
        // 减速时使用的缓动函数
        easeOut(t) {
          return Math.sin(t * Math.PI / 2);
        }
      }) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/TurntableHelp.ts", ['cc', './BaseComponent.ts'], function (exports) {
  var cclegacy, Node, _decorator, BaseComponent;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      Node = module.Node;
      _decorator = module._decorator;
    }, function (module) {
      BaseComponent = module.BaseComponent;
    }],
    execute: function () {
      var _dec, _class;
      cclegacy._RF.push({}, "5f1ceBjAc9AE5NeeN8wS7Z9", "TurntableHelp", undefined);
      const {
        ccclass,
        property
      } = _decorator;
      let TurntableHelp = exports('TurntableHelp', (_dec = ccclass('TurntableHelp'), _dec(_class = class TurntableHelp extends BaseComponent {
        constructor(...args) {
          super(...args);
          this.propertyNode = {
            props_btn_off: new Node()
          };
          this.props = {};
          this.events = {
            onClosePanel: () => {}
          };
        }
        start() {}
        initState() {
          return {};
        }
        bindEvent() {
          this.node.on(Node.EventType.TOUCH_END, () => {
            this.events.onClosePanel();
          });
          this.propertyNode.props_btn_off.on(Node.EventType.TOUCH_END, () => {
            this.events.onClosePanel();
          });
        }
        useProps(key, value) {}
        bindUI() {}
        update(deltaTime) {}
      }) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/TurntablePanel.ts", ['cc', './BaseComponent.ts', './index4.ts', './baseBoard.ts', './socketConnect.ts', './tool.ts', './globals.ts', './types.ts'], function (exports) {
  var cclegacy, Button, Node, Sprite, Label, instantiate, assetManager, SpriteFrame, Vec3, tween, _decorator, BaseComponent, addToastAction, hallWebSocketDriver, SKT_MAG_TYPE, initToggle, global, lang, ToastType;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      Button = module.Button;
      Node = module.Node;
      Sprite = module.Sprite;
      Label = module.Label;
      instantiate = module.instantiate;
      assetManager = module.assetManager;
      SpriteFrame = module.SpriteFrame;
      Vec3 = module.Vec3;
      tween = module.tween;
      _decorator = module._decorator;
    }, function (module) {
      BaseComponent = module.BaseComponent;
    }, null, function (module) {
      addToastAction = module.addToastAction;
    }, function (module) {
      hallWebSocketDriver = module.hallWebSocketDriver;
      SKT_MAG_TYPE = module.SKT_MAG_TYPE;
    }, function (module) {
      initToggle = module.initToggle;
    }, function (module) {
      global = module.global;
      lang = module.lang;
    }, function (module) {
      ToastType = module.ToastType;
    }],
    execute: function () {
      var _dec, _class;
      cclegacy._RF.push({}, "8979e1JDpFA3JIKOiQGA3hx", "TurntablePanel", undefined);
      const {
        ccclass,
        property
      } = _decorator;
      let TypeOperation = exports('TypeOperation', /*#__PURE__*/function (TypeOperation) {
        TypeOperation[TypeOperation["HELP"] = 1] = "HELP";
        TypeOperation[TypeOperation["TURNTABLE"] = 2] = "TURNTABLE";
        return TypeOperation;
      }({}));
      let TurntablePanel = exports('TurntablePanel', (_dec = ccclass('TurntablePanel'), _dec(_class = class TurntablePanel extends BaseComponent {
        constructor(...args) {
          super(...args);
          this.turntableData = void 0;
          this.CarouselData = [{
            "createTime": "2023-12-23 21:13:44",
            "horseRaceLamp": 1,
            "id": "568",
            "memberId": 800611130,
            "memberName": "guest-SOzYWR",
            "picture": "https://img.nuih.top/qy-picture-1703311584863.jpeg",
            "prizeId": 133,
            "prizeName": "1",
            "prizeType": 0,
            "prizeValue": 50,
            "state": 1,
            "turntableId": 19,
            "updateBy": ""
          }];
          this.interval = 3;
          // 每条信息显示的时间（秒）
          this.timer = 0;
          this.currentIndex = 0;
          this.moveDistance = void 0;
          // 文本向上移动的距离
          this.moveDuration = void 0;
          // 文本移动完成所需的时间（秒）
          this.winningRecordData = [];
          this.meRecordData = [];
          this.count = 0;
          this.propertyNode = {
            props_btn_turntable_arow: new Button(),
            props_spr_truntable: new Node(),
            props_btn_detail: new Button(),
            props_tum_gift: new Node(),
            props_label_times: new Node(),
            props_label_remind: new Node(),
            props_ScrollView_my: new Node(),
            props_ScrollView_all: new Node(),
            props_label_title: new Node(),
            props_label_time: new Node()
          };
          this.props = {
            TurntableData: {}
          };
          this.events = {
            rotaryStarting: () => {},
            setReadStatus: value => {}
          };
        }
        start() {
          this.currentIndex = 0; // 当前显示的数据索引
          this.timer = 0; // 计时器
          this.updateLabel();
        }
        initState() {
          return {};
        }
        bindEvent() {
          this.propertyNode.props_btn_turntable_arow.node.on(Button.EventType.CLICK, () => {
            if (this.count > 0) {
              this.events.rotaryStarting(TypeOperation.TURNTABLE, this.turntableData);
            }
          });
          this.propertyNode.props_btn_detail.node.on(Button.EventType.CLICK, () => {
            this.events.rotaryStarting(TypeOperation.HELP);
          });
          hallWebSocketDriver.sktMsgListener.add(SKT_MAG_TYPE.TURNTABLETNOTIFICATION, "main", (data, error) => {
            if (error) return;
            this.winningRecordData = data;
            this.initAll();
            this.CarouselData = data.filter(item => item.horseRaceLamp === 1);
            this.currentIndex = 0;
            this.initProps_label_remind();
          });
          initToggle(this.node.getChildByName('note_toggleGroup'), this.node, new TurntablePanel.EventHandler(), "TurntablePanel", "toggleCallback");
        }
        onDestroy() {
          hallWebSocketDriver.sktMsgListener.remove(SKT_MAG_TYPE.TURNTABLETNOTIFICATION, "main");
        }
        useProps(key, value) {
          if (key == 'TurntableData') {
            let {
              turntable,
              turntablePrizeEntities,
              count
            } = value.cur;
            this.turntableData = value.cur;
            this.winningRecordData = value.cur.turntableClaimRecordEntities ? value.cur.turntableClaimRecordEntities : [];
            this.meRecordData = value.cur.memberTurntableClaimRecordEntities ? value.cur.memberTurntableClaimRecordEntities : [];
            this.initAll();
            if (count === 0) {
              this.propertyNode.props_btn_turntable_arow.getComponent(Sprite).grayscale = true;
            }
            this.count = count;
            this.propertyNode.props_label_title.getComponent(Label).string = turntable.effectStart + ' - ' + turntable.effectEnd;
            this.propertyNode.props_label_times.getComponent(Label).string = count + ' times';
            turntablePrizeEntities.forEach((j, I) => {
              let node = instantiate(this.propertyNode.props_tum_gift);
              this.loadTurntableImg(j, node);
              node.setPosition(0, 0);
              this.propertyNode.props_spr_truntable.children.forEach((k, i) => {
                if (I === i) {
                  k.addChild(node);
                }
              });
            });
          }
        }
        setCount(data) {
          this.turntableData.count = data.count;
          if (data.count === 0) {
            this.count = data.count;
            this.propertyNode.props_btn_turntable_arow.getComponent(Sprite).grayscale = true;
          }
          this.meRecordData = data.memberTurntableClaimRecordEntities;
          this.propertyNode.props_label_times.getComponent(Label).string = data.count + ' times';
          this.initMy();
        }
        bindUI() {}
        loadTurntableImg(item, node) {
          item.picture && assetManager.loadRemote(item.picture, (err, asset) => {
            if (this.propertyNode && !err && item.picture === asset.nativeUrl) {
              node.getComponent(Sprite).spriteFrame = SpriteFrame.createWithImage(asset);
              node.getChildByName('props_gift_name').getComponent(Label).string = item.prizeValue + '';
              node.active = true;
            }
            if (err) {
              global.hallDispatch(addToastAction({
                content: lang.write(k => k.HallModule.LoadFaild, {}, {
                  placeStr: "加载资源失败"
                }),
                type: ToastType.ERROR
              }));
            }
          });
        }
        update(deltaTime) {
          this.timer += deltaTime;
          if (this.timer >= this.interval) {
            this.timer = 0; // 重置计时器
            this.currentIndex = (this.currentIndex + 1) % this.CarouselData.length; // 更新索引
            this.updateLabel(); // 更新 Label 显示的文本
          }
        }

        updateLabel() {
          if (this.CarouselData.length > 0) {
            this.propertyNode.props_label_remind.getComponent(Label).string = `Congrats to ${this.CarouselData[this.currentIndex].memberName} for winning ${this.CarouselData[this.currentIndex].prizeName}.`;
            // 获取当前位置的 x 和 z 坐标，只改变 y 坐标
            let currentPos = this.propertyNode.props_label_remind.getPosition();
            this.propertyNode.props_label_remind.setPosition(new Vec3(currentPos.x, -20, currentPos.z));
            // 使用 tween 实现移动动画
            tween(this.propertyNode.props_label_remind).to(this.interval, {
              position: new Vec3(currentPos.x, 25, currentPos.z)
            }, {
              easing: 'cubicOut'
            }).call(() => {
              this.initProps_label_remind();
            }).start();
          }
        }
        initProps_label_remind() {
          this.propertyNode.props_label_remind.setPosition(new Vec3(0, -20, 0));
        }
        toggleCallback(event, customEventData) {
          let node = event.target;
          if (node.name == 'props_Toggle1_all') {
            this.initAll();
          } else if (node.name == 'props_Toggle2_my') {
            this.initMy();
          }
        }
        initAll() {
          let view = this.propertyNode.props_ScrollView_all.getChildByName('view');
          let content = view.getChildByName('content');
          let item = view.getChildByName('item');
          content.destroyAllChildren();
          this.winningRecordData.length > 0 && this.winningRecordData.forEach(i => {
            let node = instantiate(item);
            node.active = true;
            node.getChildByName('label_name_all').getComponent(Label).string = i.memberName.length >= 4 ? i.memberName.substring(0, 4) + '***' : i.memberName;
            node.getChildByName('label_gift_all').getComponent(Label).string = i.prizeName;
            content.addChild(node);
          });
        }
        initMy() {
          let view = this.propertyNode.props_ScrollView_my.getChildByName('view');
          let content = view.getChildByName('content');
          let item = view.getChildByName('item');
          content.destroyAllChildren();
          this.meRecordData.length > 0 && this.meRecordData.forEach(i => {
            let node = instantiate(item);
            node.getChildByName('props_label_name_my').getComponent(Label).string = i.memberName;
            node.getChildByName('props_label_gift_my').getComponent(Label).string = i.prizeName;
            node.active = true;
            content.addChild(node);
          });
        }
      }) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/TurntableViewModel.ts", ['cc', './ViewModel.ts', './BaseViewModel.ts', './NodeIOEffect.ts', './prefabDefine2.ts', './globals.ts'], function (exports) {
  var cclegacy, ViewModel, BaseViewModel, EffectType, PrefabPathDefine, sourceManageSeletor;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      ViewModel = module.default;
    }, function (module) {
      BaseViewModel = module.default;
    }, function (module) {
      EffectType = module.EffectType;
    }, function (module) {
      PrefabPathDefine = module.PrefabPathDefine;
    }, function (module) {
      sourceManageSeletor = module.sourceManageSeletor;
    }],
    execute: function () {
      cclegacy._RF.push({}, "f177docgftMRrWcicumklDO", "TurntableViewModel", undefined);
      class TurntableViewModel extends ViewModel {
        constructor() {
          super('TurntablePanel');
        }
        begin() {
          this.setEvent({
            rotaryStarting: (type, data) => {
              if (type == 1) {
                const givePanel = new BaseViewModel('TurntableHelp').mountView(sourceManageSeletor().getFile(PrefabPathDefine.HELL_ACTIVITY_TURNTABLE_INTRO).source).appendTo(this.comp.node, {
                  effectType: EffectType.EFFECT1,
                  isModal: true
                }).setEvent({
                  onClosePanel: () => {
                    givePanel.unMount(EffectType.EFFECT2);
                  }
                });
                return;
              }
              if (type == 2) {
                const givePanel = new BaseViewModel('Turntable').mountView(sourceManageSeletor().getFile(PrefabPathDefine.HELL_ACTIVITY_TURNTABLE).source).appendTo(this.parentNode.parent, {
                  effectType: EffectType.EFFECT1,
                  isModal: true
                }).setEvent({
                  onClosePanel: () => {
                    givePanel.unMount(EffectType.EFFECT2);
                  },
                  setCount: num => {
                    this.comp.setCount(num);
                  },
                  setReadStatus: value => {
                    this.comp.events.setReadStatus(value);
                  }
                }).setProps({
                  TurntableData: data
                });
              }
            }
          });
        }
        connect() {
          this.inject({}, state => {
            return {};
          });
          return this;
        }
      }
      exports('default', TurntableViewModel);
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/TurntableWin.ts", ['cc', './BaseComponent.ts', './index4.ts', './soundDefine2.ts', './globals.ts'], function (exports) {
  var cclegacy, Node, Label, _decorator, BaseComponent, SoundPathDefine, hallAudio;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      Node = module.Node;
      Label = module.Label;
      _decorator = module._decorator;
    }, function (module) {
      BaseComponent = module.BaseComponent;
    }, null, function (module) {
      SoundPathDefine = module.SoundPathDefine;
    }, function (module) {
      hallAudio = module.hallAudio;
    }],
    execute: function () {
      var _dec, _class;
      cclegacy._RF.push({}, "87d2ayF5XBNNLTWB/BH1r8j", "TurntableWin", undefined);
      const {
        ccclass,
        property
      } = _decorator;
      let TurntableWin = exports('TurntableWin', (_dec = ccclass('TurntableWin'), _dec(_class = class TurntableWin extends BaseComponent {
        constructor(...args) {
          super(...args);
          this.propertyNode = {
            props_btn_off: new Node(),
            props_win_gift_name: new Node(),
            props_win_gift_num: new Node()
          };
          this.props = {
            TurntableData: {}
          };
          this.events = {
            onClosePanel: () => {}
          };
        }
        start() {}
        initState() {
          return {};
        }
        bindEvent() {
          this.propertyNode.props_btn_off.on(Node.EventType.TOUCH_END, () => {
            hallAudio.playOneShot(SoundPathDefine.BTU_CLICK);
            this.events.onClosePanel();
          });
        }
        useProps(key, value) {
          if (key === 'TurntableData') {
            if (value.cur && value.cur.turntablePrizeEntity) {
              this.propertyNode.props_win_gift_name.getComponent(Label).string = value.cur.turntablePrizeEntity.prizeName;
              // this.propertyNode.props_win_gift_num.getComponent(Label).string=value.cur.turntablePrizeEntity.prizeValue
            }
          }
        }

        bindUI() {}
        update(deltaTime) {}
      }) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/types.ts", ['cc'], function (exports) {
  var cclegacy;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }],
    execute: function () {
      cclegacy._RF.push({}, "3e36aiv2IBCdIjq0U82aFJN", "types", undefined);
      /**
       * Redux Store 类型定义
       * 独立文件避免循环依赖
       */
      // ============ Counter Types ============
      // ============ BaseBoard Types ============
      let ToastType = exports('ToastType', /*#__PURE__*/function (ToastType) {
        ToastType[ToastType["NORMAL"] = 0] = "NORMAL";
        ToastType[ToastType["WARN"] = 1] = "WARN";
        ToastType[ToastType["ERROR"] = 2] = "ERROR";
        ToastType[ToastType["SUCCESS"] = 3] = "SUCCESS";
        return ToastType;
      }({}));
      let ToastPosition = exports('ToastPosition', /*#__PURE__*/function (ToastPosition) {
        ToastPosition["TOP"] = "top";
        ToastPosition["MIDDLE"] = "middle";
        ToastPosition["BOTTOM"] = "bottom";
        return ToastPosition;
      }({}));

      // ============ MemberInfo Types ============

      // ============ Withdraw Types ============

      // ============ Root State Type ============
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/UseSetOption.ts", ['cc', './Singleton.ts', './globals.ts', './soundDefine2.ts'], function (exports) {
  var sys, cclegacy, Singleton, hallAudio, SoundPathDefine;
  return {
    setters: [function (module) {
      sys = module.sys;
      cclegacy = module.cclegacy;
    }, function (module) {
      Singleton = module.default;
    }, function (module) {
      hallAudio = module.hallAudio;
    }, function (module) {
      SoundPathDefine = module.SoundPathDefine;
    }],
    execute: function () {
      cclegacy._RF.push({}, "c83a4zp58NGYqg3Y66a4D5c", "UseSetOption", undefined);
      let audio;
      const setActiveAudio = exports('setActiveAudio', _audio => {
        audio = _audio;
      });
      class UseSetOption extends Singleton {
        constructor() {
          super();
          this.option = {
            music: true,
            sound: true,
            vibration: true,
            language: 'english',
            gameSet: {}
          };
          const option = sys.localStorage.getItem('option');
          if (!option) {
            sys.localStorage.setItem('option', JSON.stringify(this.option));
          } else {
            this.option = JSON.parse(sys.localStorage.getItem('option'));
            !this.option.gameSet && (this.option.gameSet = {});
          }
        }
        setOption(key, value) {
          this.option[key] = value;
          sys.localStorage.setItem('option', JSON.stringify(this.option));
          if (key === "music") {
            value ? hallAudio && hallAudio.play(SoundPathDefine.MAIN_BGM, true) : hallAudio && hallAudio.stop();
            if (audio) {
              value ? audio.resume() : audio.pause();
            }
          }
        }
        /**专门用于设置gameSet */
        setGameOption(gameKey, value) {
          const option = UseSetOption.Instance().option.gameSet;
          if (!option[gameKey]) {
            option[gameKey] = value;
          } else {
            Object.assign(option[gameKey], value);
          }
          this.setOption('gameSet', Object.assign({}, this.option.gameSet, {
            [gameKey]: option[gameKey]
          }));
        }
      }
      exports('default', UseSetOption);
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/utils.ts", ['cc'], function (exports) {
  var cclegacy;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }],
    execute: function () {
      exports({
        combineComparators: combineComparators,
        createIsCircular: createIsCircular,
        getStrictProperties: getStrictProperties,
        sameValueZeroEqual: sameValueZeroEqual
      });
      cclegacy._RF.push({}, "507c7vshGdAop1d6JUOSIz6", "utils", undefined);
      const {
        getOwnPropertyNames,
        getOwnPropertySymbols
      } = Object;
      const {
        hasOwnProperty
      } = Object.prototype;

      /**
       * Combine two comparators into a single comparators.
       */
      function combineComparators(comparatorA, comparatorB) {
        return function isEqual(a, b, state) {
          return comparatorA(a, b, state) && comparatorB(a, b, state);
        };
      }

      /**
       * Wrap the provided `areItemsEqual` method to manage the circular state, allowing
       * for circular references to be safely included in the comparison without creating
       * stack overflows.
       */
      function createIsCircular(areItemsEqual) {
        return function isCircular(a, b, state) {
          if (!a || !b || typeof a !== 'object' || typeof b !== 'object') {
            return areItemsEqual(a, b, state);
          }
          const {
            cache
          } = state;
          const cachedA = cache.get(a);
          const cachedB = cache.get(b);
          if (cachedA && cachedB) {
            return cachedA === b && cachedB === a;
          }
          cache.set(a, b);
          cache.set(b, a);
          const result = areItemsEqual(a, b, state);
          cache.delete(a);
          cache.delete(b);
          return result;
        };
      }

      /**
       * Get the properties to strictly examine, which include both own properties that are
       * not enumerable and symbol properties.
       */
      function getStrictProperties(object) {
        return getOwnPropertyNames(object).concat(getOwnPropertySymbols(object));
      }

      /**
       * Whether the object contains the property passed as an own property.
       */
      const hasOwn = exports('hasOwn', Object.hasOwn || ((object, property) => hasOwnProperty.call(object, property)));

      /**
       * Whether the values passed are strictly equal or both NaN.
       */
      function sameValueZeroEqual(a, b) {
        return a || b ? a === b : a === b || a !== a && b !== b;
      }
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/ViewModel.ts", ['cc', './index5.ts', './NodeIOEffect.ts', './globals.ts', './soundDefine2.ts'], function (exports) {
  var cclegacy, instantiate, find, BlockInputEvents, UIOpacity, tween, Node, getStore, getEffectByType, hallAudio, SoundPathDefine;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      instantiate = module.instantiate;
      find = module.find;
      BlockInputEvents = module.BlockInputEvents;
      UIOpacity = module.UIOpacity;
      tween = module.tween;
      Node = module.Node;
    }, function (module) {
      getStore = module.getStore;
    }, function (module) {
      getEffectByType = module.getEffectByType;
    }, function (module) {
      hallAudio = module.hallAudio;
    }, function (module) {
      SoundPathDefine = module.SoundPathDefine;
    }],
    execute: function () {
      exports('StoreInject', StoreInject);
      cclegacy._RF.push({}, "1274dawwi1GS7MZow3epiLb", "ViewModel", undefined);
      const viewModelMap = exports('viewModelMap', {});
      /**BaseViewModel为特定的功能而设计，在这里撰写主逻辑 */
      class ViewModel {
        constructor(componentStr) {
          this.componentStr = void 0;
          this.store = void 0;
          this.id = void 0;
          /**是否已卸载(此值在卸载开始之时就已赋值) */
          this.isUnMount = false;
          /**被挂载的父节点 */
          this.parentNode = void 0;
          /**取消订阅 */
          this.unsubscribe = void 0;
          /**是否是模态弹出框的模式 */
          this.isModal = false;
          /**模态框的底层透明层 */
          this.modalBg = null;
          /**自身的props，一般选择使用组件的 */
          this.props = void 0;
          /**未实例化的预制体 */
          this.prefabSource = void 0;
          /**已经实例化的节点对象 */
          this.viewNode = void 0;
          /**脚本组件 */
          this.comp = void 0;
          this.id = parseInt(Math.random() * 10000000 + '');
          this.componentStr = componentStr;
          this.store = getStore();
          this.init();
        }

        /**链接到redux-store-state，当然，不接入redux，就不调用 */ // public abstract connect(store: redux.Store<any, redux.AnyAction>): void
        // public abstract connect(storeState: StateType): void
        /**视图初始化并挂载到节点上后要执行的动作（appendTo之后要执行的动作） */
        /**初始化便要执行的函数 */
        init() {}
        /**begin函数执行完之后要执行的函数 */
        initDone() {}
        /**卸载时的回调函数 */
        unMountCallBack() {}
        dispatch(action) {
          this.store.dispatch(action);
        }
        /**绑定begin函数执行完之后要执行的函数，因为ViewModel中的begin是异步的，如果某一些操作需要确保begin之后才执行，建议在这里完成 */
        bindDoneHandler(initDone) {
          this.initDone = initDone;
          return this;
        }
        /**挂载到视图 */
        appendTo(parentNode, option) {
          const _option = Object.assign({
            effectType: null,
            effectDone: null,
            isModal: false,
            isBgClose: false,
            effectOption: {}
          }, option || {});
          this.isModal = _option.isModal;
          this.parentNode = parentNode;
          if (_option.isModal) {
            this.modalBg = instantiate(find("Canvas/modalBg"));
            this.modalBg.active = true;
            this.modalBg.addComponent(BlockInputEvents);
            const uiOpacity = this.modalBg.getComponent(UIOpacity) || this.modalBg.addComponent(UIOpacity);
            uiOpacity.opacity = 0;
            tween(uiOpacity).to(0.1, {
              opacity: 255
            }).start();
            this.modalBg.addChild(this.viewNode);
            parentNode.addChild(this.modalBg);
            hallAudio && hallAudio.playOneShot(SoundPathDefine.POP_UP);
            // if (_option.isBgClose) {
            //   this.modalBg && this.modalBg.once(Node.EventType.TOUCH_END, () => {
            //     this.unMount(EffectType.EFFECT1)
            //   })
            // }
          } else {
            parentNode.addChild(this.viewNode);
          }
          const done = () => window.setTimeout(() => {
            this.begin();
            this.initDone();
          }, 10);
          _option.effectType !== null ? getEffectByType(_option.effectType)(this.viewNode).enter(_option.effectOption).then(() => {
            _option.effectDone && _option.effectDone();
            done();
          }) : done();
          viewModelMap[this.viewNode.uuid] = this;
          return this;
        }
        /**手动绑定底层点击事件 */
        bindCloseToBg(closeHandler) {
          this.modalBg && this.modalBg.once(Node.EventType.TOUCH_END, () => {
            closeHandler && closeHandler();
          });
        }
        /**初始化视图对象，告知viewmodel需要实例化的预制体和组件脚本(若不执行这个，节点对象和自定义脚本将无法调用) */
        mountView(prefabSource) {
          // console.log("[ViewModel] mountView called, componentStr:", this.componentStr);
          // this.prefabFile = PrefabFiles.find(item => item.path === prefabFile).source
          this.prefabSource = prefabSource; //sourceManage.getFile("hall", prefabPath)?.source
          this.viewNode = instantiate(prefabSource);
          // console.log("[ViewModel] viewNode instantiated:", this.viewNode?.name);

          // Check if component already exists (from prefab)
          let comp = null;
          if (typeof this.componentStr === 'string') {
            comp = this.viewNode.getComponent(this.componentStr);
            // console.log("[ViewModel] getComponent by string result:", comp);
            if (!comp) {
              // console.log("[ViewModel] Component not found, attempting addComponent...");
              comp = this.viewNode.addComponent(this.componentStr);
              // console.log("[ViewModel] addComponent result:", comp);
            }
          } else {
            comp = this.viewNode.getComponent(this.componentStr);
            if (!comp) comp = this.viewNode.addComponent(this.componentStr);
          }
          this.comp = comp;
          // console.log("[ViewModel] final comp:", this.comp);
          return this;
        }
        /**卸载(销毁节点，且取消订阅) */
        unMount(effectType = null) {
          // hallAudio && hallAudio.playOneShot(SoundPathDefine.BTU_CLICK)
          if (this.isUnMount) return;
          this.isUnMount = true;
          return new Promise((reslove, reject) => {
            this.unsubscribe && this.unsubscribe();
            if (this.viewNode) {
              const done = () => {
                try {
                  // this.viewNode && this.viewNode.removeAllChildren()
                  this.comp && this.comp.destroy();
                  this.viewNode && this.viewNode.destroy();
                  if (this.isModal) {
                    const uiOpacity = this.modalBg.getComponent(UIOpacity) || this.modalBg.addComponent(UIOpacity);
                    tween(uiOpacity).to(0.1, {
                      opacity: 0
                    }).call(() => this.modalBg.destroy()).start();
                  }
                  this.unMountCallBack();
                  reslove(true);
                } catch (e) {
                  console.error(e);
                  reslove(true);
                }
              };
              effectType !== null ? getEffectByType(effectType)(this.viewNode).out(false).then(() => done()) : done();
            } else {
              reject("The view has been destroied!");
            }
          });
        }
        setProps(props, force = false) {
          // this.props = props
          this.comp.setProps(props, force);
          return this;
        }
        setEvent(enevts) {
          this.comp.setEvent(enevts);
          return this;
        }
        /**
         * redux的状态注入器
         * @param initProps 注入时的默认props(如果页面已经挂载会触发更新)
         * @param mapStateToProps props对redux-state的订阅映射
         * @param force 是否强制触发订阅函数（默认情况下，若新旧的state数据一致，将不会触发错误，若force=true，将强制触发，比如适用于toast，两次触发toast的字符串是一样的，需要忽略数据是否更新。请慎用true）
         * @returns 
         */
        inject(initProps, mapStateToProps, force = false) {
          this.props = Object.assign({}, this.props, initProps);
          this.comp.setProps(this.props);
          this.dispatch = this.store.dispatch;
          this.comp.dispatch = this.store.dispatch;
          this.unsubscribe = this.store.subscribe(() => {
            const newPropsPart = mapStateToProps(this.store.getState());
            this.props = Object.assign({}, this.props, newPropsPart);
            this.comp.setProps(this.props, force);
          });
          return this;
        }
      }
      exports('default', ViewModel);
      function StoreInject(store) {
        return function (constructor) {
          return class extends constructor {
            constructor(...args) {
              super(...args);
              this.store = store;
            }
          };
        };
      }
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/VipMainViewModel.ts", ['cc', './ViewModel.ts', './NodeIOEffect.ts', './index5.ts', './baseBoard.ts'], function (exports) {
  var cclegacy, ViewModel, EffectType, getStore, updateVipBonusInfo;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      ViewModel = module.default;
    }, function (module) {
      EffectType = module.EffectType;
    }, function (module) {
      getStore = module.getStore;
    }, function (module) {
      updateVipBonusInfo = module.updateVipBonusInfo;
    }],
    execute: function () {
      cclegacy._RF.push({}, "2c88cZxbAZJs6YDHKRwVybF", "VipMainViewModel", undefined);
      class VipMainViewModel extends ViewModel {
        constructor() {
          super('Hall_VipMain');
          this.vipLevel = void 0;
        }
        begin() {
          this.setEvent({
            close: () => {
              this.unMount(EffectType.EFFECT2);
            }
          });
        }
        unMountCallBack() {
          this.dispatch(updateVipBonusInfo(null));
        }
        connect() {
          this.inject({
            memberInfo: getStore().getState().memberInfo
          }, state => {
            this.vipLevel = state.memberInfo.vipLevel;
            return {
              memberInfo: state.memberInfo,
              vipBonusInfo: state.baseBoard.vipBonusInfo
            };
          });
          return this;
        }
      }
      exports('default', VipMainViewModel);
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/VipUpViewModel.ts", ['cc', './ViewModel.ts'], function (exports) {
  var cclegacy, ViewModel;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      ViewModel = module.default;
    }],
    execute: function () {
      cclegacy._RF.push({}, "b1546tpbuJATIusvjU7w4nF", "VipUpViewModel", undefined);
      class VipUpViewModel extends ViewModel {
        constructor() {
          super('Hall_VipUp');
        }
        begin() {
          this.setEvent({
            close: () => {
              this.unMount();
            }
          });
        }
        connect() {
          this.inject({}, state => {
            return {};
          });
          return this;
        }
      }
      exports('default', VipUpViewModel);
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/WebSocketStarter.ts", ['cc', './Singleton.ts', './SktListener.ts', './globals.ts', './hallConfig.ts', './mockData.ts'], function (exports, module) {
  var sys, cclegacy, Singleton, SktListener, hallDispatch, config, EVEVT_TYPE, SKT_OPERATION, SKT_HOST, mockApiResponses;
  return {
    setters: [function (module) {
      sys = module.sys;
      cclegacy = module.cclegacy;
    }, function (module) {
      Singleton = module.default;
    }, function (module) {
      SktListener = module.default;
    }, function (module) {
      hallDispatch = module.hallDispatch;
    }, function (module) {
      config = module.config;
      EVEVT_TYPE = module.EVEVT_TYPE;
      SKT_OPERATION = module.SKT_OPERATION;
      SKT_HOST = module.SKT_HOST;
      var _setter = {};
      _setter.EVEVT_TYPE = module.EVEVT_TYPE;
      _setter.SKT_HOST = module.SKT_HOST;
      _setter.SKT_OPERATION = module.SKT_OPERATION;
      exports(_setter);
    }, function (module) {
      mockApiResponses = module.mockApiResponses;
    }],
    execute: function () {
      cclegacy._RF.push({}, "0444b6OGsJLMKen9ZoZQbnS", "WebSocketStarter", undefined);
      let _baseBoardActions = null;
      async function getBaseBoardActions() {
        if (!_baseBoardActions) {
          _baseBoardActions = await module.import('./baseBoard.ts');
        }
        return _baseBoardActions;
      }

      // 辅助函数：创建 loading action
      async function setLoadingAction(params) {
        const actions = await getBaseBoardActions();
        return actions.setLoadingAction(params);
      }
      const msgMap = {};
      /**专门为单一socket、多类型而设计 */
      // Mock 模式：跟踪每个游戏的当前状态（0=主游戏, 1=免费游戏）
      const mockGameStateMap = new Map();
      class WebSocketStarter extends Singleton {
        constructor(...args) {
          super(...args);
          this.ws = void 0;
          this.isConnect = false;
          /**循环连接timer */
          this.connectTimer = 0;
          this.heartBeatTimer = 0;
          this.websocketUrl = void 0;
          this.heart_beatList = [];
          this.eventListener = new SktListener();
          /**最大重连次数 */
          this.maxReconnectTime = 5;
          /**剩余重试次数 */
          this.remainRetryCount = 0;
          this.isReconnecting = false;
          this.isAllowReconnect = true;
          this.reconnectTimeOutTimer = 0;
          /**socket是否已经出发open，用于判断在promise中，如果socket已经open之后，将不会再调用reject */
          this.isSocketOpen = false;
          /** Fish Mock 模式：鱼群生成定时器 */
          this.fishSpawnTimerId = 0;
          this.fishIdCounter = 200;
        }
        initSocket(websocketUrl) {
          this.websocketUrl = websocketUrl || config.websocketUrl + `?Token=${sys.localStorage.getItem("token")}`;
          this.reconnectTimeOutTimer && window.clearTimeout(this.reconnectTimeOutTimer);
          return new Promise((resolve, reject) => {
            this.isSocketOpen = false;
            if (this.ws && WebSocket.OPEN == this.ws.readyState) {
              resolve(true);
            } else {
              // Mock 模式：模拟 WebSocket 连接
              {
                console.log("[Mock] 模拟 WebSocket 连接");
                this.simulateWebSocketConnection(resolve);
                return;
              }
            }
          });
        }
        /**发起重连 */
        reConnect(force = false) {
          if (!force && this.isReconnecting) {
            this.isReconnecting = false;
            console.log('重连取消', this);
            return;
          }
          this.isReconnecting = true;
          this.isConnect = false;
          if (this.remainRetryCount <= 0) {
            console.log('次数达上限');
            this.isReconnecting = false;
          } else {
            this.remainRetryCount--;
            console.log('发起重连', this.remainRetryCount);
            this.eventListener.dispath(EVEVT_TYPE.RECONNECT, this.remainRetryCount);
            this.ws = null;
            // 500ms后重试
            window.setTimeout(() => {
              console.log('500ms后重试');
              this.initSocket().then(e => {
                console.log('连接成功！！');
                this.isReconnecting = false;
                this.eventListener.dispath(EVEVT_TYPE.RECONNECT_SUCCESS, {});
              }).catch(e => {
                console.log('重连失败');
                this.isReconnecting = false;
                this.reConnect(true);
              });
            }, 1000);
          }
        }
        onDisconnect(message) {
          console.log('通知断连');
          this.isConnect = false;
          this.eventListener.dispath(EVEVT_TYPE.DISCONNECT, message);
          this.reConnect();
        }
        exit() {
          console.log('连接退出');
          this.isAllowReconnect = false;
          window.clearInterval(this.heartBeatTimer);
          this.ws && this.ws.close();
        }

        /**
         * Mock 模式：发送模拟的 WebSocket 消息
         */
        sendMockMessages() {
          console.log("[Mock] 开始发送 WebSocket mock 消息");

          // 延迟发送，确保连接已完全建立
          setTimeout(() => {
            // 发送用户信息
            const memberInfo = mockApiResponses.MEMBER_INFO;
            if (memberInfo) {
              this.simulateMessage({
                messageId: `mock_${Date.now()}_1`,
                operation: SKT_OPERATION.GENERAL,
                host: SKT_HOST.HALL,
                sktCode: "400",
                // MEMBER_INFO
                gameId: 0,
                length: JSON.stringify({
                  code: '200',
                  data: memberInfo,
                  message: 'success'
                }).length,
                data: {
                  code: '200',
                  data: memberInfo,
                  message: 'success'
                }
              });
            }

            // 延迟发送弹窗信息
            setTimeout(() => {
              const popUps = mockApiResponses.POP_UPS;
              if (popUps) {
                this.simulateMessage({
                  messageId: `mock_${Date.now()}_2`,
                  operation: SKT_OPERATION.GENERAL,
                  host: SKT_HOST.HALL,
                  sktCode: "403",
                  // POP_UPS
                  gameId: 0,
                  length: JSON.stringify({
                    code: '200',
                    data: popUps,
                    message: 'success'
                  }).length,
                  data: {
                    code: '200',
                    data: popUps,
                    message: 'success'
                  }
                });
              }
            }, 500);
          }, 1000);
        }

        /**
         * 模拟接收 WebSocket 消息
         */
        simulateMessage(messageBody) {
          console.log("[Mock] 模拟 WebSocket 消息:", messageBody.sktCode, messageBody.data);
          this.eventListener.dispath(EVEVT_TYPE.MESSAGE, messageBody);
        }

        /**
         * Mock 模式：模拟 WebSocket 连接
         */
        simulateWebSocketConnection(resolve) {
          // 创建一个模拟的 WebSocket 对象
          const mockWs = {
            readyState: 1,
            // OPEN
            send: () => {},
            // 空函数，不实际发送
            close: () => {},
            onopen: null,
            onerror: null,
            onclose: null,
            onmessage: null
          };

          // 模拟连接成功
          setTimeout(() => {
            this.ws = mockWs;
            this.isAllowReconnect = true;
            this.isConnect = true;
            this.isSocketOpen = true;
            this.isReconnecting = false;
            this.remainRetryCount = this.maxReconnectTime;

            // 触发 OPEN 事件
            this.eventListener.dispath(EVEVT_TYPE.OPEN, true);

            // 模拟心跳响应
            this.heartBeatTimer = window.setInterval(() => {
              // 模拟心跳响应
              this.eventListener.dispath(EVEVT_TYPE.HEART_BEAT, {});
            }, 4000);

            // 发送 mock 消息
            this.sendMockMessages();
            resolve(true);
          }, 100);
        }

        /**
         * Fish Mock 模式：启动鱼群持续生成定时器
         */
        startFishSpawnTimer() {
          if (this.fishSpawnTimerId) return; // 已经启动

          console.log("[FishMock] Starting fish spawn timer...");
          this.fishSpawnTimerId = window.setInterval(() => {
            // 生成 3-6 条随机鱼
            const fishCount = 3 + Math.floor(Math.random() * 4);
            const fishs = [];
            for (let i = 0; i < fishCount; i++) {
              const fishType = 1 + Math.floor(Math.random() * 16); // 鱼类型 1-16
              const roadId = 1 + Math.floor(Math.random() * 50); // 曲线 1-50
              fishs.push({
                id: this.fishIdCounter++,
                type: fishType,
                road: roadId,
                t: 0,
                x: 0,
                y: 0,
                angle: 0
              });
            }

            // 构建 GENERATE_FISH 消息
            const messageBody = {
              messageId: Date.now().toString(),
              operation: SKT_OPERATION.GENERAL,
              host: SKT_HOST.MULTI,
              // Fish uses MULTI host
              sktCode: "520236",
              // GENERATE_FISH
              gameId: 17,
              // Fish gameId
              length: 0,
              data: {
                success: true,
                data: {
                  fishs
                }
              }
            };

            // 触发全局事件
            console.log("[FishMock] Spawning fish:", fishs.length);
            this.eventListener.dispath(EVEVT_TYPE.MESSAGE, messageBody);
          }, 3000); // 每 3 秒生成一批鱼
        }

        stopFishSpawnTimer() {
          if (this.fishSpawnTimerId) {
            window.clearInterval(this.fishSpawnTimerId);
            this.fishSpawnTimerId = 0;
            console.log("[FishMock] Fish spawn timer stopped.");
          }
        }
      }
      exports('default', WebSocketStarter);
      /**websocket的实际驱动类 */
      class WebSocketDriver {
        constructor(gameId, host) {
          this.driverId = void 0;
          this.gameId = void 0;
          this.server = void 0;
          this.host = void 0;
          // public messagerMap: { [key: number]: SktMessager<SKT_TYPE> }
          this.sktMsgListener = null;
          this.gameId = gameId;
          this.host = host;
          this.driverId = parseInt((Math.random() * Math.pow(10, 10)).toString()).toString();
          this.sktMsgListener = new SktListener();
          //每个Driver都会监听一个全局的message事件，然后在这里判读分流
          WebSocketStarter.Instance().eventListener.add(EVEVT_TYPE.MESSAGE, this.driverId, messageBody => {
            if (messageBody.operation === SKT_OPERATION.ERROR) {
              //消息出现业务错误
              this.sktMsgListener.dispath(messageBody.sktCode, {}, messageBody.data);
            } else if (messageBody.operation === SKT_OPERATION.RECOVER) {
              this.filterData(messageBody.data, messageBody);
            } else {
              if (messageBody.host === this.host && messageBody.gameId === this.gameId) {
                const {
                  data,
                  error
                } = this.filterData(messageBody.data, messageBody);
                // DEV && this.gameId > 0 && console.log(`${new Date().toLocaleString('en-US', { timeZone: 'Asia/Shanghai' })} 收到${this.gameId}--${messageBody.sktCode}消息`, data)
                this.sktMsgListener.dispath(messageBody.sktCode, data, error);
              }
            }
          });
        }
        filterData(data, source) {
          return {
            data,
            error: undefined
          };
        }
        sendSktMessage(sktCode, payLoad, option) {
          const _option = Object.assign({
            isLoading: false,
            operation: SKT_OPERATION.GENERAL,
            timeOut: 3000
          }, option || {});
          // DEV && this.gameId > 0 && console.log(`${new Date().toLocaleString('en-US', { timeZone: 'Asia/Shanghai' })} 发送${this.gameId}--${sktCode}消息`, payLoad)
          const sktMessager = new SktMessager(WebSocketStarter.Instance().ws, _option.operation, payLoad, this.gameId, sktCode, this.host);
          // this.messagerMap[sktMessager.messageId] = sktMessager
          _option.isLoading && setLoadingAction({
            isShow: true,
            isAllowCloseLoading: false,
            flagId: sktMessager.messageId
          }).then(action => hallDispatch(action));
          sktMessager.send(_option.timeOut);
          return sktMessager;
        }
        loginGame(loginMethod) {
          const sktMessager = new SktMessager(WebSocketStarter.Instance().ws, SKT_OPERATION.LOGIN, {
            gameId: this.gameId
          }, this.gameId, loginMethod, this.host);
          sktMessager.send(3000);
          sktMessager.bindReceiveHandler(message => {
            //收到反馈消息的回调
          });
          return sktMessager;
        }
        logoutGame(logoutMethod) {
          const sktMessager = new SktMessager(WebSocketStarter.Instance().ws, SKT_OPERATION.LOGOUT, {
            gameId: this.gameId
          }, this.gameId, logoutMethod, this.host);
          sktMessager.send();
          WebSocketStarter.Instance().eventListener.removeById(this.driverId);
          this.sktMsgListener.clearLinster();
          return sktMessager;
        }
      }
      exports('WebSocketDriver', WebSocketDriver);
      class SktMessager {
        constructor(ws, operation, payLoad, gameId, sktCode, host) {
          this.operation = void 0;
          this.host = void 0;
          this.sktCode = void 0;
          this.gameId = void 0;
          this.messageId = void 0;
          this.status = void 0;
          this.ws = null;
          this.payLoad = null;
          this.receiveData = null;
          this.sendTime = 0;
          this.receiveTime = 0;
          /**响应的样本数据 */
          this.verifySampleData = void 0;
          /**返回false，或者不调用bindTimeoutHandler函数，收到回复后将自动删除此message */
          this.timeoutHandler = void 0;
          this.receiveHandler = void 0;
          this.ws = ws;
          this.operation = operation;
          this.host = host;
          this.sktCode = sktCode;
          this.gameId = gameId;
          this.payLoad = payLoad;
          this.messageId = this.generateMessageId().toString();
          this.status = 'INIT';
        }
        /**生成信息ID */
        generateMessageId() {
          const readom = parseInt((Math.random() * Math.pow(10, 10)).toString());
          return Date.now() + readom;
        }
        /**
         * 设置超时的时间函数
         * @param handler 返回false会自动清除消息
         */
        bindTimeoutHandler(handler) {
          this.timeoutHandler = handler;
        }
        /**
         * 设置校验数据
         * @param sampleData 校验的样本数据
         */
        setSampleData(sampleData) {
          this.verifySampleData = sampleData;
        }
        /**
         * 绑定回复消息的回调函数
         * @param handler 回调函数(若传入了samplaData，函数会给出是否通过数据验证isPassDataVerify，若不传samplaData则isPassDataVerify将默认回传true)
         * @param sampleData 如果要验证数据，此处要传入样本数据
         */
        bindReceiveHandler(handler, sampleData) {
          this.verifySampleData = sampleData;
          this.receiveHandler = handler;
        }
        send(timeOut = 0) {
          // Mock 模式：模拟发送消息
          {
            console.log(`[Mock] 模拟发送 WebSocket 消息: ${this.sktCode}`, this.payLoad);
            this.status = 'SENDED';

            // 对于某些消息，模拟立即响应
            if (this.operation === SKT_OPERATION.HEART) {
              // 心跳消息，模拟立即响应
              setTimeout(() => {
                WebSocketStarter.Instance().eventListener.dispath(EVEVT_TYPE.HEART_BEAT, '');
              }, 50);
            } else {
              // 对于业务消息，模拟响应
              // 增加延迟以更接近真实网络环境,给游戏足够时间完成动画和状态清理
              setTimeout(() => {
                this.simulateMockResponse();
              }, 800); // 增加到 800ms,确保 spin 动画有足够时间完成
            }

            msgMap[this.messageId] = this;
            return true;
          }
        }
        /**
         * Mock 模式：模拟消息响应
         */
        simulateMockResponse() {
          console.log(`[MockDebug] simulateMockResponse called. GameId: ${this.gameId}, SktCode: ${this.sktCode}`);
          let responseData = null;

          // Fish (gameId=17) Mock Data - Priority Check
          if (this.gameId == 17 && (this.sktCode == "2" || this.sktCode == "520102" || this.sktCode == "520120" || this.sktCode == "520108" || this.sktCode == "520112")) {
            console.log(`[MockDebug] Fish Priority Block Matched. sktCode=${this.sktCode}`);
            if (this.sktCode == "2") {
              // AUTH (Login)
              responseData = {
                success: true,
                data: {
                  playerId: "mock_user_fish_01",
                  rooms: [{
                    roomId: 1,
                    name: "Novice",
                    type: 1,
                    maxNum: 4,
                    free: 0,
                    general: 0,
                    crowded: 0,
                    lower: 100,
                    upper: 1000,
                    proportionGold: 1,
                    proportionChips: 1,
                    minOne: 1,
                    tabble: 1,
                    afee: 0,
                    inType: 0,
                    playerNum: 0,
                    status: "0",
                    displayNames: "",
                    placeHolder: ""
                  }, {
                    roomId: 2,
                    name: "Intermediate",
                    type: 1,
                    maxNum: 4,
                    free: 0,
                    general: 0,
                    crowded: 0,
                    lower: 1000,
                    upper: 10000,
                    proportionGold: 1,
                    proportionChips: 1,
                    minOne: 10,
                    tabble: 1,
                    afee: 0,
                    inType: 0,
                    playerNum: 0,
                    status: "0",
                    displayNames: "",
                    placeHolder: ""
                  }, {
                    roomId: 3,
                    name: "Advanced",
                    type: 1,
                    maxNum: 4,
                    free: 0,
                    general: 0,
                    crowded: 0,
                    lower: 10000,
                    upper: 100000,
                    proportionGold: 1,
                    proportionChips: 1,
                    minOne: 100,
                    tabble: 1,
                    afee: 0,
                    inType: 0,
                    playerNum: 0,
                    status: "0",
                    displayNames: "",
                    placeHolder: ""
                  }, {
                    roomId: 4,
                    name: "Expert",
                    type: 1,
                    maxNum: 4,
                    free: 0,
                    general: 0,
                    crowded: 0,
                    lower: 100000,
                    upper: 1000000,
                    proportionGold: 1,
                    proportionChips: 1,
                    minOne: 1000,
                    tabble: 1,
                    afee: 0,
                    inType: 0,
                    playerNum: 0,
                    status: "0",
                    displayNames: "",
                    placeHolder: ""
                  }]
                }
              };
            } else if (this.sktCode == "520102") {
              // JOIN_ROOM
              responseData = {
                success: true,
                data: {
                  seats: [{
                    order: 0,
                    cedit: 100000,
                    icon: "1",
                    nickName: "MockUser",
                    ip: "127.0.0.1",
                    playerId: "mock_user_fish_01",
                    sex: 1,
                    ready: 1,
                    bullet: 100000,
                    offline: 0,
                    vip: 0,
                    level: 1
                  }, {
                    order: 1,
                    cedit: 50000,
                    icon: "2",
                    nickName: "Bot1",
                    ip: "127.0.0.1",
                    playerId: "bot_01",
                    sex: 1,
                    ready: 1,
                    bullet: 100000,
                    offline: 0,
                    vip: 0,
                    level: 1
                  }, {
                    order: 2,
                    cedit: 80000,
                    icon: "3",
                    nickName: "Bot2",
                    ip: "127.0.0.1",
                    playerId: "bot_02",
                    sex: 2,
                    ready: 1,
                    bullet: 100000,
                    offline: 0,
                    vip: 0,
                    level: 1
                  }, {
                    order: 3,
                    cedit: 30000,
                    icon: "4",
                    nickName: "Bot3",
                    ip: "127.0.0.1",
                    playerId: "bot_03",
                    sex: 2,
                    ready: 1,
                    bullet: 100000,
                    offline: 0,
                    vip: 0,
                    level: 1
                  }],
                  stage: 1,
                  roomId: "1",
                  owner: "",
                  game: 1,
                  endPoint: 1,
                  maxlimit: 4,
                  time: 0,
                  reMaintime: 0,
                  payWay: 0,
                  playWay: 0,
                  partake: 0,
                  bulletNum: 100000,
                  goldNum: 100000,
                  guildId: 0
                }
              };
            } else if (this.sktCode == "520120") {
              // REQ_SCENCE
              responseData = {
                success: true,
                data: {
                  scenceId: 1,
                  batterys: [{
                    playerId: "mock_user_fish_01",
                    score: 100000,
                    skin: 1,
                    power: 0
                  }, {
                    playerId: "bot_01",
                    score: 50000,
                    skin: 1,
                    power: 0
                  }, {
                    playerId: "bot_02",
                    score: 80000,
                    skin: 1,
                    power: 0
                  }, {
                    playerId: "bot_03",
                    score: 30000,
                    skin: 1,
                    power: 0
                  }],
                  fishs: [
                  // Use different curve IDs (roads) and spread fish across the screen
                  {
                    id: 101,
                    type: 1,
                    road: 10,
                    t: 0,
                    x: 500,
                    y: 300,
                    angle: 0
                  }, {
                    id: 102,
                    type: 2,
                    road: 11,
                    t: 100,
                    x: 600,
                    y: 250,
                    angle: 0
                  }, {
                    id: 103,
                    type: 3,
                    road: 12,
                    t: 200,
                    x: 400,
                    y: 350,
                    angle: 0
                  }, {
                    id: 104,
                    type: 4,
                    road: 13,
                    t: 300,
                    x: 350,
                    y: 200,
                    angle: 0
                  }, {
                    id: 105,
                    type: 5,
                    road: 14,
                    t: 400,
                    x: 700,
                    y: 400,
                    angle: 0
                  }, {
                    id: 106,
                    type: 6,
                    road: 15,
                    t: 500,
                    x: 300,
                    y: 150,
                    angle: 0
                  }, {
                    id: 107,
                    type: 7,
                    road: 16,
                    t: 600,
                    x: 550,
                    y: 100,
                    angle: 0
                  }, {
                    id: 108,
                    type: 8,
                    road: 17,
                    t: 700,
                    x: 650,
                    y: 320,
                    angle: 0
                  }, {
                    id: 109,
                    type: 9,
                    road: 18,
                    t: 800,
                    x: 450,
                    y: 180,
                    angle: 0
                  }, {
                    id: 110,
                    type: 10,
                    road: 19,
                    t: 900,
                    x: 750,
                    y: 280,
                    angle: 0
                  }]
                }
              };
              // 启动持续生成鱼群的定时器（Mock 模式）
              WebSocketStarter.Instance().startFishSpawnTimer();
            } else if (this.sktCode == "520108") {
              // HIT_FISH - 击中鱼响应
              // Mock 模式下，转换请求格式为响应格式
              // 请求: { playerId, bulletId, fishId, fishConfigId }
              // 响应: HitFishVo { playerId, order, dies: [{ fishId, score }] }
              const payload = this.payLoad;
              responseData = {
                success: true,
                data: {
                  playerId: payload.playerId,
                  order: 0,
                  dies: [{
                    fishId: payload.fishId,
                    score: 100 + Math.floor(Math.random() * 900)
                  }] // 随机分数 100-1000
                }
              };
            } else if (this.sktCode == "520112") {
              // EXIT_TABLE - 退出房间
              console.log("[FishMock] EXIT_TABLE - 退出房间");
              // 停止鱼群生成定时器
              WebSocketStarter.Instance().stopFishSpawnTimer();
              responseData = {
                success: true,
                data: {}
              };
            }
          } else if (this.sktCode === "400") {
            // MEMBER_INFO
            responseData = mockApiResponses.MEMBER_INFO;
          } else if (this.sktCode === "403") {
            // POP_UPS
            responseData = mockApiResponses.POP_UPS;
          } else if (this.sktCode === "424") {
            // GIFT_LIST
            responseData = [];
          } else if (this.sktCode === "3") {
            // EXIT (退出游戏)
            // 退出游戏响应
            responseData = {
              success: true,
              data: {}
            };
          } else if (this.sktCode === "1") {
            // LOGIN (子游戏登录)
            // 子游戏登录响应，格式需要符合 filterData 的期望
            responseData = {
              success: true,
              data: {
                bl: 10000,
                // 余额
                gameType: 0,
                // GameType.MAIN
                freeGameCount: 0,
                freeGameAmount: 0,
                fixedChessboardIcon: [],
                iconStay: 0,
                lv: 1,
                memberId: "mock_member_001",
                tableId: "mock_table_001"
              }
            };
          } else if (this.sktCode === "426") {
            // TURNTABLEDATA (转盘数据)
            const mockTurntableData = [{
              count: 5,
              turntable: {
                id: 101
              },
              turntablePrizeEntities: Array.from({
                length: 7
              }, (_, i) => ({
                id: i + 1,
                name: `gift_${i + 1}`,
                picture: "https://via.placeholder.com/100",
                // using placeholder for now
                prizeValue: (i + 1) * 100
              }))
            }];
            responseData = mockTurntableData;
          } else if (this.sktCode === "2") {
            // LAUNCH (老虎机下注/启动)
            // 老虎机下注响应，格式需要符合 RollerLaunchResult 的期望
            // 根据游戏ID判断是哪个游戏，不同游戏有不同的数据结构
            const columnCount = this.gameId === 15 || this.gameId === 14 ? 6 : 5; // starlightV2 和 ThorV2 有6列，其他游戏通常是5列
            const rowCount = 3; // 通常每列3行

            // 获取当前游戏状态（0=主游戏 MAIN, 1=免费游戏 SUBGAME1）
            const currentGameType = mockGameStateMap.get(this.gameId) || 0;

            // 生成有效的图标ID数组（1-9为普通图标，10为SCATTER，11-14为倍率图标）
            const validIconIds = [1, 2, 3, 4, 5, 6, 7, 8, 9];
            const SCATTER_ID = 10; // SCATTER 图标ID，用于触发免费游戏

            // 使用时间戳和随机数确保每次结果都不同
            let seed = Date.now() + Math.random() * 1000;
            const random = () => {
              const x = Math.sin(seed++) * 10000;
              return x - Math.floor(x);
            };

            // 在免费游戏中，降低触发 feature 的概率（避免连续触发）
            const featureProbability = currentGameType === 1 ? 0.1 : 0.3;
            // 随机决定是否触发 feature
            const shouldTriggerFeature = random() < featureProbability;
            const shouldTriggerWin = random() < 0.4; // 40% 概率中奖

            // 生成滚轴ID（服务器索引从1开始）
            // rollerId 表示每个滚轴停止的位置索引，需要随机生成，这样每次结果都不同
            // 注意：不同游戏的 iconRollerQueue 长度可能不同
            // starlightV2 (gameId=15): 100
            // godWealthV2 (gameId=6): 60
            // 其他游戏: 通常是 60 或 100
            const rollerId = [];
            // 根据游戏ID确定队列长度
            const queueLength = this.gameId === 15 || this.gameId === 14 ? 100 : 60; // starlightV2 和 ThorV2 是 100，其他游戏通常是 60
            for (let i = 0; i < columnCount; i++) {
              // 随机生成停止位置（服务器索引从1开始，所以+1）
              // 范围：1-queueLength，游戏会减1变成 0-(queueLength-1)，正好是数组的有效索引
              const randomStopIndex = 1 + Math.floor(random() * queueLength);
              rollerId.push(randomStopIndex);
            }
            console.log(`[Mock] 生成 rollerId: [${rollerId.join(', ')}] (服务器索引1-${queueLength}，游戏会减1)`);

            // 生成滚轴图标数据（每次都不一样，根据 rollerId 从队列中提取）
            const rollerIcon = [];
            let scatterPositions = []; // 记录 SCATTER 位置

            for (let col = 0; col < columnCount; col++) {
              const column = [];
              for (let row = 0; row < rowCount; row++) {
                let iconId;

                // 如果应该触发 feature，在前3列随机位置放置 SCATTER
                if (shouldTriggerFeature && random() < 0.2 && col < 3 && scatterPositions.length < 5) {
                  iconId = SCATTER_ID;
                  scatterPositions.push([col, row]);
                } else {
                  // 随机选择一个有效的图标ID
                  iconId = validIconIds[Math.floor(random() * validIconIds.length)];
                }
                column.push(iconId);
              }
              rollerIcon.push(column);
            }
            console.log(`[Mock] 生成新的 spin 结果 - rollerId: [${rollerId.join(', ')}], scatterCount: ${scatterPositions.length}, shouldWin: ${shouldTriggerWin}`);

            // 计算奖励和倍率（使用相同的随机函数确保一致性）
            let totalRewards = 0;
            let magnification = 0;
            let freeCount = 0;
            let winningPosition = {};
            let winningAmount = {};
            let rates = [];

            // 如果有 SCATTER，触发免费游戏
            if (scatterPositions.length >= 3) {
              freeCount = 10 + Math.floor(random() * 5); // 10-14 次免费游戏
              totalRewards = 100 + Math.floor(random() * 200); // 100-300 奖励
              magnification = 50 + Math.floor(random() * 50); // 50-100 倍率
              console.log(`[Mock] 触发免费游戏！freeCount: ${freeCount}, totalRewards: ${totalRewards}, magnification: ${magnification}`);
            } else if (shouldTriggerWin) {
              // 普通中奖
              totalRewards = 20 + Math.floor(random() * 80); // 20-100 奖励
              magnification = 5 + Math.floor(random() * 20); // 5-25 倍率

              // 生成中奖位置（确保至少3个位置，形成有效的中奖组合）
              const winIconId = validIconIds[Math.floor(random() * validIconIds.length)];
              const winPositions = [];
              const winCount = 3 + Math.floor(random() * 3); // 3-5 个中奖位置

              // 确保中奖位置在同一行或形成有效组合
              const targetRow = Math.floor(random() * rowCount);
              for (let i = 0; i < Math.min(winCount, columnCount); i++) {
                const col = i; // 从左到右排列
                const row = targetRow; // 同一行
                winPositions.push([col, row]);
              }
              if (winPositions.length > 0) {
                winningPosition[winIconId.toString()] = winPositions;
                winningAmount[winIconId.toString()] = totalRewards;
                console.log(`[Mock] 普通中奖！iconId: ${winIconId}, totalRewards: ${totalRewards}, positions: ${winPositions.length}`);

                // 关键修复：确保盘面上的图标与中奖图标一致
                winPositions.forEach(pos => {
                  const col = pos[0];
                  const row = pos[1];
                  if (rollerIcon[col] && rollerIcon[col][row] !== undefined) {
                    rollerIcon[col][row] = winIconId;
                  }
                });
              }
            } else {
              console.log(`[Mock] 未中奖`);
            }

            // 生成倍率数据（如果有倍率图标）
            if (magnification > 0) {
              for (let i = 0; i < columnCount; i++) {
                if (random() < 0.3) {
                  rates.push([i, Math.floor(random() * rowCount), 2 + Math.floor(random() * 5)]); // [列, 行, 倍率]
                }
              }
            }

            if (this.gameId === 14 || this.gameId === 15) {
              // ThorV2 (gameId=14) 和 starlightV2 (gameId=15) 的数据结构
              // 计算余额：在免费游戏中不扣除下注金额
              const bettingAmount = 10; // 下注金额
              const currentBalance = 10000; // 当前余额（应该从游戏状态获取，这里用固定值）

              // 在免费游戏中，不扣除下注金额
              const isFreeGame = currentGameType === 1;
              const balanceAfterSettlement = isFreeGame ? currentBalance + totalRewards // 免费游戏：只加奖励，不扣下注
              : currentBalance - bettingAmount + totalRewards; // 主游戏：扣下注加奖励
              const coinsAfterBetting = isFreeGame ? currentBalance // 免费游戏：不扣下注
              : currentBalance - bettingAmount; // 主游戏：扣下注

              // 确定游戏类型
              // indexGameType: 当前游戏类型（0=主游戏, 1=免费游戏）
              // nextGameType: 下局游戏类型（如果还有免费次数则是1，否则是0）
              const indexGameType = currentGameType; // 当前游戏类型
              const nextGameType = freeCount > 0 ? 1 : 0; // 下局游戏类型

              // 更新游戏状态
              if (freeCount > 0) {
                mockGameStateMap.set(this.gameId, 1); // 进入免费游戏
              } else if (currentGameType === 1) {
                mockGameStateMap.set(this.gameId, 0); // 退出免费游戏，回到主游戏
              }

              console.log(`[Mock] 余额计算: 当前=${currentBalance}, 游戏类型=${isFreeGame ? '免费游戏' : '主游戏'}, 下注=${isFreeGame ? 0 : bettingAmount}, 奖励=${totalRewards}, 结算后=${balanceAfterSettlement}`);
              console.log(`[Mock] 游戏状态: indexGameType=${indexGameType}, nextGameType=${nextGameType}, freeCount=${freeCount}`);
              responseData = {
                success: true,
                data: {
                  dl: {
                    si: [{
                      balanceAfterSettlement: balanceAfterSettlement,
                      // 本轮结算之后的余额
                      coinsAfterBetting: coinsAfterBetting,
                      // 扣除下注金额之后的余额
                      coinsBeforeBetting: currentBalance,
                      // 转之前的余额
                      freeCount: freeCount,
                      // 剩余小游戏次数（触发 feature 时 > 0）
                      freeGameAmount: freeCount > 0 ? totalRewards : 0,
                      // 免费游戏的得分奖励
                      indexGameType: indexGameType,
                      // 当前游戏是什么游戏（0=主游戏, 1=免费游戏）
                      freeGameItemCount: scatterPositions.length,
                      // 小游戏图标个数（SCATTER 数量）
                      rollerIcon: rollerIcon,
                      // 滚轴对应的道具ID（starlightV2使用rollerIcon）
                      change: {},
                      // 换牌的ID及位置
                      freeGame: scatterPositions.length >= 3 ? {
                        "1": scatterPositions.length
                      } : {},
                      // 免费游戏图标和位置
                      bettingGoldCoins: 10,
                      // 下注金额
                      magnification: magnification,
                      // 获得的奖励倍数
                      rollerId: rollerId,
                      // 滚轴Id（服务器索引从1开始）
                      totalRewards: totalRewards,
                      // 总奖励
                      winningAmount: winningAmount,
                      // 本轮中奖的道具及该道具对应的奖励金额
                      winningPosition: winningPosition,
                      // 中奖的道具ID以及位置
                      indexAddFreeCount: freeCount,
                      // 本局添加的小游戏次数
                      nextGameType: nextGameType,
                      // 下局游戏是什么游戏（0=主游戏, 1=免费游戏）
                      whetherFreeGame: freeCount > 0 ? 1 : 0,
                      // 是否有小游戏
                      otherGameAttributes: "",
                      // 单独游戏属性
                      otherGameAttributesVo: {
                        freeGametotalMultiplier: freeCount > 0 ? magnification : 0,
                        gameFreeGametotalMultiplier: freeCount > 0 ? magnification : 0,
                        gameTotalMultiplier: magnification,
                        itemTotalMultiplier: rates.length > 0 ? magnification : 0,
                        rates: rates,
                        // 倍率数组
                        singleResults: [{
                          gameWinningVos: Object.keys(winningPosition).length > 0 ? Object.keys(winningPosition).map(iconId => ({
                            amount: winningAmount[iconId] || totalRewards,
                            // 中奖金额
                            itemId: parseInt(iconId),
                            // 图标ID
                            count: winningPosition[iconId] ? winningPosition[iconId].length : 0 // 中奖位置数量
                          })) : [],
                          // 如果有中奖，生成 gameWinningVos 数据
                          rollerIcon: rollerIcon,
                          // 单次结果的滚轴图标
                          totalMultiple: magnification,
                          winningPosition: winningPosition
                        }]
                      }
                    }]
                  }
                }
              };
            } else if (this.gameId === 19) {
              // Rummy (gameId=19) Mock Data
              if (this.sktCode === "1") {
                // LOGIN
                responseData = {
                  success: true,
                  data: {
                    memberId: "mock_member_001",
                    gold: 10000,
                    indexRoom: "",
                    // Reconnect room ID
                    rooms: [{
                      id: "101",
                      name: "Point Rummy",
                      memberCount: 10,
                      bet: 1,
                      lower: 100
                    }, {
                      id: "102",
                      name: "Point Rummy",
                      memberCount: 20,
                      bet: 5,
                      lower: 500
                    }]
                  }
                };
              } else if (this.sktCode === "2") {
                // JOIN_ROOM
                responseData = {
                  success: true,
                  data: {
                    tableId: "mock_table_001",
                    playMemberId: "mock_member_001",
                    // Important: indicates who joined
                    rummyMemberInfo: [{
                      memberId: "mock_member_001",
                      name: "MockUser",
                      gold: 10000,
                      head: "1",
                      chairId: 0,
                      isReady: 1
                    }],
                    roomInfo: {
                      roomId: "101",
                      baseBet: 1
                    },
                    gameState: 0,
                    // WAITING
                    roomStatus: 0,
                    leftTime: 10,
                    seatInfo: []
                  }
                };
              }
            } else {
              // 其他游戏（如godWealthV2 gameId=6, dragonV2等）的数据结构
              // 获取当前游戏状态（0=主游戏 MAIN, 1=免费游戏 SUBGAME1）
              const currentGameType = mockGameStateMap.get(this.gameId) || 0;

              // 计算余额：在免费游戏中不扣除下注金额
              const bettingAmount = 10; // 下注金额
              const currentBalance = 10000; // 当前余额
              const isFreeGame = currentGameType === 1;
              const bl = isFreeGame ? currentBalance + totalRewards // 免费游戏：只加奖励，不扣下注
              : currentBalance - bettingAmount + totalRewards; // 主游戏：扣下注加奖励
              const blab = isFreeGame ? currentBalance // 免费游戏：不扣下注
              : currentBalance - bettingAmount; // 主游戏：扣下注
              const blb = currentBalance; // 转之前的余额

              // 更新游戏状态
              if (freeCount > 0) {
                mockGameStateMap.set(this.gameId, 1); // 进入免费游戏
              } else if (currentGameType === 1) {
                mockGameStateMap.set(this.gameId, 0); // 退出免费游戏，回到主游戏
              }

              // 生成中奖金额数据
              const lw = {};
              Object.keys(winningAmount).forEach(iconId => {
                lw[iconId] = winningAmount[iconId];
              });

              // 计算盈亏（np = 总奖励 - 下注金额，免费游戏中下注为0）
              const np = totalRewards - (isFreeGame ? 0 : bettingAmount);
              console.log(`[Mock] 其他游戏(gameId=${this.gameId}) 余额计算: 当前=${currentBalance}, 游戏类型=${isFreeGame ? '免费游戏' : '主游戏'}, 下注=${isFreeGame ? 0 : bettingAmount}, 奖励=${totalRewards}, 结算后=${bl}`);
              responseData = {
                success: true,
                data: {
                  dl: {
                    si: [{
                      bl: bl,
                      // 本轮结算之后的余额
                      blab: blab,
                      // 扣除下注金额之后的余额
                      blb: blb,
                      // 转之前的余额
                      bubble: 0,
                      // 气泡奖励
                      iconStay: 0,
                      // 图标停留
                      fixedChessboardIconAndAmount: [],
                      // 要定住的图标
                      ctw: totalRewards,
                      // 这一此转动获得的奖励
                      freegame: scatterPositions.length >= 3 ? {
                        "1": scatterPositions.length
                      } : {},
                      // 免费游戏的图标和位置
                      freeCount: freeCount,
                      // 剩余小游戏次数
                      freeGameAmount: freeCount > 0 ? totalRewards : 0,
                      // 免费游戏的得分奖励
                      gameType: currentGameType,
                      // 当前游戏类型（0=主游戏, 1=免费游戏）
                      lw: lw,
                      // 本轮中奖的道具及该道具对应的奖励金额（格式：{ "图标ID": 金额 }）
                      magnification: magnification,
                      // 获得的奖励倍数
                      np: np,
                      // 盈亏情况（总奖励 - 下注金额）
                      rl: rollerIcon,
                      // 滚轴对应的道具ID（其他游戏使用rl）
                      rollerId: rollerId,
                      // 滚轴Id（服务器索引从1开始）
                      sc: 0,
                      // 页面出现"上升/下降"图标的个数
                      sgb: 0,
                      // 进入的小游戏ID，0不进入
                      tb: bettingAmount,
                      // 每条线的投注额
                      tbb: bettingAmount,
                      // 本轮投注总额
                      tw: totalRewards,
                      // 总奖励
                      wp: winningPosition // 中奖的道具ID以及位置
                    }]
                  }
                }
              };
            }
          } else if (this.sktCode === "21") {
            // JOIN_GAME (鱼虾蟹)
            responseData = {
              success: true,
              data: {
                bl: 10000,
                gameType: 1,
                // 游戏状态
                payOutTime: 0,
                deskStatus: 1,
                // 倒计时
                gameNo: "mock_game_no_001",
                onlineNumber: 100,
                seconds: 10,
                // 倒计时秒数
                betList: [],
                // 下注列表
                myBetList: [],
                // 我的下注
                winHistory: [],
                // 历史记录
                leftMember: [],
                // 左侧玩家
                rightMember: [],
                // 右侧玩家
                roomId: "mock_room_001",
                memberNum: 100,
                myInfo: {
                  memberId: "mock_member_001",
                  name: "MockUser",
                  head: "1",
                  gold: 10000,
                  winGold: 0,
                  memberBet: {}
                },
                memberInfo: {
                  // 保留以防万一
                  memberId: "mock_member_001",
                  name: "MockUser",
                  head: "1",
                  gold: 10000
                }
              }
            };
          } else if (this.sktCode === "22") {
            // LAUNCHER_BET (鱼虾蟹下注)
            responseData = {
              success: true,
              data: {
                bl: 9900 // Mock balance after bet
              }
            };
          }

          // 如果没有匹配的 mock 数据，提供默认响应，避免游戏卡住
          if (!responseData) {
            console.warn(`[Mock] 警告: 未找到 sktCode="${this.sktCode}" gameId=${this.gameId} 的 mock 数据，使用默认响应`);
            responseData = {
              success: true,
              data: {}
            };
          }
          if (responseData) {
            console.log(`[Mock] 收到 ${this.sktCode} 响应:`, responseData);

            // 模拟网络延迟
            setTimeout(() => {
              // 对于子游戏的消息，响应格式需要符合 filterData 的期望
              // 子游戏期望 data.success 和 data.data，而不是 code/data/message
              let finalData;
              if (this.gameId > 0 && (this.sktCode === "1" || typeof responseData === 'object' && 'success' in responseData)) {
                // 子游戏消息，直接使用 responseData（已经包含 success 和 data）
                finalData = responseData;
              } else {
                // 大厅消息，使用 code/data/message 格式
                finalData = {
                  code: '200',
                  data: responseData,
                  message: 'success'
                };
              }

              // 构建符合 MessageBody 结构的消息
              const messageBody = {
                messageId: this.messageId,
                // 使用请求的 messageId
                operation: this.operation === SKT_OPERATION.LOGIN ? SKT_OPERATION.LOGIN : SKT_OPERATION.GENERAL,
                // 保持操作类型一致，特别是 LOGIN
                host: this.host || SKT_HOST.HALL,
                sktCode: this.sktCode,
                gameId: this.gameId,
                length: JSON.stringify(finalData).length,
                data: finalData
              };

              // 查找对应的 driver 并处理数据
              this.receiveHandler && this.receiveHandler(messageBody, true);

              // 同时触发全局事件，确保通用监听器也能收到
              WebSocketStarter.Instance().eventListener.dispath(EVEVT_TYPE.MESSAGE, messageBody);

              // 关闭 loading（在真实 WebSocket 中，这会在 onmessage 中处理）
              if (this.operation !== SKT_OPERATION.HEART) {
                setLoadingAction({
                  isShow: false,
                  flagId: this.messageId
                }).then(action => hallDispatch(action));
              }
            }, 500);
          }
        }
        receive(receiveData) {
          if (receiveData.messageId === this.messageId) {
            this.receiveData = receiveData;
            this.receiveTime = Date.now();
            this.status = 'DONE';
            let isPassDataVerify = true;
            if (this.verifySampleData && !validateJson(this.verifySampleData, receiveData.data || {})) {
              console.warn('The socket response data did not pass validation', receiveData);
              isPassDataVerify = false;
            }
            if (!this.timeoutHandler) {
              delete msgMap[this.messageId];
            }
            this.receiveHandler && this.receiveHandler(receiveData, isPassDataVerify);
          }
        }
      }
      exports('SktMessager', SktMessager);

      /**
         * 用于验证数据是否非法
         * @param sampleData 样本数据
         * @param data 被验证的数据
         * @param isCheckUnexpected 是否检查多余的字段
         * @returns 
         */
      const validateJson = exports('validateJson', (sampleData, data, isCheckUnexpected = true) => {
        // 检查是否为对象
        if (typeof data !== 'object' || data === null || data === undefined) {
          return false;
        }
        // 遍历样本数据的字段
        for (const key in sampleData) {
          if (sampleData.hasOwnProperty(key)) {
            // 检查字段是否存在
            if (!(key in data)) {
              console.error(`Missing field: ${key}`);
              return false;
            }
            // 检查字段的数据格式，这里假设样本数据中定义了数据格式
            const expectedType = typeof sampleData[key];
            const actualType = typeof data[key];
            if (actualType !== expectedType && Array.isArray(sampleData[key]) && !Array.isArray(data[key])) {
              console.error(`Invalid data type for field ${key}.Expected ${expectedType}, got ${actualType}`);
              return false;
            }
          }
        }
        if (isCheckUnexpected) {
          // 遍历传入数据的字段，检查是否多余
          for (const key in data) {
            if (data.hasOwnProperty(key) && !(key in sampleData)) {
              console.warn(`Unexpected field: ${key}`);
              // 如果需要禁止多余的字段，可以返回false
            }
          }
        }

        return true;
      });
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/wheel.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc'], function (exports) {
  var _applyDecoratedDescriptor, _initializerDefineProperty, cclegacy, Node, Label, Vec3, _decorator, Component, tween, sp;
  return {
    setters: [function (module) {
      _applyDecoratedDescriptor = module.applyDecoratedDescriptor;
      _initializerDefineProperty = module.initializerDefineProperty;
    }, function (module) {
      cclegacy = module.cclegacy;
      Node = module.Node;
      Label = module.Label;
      Vec3 = module.Vec3;
      _decorator = module._decorator;
      Component = module.Component;
      tween = module.tween;
      sp = module.sp;
    }],
    execute: function () {
      exports('removeComma', removeComma);
      var _dec, _dec2, _dec3, _dec4, _dec5, _dec6, _dec7, _dec8, _dec9, _dec10, _dec11, _dec12, _class, _class2, _descriptor, _descriptor2, _descriptor3, _descriptor4, _descriptor5, _descriptor6, _descriptor7, _descriptor8, _descriptor9, _descriptor10, _descriptor11;
      cclegacy._RF.push({}, "ca2ceE/RZNAsLTIWV68ygpE", "wheel", undefined);
      const {
        ccclass,
        property
      } = _decorator;
      let PlayChouJiang = exports('PlayChouJiang', (_dec = ccclass("wheel"), _dec2 = property(Node), _dec3 = property(Node), _dec4 = property(Node), _dec5 = property(Label), _dec6 = property(Label), _dec7 = property(Node), _dec8 = property(Node), _dec9 = property(Node), _dec10 = property(Node), _dec11 = property(Node), _dec12 = property(Node), _dec(_class = (_class2 = class PlayChouJiang extends Component {
        constructor(...args) {
          super(...args);
          /**转盘节点 */
          _initializerDefineProperty(this, "wheelNode", _descriptor, this);
          /**中奖框 */
          _initializerDefineProperty(this, "jackPot", _descriptor2, this);
          _initializerDefineProperty(this, "closeJack", _descriptor3, this);
          _initializerDefineProperty(this, "gold_num", _descriptor4, this);
          /**中奖提示语 */
          _initializerDefineProperty(this, "tipLabel", _descriptor5, this);
          _initializerDefineProperty(this, "strawberry", _descriptor6, this);
          _initializerDefineProperty(this, "banana", _descriptor7, this);
          _initializerDefineProperty(this, "apple", _descriptor8, this);
          _initializerDefineProperty(this, "grape", _descriptor9, this);
          _initializerDefineProperty(this, "watermelon", _descriptor10, this);
          _initializerDefineProperty(this, "wild", _descriptor11, this);
          /**模块数 */
          this.itemNum = 6;
          /**转盘是否在转动 */
          this.isSpinning = false;
          /**正则 laji*/
          this.getUrlParams = name => {
            var reg = new RegExp('(^|&)' + name + '=([^&]*)(&|$)', 'i');
            var r = window.location.search.substring(1).match(reg);
            if (r != null) {
              return unescape(r[2]);
            }
            return null;
          };
        }
        /**获取随机角度值 */
        getRandom(e, t) {
          return Math.floor(Math.random() * (t - e)) + e;
        }
        /**开始游戏 */
        playGame() {
          let that = this;
          if (that.isSpinning) {
            return;
          }
          that.wheelNode.angle = 30;
          that.isSpinning = true;
          let target = that.getRandom(0, 360);
          // console.log('target:' + target)
          tween(that.wheelNode).by(2, {
            angle: -2160
          }, {
            easing: 'quartIn'
          }).by(3, {
            angle: -(target + 1080)
          }, {
            easing: 'quartOut'
          }).call(() => {
            that.getJackPot(target);
          }).start();
        }
        closeJackPot() {
          let that = this;
          that.jackPot.active = false;
        }
        /**中奖提示语内容切换 控制弹框显隐 */
        getJackPot(target) {
          let that = this;
          let num = Math.floor(target / (360 / that.itemNum));
          // console.log("num",num);
          let SkeletonNode = null;
          let isWild = false;
          switch (num) {
            case 0:
              that.tipLabel.string = '1,000 ';
              SkeletonNode = that.wild;
              isWild = true;
              break;
            case 1:
              that.tipLabel.string = '500';
              SkeletonNode = that.strawberry;
              break;
            case 2:
              that.tipLabel.string = '300';
              SkeletonNode = that.banana;
              break;
            case 3:
              that.tipLabel.string = '200';
              SkeletonNode = that.apple;
              break;
            case 4:
              that.tipLabel.string = '100';
              SkeletonNode = that.grape;
              break;
            case 5:
              that.tipLabel.string = '50'; //Congratulations on winning 50 points  Selamat telah memenangkan 50 poin
              SkeletonNode = that.watermelon;
              break;
          }
          if (isWild) {
            that.wild.getComponent(sp.Skeleton).animation = "animation";
          } else {
            SkeletonNode.getComponent(sp.Skeleton).animation = "animation2";
          }
          tween(that.jackPot).delay(2).call(() => {
            that.jackPot.active = true;
          }).start();
          let gold = removeComma(that.gold_num.string);
          let TipNum = removeComma(that.tipLabel.string);
          that.gold_num.string = (Number(gold) + Number(TipNum)).formatAmountWithCommas();
          tween(that.jackPot).delay(4).call(() => {
            that.jackPot.active = false;
            that.isSpinning = false;
            SkeletonNode.getComponent(sp.Skeleton).animation = "";
          }).start();
        }
        /**laji*/
        convertToMandK(number) {
          if (number >= 1000000) {
            let M = (number / 1000000).toFixed(2);
            return `${M}M`;
          } else if (number >= 1000) {
            let K = (number / 1000).toFixed(2);
            return `${K}k`;
          } else {
            return `${number}`;
          }
        }
      }, (_descriptor = _applyDecoratedDescriptor(_class2.prototype, "wheelNode", [_dec2], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function () {
          return null;
        }
      }), _descriptor2 = _applyDecoratedDescriptor(_class2.prototype, "jackPot", [_dec3], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function () {
          return null;
        }
      }), _descriptor3 = _applyDecoratedDescriptor(_class2.prototype, "closeJack", [_dec4], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function () {
          return null;
        }
      }), _descriptor4 = _applyDecoratedDescriptor(_class2.prototype, "gold_num", [_dec5], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function () {
          return null;
        }
      }), _descriptor5 = _applyDecoratedDescriptor(_class2.prototype, "tipLabel", [_dec6], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function () {
          return null;
        }
      }), _descriptor6 = _applyDecoratedDescriptor(_class2.prototype, "strawberry", [_dec7], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function () {
          return null;
        }
      }), _descriptor7 = _applyDecoratedDescriptor(_class2.prototype, "banana", [_dec8], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function () {
          return null;
        }
      }), _descriptor8 = _applyDecoratedDescriptor(_class2.prototype, "apple", [_dec9], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function () {
          return null;
        }
      }), _descriptor9 = _applyDecoratedDescriptor(_class2.prototype, "grape", [_dec10], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function () {
          return null;
        }
      }), _descriptor10 = _applyDecoratedDescriptor(_class2.prototype, "watermelon", [_dec11], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function () {
          return null;
        }
      }), _descriptor11 = _applyDecoratedDescriptor(_class2.prototype, "wild", [_dec12], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function () {
          return null;
        }
      })), _class2)) || _class));
      const getRootPosition = exports('getRootPosition', (node, totalX, totalY) => {
        if (node.parent.name === 'Canvas') {
          return new Vec3(totalX, totalY, 0);
        } else {
          const x = node.position.x + node.parent.position.x;
          const y = node.position.y + node.parent.position.y;
          return getRootPosition(node.parent, x, y);
        }
      });
      function removeComma(str) {
        const newStr = str.replace(/,/g, "");
        return newStr;
      }
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/withdraw.ts", ['cc', './withdraw2.ts', './index.mjs_cjs=&original=.js', './index.js'], function (exports) {
  var instantiate, cclegacy, ActionTypes, _cjsExports;
  return {
    setters: [function (module) {
      instantiate = module.instantiate;
      cclegacy = module.cclegacy;
    }, function (module) {
      ActionTypes = module.ActionTypes;
    }, null, function (module) {
      _cjsExports = module.default;
    }],
    execute: function () {
      cclegacy._RF.push({}, "4fc9cY0NfdAw6iaW3yPRago", "withdraw", undefined);
      const initState = {
        withdrawBankChannelChoose: null,
        withdrawBankChannelList: []
      };
      var withdrawReducer = exports('default', _cjsExports.createReducer({
        [ActionTypes.SET_BANK_CHANNEL_LIST]: (state, payload) => ({
          ...state,
          withdrawBankChannelList: payload.list
        }),
        [ActionTypes.SET_BANK_CHANNEL_CHOOSE]: (state, payload) => {
          return {
            ...state,
            withdrawBankChannelChoose: payload.item
          };
        },
        [ActionTypes.RESET_WITHDRAW_DATA]: () => instantiate(initState)
      }, initState));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/withdraw2.ts", ['cc', './index.mjs_cjs=&original=.js', './index.js'], function (exports) {
  var cclegacy, _cjsExports;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, null, function (module) {
      _cjsExports = module.default;
    }],
    execute: function () {
      cclegacy._RF.push({}, "7868cZACRhLDbXeG4YeHGQP", "withdraw", undefined);
      /**必须大写，不然redux-act这货要自动加序列号 */
      let ActionTypes = exports('ActionTypes', /*#__PURE__*/function (ActionTypes) {
        ActionTypes["SET_BANK_CHANNEL_LIST"] = "SET_BANK_CHANNEL_LIST";
        ActionTypes["SET_BANK_CHANNEL_CHOOSE"] = "SET_BANK_CHANNEL_CHOOSE";
        ActionTypes["RESET_WITHDRAW_DATA"] = "RESET_WITHDRAW_DATA";
        return ActionTypes;
      }({}));

      /**定义action的payLoad类型 */

      const setWithdrawChannelList = exports('setWithdrawChannelList', _cjsExports.createAction(ActionTypes.SET_BANK_CHANNEL_LIST, list => {
        return {
          list
        };
      }));
      const sizeChangeAction = exports('sizeChangeAction', _cjsExports.createAction(ActionTypes.SET_BANK_CHANNEL_CHOOSE, item => {
        return {
          item
        };
      }));
      const resetWithDrawInfo = exports('resetWithDrawInfo', _cjsExports.createAction(ActionTypes.RESET_WITHDRAW_DATA, () => {}));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/WithdrawalViewModel.ts", ['cc', './ViewModel.ts', './socketConnect.ts', './globals.ts', './prefabDefine2.ts', './NodeIOEffect.ts', './WithdrawBankViewModel.ts', './withdraw2.ts', './apiUrl.ts', './baseBoard.ts', './BaseViewModel2.ts', './ModalBox.ts'], function (exports) {
  var cclegacy, Prefab, ViewModel, hallWebSocketDriver, SKT_MAG_TYPE, sourceManageSeletor, baseBoardView, fetcher, lang, PrefabPathDefine, EffectType, WithdrawBankViewModel, sizeChangeAction, setWithdrawChannelList, ApiUrl, addToastAction, BaseViewModel, ModalBox;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      Prefab = module.Prefab;
    }, function (module) {
      ViewModel = module.default;
    }, function (module) {
      hallWebSocketDriver = module.hallWebSocketDriver;
      SKT_MAG_TYPE = module.SKT_MAG_TYPE;
    }, function (module) {
      sourceManageSeletor = module.sourceManageSeletor;
      baseBoardView = module.baseBoardView;
      fetcher = module.fetcher;
      lang = module.lang;
    }, function (module) {
      PrefabPathDefine = module.PrefabPathDefine;
    }, function (module) {
      EffectType = module.EffectType;
    }, function (module) {
      WithdrawBankViewModel = module.default;
    }, function (module) {
      sizeChangeAction = module.sizeChangeAction;
      setWithdrawChannelList = module.setWithdrawChannelList;
    }, function (module) {
      ApiUrl = module.ApiUrl;
    }, function (module) {
      addToastAction = module.addToastAction;
    }, function (module) {
      BaseViewModel = module.default;
    }, function (module) {
      ModalBox = module.default;
    }],
    execute: function () {
      cclegacy._RF.push({}, "842a44yYTJB87U5NU1HG/Rq", "WithdrawalViewModel", undefined);
      class WithdrawalViewModel extends ViewModel {
        constructor() {
          super('Hall_WithdrawalPanel');
          this.validFlowingWater = 0;
        }
        begin() {
          this.setEvent({
            openWithdrawBank: async () => {
              const withdrawBankViewModel = new WithdrawBankViewModel().mountView((await sourceManageSeletor().getFileAsync(PrefabPathDefine._HELL_WITHDRAWAL_BANK_LIST, Prefab)).source).appendTo(this.parentNode, {
                effectType: EffectType.EFFECT1,
                isModal: true
              }).setEvent({
                onCloseHandler: () => {
                  withdrawBankViewModel.unMount(EffectType.EFFECT1);
                },
                onClickBankChannl: async bankItem => {
                  const bankBindViewModel = new BaseViewModel("Hall_WithdrawBankBind").mountView((await sourceManageSeletor().getFileAsync(bankItem.onlineBanking === 0 ? PrefabPathDefine._HELL_WITHDRAW_WALLET_BIND : PrefabPathDefine._HELL_WITHDRAW_BANK_BIND, Prefab)).source);
                  bankBindViewModel.appendTo(this.parentNode, {
                    effectType: EffectType.EFFECT1,
                    isModal: true
                  }).setEvent({
                    onClosehandler: () => {
                      bankBindViewModel.unMount(EffectType.EFFECT1);
                    },
                    onBindDone: (hadChooseBankChannl, accountNumber, realName, ifscCode, branchName) => {
                      if (!baseBoardView.mainPanelViewModel.isTouristPass()) return;
                      fetcher.send(ApiUrl.WITHDRAW_BIND_CARD, {
                        rechargeChannelId: hadChooseBankChannl.id,
                        accountNumber,
                        realName,
                        ifscCode,
                        branchName
                      }).then(data => {
                        if (data !== -1) {
                          ModalBox.Instance().show({
                            content: lang.write(k => k.withdrawal.withdrawalSuccess, {
                              gold: data
                            }, {
                              placeStr: "绑定提款信息成功获取金币"
                            }),
                            type: "Prompt"
                          }, () => {
                            //重新拉取数据
                            this.refreshList();
                            bankBindViewModel.unMount(EffectType.EFFECT1);
                            return true;
                          });
                        } else {
                          this.refreshList();
                          bankBindViewModel.unMount(EffectType.EFFECT1);
                        }
                      }).catch(e => {
                        console.log(e);
                      });
                    }
                  }).setProps({
                    hadChooseBankChannl: bankItem
                  });
                  if (bankItem.bind) ;
                },
                onBankChannlDone: bankItem => {
                  if (bankItem.bind) {
                    this.dispatch(sizeChangeAction(bankItem));
                    withdrawBankViewModel.unMount(EffectType.EFFECT1);
                  } else {
                    withdrawBankViewModel.comp.events.onClickBankChannl(bankItem);
                    // this.dispatch(addToastAction({ content: "请选择已经绑定的渠道" }))
                  }
                }
              }).connect();
            },
            trueToWithdraw: async amount => {
              // 确认提现，先弹出信息展示框
              const storeState = this.store.getState();
              const withDrawTip = new BaseViewModel("Hall_WithdrawTip").mountView((await sourceManageSeletor().getFileAsync(PrefabPathDefine._HELL_WITHDRAW_TIPS, Prefab)).source).appendTo(this.parentNode, {
                effectType: EffectType.EFFECT1,
                isModal: true
              }).setEvent({
                onClosehandler: () => {
                  withDrawTip.unMount();
                },
                doneHandler: () => {
                  fetcher.send(ApiUrl.WITHDRAW_ORDER, {
                    bankId: storeState.withdraw.withdrawBankChannelChoose.bankId,
                    money: amount
                  }).then(rsp => {
                    withDrawTip.unMount();
                    this.dispatch(addToastAction({
                      content: lang.write(k => k.HallModule.WithdrawalApply, {}, {
                        placeStr: "请求提交成功"
                      })
                    }));
                  });
                }
              }).setProps({
                iconName: storeState.withdraw.withdrawBankChannelChoose.name,
                accountNumber: storeState.withdraw.withdrawBankChannelChoose.accountNumber,
                withdrawAmount: amount,
                accountName: storeState.withdraw.withdrawBankChannelChoose.realName,
                withdrawalPremium: storeState.withdraw.withdrawBankChannelChoose.withdrawalPremium,
                logUrl: storeState.withdraw.withdrawBankChannelChoose.iconMax
              });
            },
            openWithdrawBill: async () => {
              const withDrawTip = new BaseViewModel("Hall_WithdrawBill").mountView((await sourceManageSeletor().getFileAsync(PrefabPathDefine._HELL_WITHDRAW_BILL, Prefab)).source).appendTo(this.parentNode, {
                effectType: EffectType.EFFECT1,
                isModal: true
              }).setEvent({
                onClosehandler: () => {
                  withDrawTip.unMount(EffectType.EFFECT2);
                }
              });
              //提现列表
              fetcher.send(ApiUrl.USER_ORDER_LIST, {
                data: 2
              }).then(async rsp => {
                withDrawTip.setProps({
                  orderList: rsp
                });
              }).catch(e => {
                console.log(e);
              });
            }
          });
          hallWebSocketDriver.sktMsgListener.add(SKT_MAG_TYPE.WITH_DRAW_LIST, "withdraw", (data, error) => {
            !error && this.comp.addWithdrawBill(data);
          });
          hallWebSocketDriver.sendSktMessage(SKT_MAG_TYPE.WITH_DRAW_LIST);
        }
        refreshList() {
          //重新拉取数据
          fetcher.send(ApiUrl.WITHDRAW_BANK_CHANNEL_LIST, {}, "get").then(rsp => {
            this.dispatch(setWithdrawChannelList(rsp));
          }).catch(e => {
            console.log(e);
          });
        }
        unMountCallBack() {
          hallWebSocketDriver.sktMsgListener.removeById('withdraw');
        }
        connect() {
          const storeState = this.store.getState();
          this.inject({
            memberAssetGoldPieces: storeState.memberInfo.memberAssetGoldPieces,
            withdrawBankChannelChoose: storeState.withdraw.withdrawBankChannelChoose
          }, state => {
            // this.validFlowingWater = state.memberInfo.flowingWater
            return {
              memberAssetGoldPieces: state.memberInfo.memberAssetGoldPieces,
              withdrawBankChannelChoose: state.withdraw.withdrawBankChannelChoose,
              validFlowingWater: state.memberInfo.flowingWater
            };
          });
          return this;
        }
      }
      exports('default', WithdrawalViewModel);
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/WithdrawBankViewModel.ts", ['cc', './ViewModel.ts', './apiUrl.ts', './withdraw2.ts', './globals.ts'], function (exports) {
  var cclegacy, ViewModel, ApiUrl, setWithdrawChannelList, fetcher;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      ViewModel = module.default;
    }, function (module) {
      ApiUrl = module.ApiUrl;
    }, function (module) {
      setWithdrawChannelList = module.setWithdrawChannelList;
    }, function (module) {
      fetcher = module.fetcher;
    }],
    execute: function () {
      cclegacy._RF.push({}, "a48e5c8PmRMJI2aKak038Ub", "WithdrawBankViewModel", undefined);
      class WithdrawBankViewModel extends ViewModel {
        constructor() {
          super('Hall_WithdrawBank');
        }
        begin() {}
        connect() {
          const storeState = this.store.getState();
          if (!storeState.withdraw.withdrawBankChannelList.length) {
            //还没有数据，就要先加载
            fetcher.send(ApiUrl.WITHDRAW_BANK_CHANNEL_LIST, {}, "get").then(rsp => {
              this.dispatch(setWithdrawChannelList(rsp));
            }).catch(e => {
              console.log(e);
            });
          }
          this.inject({
            withdrawBankChannelList: storeState.withdraw.withdrawBankChannelList
          }, state => {
            return {
              withdrawBankChannelList: state.withdraw.withdrawBankChannelList
            };
          });
          return this;
        }
      }
      exports('default', WithdrawBankViewModel);
      cclegacy._RF.pop();
    }
  };
});

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});
//# sourceMappingURL=index.js.map