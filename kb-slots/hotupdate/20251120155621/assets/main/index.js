System.register("chunks:///_virtual/Adapter.ts",["cc"],(function(e){var t,i,n,s,a,r;return{setters:[function(e){t=e.cclegacy,i=e.size,n=e.Component,s=e.UITransform,a=e.screen,r=e.view}],execute:function(){t._RF.push({},"aaa34/PoEtBfKKezXCXgQqE","Adapter",void 0);var o=function(e){return e[e.Unknown=0]="Unknown",e[e.LandscapeLeft=1]="LandscapeLeft",e[e.LandscapeRight=2]="LandscapeRight",e[e.Portrait=3]="Portrait",e[e.UpsideDown=4]="UpsideDown",e}(o||{});let h=i(0,0),d=i(0,0);class g extends n{constructor(...e){super(...e),this._func=null,this.onAdapterComplete=null}set width(e){let t=this.getComponent(s);t&&(t.width=e)}get width(){let e=this.getComponent(s);return e?e.width:0}set height(e){let t=this.getComponent(s);t&&(t.height=e)}get height(){let e=this.getComponent(s);return e?e.height:0}static get windowSize(){return a.windowSize}static get visibleSize(){return r.getVisibleSize()}doOnAdapterComplete(){this.onAdapterComplete&&this.onAdapterComplete()}onLoad(){super.onLoad&&super.onLoad(),this.onChangeSize()}onEnable(){super.onEnable&&super.onEnable(),this.addEvents()}onDisable(){this.removeEvents(),super.onDisable&&super.onDisable()}onDestroy(){this.removeEvents(),super.onDestroy&&super.onDestroy()}addEvents(){this._func||(this._func=this.onChangeSize.bind(this),window.addEventListener("resize",this._func),window.addEventListener("orientationchange",this._func))}removeEvents(){this._func&&(window.removeEventListener("resize",this._func),window.removeEventListener("orientationchange",this._func)),this._func=null}onChangeSize(){this.doOnAdapterComplete()}get direction(){let e="未知",t=o.Unknown,i=window.orientation;return i=jsb.device.getDeviceOrientation(),null==i&&null==i||(90==i?(e="横屏向左",t=o.LandscapeLeft):-90==i?(e="横屏向右",t=o.LandscapeRight):0==i?(e="竖屏向上",t=o.Portrait):180==i&&(e="竖屏向下",t=o.UpsideDown)),Log.d(`设备方向 : ${e}`),t}static get safeAreaEdge(){return jsb.device.getSafeAreaEdge()}static set safeArea(e){this._safeArea=e}static screenPxToDesignPx(e){return e/this.safeArea.designPxToScreenPxRatio}static designPxToScreenPx(e){return e*this.safeArea.designPxToScreenPxRatio}static get safeArea(){if(null==this._safeArea||null==this._safeArea){let e=g.windowSize.width,t=g.windowSize.height,i=g.visibleSize.width,n=g.visibleSize.height,s=Math.min(e/i,t/n);d.width=0,d.height=0,h.width=e-d.width,h.height=t-d.height,d.width=this.safeAreaEdge.y+this.safeAreaEdge.w,d.height=this.safeAreaEdge.x+this.safeAreaEdge.z,h.width=e-d.width,h.height=t-d.height,d.width=d.width/2,d.height=d.height/2,this._safeArea={width:e,height:t,outside:d,safe:h,designPxToScreenPxRatio:s}}return this._safeArea}}e("Adapter",g),g.direction=o,g._safeArea=null,t._RF.pop()}}}));

System.register("chunks:///_virtual/AdapterSprite.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Adapter.ts"],(function(e){var t,i,s,r,n,p,o,h,a,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){s=e.cclegacy,r=e.Enum,n=e._decorator,p=e.Sprite,o=e.Widget,h=e.v3,a=e.UITransform},function(e){l=e.Adapter}],execute:function(){var c,T,d,u,g,y,f,S,_;s._RF.push({},"38151mINEtP7bc2sNH9D25e","AdapterSprite",void 0);const{ccclass:I,property:w,executeInEditMode:E,menu:L}=n;let O=e("SpriteScaleType",function(e){return e[e.FILL=0]="FILL",e[e.SUIT=1]="SUIT",e}({})),b=e("SpriteAlignType",function(e){return e[e.LEFT=0]="LEFT",e[e.TOP=1]="TOP",e[e.RIGHT=2]="RIGHT",e[e.BOTTOM=3]="BOTTOM",e[e.CENTER=4]="CENTER",e}({}));e("default",(c=I("AdapterSprite"),T=E(!0),d=L("Quick适配组件/AdapterSprite"),u=w({type:r(O),tooltip:"缩放类型:\n        -FILL: 缩放到填满父节点（如果父节点有裁剪，图像可能会被裁剪，节点可能会超出父节点）\n        -SUIT: 缩放到刚好在父节点内部最大化显示（图像会完整显示，但父节点上下或者左右可能会留空）"}),g=w({type:r(b),tooltip:"齐方式类型:\n        -LEFT: 缩放后靠左对齐\n        -TOP: 缩放后靠上对齐\n        -RIGHT: 缩放后靠右对齐\n        -BOTTOM: 缩放后靠下对齐\n        -CENTER: 缩放后居中对齐"}),c(y=T(y=d((t((f=class extends l{constructor(...e){super(...e),i(this,"_scaleType",S,this),i(this,"_alignType",_,this),this._sprite=null}get scaleType(){return this._scaleType}set scaleType(e){this._scaleType=e}get alignType(){return this._alignType}set alignType(e){this._alignType=e}onLoad(){super.onLoad(),this._sprite=this.node.getComponent(p)}start(){this.updateSprite(this.scaleType,this.alignType)}onChangeSize(){this.updateSprite(this.scaleType,this.alignType)}updateSprite(e,t){var i;if(!this._sprite||!this._sprite.enabled||!this._sprite.spriteFrame)return;let s=null==(i=this.node.parent)?void 0:i.getComponent(o);s&&s.updateAlignment(),this.width=this._sprite.spriteFrame.rect.width,this.height=this._sprite.spriteFrame.rect.height;let r=this.parentTrans;if(this.width/this.height>r.width/r.height){if(e==O.SUIT){let e=r.width/this.width;this.node.scale=h(e,e)}else if(e==O.FILL){let e=r.height/this.height;this.node.scale=h(e,e)}}else if(e==O.SUIT){let e=r.height/this.height;this.node.scale=h(e,e)}else if(e==O.FILL){let e=r.width/this.width;this.node.scale=h(e,e)}switch(t){case b.CENTER:this.node.setPosition(h());break;case b.LEFT:this.node.setPosition(h(-.5*(r.width-this.width*this.node.scale.x),0));break;case b.RIGHT:this.node.setPosition(h(.5*(r.width-this.width*this.node.scale.x),0));break;case b.TOP:this.node.setPosition(h(0,.5*(r.height-this.height*this.node.scale.x)));break;case b.BOTTOM:this.node.setPosition(h(0,-.5*(r.height-this.height*this.node.scale.x)))}this.doOnAdapterComplete()}get parentTrans(){var e;return null==(e=this.node.parent)?void 0:e.getComponent(a)}}).prototype,"scaleType",[u],Object.getOwnPropertyDescriptor(f.prototype,"scaleType"),f.prototype),S=t(f.prototype,"_scaleType",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return O.SUIT}}),t(f.prototype,"alignType",[g],Object.getOwnPropertyDescriptor(f.prototype,"alignType"),f.prototype),_=t(f.prototype,"_alignType",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return b.CENTER}}),y=f))||y)||y)||y));s._RF.pop()}}}));

System.register("chunks:///_virtual/AdapterView.ts",["cc","./Adapter.ts"],(function(e){var i,t,s,a;return{setters:[function(e){i=e.cclegacy,t=e.v3,s=e._decorator},function(e){a=e.Adapter}],execute:function(){var o;i._RF.push({},"32b0fpgPcJGb4F0BalFuE1g","AdapterView",void 0);const{ccclass:r,property:n,executeInEditMode:d,menu:c}=s;e("default",r("AdapterView")(o=d(!0)(o=c("Quick适配组件/AdapterView")(o=class extends a{onChangeSize(){if(a.safeArea=null,this.node){if(App.isFullScreenAdaption)this.width=a.safeArea.width/a.safeArea.designPxToScreenPxRatio,this.height=a.safeArea.height/a.safeArea.designPxToScreenPxRatio;else switch(this.width=a.safeArea.safe.width/a.safeArea.designPxToScreenPxRatio,this.height=a.safeArea.safe.height/a.safeArea.designPxToScreenPxRatio,this.direction){case a.direction.LandscapeLeft:this.node.setPosition(t(a.safeArea.outside.width/a.safeArea.designPxToScreenPxRatio,0));break;case a.direction.LandscapeRight:this.node.setPosition(t(-a.safeArea.outside.width/a.safeArea.designPxToScreenPxRatio,0));break;case a.direction.Portrait:this.node.setPosition(t(0,-a.safeArea.outside.height/a.safeArea.designPxToScreenPxRatio));break;case a.direction.UpsideDown:this.node.setPosition(t(0,a.safeArea.outside.height/a.safeArea.designPxToScreenPxRatio));break;default:Log.e("获取不到设备方向，直接居中处理"),this.node.setPosition(t(0,0))}this.doOnAdapterComplete()}}})||o)||o)||o);i._RF.pop()}}}));

System.register("chunks:///_virtual/Alert.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Config.ts","./EventComponent.ts","./Decorators.ts","./IAlert.ts"],(function(t){var e,i,n,o,r,l,c,s,a,h,u,f,g,_,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){n=t.instantiate,o=t.cclegacy,r=t.Node,l=t.Label,c=t.RichText,s=t.ScrollView,a=t.find,h=t.Input,u=t.Vec3},function(t){f=t.ViewZOrder},function(t){g=t.default},function(t){_=t.inject},function(t){p=t.IAlert}],execute:function(){var m,b,C,w,v,d,y,x,A,T,P,S,N,z,L,E,V;o._RF.push({},"7a5e7IHmfZO0b8NrWv64oY7","Alert",void 0);let B=(m=_("close",r,"content"),b=_("content",r),C=_("content",l,"content/scrollView/view/content"),w=_("richContent",c,"content/scrollView/view/content"),v=_("title",l,"content"),d=_("confirm",r,"content"),y=_("cancel",r,"content"),x=_("content/scrollView",s),T=e((A=class extends g{constructor(...t){super(...t),i(this,"_closeBtn",T,this),i(this,"_content",P,this),i(this,"_textContent",S,this),i(this,"_richTextContent",N,this),i(this,"_title",z,this),i(this,"_confirm",L,this),i(this,"_cancel",E,this),this._config=null,i(this,"_view",V,this)}get config(){return this._config}show(t){t.title||(t.title=App.getLanguage("alert_title")),t.confirmString||(t.confirmString=App.getLanguage("alert_confirm")),t.cancelString||(t.cancelString=App.getLanguage("alert_cancel")),this._config=t,this.writeContent(t),this.showButton(t),this._show()}_show(){App.utils.showView(this._content)}writeContent(t){if(t.richText?(this._textContent.node.active=!1,this._richTextContent.node.active=!0,this._richTextContent.string=t.richText):(this._textContent.node.active=!0,this._richTextContent.node.active=!1,t.text?this._textContent.string=t.text:(Log.e("请指定提示内容"),this._textContent.string="")),t.title&&(this._title.string=t.title),t.confirmString){let e=a("Label",this._confirm);if(e){let i=e.getComponent(l);i&&(i.string=t.confirmString)}}if(t.cancelString){let e=a("Label",this._cancel);if(e){let i=e.getComponent(l);i&&(i.string=t.cancelString)}}this._view.scrollToTop()}showButton(t){this._confirm&&this._cancel&&this._closeBtn&&(this.onN(this._closeBtn,h.EventType.TOUCH_END,this.close.bind(this)),t.confirmCb?(this._confirm.active=!0,this.onN(this._confirm,h.EventType.TOUCH_END,this.onClick.bind(this,t.confirmCb,!0)),this.onN(this._closeBtn,h.EventType.TOUCH_END,this.onClick.bind(this,t.confirmCb,!1))):this._confirm.active=!1,t.cancelCb?(this._cancel.active=!0,this.onN(this._cancel,h.EventType.TOUCH_END,this.onClick.bind(this,t.cancelCb,!1))):this._cancel.active=!1,this._confirm.active?this._cancel.active||this._confirm.setPosition(new u(0,this._confirm.position.y,this._confirm.position.z)):this._cancel.active?this._confirm.setPosition(new u(0,this._confirm.position.y,this._confirm.position.z)):Log.w("提示框无按钮显示"))}close(){this._close(null)}async _close(t){await App.utils.hideView(this._content),App.alert.finishAlert(),t&&t()}onClick(t,e){this._config.immediatelyCallback?(t&&t(e),this._close(null)):this._close((()=>{t&&t(e)}))}}).prototype,"_closeBtn",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(A.prototype,"_content",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(A.prototype,"_textContent",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(A.prototype,"_richTextContent",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(A.prototype,"_title",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(A.prototype,"_confirm",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(A.prototype,"_cancel",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(A.prototype,"_view",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A);class D extends p{isCurrentShow(t){if(this.curPanel){var e;let i=null==(e=this.curPanel.getComponent(B))?void 0:e.config;if(i&&i.tag==t)return!0}return!1}currentShow(t){if(this.curPanel){var e;let i=null==(e=this.curPanel.getComponent(B))?void 0:e.config;return t&&i&&i.tag,i}return null}isRepeat(t){if(this.curPanel){var e;let i=null==(e=this.curPanel.getComponent(B))?void 0:e.config;if(i&&i.tag==t)return Log.w(`重复的弹出框 config ; ${JSON.stringify(this.getConfig(i))}`),!0}else for(let e=0;e<this.queue.length;e++){let i=this.queue[e];if(i.tag==t)return Log.w(`重复的弹出框 config ; ${JSON.stringify(this.getConfig(i))}`),!0}return!1}close(t){if(t){let i=this.queue.length;for(;i--;)this.queue[i].tag==t&&this.queue.splice(i,1);if(this.curPanel){var e;let i=null==(e=this.curPanel.getComponent(B))?void 0:e.config;i&&i.tag==t&&this.finishAlert()}}else this.finishAlert()}_show(t){if(!this.curPanel){this.curPanel=n(App.uiManager.getScenePrefab("Alert"));let e=this.curPanel.addComponent(B);App.uiManager.addView(this.curPanel,f.Alert),e.show(t)}}}t("default",D),D.module="【Alert】",o._RF.pop()}}}));

System.register("chunks:///_virtual/Application.ts",["cc","./Framework.ts","./StageData.ts","./Enums.ts","./Singleton.ts","./Alert.ts","./Loading.ts","./Tips.ts","./UILoading.ts","./UIReconnect.ts","./UpdateLoading.ts","./Config.ts","./Lang.ts","./LayerManager.ts","./Decorators.ts","./CmmAudioComp.ts"],(function(t){var e,n,i,a,o,u,g,s,r,l,c,d,p,f,h,L;return{setters:[function(t){e=t.cclegacy},function(t){n=t.Framewok},function(t){i=t.StageData},function(t){a=t.LogLevel},function(t){o=t.Singleton},function(t){u=t.default},function(t){g=t.default},function(t){s=t.default},function(t){r=t.default},function(t){l=t.UIReconnect},function(t){c=t.default},function(t){d=t.Config},function(t){p=t.Lang},function(t){f=t.default},function(t){h=t.toApp},function(t){L=t.default}],execute:function(){e._RF.push({},"342b5hltVBEl6IfNcT0LCMW","Application",void 0);class A extends n{constructor(...t){super(...t),this._lang=null}get stageData(){return o.get(i,!0,d.BUNDLES)}get uiReconnect(){return o.get(l)}get tips(){return o.get(s)}get uiLoading(){return o.get(r)}get alert(){return o.get(u)}get loading(){return o.get(g)}get updateLoading(){return o.get(c)}get layerMgr(){return o.get(f,!0,d.LAYERS)}get lang(){return this._lang||(this._lang=new p)}get gAudio(){return this._gAudio||(this._gAudio=this.uiManager.addComponent(L),this._gAudio.isGlobal=!0),this._gAudio}async onLoad(t){this.language.addDelegate(this.lang),super.onLoad(t)}init(){super.init(),this.stageData.isShowDebugButton=d.isShowDebugButton,this.updateManager.hotUpdateUrl=d.HOT_UPDATE_URL,this.updateManager.isAutoVersion=d.USE_AUTO_VERSION,this.updateManager.isSkipUpdate=d.isSkipUpdate,this.language.addDelegate(this.lang)}}t("Application",A);let _=new A;_.logger.level=a.ALL,window.App=_,_.init(),h(),e._RF.pop()}}}));

System.register("chunks:///_virtual/AssetManager.ts",["cc","./Macros.ts","./Resource.ts"],(function(e){var t,a,s,l,o,c,n,r,h;return{setters:[function(e){t=e.cclegacy,a=e.SpriteFrame,s=e.Texture2D,l=e.sp,o=e.JsonAsset,c=e.TextAsset,n=e.assetManager},function(e){r=e.Macro},function(e){h=e.Resource}],execute:function(){t._RF.push({},"47f275C8MlMOqHzEZCvzwc7","AssetManager",void 0);class i{constructor(){this._logTag="[RemoteLoader] "}loadImage(e,t,l){if(null==e||null==e||e.length<=0)return void l({cache:null,asset:null});h.getKey(e,a);if(t){let[t,s]=App.releaseManger.getRemote(e,a);if(t)return App.cache.remoteCaches.set(s),App.cache.remoteCaches.set(t),void l({cache:t,asset:t.data});let o=App.cache.remoteCaches.getSpriteFrame(e);if(o)return void l({cache:o,asset:o.data})}else{let[t,s]=App.releaseManger.getRemote(e,a);t&&(App.cache.remoteCaches.set(t),App.cache.remoteCaches.set(s)),App.cache.remoteCaches.remove(e,a,!0)}this._loadRemoteRes(e,s,t,{},(t=>{let o=h.getKey(e,s),c=App.cache.remoteCaches.get(o);c&&t.asset?(c.data=t.asset,c.data.name=e,l(App.cache.remoteCaches.makeSpriteFrame(e,c.data))):(l({cache:null,asset:null}),App.cache.remoteCaches.remove(e,a,!0))}))}loadSkeleton(e,t,a,n){let i=this;if(e&&t){let p=`${e=`${e}/${t}`}.atlas`,d=`${e}.png`,u=`${e}.json`,[m,A,g,C]=App.releaseManger.getRemote(e,l.SkeletonData);if(m)return App.cache.remoteCaches.set(m),App.cache.remoteCaches.set(A),App.cache.remoteCaches.set(g),App.cache.remoteCaches.set(C),void n({cache:m,asset:m.data});let f=h.getKey(e,l.SkeletonData);m=App.cache.remoteCaches.get(f),m?m.isLoaded?n({cache:m,asset:m.data}):m.finishCb.push(n):(m=new h.Cache(e,l.SkeletonData,r.BUNDLE_REMOTE),m.resourceType=h.Type.Remote,App.cache.remoteCaches.set(m),i._loadRemoteRes(d,s,a,{},(e=>{e.asset?i._loadRemoteRes(u,o,a,{},(s=>{s.asset?i._loadRemoteRes(p,c,a,{},(a=>{a.asset?(App.cache.remoteCaches.makeSkeletonData(m,e.asset,s.asset,a.asset,t),n({cache:m,asset:m.data}),m.doFinish()):(n({cache:null,asset:null}),m.doFinish({cache:null,asset:null}),App.cache.remoteCaches.remove(m.url,l.SkeletonData,!0))})):(n({cache:null,asset:null}),m.doFinish({cache:null,asset:null}),App.cache.remoteCaches.remove(m.url,l.SkeletonData,!0))})):(n({cache:null,asset:null}),m.doFinish({cache:null,asset:null}),App.cache.remoteCaches.remove(m.url,l.SkeletonData,!0))})))}else n({cache:null,asset:null})}extname(e){let t=e.match(/(\.[^\.\/\?\\]*)(\?.*)?$/);return t?t[1]:".png"}_loadRemoteRes(e,t,a,l={},o){let c=h.getKey(e,t),[i]=App.releaseManger.getRemote(c,t);if(i)return i.addRef(),App.cache.remoteCaches.set(i),i.doFinish(),void(o&&o({cache:i,asset:i.data}));let p=App.cache.remoteCaches.get(c);p?p.isLoaded?o&&o({cache:p,asset:p.data}):p.finishCb.push(o):(p=new h.Cache(e,t,r.BUNDLE_REMOTE),p.resourceType=h.Type.Remote,App.cache.remoteCaches.set(p),l.cacheAsset=!0,l.reloadAsset=!a,t==s&&(l.ext=this.extname(e)),n.loadRemote(e,l,((e,t)=>{p&&(p.isLoaded=!0,p.data=t||null,p.doFinish(),o&&o({cache:p,asset:p.data}))})))}}class p{constructor(){this.isResident=!0,this.module=null,this._remote=new i}get remote(){return this._remote}getBundle(e){return App.bundleManager.getBundle(e)}load(e,t,a,s,l){let o=h.getKey(t,a),c=App.releaseManger.get(e,o);if(c)return console.time(`加载资源 : ${e}/${o}`),App.cache.set(c),void this._onLoadComplete(c,l,null,c.data);if(c=App.cache.get(e,t,a),c){if(c.isLoaded)l(c);else{let e=e=>{l(e.cache)};c.finishCb.push(e)}c.status=h.CacheStatus.NONE}else{c=new h.Cache(t,a,e),App.cache.set(c),console.time(`加载资源 : ${e}/${o}`);let n=this.getBundle(e);if(!n){let t=new Error(`${this.module} ${e} 没有加载，请先加载`);return void this._onLoadComplete(c,l,t,null)}if(!a){let a=new Error(`${this.module} ${e} ${t} 加载没有指定资源类型`);return void this._onLoadComplete(c,l,a,null)}let r=n.get(t,a);r?this._onLoadComplete(c,l,null,r):s?n.load(t,a,s,this._onLoadComplete.bind(this,c,l)):n.load(t,a,this._onLoadComplete.bind(this,c,l))}}_onLoadComplete(e,t,a,s){e.isLoaded=!0;let l=e,o=e.key,c=e.isDir?"目录":"资源";a?(Log.e(`${this.module}加载${c}失败:${e.bundle}/${o} 原因:${a.message?a.message:"未知"}`),e.data=null,l.data=null,App.cache.remove(e),t(e)):(e.data=s,l.data=s,t(e)),e.doFinish(),e.status==h.CacheStatus.WAITTING_FOR_RELEASE&&e.data&&(e.status=h.CacheStatus.NONE,this.releaseAsset(e)),console.timeEnd(`加载资源 : ${e.bundle}/${o}`),e=null}loadDir(e,t,a,s,l){let o=h.getKey(t,a),c=App.releaseManger.get(e,o);if(c)return console.time(`加载资源 : ${e}/${o}`),App.cache.set(c),c.isDir&&c.deps.forEach((t=>{const a=App.releaseManger.get(e,t);a&&App.cache.set(a)})),void this._onLoadComplete(c,l,null,c.data);if(c=App.cache.get(e,t,a),c){if(c.isLoaded)l(c);else{let e=e=>{l(e.cache)};c.finishCb.push(e)}c.status=h.CacheStatus.NONE}else{c=new h.Cache(t,a,e,!0),App.cache.set(c),console.time(`加载资源 : ${e}/${c.key}`);let o=this.getBundle(e);if(!o){let t=new Error(`${this.module} ${e} 没有加载，请先加载`);return void this._onLoadComplete(c,l,t,null)}if(a)s?o.loadDir(t,a,s,this._onLoadComplete.bind(this,c,l)):o.loadDir(t,a,this._onLoadComplete.bind(this,c,l));else{let a=new Error(`${this.module} ${e} ${t} 加载没有指定资源类型`);this._onLoadComplete(c,l,a,null)}}}releaseAsset(e){if(e=App.cache.get(e.bundle,e.url,e.type,!1))if(e.isLoaded){if(e.retain)return;App.releaseManger.release(e)}else e.status=h.CacheStatus.WAITTING_FOR_RELEASE}retainAsset(e){if(e){let t=App.cache.get(e.bundle,e.url,e.type);t&&(t.retain||(t.retain=t.retain),e.originaRefCount=e.refCount,t.addRef())}}addPersistAsset(e){e.retain=!0,this.retainAsset(e)}}e("_AssetManager",p),p.module="【AssetManager】",t._RF.pop()}}}));

System.register("chunks:///_virtual/AudioComponent.ts",["cc","./EventComponent.ts","./Macros.ts","./Singleton.ts"],(function(s){var e,t,i,o,u,a,c;return{setters:[function(s){e=s.cclegacy,t=s.AudioSource,i=s.AudioClip,o=s._decorator},function(s){u=s.default},function(s){a=s.Macro},function(s){c=s.Singleton}],execute:function(){var l;e._RF.push({},"f40c7r82/BAhYU5orjFTt7k","AudioComponent",void 0);const{ccclass:h,property:n,menu:r}=o;class f{constructor(){this.url="",this.bundle=a.BUNDLE_RESOURCES,this.source=null,this.owner=null,this.isPause=!1}play(){this.isPause=!1,this.source&&this.source.play()}pause(){this.isPause=!1,this.source&&this.source.playing&&(Log.d(this.url,"isPlaying to pause"),this.isPause=!0,this.source.pause())}stop(){this.isPause=!1,this.source&&this.source.stop()}resume(){this.source&&this.isPause&&(Log.d(this.url,"resume play"),this.source.play()),this.isPause=!1}set volume(s){this.source&&(this.source.volume=s)}get volume(){return this.source?this.source.volume:0}}s("AudioInfo",f);class m{constructor(){this.module=null,this.isResident=!0,this.musicVolume=1,this.effectVolume=1,this.isEffectOn=!0,this.isMusicOn=!0,this.musicInfos=new Map,this.effectInfos=new Map,this.curMusic=null,this._storeMusicKey="default_save_music",this._storeEffectKey="default_save_effect",this._storeMusicVolumeKey="default_save_music_volume_key",this._storeEffectVolumeKey="default_save_effect_volume_key"}init(){this.isMusicOn=App.storage.getItem(this._storeMusicKey,this.isMusicOn),this.isEffectOn=App.storage.getItem(this._storeEffectKey,this.isEffectOn),this.musicVolume=App.storage.getItem(this._storeMusicVolumeKey,this.musicVolume),this.effectVolume=App.storage.getItem(this._storeEffectVolumeKey,this.effectVolume)}save(){try{App.storage.setItem(this._storeMusicKey,this.isMusicOn),App.storage.setItem(this._storeMusicVolumeKey,this.musicVolume),App.storage.setItem(this._storeEffectKey,this.isEffectOn),App.storage.setItem(this._storeEffectVolumeKey,this.effectVolume)}catch(s){}}remove(s){this.musicInfos.forEach(((e,t,i)=>{e.owner&&e.owner==s&&i.delete(t)})),this.effectInfos.forEach(((e,t,i)=>{e.owner&&e.owner==s&&i.delete(t)}))}setMusicVolume(s){this.musicInfos.forEach(((e,t,i)=>{e.volume=s})),this.musicVolume=s,this.save()}setEffectVolume(s){this.effectInfos.forEach(((e,t,i)=>{e.volume=s})),this.effectVolume=s,this.save()}setMusicStatus(s){this.isMusicOn!=s&&(this.isMusicOn=s,this.save(),s?this.curMusic&&this.curMusic.play():this.stopMusic())}setEffectStatus(s){this.isEffectOn!=s&&(this.isEffectOn=s,this.save(),s||this.stopAllEffects())}stopAllEffects(){this.effectInfos.forEach(((s,e,t)=>{s.stop()}))}stopMusic(){this.musicInfos.forEach(((s,e,t)=>{s.stop()}))}makeKey(s,e){return`${App.bundleManager.getBundleName(e)}_${s}`}stopEffect(s,e){let t=this.makeKey(s,e),i=this.effectInfos.get(t);i&&i.stop()}resumeAll(){this.musicInfos.forEach(((s,e,t)=>{this.isMusicOn&&s.resume()})),this.effectInfos.forEach(((s,e,t)=>{this.isEffectOn&&s.resume()}))}pauseAll(){this.musicInfos.forEach(((s,e,t)=>{s.pause()})),this.effectInfos.forEach(((s,e,t)=>{s.pause()}))}}m.module="【音效数据】";s("default",h("AudioComponent")(l=class extends u{constructor(...s){super(...s),this.owner=null,this.isGlobal=!1}onDestroy(){this.audioData.remove(this.owner),super.onDestroy()}get audioData(){return c.get(m)}get musicVolume(){return this.audioData.musicVolume}set musicVolume(s){this.audioData.setMusicVolume(s)}get effectVolume(){return this.audioData.effectVolume}set effectVolume(s){this.audioData.setEffectVolume(s)}get isEffectOn(){return this.audioData.isEffectOn}set isEffectOn(s){this.audioData.setEffectStatus(s)}get isMusicOn(){return this.audioData.isMusicOn}set isMusicOn(s){this.audioData.setMusicStatus(s)}save(){this.audioData.save()}stopEffect(s,e){this.audioData.stopEffect(s,e)}stopAllEffects(){this.audioData.stopAllEffects()}stopMusic(){this.audioData.stopMusic()}playMusic(s,e=!0,o,u){if(o=this.fixBundle(o),this.isGlobal&&o!=a.BUNDLE_RESOURCES)return void(u&&u(null));let c=this.audioData.makeKey(s,o),l=this.audioData.musicInfos.get(c);l||(l=new f,l.url=s,l.bundle=o,l.source=this.node.addComponent(t),l.owner=this.owner,l.source.name=c,l.source.playOnAwake=!0,this.audioData.musicInfos.set(c,l)),this.audioData.curMusic=l,App.cache.getCacheByAsync(s,i,o,(s=>{s.asset?(this.addLocal(s.cache),this.stopMusic(),l&&l.source&&(l.source.clip=s.asset,l.source.loop=e,l.volume=this.musicVolume,this.play(l,!0,(s=>{s?u&&u(l):u&&u(null)})))):u&&u(null)}))}playEffect(s,e=!1,o,u){if(o=this.fixBundle(o),this.isGlobal&&o!=a.BUNDLE_RESOURCES)return void(u&&u(null));let c=this.audioData.makeKey(s,o),l=this.audioData.effectInfos.get(c);l||(l=new f,l.url=s,l.bundle=o,l.source=this.node.addComponent(t),l.owner=this.owner,l.source.name=c,l.source.playOnAwake=!0,this.audioData.effectInfos.set(c,l)),App.cache.getCacheByAsync(s,i,o,(s=>{s.asset?(this.addLocal(s.cache),l&&l.source&&(l.source.clip=s.asset,l.source.loop=e,l.source.volume=this.effectVolume,this.play(l,!1,(s=>{s?u&&u(l):u&&u(null)})))):u&&u(null)}))}play(s,e,t){s&&s.source?e?this.isMusicOn?(s.source.play(),t(!0)):t(!1):this.isEffectOn?(s.source.play(),t(!0)):t(!1):t(!1)}onEnterBackground(){this.audioData.pauseAll()}onEnterForgeground(s){this.audioData.resumeAll()}addLocal(s){this.isGlobal?App.asset.addPersistAsset(s):this.owner?App.uiManager.addLocal(s,this.owner.className):App.uiManager.garbage.addLocal(s)}fixBundle(s){return null!=s&&null!=s||(s=this.owner?this.owner.bundle:a.BUNDLE_RESOURCES),s}playButton(){}playDialogOpen(){}playDialogClose(){}})||l);e._RF.pop()}}}));

System.register("chunks:///_virtual/BinaryStreamMessage.ts",["cc","./Macros.ts","./ByteArray.ts","./Net.ts","./Message.ts"],(function(e){var t,r,i,a,s;return{setters:[function(e){t=e.cclegacy},function(e){r=e.Macro},function(e){i=e.ByteArray},function(e){a=e.Net},function(e){s=e.Message}],execute:function(){e("serialize",(function(e,t,r,i,a){return function(s,l){if(void 0===Reflect.getOwnPropertyDescriptor(s,"__serialize__")){let e={};if(Reflect.getPrototypeOf(s).__serialize__&&void 0===Reflect.getOwnPropertyDescriptor(s,"__serialize__")){let t=Reflect.getPrototypeOf(s).__serialize__,r=Object.keys(t);for(let i=r.length,a=0;a<i;a++)e[r[a]]=t[r[a]].slice(0)}Reflect.defineProperty(s,"__serialize__",{value:e})}if(s.__serialize__[e])throw`SerializeKey has already been declared:${e}`;s.__serialize__[e]=[l,t,r,i,a]}})),t._RF.push({},"6ffc0ADekNBn6xYaGYHBeeL","BinaryStreamMessage",void 0);class l{constructor(){this.data=null}read(e){}write(e){}get littleEndian(){return r.USING_LITTLE_ENDIAN}}class n extends l{constructor(...e){super(...e),this.data=0}}class d extends l{constructor(...e){super(...e),this.data=!1}read(e){this.data=e.readBoolean()}write(e){e.writeBoolean(this.data)}}e("BOOL",d);class h extends l{constructor(...e){super(...e),this.data="",this.byteSize=void 0}read(e){let t=this.byteSize;null==this.byteSize&&(t=e.readUnsignedInt()),this.data=e.readUTFBytes(t)}write(e){let t=new i;t.writeUTFBytes(this.data,this.byteSize),null==this.byteSize&&e.writeUnsignedInt(t.length),e.writeBytes(t)}}e("STRING",h);class y extends n{read(e){this.data=e.readFloat()}write(e){e.writeFloat(this.data)}}e("FLOAT",y);class o extends n{read(e){this.data=e.readDouble()}write(e){e.writeDouble(this.data)}}e("DOUBLE",o);class u extends n{read(e){this.data=e.readByte()}write(e){e.writeByte(this.data)}}e("BYTE",u);class c extends n{read(e){this.data=e.readShort()}write(e){e.writeShort(this.data)}}e("SHORT",c);class b extends n{read(e){this.data=e.readInt()}write(e){e.writeInt(this.data)}}e("INT",b);class z extends n{read(e){this.data=e.readUnsignedByte()}write(e){e.writeByte(this.data)}}e("UBYTE",z);class f extends n{read(e){this.data=e.readUnsignedShort()}write(e){e.writeUnsignedShort(this.data)}}e("USHORT",f);class _ extends n{read(e){this.data=e.readUnsignedInt()}write(e){e.writeUnsignedInt(this.data)}}e("UINT",_);class A extends s{constructor(...e){super(...e),this.byteArray=null,this.buffer=null}encode(){return this.byteArray=new i(this.buffer),this.byteArray.endian=r.USING_LITTLE_ENDIAN,this.serialize(),this.buffer=this.byteArray.bytes,!0}isNumberValue(e){return e==y||e==o||e==u||e==c||e==b||e==z||e==f||e==_}isBoolValue(e){return e==d}isStringValue(e){return e==h}serialize(){let e=Reflect.getPrototypeOf(this).__serialize__;if(!e)return null;let t=Object.keys(e);for(let r=t.length,i=0;i<r;i++){let r=t[i],[a,s,l,n,d]=e[r];this.serializeMember(this[a],a,s,l,n,d)}}serializeMember(e,t,r,i,a,s){this.isNumberValue(r)?this.serializeNumberStreamValue(e,r):this.isBoolValue(r)?this.serializeBoolValue(e,r):this.isStringValue(r)?this.serializeStringStreamValue(e,r,i):e instanceof Array?this.serializeArray(e,t,r,i,a,s):e instanceof A?(e.byteArray=this.byteArray,e.serialize()):Log.e(`序列化成员 : ${t} 出错!!`)}serializeNumberStreamValue(e,t){let r=new t;r.data=null==e||e==Number.NaN?0:e,r.write(this.byteArray)}serializeBoolValue(e,t){let r=new t;r.data=null!=e&&e,r.write(this.byteArray)}serializeStringStreamValue(e,t,r){let i=new t;i.byteSize=r,i.data=null==e?"":e,i.write(this.byteArray)}checkArrayDimension(e,t){let r=0,i=e;do{r++,i=i[0]}while(i&&Array.isArray(i)&&i.length>0);return r==t}serializeArray(e,t,r,i,a,s){if(null==s&&(s=1),this.checkArrayDimension(e,s)){this.byteArray.writeUnsignedInt(e.length);for(let l=0;l<e.length;l++)e[l]instanceof Array?this.serializeArray(e[l],`${t}[${l}]`,r,i,a,s-1):this.serializeMember(e[l],`${t}[${l}]`,i,a,void 0)}else Log.e(`${t} 定义数组跟序列化的数组维度不一致`)}decode(e){return this.buffer=e,this.byteArray=new i(e),this.byteArray.endian=r.USING_LITTLE_ENDIAN,this.deserialize(),!0}deserialize(){let e=Reflect.getPrototypeOf(this).__serialize__;if(!e)return!0;let t=Object.keys(e);for(let r=t.length,i=0;i<r;i++){let r=t[i],[a,s,l,n,d]=e[r];this.deserializeMember(a,s,l,n,d)}}deserializeMember(e,t,r,i,a){try{let s=this[e];this.isNumberValue(t)?this[e]=this.deserializeNumberStreamValue(e,t):this.isBoolValue(t)?this[e]=this.deserializeBoolValue(e,t):this.isStringValue(t)?this[e]=this.deserializeStringStreamValue(e,t,r):s instanceof Array?this.deserializeArray(e,t,r,i,a):s instanceof A?(s.byteArray=this.byteArray,s.deserialize()):Log.e(`deserializeMember ${e} error!!!`)}catch(t){Log.w(t.message),Log.e(`deserializeMember ${e} error!!!`)}}deserializeNumberStreamValue(e,t){let r=new t;return r.read(this.byteArray),r.data}deserializeBoolValue(e,t){let r=new t;return r.read(this.byteArray),r.data}deserializeStringStreamValue(e,t,r){let i=new t;return i.byteSize=r,i.read(this.byteArray),i.data}_deserializeArray(e,t,r,i,a,s=1){if(s<=0)return;let l=this.byteArray.readUnsignedInt(),n=0;for(let d=0;d<l;d++)if(s>1)e.push([]),this._deserializeArray(e[n],`${t}[${n}]`,r,i,a,s-1),n++;else{let t=new i;t instanceof A?(t.byteArray=this.byteArray,e[d]=t.deserialize()):t instanceof h?(t.byteSize=a,t.read(this.byteArray),e[d]=t.data):(t.read(this.byteArray),e[d]=t.data)}}deserializeArray(e,t,r,i,a){this[e]=[],null==a&&(a=1),this._deserializeArray(this[e],e,t,r,i,a)}}e("BinaryStream",A);class g extends A{}e("BinaryStreamHeartbeat",g),g.type=a.ServiceType.BinaryStream,t._RF.pop()}}}));

System.register("chunks:///_virtual/BitEncrypt.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"dc65dfUZyBKGo+ZLjacvgTW","BitEncrypt",void 0);e("BitEncrypt",new class{constructor(){this.logTag="[BitEncrypt]:",this._encryptKey="EskKbMvzZBILhcTv"}set encryptKey(e){this._encryptKey=e}get encryptKey(){return this._encryptKey}decode(e,t){return this._code(e,t)}encode(e,t){return this._code(e,t)}_code(e,t){let r=this._check(e,t);if(r.isOK){let t=[];for(let r=0;r<e.length;r++)t.push(e.charCodeAt(r));let c=0,n="",h=/[\w\d_-`~#!$%^&*(){}=+;:'"<,>,/?|\\\u4e00-\u9fa5]/g;for(let y=0;y<t.length;y++){let i=e[y].match(h);i&&i.length>0&&(t[y]^=r.key.charCodeAt(c),n=String.fromCharCode(t[y]),i=n.match(h),i&&i.length||(t[y]^=r.key.charCodeAt(c)),c++,c>=r.key.length&&(c=0))}let y="";for(let e=0;e<t.length;e++)y+=String.fromCharCode(t[e]);return y}return e}_check(e,t){return e&&e.length>0?t&&t.length>0?{isOK:!0,key:t}:this.encryptKey&&this.encryptKey.length>0?{isOK:!0,key:this.encryptKey}:{isOK:!1,key:""}:{isOK:!1,key:""}}});t._RF.pop()}}}));

System.register("chunks:///_virtual/BundleDebugView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIView.ts","./Decorators.ts"],(function(e){var t,n,i,o,r,s,a,l,u,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){i=e.cclegacy,o=e.Node,r=e._decorator,s=e.instantiate,a=e.find,l=e.Label},function(e){u=e.default},function(e){c=e.inject}],execute:function(){var g,h,b,p,d,f,D,m,w,C,y,v,V;i._RF.push({},"7ed39zq8HBHpYMcMSA4iL4r","BundleDebugView",void 0);const{ccclass:P,property:z}=r;e("BundleDebugView",(g=P("BundleDebugView"),h=c("content",o),b=c("item",o,"content"),p=c("background",o),d=c("logView",o),f=c("closeDebug",o),g((w=t((m=class extends u{constructor(...e){super(...e),n(this,"content",w,this),n(this,"itemPrefab",C,this),n(this,"background",y,this),n(this,"logView",v,this),n(this,"closeDebug",V,this)}static getPrefabUrl(){return"common/prefabs/DebugView"}get datas(){const e=App.dataCenter.get(App.stageData.where);return e&&e.debugConfig?e.debugConfig:[]}onLoad(){super.onLoad(),this.itemPrefab.removeFromParent(),this.content.removeAllChildren(),this.logView.destroy(),this.closeDebug.destroy(),this.onN(this.background,o.EventType.TOUCH_END,(()=>{this.args&&this.args.onClose&&this.args.onClose(),this.close()}))}onShow(){super.onShow(),this.initData()}onClose(){this.args&&this.args.onClose&&this.args.onClose(),super.onClose()}initData(){const e=this.datas;this.content.removeAllChildren(),e.forEach(((e,t)=>{const n=s(this.itemPrefab);n.name=`debug${t}`,n.userData=e,a("Label",n).getComponent(l).string=e,this.onN(n,o.EventType.TOUCH_END,this.onEvent),this.content.addChild(n)}))}onEvent(e){const t=e.target.userData;dispatch(t),this.close()}}).prototype,"content",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(m.prototype,"itemPrefab",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(m.prototype,"background",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(m.prototype,"logView",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(m.prototype,"closeDebug",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=m))||D));i._RF.pop()}}}));

System.register("chunks:///_virtual/BundleManager.ts",["cc","./Macros.ts"],(function(e){var n,l,d,u;return{setters:[function(e){n=e.cclegacy,l=e.AssetManager,d=e.assetManager},function(e){u=e.Macro}],execute:function(){n._RF.push({},"2e004QPo4RDaquC+p8l+fiE","BundleManager",void 0);class a{constructor(){this.module=null}isEngineBundle(e){return e==l.BuiltinBundleName.MAIN||e==l.BuiltinBundleName.RESOURCES||e==l.BuiltinBundleName.START_SCENE||e==l.BuiltinBundleName.INTERNAL}removeLoadedBundle(e){let n=[];d.bundles.forEach(((e,l)=>{this.isEngineBundle(l)||n.push(l)}));let l=n.length;for(;l--;){let d=n[l];if(-1==e.indexOf(d)){App.releaseManger.isExistBunble(d)||App.entryManager.onUnloadBundle(d);let e=this.getBundle(d);e&&(App.cache.removeBundle(d),App.releaseManger.removeBundle(e))}}}getBundle(e){return e?"string"==typeof e?d.getBundle(e):e:null}getBundleName(e){return e?"string"==typeof e?e:e.name:(Log.e(`输入参数错误 : ${e}`),u.UNKNOWN)}enterBundle(e){e?App.updateManager.dowonLoad(e):Log.e("无效的入口信息")}loadBundle(e){if(this.getBundle(e.bundle))return Log.d(`${e.bundle}已经加载在缓存中，直接使用`),App.releaseManger.onLoadBundle(e.bundle),void e.handler.onLoadBundleComplete(e);e.handler.onStartLoadBundle(e),Log.d(`loadBundle : ${e.bundle}`),this._loadBundle(e.bundle,((n,l)=>{n?(Log.e(`load bundle : ${e.bundle} fail !!!`),e.handler.onLoadBundleError(e,n)):(App.releaseManger.onLoadBundle(e.bundle),Log.d(`load bundle : ${e.bundle} success !!!`),e.handler.onLoadBundleComplete(e))}))}_loadBundle(e,n){d.loadBundle(e,n)}debug(){Log.d("-------Bundle管理器状态信息-------");let e=[];d.bundles.forEach(((n,l)=>{e.push(n.name)})),Log.d(`当前所有加载完成的bundle : ${e.toString()}`)}}e("BundleManager",a),a.module="【Bundle管理器】",n._RF.pop()}}}));

System.register("chunks:///_virtual/BundleMgrItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventComponent.ts","./Decorators.ts","./Update.ts"],(function(t){var e,n,s,r,i,a,o,u,l,p,d,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){s=t.cclegacy,r=t.Button,i=t.Label,a=t.ProgressBar,o=t._decorator,u=t.Component,l=t.find},function(t){p=t.default},function(t){d=t.inject},function(t){g=t.Update}],execute:function(){var h,b,c,B,m,L,f,C,y,v,D,w,E;s._RF.push({},"8e03awryZBBuokoy6JrGyBi","BundleMgrItem",void 0);const{ccclass:M,property:S}=o;t("BundleMgrItem",(h=M("BundleMgrItem"),b=d("delete",r,"bg"),c=d("update",r,"bg"),B=d("label",i,"bg"),m=d("progressBar",a,"bg"),L=d("name",i,"bg"),h((y=e((C=class extends p{constructor(...t){super(...t),this.data=null,this.deleteCb=null,this.updateCb=null,n(this,"deleteBtn",y,this),n(this,"updateBtn",v,this),n(this,"statusLb",D,this),n(this,"progress",w,this),n(this,"nameLb",E,this)}onLoad(){this.nameLb.string=App.getLanguage(this.data.language),this.updateStatus();const t=new u.EventHandler;t.component="BundleMgrItem",t.handler="onUpdateBundle",t.target=this.node,this.updateBtn.clickEvents.push(t);const e=new u.EventHandler;e.component="BundleMgrItem",e.handler="onDeleteBundle",e.target=this.node,this.deleteBtn.clickEvents.push(e)}updateStatus(){const t=App.updateManager.getStatus(this.data.bundle);if(App.updateManager.isSkipUpdate)return this.updateBtn.interactable=!1,this.deleteBtn.interactable=!1,this.statusLb.string="最新版本",this.progress.progress=1,void(l("Label",this.updateBtn.node).getComponent(i).string="更新");this.deleteBtn.interactable=!0,t==g.Status.UP_TO_DATE?(this.statusLb.string="最新版本",this.progress.progress=1,this.updateBtn.interactable=!1,l("Label",this.updateBtn.node).getComponent(i).string="更新"):t==g.Status.NEED_UPDATE?(this.statusLb.string="有更新",this.progress.progress=0,this.updateBtn.interactable=!0,l("Label",this.updateBtn.node).getComponent(i).string="更新"):(this.statusLb.string="需要下载",this.progress.progress=0,this.updateBtn.interactable=!0,l("Label",this.updateBtn.node).getComponent(i).string="下载")}onDownLoadProgress(t,e){-1==e.progress?(this.statusLb.string="更新失败",this.updateBtn.interactable=!0,l("Label",this.updateBtn.node).getComponent(i).string="更新",this.progress.progress=0):e.progress<1?(this.statusLb.string=`更新(${(100*e.progress).toFixed(2)}%)`,this.updateBtn.interactable=!1,this.deleteBtn.interactable=!1):(this.statusLb.string="更新完成",this.updateBtn.interactable=!1,this.deleteBtn.interactable=!0,this.progress.progress=1,l("Label",this.updateBtn.node).getComponent(i).string="更新")}onDeleteBundle(){this.deleteCb&&this.deleteCb(this)}onUpdateBundle(){this.updateCb&&this.updateCb(this)}}).prototype,"deleteBtn",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(C.prototype,"updateBtn",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(C.prototype,"statusLb",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(C.prototype,"progress",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(C.prototype,"nameLb",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=C))||f));s._RF.pop()}}}));

System.register("chunks:///_virtual/BundleMgrView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIView.ts","./Decorators.ts","./BundleMgrItem.ts","./Macros.ts"],(function(e){var t,n,o,i,r,s,a,c,l,u,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){o=e.cclegacy,i=e.Node,r=e._decorator,s=e.find,a=e.instantiate},function(e){c=e.default},function(e){l=e.inject},function(e){u=e.BundleMgrItem},function(e){d=e.Macro}],execute:function(){var p,h,g,b,f,m,w,D,v;o._RF.push({},"7766aGctzdN/7Wjxu4n0W/x","BundleMgrView",void 0);const{ccclass:C,property:B}=r;e("default",(p=C("BundleMgrView"),h=l("content",i),g=l("scrollview/view/content/item",i,"content"),b=l("scrollview/view/content",i,"content"),p((w=t((m=class extends c{constructor(...e){super(...e),n(this,"content",w,this),n(this,"itemPrefab",D,this),n(this,"viewContent",v,this),this.items=new Map}static getPrefabUrl(){return"common/prefabs/BundleMgrView"}onLoad(){super.onLoad(),this.onD(d.ON_UPDATE_DOWNLOADING,this.onDownloadProgress),this.onD(d.ON_DELETE_BUNDLE_CACHE,this.onDeleteBundleCache),this.onN(s("close",this.content),i.EventType.TOUCH_END,this.close),this.itemPrefab.removeFromParent(),App.stageData.entrys.forEach((e=>{this.viewContent.addChild(this.createItem(e))}))}get showAction(){return App.utils.showView(this.content)}get closeAction(){return App.utils.hideView(this.content)}createItem(e){const t=a(this.itemPrefab),n=t.addComponent(u);return n.data=e,n.deleteCb=e=>{this.onDelete(e)},n.updateCb=e=>{this.onUpdate(e)},this.items.set(e.bundle,n),t}onUpdate(e){const t=e.data;Log.d("更新",t.bundle),App.entryManager.enterBundle(t.bundle)}onDelete(e){const t=e.data;Log.d("删除",t.bundle),App.updateManager.removeBunbleCache(t.bundle)}onDownloadProgress(e,t,n){const o=this.items.get(t.bundle);o&&o.onDownLoadProgress(t,n)}onDeleteBundleCache(e,t){Log.d(`删除 ${t} 完成`);const n=this.items.get(t);n&&n.updateStatus()}}).prototype,"content",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(m.prototype,"itemPrefab",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(m.prototype,"viewContent",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=m))||f));o._RF.pop()}}}));

System.register("chunks:///_virtual/BundleUpdate.ts",["cc","./Macros.ts"],(function(e){var n,a;return{setters:[function(e){n=e.cclegacy},function(e){a=e.Macro}],execute:function(){n._RF.push({},"be6ad44gPZLRJGyZ+utzysn","BundleUpdate",void 0);class t{constructor(){this.module=null,this.isResident=!0}onNewVersionFund(e){e.doUpdate()}onUpdateFailed(e){App.tips.show(App.getLanguage("updateFaild",[e.name])),dispatch(a.ON_UPDATE_FAILED,e)}onPreVersionFailed(e){this.onUpdateFailed(e)}onShowUpdating(e){App.tips.show(App.getLanguage("checkingUpdate"))}onOther(e){}onDownloading(e,n){dispatch(a.ON_UPDATE_DOWNLOADING,e,n)}onAreadyUpToData(e){App.tips.show(App.getLanguage("alreadyRemoteVersion",[e.name]))}onStarCheckUpdate(e){}onStartLoadBundle(e){}onLoadBundleError(e,n){App.tips.show(App.getLanguage("loadFailed",[e.name]))}onLoadBundleComplete(e){App.entryManager.onLoadBundleComplete(e)}onLoadBundle(e){App.bundleManager.loadBundle(e)}onDownloadComplete(e){App.releaseManger.tryRemoveBundle(e.bundle)}onNeedRestartApp(e,n){let a=App.getLanguage("restartApp",[e.name]);App.alert.show({text:a,confirmCb:e=>{n(!1)}})}}e("BundleUpdate",t),t.module="【Bundle热更新】",n._RF.pop()}}}));

System.register("chunks:///_virtual/ByteArray.ts",["cc"],(function(t){var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"38d2fDM+JpA/rYzsaBoQexx","ByteArray",void 0);class e{}t("Endian",e),e.LITTLE_ENDIAN="littleEndian",e.BIG_ENDIAN="bigEndian";const s=t("EndianConst",{LITTLE_ENDIAN:0,BIG_ENDIAN:1}),n=1,r=1,h=2,a=4,o=1,d=2,l=4,f=4,u=8;t("ByteArray",class{get endian(){return this.$endian==s.LITTLE_ENDIAN?e.LITTLE_ENDIAN:e.BIG_ENDIAN}set endian(t){this.$endian=t==e.LITTLE_ENDIAN?s.LITTLE_ENDIAN:s.BIG_ENDIAN}constructor(t,i=0){this.bufferExtSize=0,this.data=void 0,this._bytes=void 0,this._position=void 0,this.write_position=void 0,this.$endian=null,this.EOF_byte=-1,this.EOF_code_point=-1,i<0&&(i=0),this.bufferExtSize=i;let s,n=0;if(t){let e;if(t instanceof Uint8Array?(e=t,n=t.length):(n=t.byteLength,e=new Uint8Array(t)),0==i)s=new Uint8Array(n);else{s=new Uint8Array((1+(n/i|0))*i)}s.set(e)}else s=new Uint8Array(i);this.write_position=n,this._position=0,this._bytes=s,this.data=new DataView(s.buffer),this.endian=e.BIG_ENDIAN}setArrayBuffer(t){}get readAvailable(){return this.write_position-this._position}get buffer(){return this.data.buffer.slice(0,this.write_position)}get rawBuffer(){return this.data.buffer}set buffer(t){let i,e=t.byteLength,s=new Uint8Array(t),n=this.bufferExtSize;if(0==n)i=new Uint8Array(e);else{i=new Uint8Array((1+(e/n|0))*n)}i.set(s),this.write_position=e,this._bytes=i,this.data=new DataView(i.buffer)}get bytes(){return this._bytes}get dataView(){return this.data}set dataView(t){this.buffer=t.buffer}get bufferOffset(){return this.data.byteOffset}get position(){return this._position}set position(t){this._position=t,t>this.write_position&&(this.write_position=t)}get length(){return this.write_position}set length(t){this.write_position=t,this.data.byteLength>t&&(this._position=t),this._validateBuffer(t)}_validateBuffer(t){if(this.data.byteLength<t){let i,e=this.bufferExtSize;if(0==e)i=new Uint8Array(t);else{i=new Uint8Array((1+(t/e>>0))*e)}i.set(this._bytes),this._bytes=i,this.data=new DataView(i.buffer)}}get bytesAvailable(){return this.data.byteLength-this._position}clear(){let t=new ArrayBuffer(this.bufferExtSize);this.data=new DataView(t),this._bytes=new Uint8Array(t),this._position=0,this.write_position=0}readBoolean(){return!!this.validate(n)&&!!this._bytes[this.position++]}readByte(){return this.validate(r)?this.data.getInt8(this.position++):0}readBytes(t,i=0,e=0){if(!t)return;let s=this._position,n=this.write_position-s;if(n<0)return;if(0==e)e=n;else if(e>n)return;const r=t._position;t._position=0,t.validateBuffer(i+e),t._position=r,t._bytes.set(this._bytes.subarray(s,s+e),i),this.position+=e}readDouble(){if(this.validate(u)){let t=this.data.getFloat64(this._position,this.$endian==s.LITTLE_ENDIAN);return this.position+=u,t}return 0}readFloat(){if(this.validate(f)){let t=this.data.getFloat32(this._position,this.$endian==s.LITTLE_ENDIAN);return this.position+=f,t}return 0}readInt(){if(this.validate(a)){let t=this.data.getInt32(this._position,this.$endian==s.LITTLE_ENDIAN);return this.position+=a,t}return 0}readShort(){if(this.validate(h)){let t=this.data.getInt16(this._position,this.$endian==s.LITTLE_ENDIAN);return this.position+=h,t}return 0}readUnsignedByte(){return this.validate(o)?this._bytes[this.position++]:0}readUnsignedInt(){if(this.validate(l)){let t=this.data.getUint32(this._position,this.$endian==s.LITTLE_ENDIAN);return this.position+=l,t}return 0}readUnsignedShort(){if(this.validate(d)){let t=this.data.getUint16(this._position,this.$endian==s.LITTLE_ENDIAN);return this.position+=d,t}return 0}readUTF(){let t=this.readUnsignedShort();return t>0?this.readUTFBytes(t):""}readUTFBytes(t){if(!this.validate(t))return"";let i=this.data,e=new Uint8Array(i.buffer,i.byteOffset+this._position,t);return this.position+=t,this.decodeUTF8(e)}writeBoolean(t){this.validateBuffer(n),this._bytes[this.position++]=+t}writeByte(t){this.validateBuffer(r),this._bytes[this.position++]=255&t}writeBytes(t,i=0,e=0){let s;i<0||e<0||(s=0==e?t.length-i:Math.min(t.length-i,e),s>0&&(this.validateBuffer(s),this._bytes.set(t._bytes.subarray(i,i+s),this._position),this.position=this._position+s))}writeDouble(t){this.validateBuffer(u),this.data.setFloat64(this._position,t,this.$endian==s.LITTLE_ENDIAN),this.position+=u}writeFloat(t){this.validateBuffer(f),this.data.setFloat32(this._position,t,this.$endian==s.LITTLE_ENDIAN),this.position+=f}writeInt(t){this.validateBuffer(a),this.data.setInt32(this._position,t,this.$endian==s.LITTLE_ENDIAN),this.position+=a}writeShort(t){this.validateBuffer(h),this.data.setInt16(this._position,t,this.$endian==s.LITTLE_ENDIAN),this.position+=h}writeUnsignedInt(t){this.validateBuffer(l),this.data.setUint32(this._position,t,this.$endian==s.LITTLE_ENDIAN),this.position+=l}writeUnsignedShort(t){this.validateBuffer(d),this.data.setUint16(this._position,t,this.$endian==s.LITTLE_ENDIAN),this.position+=d}writeUTF(t){let i=this.encodeUTF8(t),e=i.length;this.validateBuffer(d+e),this.data.setUint16(this._position,e,this.$endian==s.LITTLE_ENDIAN),this.position+=d,this._writeUint8Array(i,!1)}writeUTFBytes(t,i){this._writeUint8Array(this.encodeUTF8(t,i))}toString(){return"[ByteArray] length:"+this.length+", bytesAvailable:"+this.bytesAvailable}_writeUint8Array(t,i=!0){let e=this._position,s=e+t.length;i&&this.validateBuffer(s),this.bytes.set(t,e),this.position=s}validate(t){let i=this._bytes.length;return i>0&&this._position+t<=i}validateBuffer(t){this.write_position=t>this.write_position?t:this.write_position,t+=this._position,this._validateBuffer(t)}encodeUTF8(t,i){let e=0,s=this.stringToCodePoints(t),n=[];for(;s.length>e;){let t=s[e++];if(this.inRange(t,55296,57343))this.encoderError(t);else if(this.inRange(t,0,127))if(null==i)n.push(t);else{if(!(n.length+1<i))break;n.push(t)}else{let e=0,s=0;if(this.inRange(t,128,2047)?(e=1,s=192):this.inRange(t,2048,65535)?(e=2,s=224):this.inRange(t,65536,1114111)&&(e=3,s=240),null==i)for(n.push(this.div(t,Math.pow(64,e))+s);e>0;){let i=this.div(t,Math.pow(64,e-1));n.push(128+i%64),e-=1}else{let r=0;for(n.push(this.div(t,Math.pow(64,e))+s),r++;e>0;){let i=this.div(t,Math.pow(64,e-1));n.push(128+i%64),e-=1,r++}if(n.length>i){n.splice(n.length-r,r);break}}}}if(null!=i&&n.length<i){let t=i-n.length;for(;t>0;)n.push(0),t--}return new Uint8Array(n)}decodeUTF8(t){let i=!1,e=0,s="",n=null,r=0,h=0,a=0,o=0;for(;t.length>e;){let d=t[e++];if(d==this.EOF_byte)n=0!=h?this.decoderError(i):this.EOF_code_point;else if(0==h)this.inRange(d,0,127)?n=d:(this.inRange(d,194,223)?(h=1,o=128,r=d-192):this.inRange(d,224,239)?(h=2,o=2048,r=d-224):this.inRange(d,240,244)?(h=3,o=65536,r=d-240):this.decoderError(i),r*=Math.pow(64,h),n=null);else if(this.inRange(d,128,191))if(a+=1,r+=(d-128)*Math.pow(64,h-a),a!==h)n=null;else{let t=r,e=o;r=0,h=0,a=0,o=0,n=this.inRange(t,e,1114111)&&!this.inRange(t,55296,57343)?t:this.decoderError(i,d)}else r=0,h=0,a=0,o=0,e--,n=this.decoderError(i,d);null!==n&&n!==this.EOF_code_point&&(n<=65535?n>0&&(s+=String.fromCharCode(n)):(n-=65536,s+=String.fromCharCode(55296+(n>>10&1023)),s+=String.fromCharCode(56320+(1023&n))))}return s}encoderError(t){}decoderError(t,i){return i||65533}inRange(t,i,e){return i<=t&&t<=e}div(t,i){return Math.floor(t/i)}stringToCodePoints(t){let i=[],e=0,s=t.length;for(;e<t.length;){let n=t.charCodeAt(e);if(this.inRange(n,55296,57343))if(this.inRange(n,56320,57343))i.push(65533);else if(e==s-1)i.push(65533);else{let s=t.charCodeAt(e+1);if(this.inRange(s,56320,57343)){let t=1023&n,r=1023&s;e+=1,i.push(65536+(t<<10)+r)}else i.push(65533)}else i.push(n);e+=1}return i}}),i._RF.pop()}}}));

System.register("chunks:///_virtual/CacheManager.ts",["cc","./Resource.ts","./Macros.ts"],(function(e){var t,s,a,r,i,n,h,l,c,u,d;return{setters:[function(e){t=e.cclegacy,s=e.isValid,a=e.SpriteFrame,r=e.Texture2D,i=e.ImageAsset,n=e.sp,h=e.JsonAsset,l=e.TextAsset,c=e.SpriteAtlas},function(e){u=e.Resource},function(e){d=e.Macro}],execute:function(){t._RF.push({},"4859cspWPZNhIIuXN1LpfKQ","CacheManager",void 0);class o{constructor(e){this._caches=new Map,this.name=d.UNKNOWN,this.name=e}get(e,t){if(this._caches.has(e)){let s=this._caches.get(e);return t&&s&&s.isInvalid?(Log.w(`资源加载完成，但已经被释放 , 重新加载资源 : ${e}`),this.remove(e),null):this._caches.get(e)}return null}set(e){this._caches.set(e.key,e)}remove(e){return this._caches.delete(e)}get size(){return this._caches.size}debug(){this.name;let e=this._caches,t=[],a=[];e.forEach(((e,r,i)=>{e.isLoaded&&s(e.data)?t.push(e.debug()):a.push(e.debug())})),t.length>0&&(Log.d("----------- 有效缓存信息 -----------"),Log.d(JSON.stringify(t))),a.length>0&&(Log.d("----------- 无效缓存信息 -----------"),Log.d(JSON.stringify(a)))}}class g{constructor(){this._caches=new Map}get(e){return this._caches.has(e)?this._caches.get(e):null}getSpriteFrame(e){let t=u.getKey(e,a),s=this.get(t);if(s){return this.get(u.getKey(e,r))?s:(this.remove(e,a,!0),null)}return null}makeSpriteFrame(e,t){if(t&&t instanceof i){let s=this.getSpriteFrame(e);if(s)return{cache:s,asset:s.data};s=new u.Cache(e,a,d.BUNDLE_REMOTE);let i=new a,n=new r;return n.image=t,i.texture=n,i.name=e,i._nativeUrl=e,s.isLoaded=!0,s.url=e,s.data=i,this.set(s),{cache:s,asset:s.data}}return{cache:null,asset:null}}makeSkeletonData(e,t,s,a,i){let h=new n.SkeletonData;h.skeletonJson=s.json,h.atlasText=a.text;let l=new r;l.image=t,h.textures=[l];let c=i+".png";return h.textureNames=[c],e.data=h,e.isLoaded=!0,e}set(e){this._caches.set(e.key,e)}retainAsset(e){e&&(e.retain?e.retain:e.retain=e.retain,this.addRef(e.url,e.type),e.type==a&&this.addRef(e.url,r),e.type==n.SkeletonData&&(this.addRef(`${e.url}.png`,r),this.addRef(`${e.url}.json`,h),this.addRef(`${e.url}.atlas`,l)))}releaseAsset(e){if(e){if(e.retain)return;this.remove(e.url,e.type)}}addRef(e,t){let s=u.getKey(e,t),a=this.get(s);a&&a.addRef()}decRef(e,t,s=!1){let a=u.getKey(e,t),r=this.get(a);if(r){r.decRef(!1)?r.refCount<=0&&(this._caches.delete(a),App.releaseManger.releaseRemote(r,s)):this._caches.delete(a)}}remove(e,t,s=!1){this.decRef(e,t,s),t==a&&this.decRef(e,r,s),t==n.SkeletonData&&(this.decRef(`${e}.png`,r,s),this.decRef(`${e}.json`,h,s),this.decRef(`${e}.atlas`,l,s))}debug(){let e=this._caches;Log.d("---- 远程加载资源缓存信息 ----");let t=[],a=[];e.forEach(((e,r,i)=>{e.isLoaded&&e.data&&s(e.data)?t.push(e.debug()):a.push(e.debug())})),t.length>0&&(Log.d("----------------有效缓存信息------------------"),Log.d(JSON.stringify(t))),a.length>0&&(Log.d("----------------无效缓存信息------------------"),Log.d(JSON.stringify(a)))}clear(...e){this._caches.clear()}}class f{constructor(){this.isResident=!0,this.module=null,this._bundles=new Map,this._remoteCaches=new g}get remoteCaches(){return this._remoteCaches}getBundleName(e){return App.bundleManager.getBundleName(e)}get(e,t,s,a=!0){let r=this.getBundleName(e);return r&&this._bundles.has(r)?this._bundles.get(r).get(u.getKey(t,s),a):null}set(e){let t=this.getBundleName(e.bundle);if(t)if(this._bundles.has(t))this._bundles.get(t).set(e);else{let s=new o(t);s.set(e),this._bundles.set(t,s)}}remove(e){let t=this.getBundleName(e.bundle);return!(!t||!this._bundles.has(t))&&this._bundles.get(t).remove(e.key)}removeWithInfo(e,t,s){let a=!0;if(e){e.decRef(!1);e.isDir;if(e.refCount<=0)if(App.isLazyRelease){if(s&&s.add&&e.isDir){e.deps.forEach((t=>{const a=this.get(e.bundle,t,e.type);a&&(s.add(a),this.remove(a))}))}}else{if(e.isDir){e.deps.forEach((s=>{const a=this.get(e.bundle,s,e.type);a&&a.refCount<=0&&(t.release(a.url,e.type),this.remove(a))}))}else t.release(e.url,e.type);this.remove(e)}else if(a=!1,e.refCount==e.originaRefCount)return!0}return a}removeBundle(e){let t=this.getBundleName(e);t&&this._bundles.has(t)&&this._bundles.delete(t)}getCache(e,t,s,a){const r=t;let i=this.get(s,e,r);const n=e=>{a(e)};return i?i.isLoaded?i.data instanceof r?{cache:i,asset:i.data}:{cache:i,asset:null}:(i.finishCb.push(n),{cache:i,asset:null}):{cache:null,asset:null}}getCacheByAsync(e,t,s,a){const r=t,i=e=>{a&&a(e)},n=this.getCache(e,t,s,i);n.cache?n.cache.isLoaded&&i(n):App.asset.load(s,e,r,null,(t=>{t&&t.data&&t.data instanceof r?a&&a({cache:t,asset:t.data}):(Log.e(`${this.module}加载失败 : ${e}`),a&&a({cache:null,asset:null}))}))}getSpriteFrameByAsync(e,t,a,r,i,n){let h=0,l=i=>{r(a,i.cache);let l=i.asset.getSpriteFrame(t);l?s(l)?n({url:e[h],spriteFrame:l,cache:i.cache}):(Log.e(`精灵帧被释放，释放当前无法的图集资源 url ：${e[h]} key : ${t}`),App.asset.releaseAsset(i.cache),n({url:e[h],spriteFrame:null,isTryReload:!0,cache:i.cache})):(h++,h>=e.length?n({url:e[h],spriteFrame:null,cache:i.cache}):u(e[h]))},u=e=>{this.getCacheByAsync(e,c,i,l)};u(e[h])}debug(){this._bundles.forEach((e=>{e.debug()})),this.remoteCaches.debug()}clear(...e){this._bundles.clear(),this.remoteCaches.clear()}onDestroy(e){this.clear()}}e("CacheManager",f),f.module="【缓存管理器】",t._RF.pop()}}}));

System.register("chunks:///_virtual/CanvasHelper.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"a96d56Mr9FI4rHutCkVnb9o","CanvasHelper",void 0);class a{constructor(){this.module=null,this.downloadMime="image/octet-stream"}get support(){let e=document.createElement("canvas"),t=e.getContext("2d");return{canvas:!!t,imageData:!(null==t||!t.getImageData),dataURL:!!e.toDataURL,btoa:!!window.btoa}}scaleCanvas(e,t,a){let n=e.width,r=e.height;null==t&&(t=n),null==a&&(a=r);let s=document.createElement("canvas"),i=s.getContext("2d");return s.width=t,s.height=a,null==i||i.drawImage(e,0,0,n,r,0,0,t,a),s}getDataURL(e,t,a,n){return(e=this.scaleCanvas(e,a,n)).toDataURL(t)}saveFile(e,t,a){this.fileDownload(e,t,a)}genImage(e){var t=document.createElement("img");return t.src=e,t}fixType(e){return"image/"+(e=e.toLowerCase().replace(/jpg/i,"jpeg")).match(/png|jpeg|bmp|gif/)[0]}encodeData(e){if(!window.btoa)throw"btoa undefined";var t="";if("string"==typeof e)t=e;else for(var a=0;a<e.length;a++)t+=String.fromCharCode(e[a]);return btoa(t)}getImageData(e){var t;let a=e.width,n=e.height;return null==(t=e.getContext("2d"))?void 0:t.getImageData(0,0,a,n)}makeURL(e,t){return"data:"+t+";base64,"+e}genBitmapImage(e){var t=e.width,a=e.height,n=t*a*3,r=n+54,s=[66,77,255&r,r>>8&255,r>>16&255,r>>24&255,0,0,0,0,54,0,0,0],i=[40,0,0,0,255&t,t>>8&255,t>>16&255,t>>24&255,255&a,a>>8&255,a>>16&255,a>>24&255,1,0,24,0,0,0,0,0,255&n,n>>8&255,n>>16&255,n>>24&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],o=(4-3*t%4)%4,l=e.data,g="",m=t<<2,u=a,c=String.fromCharCode;do{for(var d=m*(u-1),h="",p=0;p<t;p++){var v=p<<2;h+=c(l[d+v+2])+c(l[d+v+1])+c(l[d+v])}for(var f=0;f<o;f++)h+=String.fromCharCode(0);g+=h}while(--u);return this.encodeData(s.concat(i))+this.encodeData(g)}savaAsImage(e,t,a,n="png",r="defaultpng"){let s=null;if(this.support.canvas&&this.support.dataURL){if("string"==typeof e){let t=document.getElementById(e);t&&(s=t)}else s=e;if(!s)return;if(n=this.fixType(n),/bmp/.test(n)){let e=this.getImageData(this.scaleCanvas(s,t,a));if(e){let t=this.genBitmapImage(e);this.saveFile(this.makeURL(t,this.downloadMime),n.replace("image/",""),r)}}else{s=this.scaleCanvas(s,t,a);let e=this;s.toBlob((function(t){let a=URL.createObjectURL(t);e.saveFile(a,n.replace("image/",""),r)}),n,1)}}}convertToImage(e,t,a,n="png"){let r=null;if(this.support.canvas&&this.support.dataURL){if("string"==typeof e){let t=document.getElementById(e);t&&(r=t)}else r=e;if(!r)return;if(/bmp/.test(n)){var s=this.getImageData(this.scaleCanvas(r,t,a)),i=this.genBitmapImage(s);return this.genImage(this.makeURL(i,"image/bmp"))}i=this.getDataURL(r,n,t,a);return this.genImage(i)}}fileDownload(e,t,a){let n=document.createElement("a");n.style.display="none",n.href=e,n.download=a+"."+t,document.body.appendChild(n),n.click(),document.body.removeChild(n)}saveAsPNG(e,t,a){return this.savaAsImage(e,t,a,"png","defaultpng")}saveAsJPEG(e,t,a){return this.savaAsImage(e,t,a,"jpeg","defaultjpg")}saveAsGIF(e,t,a){return this.savaAsImage(e,t,a,"gif","defaultgif")}saveAsBMP(e,t,a){return this.savaAsImage(e,t,a,"bmp","defaultbmp")}convertToPNG(e,t,a){return this.convertToImage(e,t,a,"png")}convertToJPEG(e,t,a){return this.convertToImage(e,t,a,"jpeg")}convertToGIF(e,t,a){return this.convertToImage(e,t,a,"gif")}convertToBMP(e,t,a){return this.convertToImage(e,t,a,"bmp")}}e("CanvasHelper",a),a.module="【CanvasHelper】",t._RF.pop()}}}));

System.register("chunks:///_virtual/ChangeView.ts",["cc","./UIView.ts","./Macros.ts"],(function(e){var t,n,i,s,o,a;return{setters:[function(e){t=e.cclegacy,n=e.view,i=e.ResolutionPolicy,s=e._decorator},function(e){o=e.default},function(e){a=e.Macro}],execute:function(){var c;t._RF.push({},"57531QVOSJPerFOf4DoBY4H","ChangeView",void 0);const{ccclass:r,property:u}=s;e("default",r("ChangeView")(c=class extends o{static getPrefabUrl(){return"common/prefabs/ChangeView"}onShow(){if(App.stageData.isLandscape){const e=n.getDesignResolutionSize();n.setDesignResolutionSize(e.height,e.width,i.SHOW_ALL)}else{const e=n.getDesignResolutionSize();n.setDesignResolutionSize(e.width,e.height,i.SHOW_ALL)}super.onShow(),App.entryManager.enterBundle(a.BUNDLE_RESOURCES,{changeOrientation:!0})}})||c);t._RF.pop()}}}));

System.register("chunks:///_virtual/ChatService.ts",["cc","./Config.ts","./CommonService.ts"],(function(e){var t,c,r;return{setters:[function(e){t=e.cclegacy},function(e){c=e.NetPriority},function(e){r=e.CommonService}],execute:function(){t._RF.push({},"35307er0mdBR7bBHQJfElHc","ChatService",void 0);class i extends r{constructor(...e){super(...e),this.priority=c.Chat}}e("ChatService",i),i.module="聊天",t._RF.pop()}}}));

System.register("chunks:///_virtual/CmdDefines.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"8b0d47nT5xN3LlWFAW1DU7w","CmdDefines",void 0);e("MainCmd",{CMD_SYS:1,CMD_GAME:2,CMD_LOBBY:3,CMD_PAY:4,CMD_CHAT:5}),e("SUB_CMD_SYS",{CMD_SYS_HEART:1});n._RF.pop()}}}));

System.register("chunks:///_virtual/CmmAudioComp.ts",["cc","./AudioComponent.ts","./Config.ts"],(function(t){var o,n,c,u;return{setters:[function(t){o=t.cclegacy,n=t._decorator},function(t){c=t.default},function(t){u=t.Config}],execute:function(){var e;o._RF.push({},"b35bdKfPtJFgqsmwctM1K0r","CmmAudioComp",void 0);const{ccclass:s,property:i,menu:a}=n;t("default",s("CmmAudioComp")(e=class extends c{playButton(){this.playEffect(u.audioPath.button)}})||e);o._RF.pop()}}}));

System.register("chunks:///_virtual/CmmProto.ts",["cc","./ProtoMessage.ts"],(function(t){var s,o;return{setters:[function(t){s=t.cclegacy},function(t){o=t.ProtoMessage}],execute:function(){s._RF.push({},"b35e78QVExCGoTgRGudayLT","CmmProto",void 0);t("CmmProto",class extends o{constructor(...t){super(...t),this.cmd="",this.mainCmd=0,this.subCmd=0}}),s._RF.pop()}}}));

System.register("chunks:///_virtual/CocosExtention.ts",["cc","./CocosUtils.ts","./Resource.ts","./Macros.ts"],(function(e){var t,a,o,c,n,r,s,l,i,p,u,d,h,y,f,m,R,S,F,g,C,D,A,w,B;return{setters:[function(e){t=e.cclegacy,a=e.Node,o=e.Sprite,c=e.SpriteFrame,n=e.isValid,r=e.sp,s=e.Button,l=e.dragonBones,i=e.ParticleSystem2D,p=e.ParticleAsset,u=e.Label,d=e.Font},function(e){h=e.getBundle,y=e.setSpriteSpriteFrame,f=e.addExtraLoadResource,m=e.setSkeletonSkeletonData,R=e.setButtonSpriteFrame,S=e.loadDragonDisplay,F=e.setParticleSystemFile,g=e.setLabelFont,C=e.createNodeWithPrefab,D=e._loadDirRes,A=e._loadRes},function(e){w=e.Resource},function(e){B=e.Macro}],execute:function(){e("CocosExtentionInit",(function(){Log.d("Cocos扩展初始化")})),t._RF.push({},"41a78zq+i1C45s4JKGkhQdk","CocosExtention",void 0),"object"==typeof Reflect?Reflect.defineProperty(a.prototype,"userData",{value:null,writable:!0}):a.prototype.userData=null,o.prototype.loadRemoteImage=function(e){let t=this;null!=e.isNeedCache&&null!=e.isNeedCache||(e.isNeedCache=!0);let a=!1;e.retain&&(a=!0),t.loadUrl=e.url;let o=h({bundle:e.defaultBundle,view:e.view});App.asset.remote.loadImage(e.url,e.isNeedCache,(r=>{if(r.asset){const o=r.asset;y({view:e.view,url:e.url,sprite:t,spriteFrame:o,complete:e.complete,bundle:B.BUNDLE_REMOTE,resourceType:w.Type.Remote,retain:a,cache:r.cache})}else e.defaultSpriteFrame?"string"==typeof e.defaultSpriteFrame&&App.cache.getCacheByAsync(e.defaultSpriteFrame,c,o,(a=>{y({view:e.view,url:e.defaultSpriteFrame,sprite:t,spriteFrame:a.asset,complete:e.complete,bundle:o,cache:a.cache})})):n(t)&&e.complete&&e.complete(null)}))},o.prototype.loadImage=function(e){let t=this,a=e.view,o=e.url,n=h(e),r=([o,c,r,s])=>{y({view:a,url:r,sprite:t,spriteFrame:c,complete:e.complete,bundle:n,cache:o,isAtlas:s})};"string"==typeof o?(o=`${o}/spriteFrame`,App.cache.getCacheByAsync(o,c,n,(e=>{r([e.cache,e.asset,o,!1])}))):App.cache.getSpriteFrameByAsync(o.urls,o.key,a,f,n,(e=>{e&&e.isTryReload||r([e.cache,e.spriteFrame,e.url,!0])}))},r.Skeleton.prototype.loadRemoteSkeleton=function(e){let t=this;null!=e.isNeedCache&&null!=e.isNeedCache||(e.isNeedCache=!0),App.asset.remote.loadSkeleton(e.path,e.name,e.isNeedCache,(a=>{m({component:t,config:e,data:a.asset,resourceType:w.Type.Remote,cache:a.cache})}))},r.Skeleton.prototype.loadSkeleton=function(e){let t=this,a=e.url,o=h(e);App.cache.getCacheByAsync(a,r.SkeletonData,o,(a=>{(([a,o])=>{m({component:t,config:e,data:o,cache:a})})([a.cache,a.asset])}))},s.prototype.loadButton=function(e){R(this,e)},l.ArmatureDisplay.prototype.loadDisplay=function(e){S(this,e)},i.prototype.loadFile=function(e){let t=this,a=e.url,o=h(e);App.cache.getCacheByAsync(a,p,o,(a=>{F(t,e,a.asset,a.cache)}))},u.prototype.forceDoLayout=function(){let e=this;e._forceUpdateRenderData?e._forceUpdateRenderData():e._updateRenderData?e._updateRenderData(!0):e.updateRenderData&&e.updateRenderData(!0)},u.prototype.loadFont=function(e){let t=e.font,a=this,o=h(e);App.cache.getCacheByAsync(t,d,o,(t=>{g(a,e,t.asset,t.cache)}))},window.createPrefab=function(e){C(e)},window.loadDirRes=function(e){D(e)},window.loadRes=function(e){A(e)},t._RF.pop()}}}));

System.register("chunks:///_virtual/CocosUtils.ts",["cc","./Resource.ts","./UIView.ts","./Enums.ts","./Macros.ts"],(function(e){var t,l,o,c,n,r,a,s,p,i;return{setters:[function(e){t=e.cclegacy,l=e.isValid,o=e.Prefab,c=e.SpriteFrame,n=e.dragonBones,r=e.instantiate},function(e){a=e.Resource},function(e){s=e.default},function(e){p=e.ButtonSpriteType},function(e){i=e.Macro}],execute:function(){function m(e,t){let l=App.uiManager;e==l.retainMemory?l.retainMemory.addLocal(t):e&&e instanceof s?l.addLocal(t,e.className):l.garbage.addLocal(t)}function u(e,t){let l=App.uiManager;e==l.retainMemory?l.retainMemory.addRemote(t):e&&e instanceof s?l.addRemote(t,e.className):l.garbage.addRemote(t)}function f(e){let t=e.bundle;return null!=e.bundle&&null!=e.bundle||(t=i.BUNDLE_RESOURCES,e.view&&(t=e.view.bundle)),t}function d(e){return!!(l(e)&&e.node&&l(e.node))}function y(e){null!=e.isAtlas&&null!=e.isAtlas||(e.isAtlas=!1),e.spriteFrame&&d(e.button)?function(e){if(e.cache)if(e.isAtlas||m(e.view,e.cache),e.spriteFrame&&d(e.button)){let t=e.button[e.memberName];try{let t=l(e.spriteFrame)?e.spriteFrame:null;t&&(e.button[e.memberName]=t),e.complete&&e.complete(e.memberName,t)}catch(o){let c=l(t)?t:null;e.button[e.memberName]=c,e.complete&&e.complete(e.memberName,null),Log.e(`${e.url} : ${o||"replace spriteframe error"}`)}}else e.complete&&d(e.button)&&e.complete(e.memberName,e.spriteFrame);else e.complete&&d(e.button)&&e.complete(e.memberName,null)}(e):e.complete&&d(e.button)&&e.complete(e.memberName,e.spriteFrame)}function g(e,t,l,o,n,r){let a=([o,c,a,s])=>{y({button:e,memberName:t,view:l,url:a,spriteFrame:c,complete:n,bundle:r,cache:o,isAtlas:s})};o?"string"==typeof o?(o=`${o}/spriteFrame`,App.cache.getCacheByAsync(o,c,r,(e=>{a([e.cache,e.asset,o,!1])}))):App.cache.getSpriteFrameByAsync(o.urls,o.key,l,m,r,(e=>{e&&e.isTryReload?n&&n(t,null):a([e.cache,e.spriteFrame,e.url,!0])})):n&&n(t,null)}e({_loadDirRes:function(e){let t=f(e);App.asset.loadDir(t,e.url,e.type,e.onProgress,(t=>{(t=>{t&&m(e.view,t),e.onComplete&&e.onComplete(t)})(t)}))},_loadRes:function(e){let t=f(e);e.type==c&&(e.url=`${e.url}/spriteFrame`);App.cache.getCacheByAsync(e.url,e.type,t,(t=>{(t=>{t.cache&&m(e.view,t.cache),e.onComplete&&e.onComplete(t.asset)})(t)}))},addExtraLoadResource:m,addRemoteLoadResource:u,createNodeWithPrefab:function(e){let t=e.url,l=f(e);App.cache.getCacheByAsync(t,o,l,(t=>{(([t,l])=>{if(t&&m(e.view,t),l&&d(e.view)){let t=r(l);e.complete&&e.complete(t)}else d(e.view),e.complete&&e.complete(null)})([t.cache,t.asset])}))},getAsset:function(e,t,l,o){return App.bundleManager.getBundle(l).get(`${e}/${t}`,o)},getBundle:f,loadDragonDisplay:function(e,t){let l=f(t);App.cache.getCacheByAsync(t.assetUrl,n.DragonBonesAsset,l,(o=>{o.asset?((([e,l])=>{e&&m(t.view,e)})([o.cache,o.asset]),App.cache.getCacheByAsync(t.atlasUrl,n.DragonBonesAtlasAsset,l,(l=>{(([l,o,c])=>{o?(m(t.view,l),e.dragonAsset=c,e.dragonAtlasAsset=o,t.complete&&t.complete(c,o)):t.complete&&t.complete(c,null)})([l.cache,l.asset,o.asset])}))):t.complete&&t.complete(null,null)}))},setButtonSpriteFrame:function(e,t){let l=f(t);g(e,p.Norml,t.view,t.normalSprite,t.complete,l),g(e,p.Pressed,t.view,t.pressedSprite,t.complete,l),g(e,p.Hover,t.view,t.hoverSprite,t.complete,l),g(e,p.Disable,t.view,t.disabledSprite,t.complete,l)},setLabelFont:function(e,t,o,c){if(!c)return void(t.complete&&d(e)&&t.complete(null));if(m(t.view,c),o&&d(e)){let c=e.font;try{let c=l(o)?o:null;c&&(e.font=c),t.complete&&t.complete(c)}catch(o){let n=l(c)?c:null;e.font=n,t.complete&&t.complete(null),Log.e(`${t.font} : ${o||"replace font error"}`)}}else t.complete&&d(e)&&t.complete(o)},setParticleSystemFile:function(e,t,o,c){if(!c)return void(t.complete&&d(e)&&t.complete(null));if(m(t.view,c),o&&d(e)){let c=e.file;try{let c=l(o)?o:null;c&&(e.file=c),t.complete&&t.complete(c)}catch(o){let n=l(c)?c:null;e.file=n,t.complete&&t.complete(null),Log.e(`${t.url} : ${o||"replace file error"}`)}}else t.complete&&d(e)&&t.complete(o)},setSkeletonSkeletonData:function(e){if(!e.cache)return void(e.config.complete&&d(e.component)&&e.config.complete(null));null!=e.resourceType&&null!=e.resourceType||(e.resourceType=a.Type.Local);e.resourceType==a.Type.Remote?u(e.config.view,e.cache):m(e.config.view,e.cache);if(e.data&&d(e.component)){let t=e.component.skeletonData;try{let t=l(e.data)?e.data:null;t&&(e.component.skeletonData=t),e.config.complete&&e.config.complete(t)}catch(o){let c=l(t)?t:null;e.component.skeletonData=c,e.config.complete&&e.config.complete(null),Log.e(`${e.cache.key} : ${o||"replace skeletonData error"}`)}}else e.config.complete&&d(e.component)&&e.config.complete(e.data)},setSpriteSpriteFrame:function(e){null!=e.resourceType&&null!=e.resourceType||(e.resourceType=a.Type.Local);null!=e.retain&&null!=e.retain||(e.retain=!1);null!=e.isAtlas&&null!=e.isAtlas||(e.isAtlas=!1);if(!e.cache)return Log.e(`加载${e.url}图片错误`),void(e.complete&&d(e.sprite)&&e.complete(null));e.isAtlas||(e.resourceType==a.Type.Remote?u(e.view,e.cache):m(e.view,e.cache));if(e.spriteFrame&&d(e.sprite)){let t=e.sprite.spriteFrame,o=l(e.spriteFrame)?e.spriteFrame:null;try{o&&(e.sprite.spriteFrame=o),e.complete&&e.complete(o)}catch(o){let c=l(t)?t:null;e.sprite.spriteFrame=c,e.complete&&e.complete(null),Log.e(`${e.url} : ${o||"replace spriteframe error"}`)}}else e.complete&&d(e.sprite)&&e.complete(e.spriteFrame)}}),t._RF.push({},"c5e498hvkpGm6BWGue9rQcW","CocosUtils",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/CommonEvent.ts",["cc"],(function(n){var t;return{setters:[function(n){t=n.cclegacy}],execute:function(){t._RF.push({},"44b3bL/ZNdPXbAWy02ohBa3","CommonEvent",void 0);n("CommonEvent",function(n){return n.TEST_PROTO_MSG="TEST_PROTO_MSG",n.TEST_BINARY_MSG="TEST_BINARY_MSG",n.TEST_JSON_MSG="TEST_JSON_MSG",n}({}));t._RF.pop()}}}));

System.register("chunks:///_virtual/CommonService.ts",["cc","./GetCmdKey.ts","./Message.ts","./Net.ts","./WSService.ts","./Macros.ts","./ByteArray.ts","./CmdDefines.ts","./HeartbetBinary.ts"],(function(e){var t,s,n,i,r,o,a,c,u,d;return{setters:[function(e){t=e.cclegacy},function(e){s=e.GetCmdKey},function(e){n=e.MessageHead},function(e){i=e.Net},function(e){r=e.WSService},function(e){o=e.Macro},function(e){a=e.ByteArray},function(e){c=e.SUB_CMD_SYS,u=e.MainCmd},function(e){d=e.HeartbeatBinary}],execute:function(){t._RF.push({},"aad07lPwddEKJJ1ajESY2A1","CommonService",void 0);class h extends n{constructor(...e){super(...e),this.mainCmd=0,this.subCmd=0,this.buffer=null,this.headerSize=3*Uint32Array.BYTES_PER_ELEMENT}encode(e){this.mainCmd=e.mainCmd,this.subCmd=e.subCmd;let t=0;e.buffer&&(t=e.buffer.length);let s=new a;if(s.endian=o.USING_LITTLE_ENDIAN,s.writeUnsignedInt(this.mainCmd),s.writeUnsignedInt(this.subCmd),s.writeUnsignedInt(t),e.buffer){let t=new a(e.buffer);s.writeBytes(t)}return this.buffer=s.bytes,!0}decode(e){let t=new a(e.data);t.endian=o.USING_LITTLE_ENDIAN,this.mainCmd=t.readUnsignedInt(),this.subCmd=t.readUnsignedInt();let s=t.readUnsignedInt(),n=t.buffer.slice(t.position);return this.buffer=new Uint8Array(n),s==this.buffer.length}get cmd(){return String(this.mainCmd)+String(this.subCmd)}}e("CmmHead",h);e("CommonService",class extends r{get data(){return App.stageData}constructor(e){super(e),this.ip="localhost",this.port=3e3,this.protocol="ws",this._backgroundTimeOutId=-1,this._Heartbeat=null;let t={url:`${this.protocol}://${this.ip}:${this.port}`,tag:e};this.options=t,this.flows.sendHeartbeatFlow.push((async e=>(this.heartbeat?await this.send(new this.heartbeat):Log.e("请先设置心跳解析类型"),e))),this.flows.isHeartBeatFlow.push((e=>(e.result=e.message.cmd==s(u.CMD_SYS,c.CMD_SYS_HEART),e))),this.flows.decodeHeaderFlow.push((e=>{let t=new h;return t.decode(e.message),e.result=t,e})),this.flows.encodeHeaderFlow.push((e=>{let t=new h;const s=t.encode(e.message);return e.result={isSuccess:s,message:t},e})),this.flows.decodeMessageFlow.push((e=>{const t=e.decodeData,s=e.message;let n=null;if(this.serviceType==i.ServiceType.Proto){if(t.type&&"string"==typeof t.type){if(App.protoManager.lookup(t.type))try{n=App.protoManager.decode({className:t.type,buffer:s.buffer})}catch(e){n=null}else n=s.buffer}else n=s.buffer;return e.result=n,e}return t.type&&"string"!=typeof t.type?(n=new t.type,n.decode(s.buffer)):n=s.buffer,e.result=n,e})),this.flows.enterBackgroundFlow.push((e=>(this.data.isLoginStage()||(this._backgroundTimeOutId=setTimeout((()=>{App.alert.close(o.RECONNECT_ALERT_TAG),this.stop()}),this.options.maxEnterBackgroundTime)),e))),this.flows.enterForegroundFlow.push((e=>{if(-1!=this._backgroundTimeOutId){if(clearTimeout(this._backgroundTimeOutId),this.data.isLoginStage())return e.isNeedReconnect=!1,e;if(1e3*e.enterBackgroundTime>this.options.maxEnterBackgroundTime)return App.alert.close(o.RECONNECT_ALERT_TAG),e.isNeedReconnect=!0,e}return e.isNeedReconnect=!1,e})),this.flows.reconnectFailedFlow.push((async e=>{if(App.uiReconnect.hide(),this.data.isLoginStage())return e.isNeedReconnect=!1,e;const t=await this.showReconnectAlert();return e.isNeedReconnect=t,e})),this.flows.reconnectStartFlow.push((e=>(App.uiReconnect.show(App.getLanguage("tryReconnect",[this.module,e.reconnectTimes])),e))),this.flows.reconnectSuccessFlow.push((e=>(App.uiReconnect.hide(),e))),this.heartbeat=d}showReconnectAlert(){return new Promise(((e,t)=>{App.alert.show({tag:o.RECONNECT_ALERT_TAG,isRepeat:!1,text:App.getLanguage("warningReconnect",[this.module]),confirmCb:t=>{t?(Log.d(`${this.module} 重连连接网络`),e(!0)):(this.gotoLogin(),e(!1))},cancelCb:()=>{e(!1),this.gotoLogin()}})}))}gotoLogin(){Log.d(`${this.module} 玩家网络不好，不重连，退回到登录界面`),App.entryManager.enterBundle(o.BUNDLE_RESOURCES)}get heartbeat(){return this._Heartbeat}set heartbeat(e){this._Heartbeat=e,this.serviceType=e.type}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/Config.ts",["cc"],(function(e){var t,n;return{setters:[function(e){t=e.cclegacy,n=e.Enum}],execute:function(){e("Config",void 0),t._RF.push({},"4227bYQTFFOYb3+qzJ9yRmP","Config",void 0);let o=e("BundleType",function(e){return e[e.resources=0]="resources",e[e.moneyComing=1]="moneyComing",e[e.eliminate=2]="eliminate",e[e.hall=3]="hall",e[e.loadTest=4]="loadTest",e[e.netTest=5]="netTest",e[e.nodePoolTest=6]="nodePoolTest",e[e.tankBattle=7]="tankBattle",e[e.taxi=8]="taxi",e[e.qrcode=9]="qrcode",e[e.stateMachine=10]="stateMachine",e[e.multiLogic=11]="multiLogic",e[e.snapshot=12]="snapshot",e[e.changeOrientation=13]="changeOrientation",e[e.l10nTest=14]="l10nTest",e[e.eventTest=15]="eventTest",e}({}));var a=function(e){return e[e.resources=0]="resources",e[e.hall=1]="hall",e[e.moneyComing=2]="moneyComing",e[e.eliminate=3]="eliminate",e[e.loadTest=4]="loadTest",e[e.taxi=5]="taxi",e[e.netTest=6]="netTest",e[e.nodePoolTest=7]="nodePoolTest",e[e.tankBattle=8]="tankBattle",e[e.stateMachine=9]="stateMachine",e[e.qrcode=10]="qrcode",e[e.multiLogic=11]="multiLogic",e[e.snapshot=12]="snapshot",e[e.changeOrientation=13]="changeOrientation",e[e.l10nTest=14]="l10nTest",e[e.eventTest=15]="eventTest",e[e.private=16]="private",e}(a||{});const i=n(o);let s,l=e("ViewZOrder",function(e){return e[e.Default=0]="Default",e[e.Horn=1]="Horn",e[e.UI=2]="UI",e[e.Tips=3]="Tips",e[e.Alert=4]="Alert",e[e.Loading=5]="Loading",e[e.UILoading=6]="UILoading",e[e.Debug=7]="Debug",e}({}));var r;(r=s||(s=e("Config",{}))).isShowDebugButton=!0,r.audioPath={dialog:"common/audio/dlg_open",button:"common/audio/btn_click"},r.isSkipUpdate=!1,r.HOT_UPDATE_URL="https://static-resources-hoster-snowy.vercel.app/kb-slots/hotupdate",r.USE_AUTO_VERSION=!0,r.LOADING_TIME_OUT=30,r.LOADING_CONTENT_CHANGE_INTERVAL=3,r.LOAD_VIEW_TIME_OUT=20,r.LOAD_VIEW_DELAY=.1,r.RECONNECT_TIME_OUT=30,r.MAX_INBACKGROUND_TIME=60,r.MIN_INBACKGROUND_TIME=5,r.BUNDLES=[{sort:a.moneyComing,type:o.moneyComing,name:{CN:"财神到",EN:"Money Coming"},bundle:i[o.moneyComing]},{sort:a.netTest,type:o.netTest,name:{CN:"网络示例",EN:"Net Test"},bundle:i[o.netTest]},{sort:a.resources,type:o.resources,name:{CN:"主包",EN:"Main"},bundle:i[o.resources]},{sort:a.hall,type:o.hall,name:{CN:"大厅",EN:"Hall"},bundle:i[o.hall]}],r.LAYERS=n(l),r.SHOW_STATUS=!0;e("NetPriority",function(e){return e[e.Game=0]="Game",e[e.Chat=1]="Chat",e[e.Lobby=2]="Lobby",e}({}));t._RF.pop()}}}));

System.register("chunks:///_virtual/DataCenter.ts",["cc","./SingletonT.ts"],(function(t){var e,n;return{setters:[function(t){e=t.cclegacy},function(t){n=t.SingletonT}],execute:function(){e._RF.push({},"39dddWDYJJE9aqb6DTOKM/X","DataCenter",void 0);class s extends n{constructor(...t){super(...t),this.module=null}onDestroy(t){this._datas.forEach((e=>{e.onDestroy(t)}))}}t("DataCenter",s),s.module="【数据中心】",e._RF.pop()}}}));

System.register("chunks:///_virtual/DebugView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIView.ts","./Decorators.ts","./Enums.ts","./Macros.ts","./Singleton.ts","./BundleDebugView.ts","./Config.ts"],(function(e){var t,n,o,i,r,s,g,a,l,u,h,d,c,p,b,w,v,f,L,S;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){o=e.cclegacy,i=e.Node,r=e._decorator,s=e.instantiate,g=e.find,a=e.Label,l=e.Input,u=e.Toggle,h=e.profiler,d=e.screen,c=e.view},function(e){p=e.default},function(e){b=e.inject},function(e){w=e.LogLevel},function(e){v=e.Macro},function(e){f=e.Singleton},function(e){L=e.BundleDebugView},function(e){S=e.ViewZOrder}],execute:function(){var D,E,m,x,M,V,C,y,A,z,P,B,R,U,$;o._RF.push({},"bdd324XQYlLbq4LbFeMUaSA","DebugView",void 0);const{ccclass:N,property:k}=r;e("DebugView",(D=N("DebugView"),E=b("logView",i),m=b("content",i),x=b("item",i,"content"),M=b("background",i),V=b("background",i,"logView"),C=b("closeDebug",i),D((z=t((A=class extends p{constructor(...e){super(...e),n(this,"logView",z,this),n(this,"content",P,this),n(this,"itemPrefab",B,this),n(this,"background",R,this),n(this,"logViewBackground",U,this),n(this,"closeDebug",$,this)}static getPrefabUrl(){return"common/prefabs/DebugView"}get config(){return[{text:"显示视图",onEvent:this.onShowUI},{text:"显示节点",onEvent:this.onShowNode},{text:"资源缓存",onEvent:this.onShowRes},{text:"显示组件",onEvent:this.onShowComp},{text:"调试信息",onEvent:this.onShowDebugInfo},{text:"日志",onEvent:this.onLog},{text:"逻辑管理器",onEvent:this.onLogicManager},{text:"数据中心",onEvent:this.onDataCenter},{text:"Bundle入口",onEvent:this.onEntry},{text:"Proto信息",onEvent:this.onProto},{text:"Bundle管理器",onEvent:this.onBundleMgr},{text:"节点缓存池",onEvent:this.onPool},{text:"Handlers",onEvent:this.onHandler},{text:"网络管理器",onEvent:this.onServiceManager},{text:"热更新",onEvent:this.onHotUpdate},{text:"内存警告模拟",onEvent:this.onLowMemory},{text:"释放管理器",onEvent:this.onReleaseManager},{text:"适配器",onEvent:this.onAdaptor},{text:"当前单例",onEvent:this.onSingleton},{text:"Bundle调试",onEvent:this.onBundleDebug}]}initData(){const e=this.config;this.content.removeAllChildren(),e.forEach(((e,t)=>{const n=s(this.itemPrefab);n.name=`debug${t}`,g("Label",n).getComponent(a).string=e.text,this.onN(n,i.EventType.TOUCH_END,e.onEvent),this.content.addChild(n)}))}onLoad(){super.onLoad(),this.itemPrefab.removeFromParent(),this.initData(),this.doOther()}doOther(){this.logView&&(this.logView.active=!1,this.initLogView()),this.onN(this.background,l.EventType.TOUCH_END,(()=>{this.args.onClose&&this.args.onClose(),this.close()})),this.onN(this.closeDebug,l.EventType.TOUCH_END,(()=>{this.close(),this.args.onCloseDebug&&this.args.onCloseDebug()}))}onClose(){const e=this.args;e&&e.onClose&&e.onClose(),super.onClose()}initLogView(){this.onN(this.logViewBackground,l.EventType.TOUCH_END,(()=>{this.logView.active=!1}));let e=g("level",this.logView);if(e)for(let t=0;t<e.children.length-1;t++){let n=g(`type${t}`,e);if(n){let e=n.getComponent(u);e&&(e.isChecked=App.logger.isValid(this.getLogLevel(t))),this.onN(n,"toggle",(e=>{e.isChecked?App.logger.attach(this.getLogLevel(t)):App.logger.detach(this.getLogLevel(t)),this.testLog()}))}}}getLogLevel(e){switch(e){case 0:return w.DEBUG;case 1:return w.WARN;case 2:return w.ERROR;case 3:return w.DUMP;default:return w.DEBUG}}testLog(){Log.d("测试 debug"),Log.w("测试 warn"),Log.e("测试 error"),Log.dump({name:"测试dump",value:666},"dump")}onLogicManager(){App.logicManager.debug()}onDataCenter(){App.dataCenter.debug()}onEntry(){App.entryManager.debug()}onProto(){App.protoManager.debug()}onBundleMgr(){App.bundleManager.debug()}onPool(){App.pool.debug()}onLog(){this.logView.active=!0}onShowDebugInfo(){h.isShowingStats()?h.hideStats():h.showStats(),App.storage.setItem(v.SHOW_DEBUG_INFO_KEY,h.isShowingStats())}onShowUI(){App.uiManager.debug()}onShowNode(){App.layerMgr.debug({showChildren:!0})}onShowRes(){App.cache.debug()}onShowComp(){App.layerMgr.debug({showComp:!0})}onHandler(){App.handlerManager.debug()}onServiceManager(){App.serviceManager.debug()}onHotUpdate(){App.updateManager.debug()}onLowMemory(){App.onLowMemory()}onReleaseManager(){App.releaseManger.debug()}onAdaptor(){Log.d("-----------------------------适配信息-----------------------------------------------"),Log.d(`屏幕分辨率: ${d.windowSize.width} x ${d.windowSize.height}`),Log.d(`视图窗口可见区域分辨率: ${c.getVisibleSize().width} x ${c.getVisibleSize().height}`),Log.d(`视图中边框尺寸: ${d.windowSize.width} x ${d.windowSize.height}`),Log.d(`设备或浏览器像素比例: ${d.devicePixelRatio}`),Log.d(`返回视图窗口可见区域像素尺寸: ${c.getVisibleSizeInPixel().width} x ${c.getVisibleSizeInPixel().height}`),Log.d(`当前场景设计分辨率: ${c.getDesignResolutionSize().width} x ${c.getDesignResolutionSize().height}`);let e=d.windowSize.width/d.windowSize.height,t=c.getDesignResolutionSize().width/c.getDesignResolutionSize().height;Log.d(`视图宽高比:${e}`),Log.d(`设置分辨率宽高比:${t}`)}onSingleton(){f.debug()}onBundleDebug(){setTimeout((()=>{this.node.active=!1,App.uiManager.open({type:L,zIndex:S.Debug,args:{onClose:()=>{this.node.active=!0,this.close()}}})}),100)}}).prototype,"logView",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(A.prototype,"content",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(A.prototype,"itemPrefab",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(A.prototype,"background",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(A.prototype,"logViewBackground",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=t(A.prototype,"closeDebug",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=A))||y));o._RF.pop()}}}));

System.register("chunks:///_virtual/Decorators.ts",["cc","./Singleton.ts"],(function(e){var t,n,o,r,l,i,p;return{setters:[function(e){t=e.cclegacy,n=e.Component,o=e.isValid,r=e.find,l=e.js,i=e.Node},function(e){p=e.Singleton}],execute:function(){e({inject:function(){if("string"==typeof arguments[0]){let e;return arguments.length>=3&&(e=arguments[2]),f(arguments[0],arguments[1],e)}{let e=arguments[0];return g(e.type,e.name)}},registerEntry:function(e,t,n){return function(o){if("object"==typeof App)o.__classname__=e,o.bundle=t,App.entryManager.register(o,n);else{"undefined"==typeof WaitToApp&&(WaitToApp={},window.WaitToApp=WaitToApp),WaitToApp.entrys||(WaitToApp.entrys={});let r=`${e}|${t}`;WaitToApp.entrys[r]||(WaitToApp.entrys[r]={target:o,type:n})}}},toApp:function(){"object"==typeof WaitToApp&&"object"==typeof WaitToApp.entrys&&Object.keys(WaitToApp.entrys).forEach((e=>{let[t,n]=e.split("|"),{target:o,type:r}=WaitToApp.entrys[e];o.__classname__=t,o.bundle=n,App.entryManager.register(o,r)}))}}),t._RF.push({},"79becuRyZJMkYDHY8CyWds7","Decorators",void 0);const a="_FIND_OPTIONS_";function c(e,t,o){let i=r(e,t);if(l.isChildClassOf(o,n)){return null==i?void 0:i.getComponent(o)}return i}function f(e,t,r){return function(l,p){if(!(l instanceof n))return void Log.e("无法注入,仅支持 Component 组件");let f=l;if(!Reflect.has(l,a)){let e=f.onLoad;f.onLoad=function(){let t=this,n=Reflect.get(t,a);for(let e in n){let r=Reflect.get(n,e);Reflect.get(t,r.member)||Reflect.defineProperty(t,r.member,{enumerable:!0,configurable:!0,get(){let n=t.node;if(r.root){let e=`__${r.root.replace(/\//g,"_")}`;o(t[e])||(t[e]=c(r.root,n,i)),n=t[e]}return o(t[e])||(t[e]=c(r.path,n,r.type)),t[e]},set(n){t[e]=n}})}e&&Reflect.apply(e,this,arguments)};let t=f.onDestroy;f.onDestroy=function(){let e=this,n=Reflect.get(e,a);for(let t in n){let o=Reflect.get(n,t);Reflect.deleteProperty(e,o.member)}t&&Reflect.apply(t,this,arguments)},Reflect.defineProperty(l,a,{value:{}})}let s={path:e,type:t,member:p,root:r},g=`__${p}`,u=Reflect.get(l,a);Reflect.defineProperty(u,g,{value:s,enumerable:!0})}}const s="__MEMBER_INJECT__";function g(e,t){return function(n,o){let r=n,l=r.onLoad;if(!l)return void Log.e("无法注入");if(!Reflect.has(n,s)){r.onLoad=function(){let e=this,t=Reflect.get(e,s);for(let n in t){const o=Reflect.get(t,n);Reflect.get(e,o.member)||Reflect.defineProperty(e,o.member,{enumerable:!0,configurable:!0,get:()=>"logic"==o.tag?App.logicManager.get(o.type,!1):"singleton"==o.tag?p.get(o.type,!1):"data"==o.tag?App.dataCenter.get(o.type,!1):"service"==o.tag?App.serviceManager.get(o.type,!1):"handler"==o.tag?App.handlerManager.get(o.type,!1):null})}l&&Reflect.apply(l,this,arguments)};let e=r.onDestroy;r.onDestroy=function(){let t=this,n=Reflect.get(t,s);for(let e in n){let o=Reflect.get(n,e);Reflect.deleteProperty(t,o.member)}e&&Reflect.apply(e,this,arguments)},Reflect.defineProperty(n,s,{value:{}})}let i={type:e,member:o,tag:t},a=`__member_inject_${o}`,c=Reflect.get(n,s);Reflect.defineProperty(c,a,{value:i,enumerable:!0})}}t._RF.pop()}}}));

System.register("chunks:///_virtual/Dispatcher.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"82b2bGzpDlKYpAzukovUhGW","Dispatcher",void 0);class s{static get instance(){return this._instance||(this._instance=new s)}constructor(){this._eventCaches=null,this.isResident=!0,this.module=null,this._eventCaches={}}destory(){s._instance=null}onDestroy(t){this.clear()}clear(...t){this._eventCaches={}}add(t,e,s,c={}){if(!t||!e||!s)return;let r=this._eventCaches[t]||[],n=!1;for(let t=0;t<r.length;t++)if(r[t].target===s){n=!0;break}if(n)return;let l={type:t,callback:e,target:s,once:c.once,sort:null==c.sort?0:c.sort};r.push(l),r.sort(((t,e)=>e.sort-t.sort)),this._eventCaches[t]=r}remove(t,e){if(!t||!e)return;let s=this._eventCaches[t];if(s){for(let t=0;t<s.length;t++)if(s[t].target===e){s.splice(t,1);break}0==s.length&&delete this._eventCaches[t]}}dispatch(...t){if(t.length<1)return;let e=t[0];if(!e)return;const s=t.slice(1);let c=this._eventCaches[e];if(!c)return;let r=[],n={isStop:!1,result:void 0};for(let t=0;t<c.length;t++){let e=c[t];try{if("object"==typeof Reflect?n.result=Reflect.apply(e.callback,e.target,[n,...s]):n.result=e.callback.apply(e.target,[n,...s]),e.once&&r.push(e),n.isStop)break}catch(t){Log.e(t)}}for(let t=0;t<r.length;t++){const e=r[t];this.remove(e.type,e.target)}return n.result}async dispatchAsync(...t){if(t.length<1)return;let e=t[0];if(!e)return;const s=t.slice(1);let c=this._eventCaches[e];if(!c)return;let r=[],n={isStop:!1,result:void 0};for(let t=0;t<c.length;t++){let e=c[t];try{if("object"==typeof Reflect?n.result=Reflect.apply(e.callback,e.target,[n,...s]):n.result=e.callback.apply(e.target,[n,...s]),n.result instanceof Promise&&(n.result=await n.result),e.once&&r.push(e),n.isStop)break}catch(t){Log.e(t)}}for(let t=0;t<r.length;t++){const e=r[t];this.remove(e.type,e.target)}return n.result}}t("Dispatcher",s),s._instance=null,s.module="【事件管理器】",window.dispatch=function(){return App?Reflect.apply(App.dispatcher.dispatch,App.dispatcher,arguments):Reflect.apply(s.instance.dispatch,s.instance,arguments)},window.dispatchAsync=function(){return App?Reflect.apply(App.dispatcher.dispatchAsync,App.dispatcher,arguments):Reflect.apply(s.instance.dispatchAsync,s.instance,arguments)},e._RF.pop()}}}));

System.register("chunks:///_virtual/Entry.ts",["cc","./ResourceLoader.ts","./Update.ts"],(function(e){var t,a,n;return{setters:[function(e){t=e.cclegacy},function(e){a=e.default},function(e){n=e.Update}],execute:function(){t._RF.push({},"5aaf2lBMtdMrrl2N8Y5zFqB","Entry",void 0);e("EntryData",class{constructor(e){this.data=null,this.update=null,this.data=e,this.update=new n.Config(this.getLanguage(e.bundle),e.bundle)}get bundle(){return this.data.bundle}get language(){return this.update.name}get name(){return this.data.name}getLanguage(e){return`bundles.${e}`}});class i{set gameView(e){this._gameView=e}get gameView(){return this._gameView}constructor(){this.gameViewType=null,this.isMain=!1,this.bundle="",this.language=null,this.loader=null,this.node=null,this.isRunning=!1,this._gameView=null,this.loader=new a}onLoad(e){this.node=e,this.isRunning=!0}onDestroy(){this.isRunning=!1}onEnter(e){App.language.addDelegate(this.language),this.initData(),this.addNetHandler(),this.pauseMessageQueue(),this.loadResources((()=>{e&&e.isPreload?this.onPreload():this.onStartGameView(e)}))}onPreload(){}onStartGameView(e){this.openGameView(e)}onUnloadBundle(){App.uiManager.closeBundleView(this.bundle),this.removeNetHandler(),this.unloadResources()}unloadResources(){this.loader.unLoadResources()}openGameView(e){App.uiManager.open({type:this.gameViewType,bundle:this.bundle,args:e})}closeGameView(){App.uiManager.close(this.gameViewType)}call(e,t){}onEnterGameView(e){this._gameView=e}onDestroyGameView(e){App.language.removeDelegate(this.language),this._gameView=null}onShowGameView(e){this._gameView=e}onCloseGameView(e){this._gameView=null}onMainUpdateComplete(e){}}e("Entry",i),i.bundle="",t._RF.pop()}}}));

System.register("chunks:///_virtual/EntryDelegate.ts",["cc","./Macros.ts"],(function(e){var t,a,n;return{setters:[function(e){t=e.cclegacy,a=e.isValid},function(e){n=e.Macro}],execute:function(){t._RF.push({},"7195eD0dxVOmIS0HcmWhEaq","EntryDelegate",void 0);e("EntryDelegate",class{unloadAttachBundle(e){let t=this.getPersistBundle();t.push(App.stageData.where),t.push(...App.stageData.excludeAttachWhere),App.bundleManager.removeLoadedBundle(t);const a=App.stageData.prevAttachWhere;return a?App.stageData.attachWhere=a:App.stageData.clearAttachStack(),a}onEnterGameView(e,t){}closeCurEntryGameView(){let e=App.entryManager.getEntry(App.stageData.where);e&&a(e.gameView)&&e.gameView.close()}onShowGameView(e,t){const n=a(t)&&t.args&&t.args.isAttach;let r=this.getPersistBundle();if(e&&(r.push(e.bundle),n&&(r.push(...App.stageData.attachs),r.push(App.stageData.where))),App.stageData.where!==e.bundle){if(n){if(e.bundle==App.stageData.attachWhere)return;App.stageData.attachWhere=e.bundle}else this.closeCurEntryGameView(),App.stageData.clearAttachStack(),App.stageData.where=e.bundle;App.bundleManager.removeLoadedBundle(r)}}onCheckUpdate(){Log.d("主包检测更新");let e=this.getEntryConfig(n.BUNDLE_RESOURCES);App.bundleManager.enterBundle(e)}getPersistBundle(){return[n.BUNDLE_RESOURCES]}onEnterMain(e,t){e&&(this.closeCurEntryGameView(),e.onEnter(t))}getEntryConfig(e){return null}onMainUpdateComplete(e,t){e&&e.onMainUpdateComplete(t)}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/EntryImpl.ts",["cc","./EntryDelegate.ts","./Macros.ts","./Singleton.ts","./BundleUpdate.ts","./HallUpdate.ts","./MainUpdate.ts"],(function(t){var e,n,a,r,l,i,u;return{setters:[function(t){e=t.cclegacy},function(t){n=t.EntryDelegate},function(t){a=t.Macro},function(t){r=t.Singleton},function(t){l=t.BundleUpdate},function(t){i=t.HallUpdate},function(t){u=t.MainUpdate}],execute:function(){e._RF.push({},"db279dsL0xIGIRItaz3wuPV","EntryImpl",void 0);t("EntryImpl",class extends n{onEnterGameView(t,e){}onShowGameView(t,e){super.onShowGameView(t,e),App.loading.hide()}getEntryConfig(t){let e=App.stageData.getEntry(t);if(e){let n=App.updateManager.getItem(e);return t==a.BUNDLE_RESOURCES?n.handler=r.get(u):t==a.BUNDLE_HALL?n.handler=r.get(i):n.handler=r.get(l),n}return Log.e("未找到入口配置信息"),null}getPersistBundle(){return[a.BUNDLE_RESOURCES,a.BUNDLE_HALL]}}),e._RF.pop()}}}));

System.register("chunks:///_virtual/EntryManager.ts",["cc","./EntryDelegate.ts","./Macros.ts"],(function(e){var t,n,a;return{setters:[function(e){t=e.cclegacy},function(e){n=e.EntryDelegate},function(e){a=e.Macro}],execute:function(){t._RF.push({},"654eacHc69Fm50EILZ/ggOz","EntryManager",void 0);class s{constructor(){this.module=null,this.isResident=!0,this._entrys=new Map,this.delegate=new n,this.node=null}register(e,t){let n=this.getEntry(e.bundle);n&&this._entrys.delete(e.bundle),n=new e,n.bundle=e.bundle,n.gameViewType=t,this._entrys.set(n.bundle,n),this.node&&n.onLoad(this.node)}onLoad(e){this.node=e,this._entrys.forEach(((e,t)=>{e.isRunning||(e.onLoad(this.node),e.isMain&&e.onEnter())}))}onDestroy(e){this._entrys.forEach((e=>{e.onDestroy()}))}onCheckUpdate(){this.delegate.onCheckUpdate()}call(e,t,...n){let a=this.getEntry(e);a&&a.call(t,n)}enterBundle(e,t){let n=this.delegate.getEntryConfig(e);if(n)if(e==a.BUNDLE_RESOURCES){let n=this.getEntry(e);this.delegate.onEnterMain(n,t)}else n.userData=t,App.bundleManager.enterBundle(n)}backBundle(e){let t=App.stageData.attachWhere;if(t!=a.UNKNOWN){let n=this.delegate.unloadAttachBundle(t);return n?((e=e||{}).isAttach=!0,void this.enterBundle(n,e)):(Log.d(`${this.module}已经是最后一个附加场景，返回当前运行的场景`),void this.enterBundle(App.stageData.where,e))}let n=App.stageData.prevWhere;n?this.enterBundle(n,e):Log.d(`${this.module}已经是最后一个场景，无法返回`)}onLoadBundleComplete(e){e.isLoaded=!0;let t=this.getEntry(e.bundle);t&&t.onEnter(e.userData)}onEnterGameView(e,t){let n=this.getEntry(e);n&&(this.delegate.onEnterGameView(n,t),n.onEnterGameView(t))}onDestroyGameView(e,t){let n=this.getEntry(e);n&&n.onDestroyGameView(t)}onShowGameView(e,t){let n=this.getEntry(e);n&&(this.delegate.onShowGameView(n,t),n.onShowGameView(t))}onCloseGameView(e,t){let n=this.getEntry(e);n&&n.onCloseGameView(t)}onUnloadBundle(e){let t=this.getEntry(e);t&&t.onUnloadBundle()}onMainUpdateComplete(e){let t=this.getEntry(a.BUNDLE_RESOURCES);this.delegate.onMainUpdateComplete(t,e)}getEntry(e){let t=App.bundleManager.getBundleName(e),n=this._entrys.get(t);return n||null}debug(){Log.d("-------Bundle入口管理器-------"),this._entrys.forEach((e=>{Log.d(`bundle : ${e.bundle}`)}))}}e("EntryManager",s),s.module="【入口管理器】",t._RF.pop()}}}));

System.register("chunks:///_virtual/Enums.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"c707eh19D1BR5w4mqFeKK/+","Enums",void 0);e("LogLevel",function(e){return e[e.OFF=0]="OFF",e[e.DEBUG=1]="DEBUG",e[e.DUMP=16]="DUMP",e[e.WARN=256]="WARN",e[e.ERROR=4096]="ERROR",e[e.ALL=4369]="ALL",e}({})),e("ViewStatus",function(e){return e[e.WAITTING_CLOSE=0]="WAITTING_CLOSE",e[e.WATITING_HIDE=1]="WATITING_HIDE",e[e.WAITTING_NONE=2]="WAITTING_NONE",e}({})),e("ButtonSpriteType",function(e){return e.Norml="normalSprite",e.Pressed="pressedSprite",e.Hover="hoverSprite",e.Disable="disabledSprite",e}({}));t._RF.pop()}}}));

System.register("chunks:///_virtual/EventComponent.ts",["cc","./EventProcessor.ts"],(function(e){var t,n,o,r;return{setters:[function(e){t=e.cclegacy,n=e.Component,o=e._decorator},function(e){r=e.EventProcessor}],execute:function(){var s;t._RF.push({},"9cde5GFThVAMr5vKTrRR3M4","EventComponent",void 0);const{ccclass:i,property:c}=o;e("default",i("EventComponent")(s=class extends n{constructor(...e){super(...e),this._eventProcessor=new r}on(e){null==e.forceBindTarget&&(e.forceBindTarget=!0),e.forceBindTarget&&!e.target&&(e.target=this),this._eventProcessor.on(e)}once(e){null==e.forceBindTarget&&(e.forceBindTarget=!0),e.forceBindTarget&&!e.target&&(e.target=this),this._eventProcessor.once(e)}off(e){null==e.forceBindTarget&&(e.forceBindTarget=!0),e.forceBindTarget&&!e.target&&(e.target=this),this._eventProcessor.off(e)}onD(e,t,n){this.on({bind:"Dispatcher",type:e,cb:t,sort:n})}onceD(e,t,n){this.once({bind:"Dispatcher",type:e,cb:t,sort:n})}offD(e){this.off({bind:"Dispatcher",type:e})}onG(e,t){this.on({bind:"Game",type:e,cb:t})}onceG(e,t){this.once({bind:"Game",type:e,cb:t})}offG(e,t){this.off({bind:"Game",type:e,cb:t})}onI(e,t){this.on({bind:"Input",type:e,cb:t})}onceI(e,t){this.once({bind:"Input",type:e,cb:t})}offI(e,t){this.off({bind:"Input",type:e,cb:t})}onN(e,t,n,o){this.on({bind:"Node",type:t,cb:n,target:null==o?void 0:o.target,nodeOptions:o,node:e})}onceN(e,t,n,o){this.once({bind:"Node",type:t,cb:n,target:null==o?void 0:o.target,nodeOptions:o,node:e})}offN(e,t,n,o){this.off({bind:"Node",type:t,cb:n,target:null==o?void 0:o.target,nodeOptions:o,node:e})}onH(e,t,n,o,r){this.on({bind:"EventHandler",type:t,cb:n,comp:e,target:o,handlerOptions:r,forceBindTarget:!1})}offH(e,t,n,o,r){this.off({bind:"EventHandler",type:t,cb:n,comp:e,target:o,handlerOptions:r,forceBindTarget:!1})}addEvents(){}onLoad(){super.onLoad&&super.onLoad(),this.addEvents()}onDestroy(){this._eventProcessor.onDestroy(),this.node.targetOff(this),super.onDestroy&&super.onDestroy()}})||s);t._RF.pop()}}}));

System.register("chunks:///_virtual/EventProcessor.ts",["cc","./QuickEvent.ts"],(function(t){var e,n,o,a,s,c,r;return{setters:[function(t){e=t.cclegacy,n=t.game,o=t.input,a=t.isValid,s=t.Node,c=t.Component},function(t){r=t.QuickEvent}],execute:function(){e._RF.push({},"9b4a8lMol1JU4rkKbyLB54R","EventProcessor",void 0);t("EventProcessor",class{constructor(){this._eventsD=new Map,this._eventsG=[],this._eventsI=[]}onD(t,e,n=0){this.on({bind:"Dispatcher",type:t,cb:e,sort:n})}onceD(t,e,n=0){this.once({bind:"Dispatcher",type:t,cb:e,sort:n})}offD(t){this.off({bind:"Dispatcher",type:t})}onG(t,e){this.on({bind:"Game",type:t,cb:e})}onceG(t,e){this.once({bind:"Game",type:t,cb:e})}offG(t,e){this.off({bind:"Game",type:t,cb:e})}onI(t,e){this.on({bind:"Input",type:t,cb:e})}onceI(t,e){this.once({bind:"Input",type:t,cb:e})}offI(t,e){this.off({bind:"Input",type:t,cb:e})}onN(t,e,n,o){this.on({bind:"Node",type:e,cb:n,target:null==o?void 0:o.target,nodeOptions:o,node:t})}onceN(t,e,n,o){this.once({bind:"Node",type:e,cb:n,target:null==o?void 0:o.target,nodeOptions:o,node:t})}offN(t,e,n,o){this.off({bind:"Node",type:e,cb:n,target:null==o?void 0:o.target,nodeOptions:o,node:t})}onH(t,e,n,o,a){this.on({bind:"EventHandler",type:e,cb:n,comp:t,target:o,handlerOptions:a,forceBindTarget:!1})}offH(t,e,n,o,a){this.off({bind:"EventHandler",type:e,cb:n,comp:t,target:o,handlerOptions:a,forceBindTarget:!1})}addEvents(){}onLoad(...t){this.addEvents()}onDestroy(...t){this._cleanD(),this._cleanG(),this._cleanI(),this._cleanN(),this._cleanH()}on(t){switch(t.bind){case"Dispatcher":this._onD(t);break;case"Game":this._onG(t);break;case"Input":this._onI(t);break;case"Node":this._onN(t);break;case"EventHandler":this._onH(t);break;default:Log.e(`on ${t.bind} 未知事件类型`)}}once(t){t.once=!0,this.on(t)}off(t){switch(t.bind){case"Dispatcher":this._offD(t);break;case"Game":this._offG(t);break;case"Input":this._offI(t);break;case"Node":this._offN(t);break;case"EventHandler":this._offH(t);break;default:Log.e(`off ${t.bind} 未知事件类型`)}}_onD(t){t.target||(t.target=this),this._eventsD.has(t.type)?Log.e(`${t.type} 重复注册`):(App.dispatcher.add(t.type,t.cb,t.target,{once:t.once,sort:t.sort}),this._eventsD.set(t.type,t))}_offD(t){t.target||(t.target=this),this._eventsD.has(t.type)&&(App.dispatcher.remove(t.type,t.target),this._eventsD.delete(t.type))}_cleanD(){this._eventsD.forEach(((t,e)=>{App.dispatcher.remove(t.type,t.target)})),this._eventsD.clear()}_onG(t){t.target||(t.target=this),n.hasEventListener(t.type,t.cb,t.target)||(n.on(t.type,t.cb,t.target,t.once),this._eventsG.push(t))}_offG(t){t.target||(t.target=this),n.off(t.type,t.cb,t.target);for(let e=0;e<this._eventsG.length;e++){const n=this._eventsG[e];if(n.type==t.type&&n.cb==t.cb&&n.target==n.target){this._eventsG.splice(e,1);break}}}_cleanG(){for(let t=0;t<this._eventsG.length;t++){const e=this._eventsG[t];n.off(e.type,e.cb,e.target)}this._eventsG=[]}_onI(t){t.target||(t.target=this),this._has(this._eventsI,t)||(t.once?o.once(t.type,t.cb,t.target):o.on(t.type,t.cb,t.target),this._eventsI.push(t))}_offI(t){t.target||(t.target=this),o.off(t.type,t.cb,t.target);for(let e=0;e<this._eventsI.length;e++){const n=this._eventsI[e];if(n.type==t.type&&n.cb==t.cb&&n.target==n.target){this._eventsI.splice(e,1);break}}}_cleanI(){for(let t=0;t<this._eventsI.length;t++){const e=this._eventsI[t];o.off(e.type,e.cb,e.target)}this._eventsI=[]}_onN(t){var e,n,o,c,r,p,d,i;(t.target||(t.target=this),a(t.node))&&(t.nodeOptions=t.nodeOptions||{},t.nodeOptions.playSound?t.once?t.type==s.EventType.TOUCH_START?(t.node.addTouchStartFunc=()=>{var e;null!=(e=t.nodeOptions)&&e.playSoundFunc?t.nodeOptions.playSoundFunc():App.gAudio.playButton(),t.node.addTouchStartFunc=null,t.cb&&("object"==typeof Reflect?Reflect.apply(t.cb,t.target,[]):t.cb.apply(t.target,[]))},null==(e=t.node)||e.once(t.type,t.node.addTouchStartFunc,t.target,t.nodeOptions.useCapture)):(t.node.addTouchStartFunc=()=>{var e;t.node.addTouchStartFunc=null,null!=(e=t.nodeOptions)&&e.playSoundFunc?t.nodeOptions.playSoundFunc():App.gAudio.playButton()},null==(n=t.node)||n.once(s.EventType.TOUCH_START,t.node.addTouchStartFunc,t.target,t.nodeOptions.useCapture),null==(o=t.node)||o.once(t.type,t.cb,t.target,t.nodeOptions.useCapture)):t.type==s.EventType.TOUCH_START?(t.node.addTouchStartFunc=()=>{var e;null!=(e=t.nodeOptions)&&e.playSoundFunc?t.nodeOptions.playSoundFunc():App.gAudio.playButton(),t.cb&&("object"==typeof Reflect?Reflect.apply(t.cb,t.target,[]):t.cb.apply(t.target,[]))},null==(c=t.node)||c.on(t.type,t.node.addTouchStartFunc,t.target,t.nodeOptions.useCapture)):(t.node.addTouchStartFunc=()=>{var e;null!=(e=t.nodeOptions)&&e.playSoundFunc?t.nodeOptions.playSoundFunc():App.gAudio.playButton()},null==(r=t.node)||r.on(s.EventType.TOUCH_START,t.node.addTouchStartFunc,t.target,t.nodeOptions.useCapture),null==(p=t.node)||p.on(t.type,t.cb,t.target,t.nodeOptions.useCapture)):t.once?null==(d=t.node)||d.once(t.type,t.cb,t.target,t.nodeOptions.useCapture):null==(i=t.node)||i.on(t.type,t.cb,t.target,t.nodeOptions.useCapture))}_offN(t){var e,n,o,c;(t.target||(t.target=this),a(t.node))&&(t.nodeOptions=t.nodeOptions||{},t.node&&t.node.addTouchStartFunc?t.type==s.EventType.TOUCH_START?(null==(e=t.node)||e.off(s.EventType.TOUCH_START,t.node.addTouchStartFunc,t.target,t.nodeOptions.useCapture),t.node.addTouchStartFunc=null):(null==(n=t.node)||n.off(s.EventType.TOUCH_START,t.node.addTouchStartFunc,t.target,t.nodeOptions.useCapture),t.node.addTouchStartFunc=null,null==(o=t.node)||o.off(t.type,t.cb,t.target,t.nodeOptions.useCapture)):null==(c=t.node)||c.off(t.type,t.cb,t.target,t.nodeOptions.useCapture))}_cleanN(){}_onH(t){if(!t.target)return;if(!(t.target instanceof c))return;if(!a(t.comp))return;const e=t.comp[`${t.type}`];r.addHandler(t,e)}_offH(t){if(!t.target)return;if(!a(t.comp))return;const e=t.comp[`${t.type}`];r.removeHandler(t,e)}_cleanH(){}_has(t,e){for(let n=0;n<t.length;n++){const o=t[n];if(o.type==e.type&&o.cb==e.cb&&o.target==e.target)return!0}return!1}}),e._RF.pop()}}}));

System.register("chunks:///_virtual/Flow.ts",["cc"],(function(s){var t;return{setters:[function(s){t=s.cclegacy}],execute:function(){t._RF.push({},"f63b66NQnRCe5zS9QJGPkhU","Flow",void 0);s("Flow",class{constructor(s=!1){this.isUnique=!1,this.nodes=[],this.onError=null,this.isUnique=s}async exec(s){let t=s;for(let e=0;e<this.nodes.length;e++)try{if(t=await this.nodes[e](t),null==t)return t}catch(e){return void this.onError(e,t,s)}return t}push(s){return this.isUnique&&(this.nodes=[]),this.nodes.push(s),s}remove(s){let t=this.nodes.indexOf(s);return t>=0&&this.nodes.splice(t,1),this.nodes}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/Framework.ts",["cc","./Dispatcher.ts","./UIManager.ts","./LocalStorage.ts","./AssetManager.ts","./CacheManager.ts","./NodePoolManager.ts","./UpdateManager.ts","./BundleManager.ts","./CocosExtention.ts","./Language.ts","./Macros.ts","./ProtoManager.ts","./EntryManager.ts","./DataCenter.ts","./LogicManager.ts","./Logger.ts","./ServiceManager.ts","./ReleaseManager.ts","./HttpClient.ts","./Singleton.ts","./LayoutManager.ts","./HandlerManager.ts","./Utils.ts","./CanvasHelper.ts","./Platform.ts","./StageData.ts","./IAlert.ts","./ILoading.ts","./IUILoading.ts","./ITips.ts","./EntryImpl.ts","./AudioComponent.ts","./LayerManager.ts"],(function(e){var t,n,r,a,g,o,u,s,i,c,l,d,M,p,h,f,L,m,A,I,y,C,U,_,E,w,v,S,D,k,B,R,F,T,H;return{setters:[function(e){t=e.cclegacy,n=e.isValid},function(e){r=e.Dispatcher},function(e){a=e.UIManager},function(e){g=e.LocalStorage},function(e){o=e._AssetManager},function(e){u=e.CacheManager},function(e){s=e.NodePoolManager},function(e){i=e.UpdateManager},function(e){c=e.BundleManager},function(e){l=e.CocosExtentionInit},function(e){d=e.Language},function(e){M=e.Macro},function(e){p=e.ProtoManager},function(e){h=e.EntryManager},function(e){f=e.DataCenter},function(e){L=e.LogicManager},function(e){m=e.LoggerImpl},function(e){A=e.ServiceManager},function(e){I=e.ReleaseManager},function(e){y=e.HttpClient},function(e){C=e.Singleton},function(e){U=e.LayoutManager},function(e){_=e.HandlerManager},function(e){E=e.Utils},function(e){w=e.CanvasHelper},function(e){v=e.Platform},function(e){S=e.StageData},function(e){D=e.IAlert},function(e){k=e.ILoading},function(e){B=e.IUILoading},function(e){R=e.ITips},function(e){F=e.EntryImpl},function(e){T=e.default},function(e){H=e.default}],execute:function(){t._RF.push({},"1fa052sIW5GVb6Iw0KrOz1L","Framework",void 0);e("Framewok",class{constructor(){this._wssCacertUrl="",this._gAudio=null,this.updateTimer=0,this.updateInterval=1e3/60,this._enterBackgroundTime=0}get isCacheUI(){return!0}get Bundles(){return this.stageData.bundles}get layerMgr(){return C.get(H)}get stageData(){return C.get(S)}get isFullScreenAdaption(){return!0}get isLazyRelease(){return!0}get isAutoReleaseUnuseResources(){return!0}get autoReleaseUnuseResourcesTimeout(){return 300}get releaseManger(){return C.get(I)}get serviceManager(){return C.get(A)}get handlerManager(){return C.get(_)}get logger(){return C.get(m)}get logicManager(){return C.get(L)}get dataCenter(){return C.get(f)}get entryManager(){return C.get(h)}get utils(){return C.get(E)}get protoManager(){return C.get(p)}get bundleManager(){return C.get(c)}get updateManager(){return C.get(i)}get retainMemory(){return this.uiManager.retainMemory}get language(){return C.get(d)}get dispatcher(){return C.get(r)}get uiManager(){return C.get(a)}get localStorage(){return this.storage}get storage(){return C.get(g)}get assetManager(){return this.asset}get asset(){return C.get(o)}get cacheManager(){return this.cache}get cache(){return C.get(u)}get nodePoolManager(){return this.pool}get pool(){return C.get(s)}get http(){return C.get(y)}get layout(){return C.get(U)}get canvasHelper(){return C.get(w)}get platform(){return C.get(v)}set wssCacertUrl(e){this._wssCacertUrl=e}get wssCacertUrl(){return this._wssCacertUrl}get tips(){return C.get(R)}get uiLoading(){return C.get(B)}get alert(){return C.get(D)}get loading(){return C.get(k)}get updateLoading(){return C.get(k)}get uiReconnect(){return C.get(k)}get gAudio(){return this._gAudio||(this._gAudio=this.uiManager.addComponent(T),this._gAudio.isGlobal=!0),this._gAudio}get audio(){const e=this.stageData.where;if(e){const t=this.entryManager.getEntry(e);if(t&&n(t.gameView))return t.gameView.audioHelper}return null}get isShowStatus(){return!0}getLanguage(e,t=[],n=null){n||(n=M.BUNDLE_RESOURCES);let r=[];return r.push(`${M.USING_LAN_KEY}${n}.${e}`),r.push(...t),this.language.get(r)}init(){this.entryManager.delegate=new F,l()}onLowMemory(){this.releaseManger.onLowMemory()}onLoad(e){App.layerMgr.onLoad(e),App.uiManager.onLoad(e),App.serviceManager.onLoad(),App.entryManager.onLoad(e),App.releaseManger.onLoad(e),this.updateTimer=setInterval((()=>{C.onUpdate(e,this.updateInterval)}),this.updateInterval)}onDestroy(e){clearInterval(this.updateTimer),this._gAudio=null,C.onDestroy(e)}onEnterBackground(){this._enterBackgroundTime=Date.timeNow(),Log.d("[MainController]",`onEnterBackground ${this._enterBackgroundTime}`),App.gAudio.onEnterBackground(),App.serviceManager.onEnterBackground()}onEnterForgeground(){let e=Date.timeNow(),t=e-this._enterBackgroundTime;Log.d("[MainController]",`onEnterForgeground ${e} background total time : ${t}`),App.gAudio.onEnterForgeground(t),App.serviceManager.onEnterForgeground(t)}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/GameData.ts",["cc","./Macros.ts"],(function(e){var t,a;return{setters:[function(e){t=e.cclegacy},function(e){a=e.Macro}],execute:function(){t._RF.push({},"8e673CIf65NRKDZgD9dNfXR","GameData",void 0);class u{constructor(){this.module=""}get debugConfig(){return[]}init(...e){}destory(...e){}clear(...e){}debug(){Log.d(`${this.module}`)}onDestroy(e){this.clear()}getLanguage(e,t=[]){return App.getLanguage(e,t,this.module)}}e("GameData",u),u.module=a.UNKNOWN,t._RF.pop()}}}));

System.register("chunks:///_virtual/GameService.ts",["cc","./Config.ts","./CommonService.ts"],(function(e){var t,c,r;return{setters:[function(e){t=e.cclegacy},function(e){c=e.NetPriority},function(e){r=e.CommonService}],execute:function(){t._RF.push({},"ab9810xkgVJwY43X2UvWkHr","GameService",void 0);class i extends r{constructor(...e){super(...e),this.priority=c.Game}}e("GameService",i),i.module="游戏",t._RF.pop()}}}));

System.register("chunks:///_virtual/GameView.ts",["cc","./UIView.ts"],(function(e){var n,t,s;return{setters:[function(e){n=e.cclegacy,t=e._decorator},function(e){s=e.default}],execute:function(){var o;n._RF.push({},"95d22Fw9QxKrKsNdNsPdF2g","GameView",void 0);const{ccclass:r,property:a,menu:i}=t;e("default",r("GameView")(o=i("Quick公共组件/GameView")(o=class extends s{onLoad(){super.onLoad(),this.onEnterGameView()}onShow(){App.entryManager.onShowGameView(this.bundle,this),super.onShow()}onEnterGameView(){App.entryManager.onEnterGameView(this.bundle,this)}enterBundle(e,n){App.entryManager.enterBundle(e,n)}backBundle(e){App.entryManager.backBundle(e)}onDestroy(){this.audioHelper&&this.audioHelper.stopAllEffects(),App.entryManager.onDestroyGameView(this.bundle,this),super.onDestroy()}onClose(){this.audioHelper&&this.audioHelper.stopAllEffects(),App.entryManager.onCloseGameView(this.bundle,this),super.onClose()}})||o)||o);n._RF.pop()}}}));

System.register("chunks:///_virtual/GetCmdKey.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){e("GetCmdKey",(function(...e){let t="";for(let n=0;n<e.length;n++)"number"!=typeof e[n]?t+=e[n]:t+=String(e[n]);return t})),t._RF.push({},"2095e9idlBLFYBU7OqoumWh","GetCmdKey",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/HallUpdate.ts",["cc","./Macros.ts"],(function(e){var a,o;return{setters:[function(e){a=e.cclegacy},function(e){o=e.Macro}],execute:function(){a._RF.push({},"56e0b/7E7ZLcZqTSB8fcghI","HallUpdate",void 0);class p{constructor(){this.module=null,this.isResident=!0}onNewVersionFund(e){e.doUpdate()}onUpdateFailed(e){let a=App.getLanguage("downloadFailed");App.alert.show({text:a+JSON.stringify(e),confirmCb:a=>{App.updateManager.dowonLoad(e)}}),App.updateLoading.hide()}onPreVersionFailed(e){let a=App.getLanguage("downloadFailed");App.alert.show({text:a,confirmCb:a=>{App.updateManager.dowonLoad(e)}}),App.updateLoading.hide()}onShowUpdating(e){App.updateLoading.show(App.getLanguage("loading"))}onOther(e){}onDownloading(e,a){App.updateLoading.updateProgress(a.progress)}onAreadyUpToData(e){App.bundleManager.loadBundle(e)}onStarCheckUpdate(e){App.updateLoading.show(App.getLanguage("loading"))}onStartLoadBundle(e){}onLoadBundleError(e,a){App.updateLoading.hide(),App.tips.show(App.getLanguage("loadFailed",[e.name]))}onLoadBundleComplete(e){App.updateLoading.hide(),App.entryManager.onLoadBundleComplete(e)}onLoadBundle(e){App.bundleManager.loadBundle(e)}onDownloadComplete(e){App.releaseManger.tryRemoveBundle(e.bundle),this.onLoadBundle(e)}onNeedRestartApp(e,a){let p=App.stageData.where;if(Log.d(`重启游戏,当前位置 :${p},之前位置 : ${App.stageData.prevWhere}`),p==o.BUNDLE_RESOURCES)a(!0);else{let o=App.getLanguage("restartApp",[e.name]);App.alert.show({text:o,confirmCb:e=>{a(!1)}})}}}e("HallUpdate",p),p.module="【大厅热更新】",a._RF.pop()}}}));

System.register("chunks:///_virtual/Handler.ts",["cc","./EventProcessor.ts","./Macros.ts"],(function(e){var s,t,n;return{setters:[function(e){s=e.cclegacy},function(e){t=e.EventProcessor},function(e){n=e.Macro}],execute:function(){s._RF.push({},"5e9ffPDWfxKL7ScegSeKBG6","Handler",void 0);class o extends t{constructor(...e){super(...e),this._module=n.UNKNOWN}get module(){return this._module}set module(e){this._module=e}onS(e,s,t,n=!0){let o=this.service;o&&o.onS&&o.onS(e,s,t,n,this)}offS(e){let s=this.service;s&&s.offS&&s.offS(this,e)}async send(e){let s=this.service;return!(!s||!s.send)&&await s.send(e)}async sendAsync(e,s,t,o=n.DEFAULT_RPC_TIEMEOUT){let r=this.service;return r&&r.sendAsync?await r.sendAsync(e,s,t,o):null}onDestroy(){this.offS(),super.onDestroy()}debug(){Log.d(this.module)}destory(){this.onDestroy()}init(){this.onLoad()}}e("Handler",o),o.module=n.UNKNOWN,s._RF.pop()}}}));

System.register("chunks:///_virtual/HandlerManager.ts",["cc","./SingletonT.ts"],(function(e){var n,t;return{setters:[function(e){n=e.cclegacy},function(e){t=e.SingletonT}],execute:function(){n._RF.push({},"11e9a84A9hCHpeO57mkvw5P","HandlerManager",void 0);class r extends t{constructor(...e){super(...e),this.module=null}onDestroy(e){this.clear()}}e("HandlerManager",r),r.module="【Handler管理器】",n._RF.pop()}}}));

System.register("chunks:///_virtual/HeartbetBinary.ts",["cc","./BinaryStreamMessage.ts","./CmdDefines.ts"],(function(t){var e,n,r,a;return{setters:[function(t){e=t.cclegacy},function(t){n=t.BinaryStreamHeartbeat},function(t){r=t.MainCmd,a=t.SUB_CMD_SYS}],execute:function(){e._RF.push({},"fad937gxhNAP5F5raDpetvK","HeartbetBinary",void 0);t("HeartbeatBinary",class extends n{constructor(...t){super(...t),this.mainCmd=r.CMD_SYS,this.subCmd=a.CMD_SYS_HEART}get cmd(){return String(this.mainCmd)+String(this.subCmd)}}),e._RF.pop()}}}));

System.register("chunks:///_virtual/HeartbetJson.ts",["cc","./JsonMessage.ts","./CmdDefines.ts"],(function(t){var s,e,n,i;return{setters:[function(t){s=t.cclegacy},function(t){e=t.JsonMessageHeartbeat},function(t){n=t.MainCmd,i=t.SUB_CMD_SYS}],execute:function(){s._RF.push({},"bf8fbqBBmlMgpCa176v8+Pq","HeartbetJson",void 0);t("HeartbeatJson",class extends e{constructor(...t){super(...t),this.buffer=null,this.mainCmd=n.CMD_SYS,this.subCmd=i.CMD_SYS_HEART}get cmd(){return String(this.mainCmd)+String(this.subCmd)}}),s._RF.pop()}}}));

System.register("chunks:///_virtual/HeartbetProto.ts",["cc","./ProtoMessage.ts","./CmdDefines.ts"],(function(t){var e,r,s,n;return{setters:[function(t){e=t.cclegacy},function(t){r=t.ProtoMessageHeartbeat},function(t){s=t.MainCmd,n=t.SUB_CMD_SYS}],execute:function(){e._RF.push({},"0e25fKD2o1MUJ8sXE3BJGwU","HeartbetProto",void 0);t("HeartbeatProto",class extends r{constructor(...t){super(...t),this.buffer=null,this.mainCmd=s.CMD_SYS,this.subCmd=n.CMD_SYS_HEART}encode(){return!0}decode(t){return!0}get cmd(){return String(this.mainCmd)+String(this.subCmd)}}),e._RF.pop()}}}));

System.register("chunks:///_virtual/HttpClient.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"88b85LK3HND3agPP4yXVee/","HttpClient",void 0);class s{constructor(){this.ok=!1,this.status=0,this.statusText="",this.url="",this.responseText=void 0,this.response=void 0}json(){return Promise.resolve(JSON.parse(this.responseText))}text(){return Promise.resolve(this.responseText)}arrayBuffer(){return Promise.resolve(this.response)}blob(){return Promise.resolve(this.response)}formData(){return Promise.resolve(this.response)}}e("FetchResponse",s);class r{constructor(){this.module=null,this._cache=new Map}onDestroy(e){this.clear()}clear(){const e=Date.now();this._cache.forEach(((t,s)=>{e-t.timestamp>t.cacheTime&&this._cache.delete(s)}))}convertParams(e,t){if(!t||0===Object.keys(t).length)return e;const s=t,r=Object.keys(s).filter((e=>null!==s[e]&&void 0!==s[e])).map((e=>{const t=s[e];return t instanceof Object?`${encodeURIComponent(e)}=${encodeURIComponent(JSON.stringify(t))}`:`${encodeURIComponent(e)}=${encodeURIComponent(String(t))}`})).join("&"),o=e.includes("?")?"&":"?";return`${e}${o}${r}`}getCacheKey(e,t){return`${e}:${t.params?JSON.stringify(t.params):""}:${t.method||"GET"}`}fetch(e,t={}){return new Promise(((s,r)=>{if(!e)return void r(new Error("URL is empty"));const o={method:"GET",timeout:1e4,async:!0,responseType:"text",cache:!1,cacheTime:3e5,retries:3,retryDelay:2e3,...t};if(o.cache){this.clear();const t=this.getCacheKey(e,o),r=this._cache.get(t);if(r)return s(r.data)}let n=0,a=!1,c=()=>{a=!0};const i=()=>{this.execute(e,o,c).then(s).catch((e=>{a?r(new Error("Request aborted")):n<o.retries?(n++,setTimeout((()=>{i()}),o.retryDelay)):r(e)}))};i()}))}execute(e,t={},r=(()=>{})){return new Promise(((o,n)=>{const a=e,c=t.method;if(e=this.convertParams(e,t.params),t.timestamp){const t=e.includes("?")?"&":"?";e=`${e}${t}cur_loc_t=${Date.now()}`}let i=new XMLHttpRequest;i.responseType=t.responseType,t.signal&&t.signal.addEventListener("abort",(()=>{r(),i.abort(),n(new Error("Request aborted"))}));const u=this;if(i.onreadystatechange=function(){if(4===i.readyState)if(i.status>=200&&i.status<300){let e=new s;if(e.ok=!0,e.status=i.status,e.statusText=i.statusText,e.url=i.responseURL,e.responseText=i.responseText,e.response=i.response,t.cache){const s=u.getCacheKey(a,t),r=Date.now(),o={cacheTime:t.cacheTime,timestamp:r,data:e};u._cache.set(s,o)}o(e)}else n(new Error(`HTTP error status: ${i.status}`))},i.onerror=()=>{n(new Error("Network error"))},i.ontimeout=()=>{n(new Error("Request timed out"))},i.timeout=t.timeout,i.open(c,e,t.async),t.headers)if(Array.isArray(t.headers))t.headers.forEach((e=>{i.setRequestHeader(e[0],e[1])}));else{const e=t.headers;Object.keys(e).forEach((t=>{i.setRequestHeader(t,e[t])}))}"POST"===c&&t.body?i.send(t.body):i.send()}))}}e("HttpClient",r),r.module="【Http管理器】",t._RF.pop()}}}));

System.register("chunks:///_virtual/IAlert.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"eccd59CnalMGb7larQpF/KG","IAlert",void 0);class i{constructor(){this.module=null,this.isResident=!0,this.curPanel=null,this.queue=[]}getConfig(t){let e={};return t.tag&&(e.tag=t.tag),t.text&&(e.text=t.text),t.title&&(e.title=t.title),t.confirmString&&(e.confirmString=t.confirmString),t.cancelString&&(e.cancelString=t.cancelString),t.richText&&(e.richText=t.richText),t.immediatelyCallback&&(e.immediatelyCallback=t.immediatelyCallback),t.isRepeat&&(e.isRepeat=t.isRepeat),e}show(t){return t.tag&&!1===t.isRepeat&&this.isRepeat(t.tag)?(Log.w(`弹出框已经存在 config : ${JSON.stringify(this.getConfig(t))}`),!1):(this.queue.push(t),this._show(t),!0)}isCurrentShow(t){return!1}currentShow(t){return null}isRepeat(t){return!1}close(t){}closeAll(){this.queue=[],this.finishAlert()}finishAlert(){this.curPanel&&(this.curPanel.destroy(),this.curPanel=null);let t=this.queue.shift();return 0!=this.queue.length?(this._show(this.queue[0]),this.queue[0]):t}_show(t){}onDestroy(t){this.clear()}clear(...t){this.queue=[],this.finishAlert()}}t("IAlert",i),i.module="【IAlert】",e._RF.pop()}}}));

System.register("chunks:///_virtual/ILoading.ts",["cc"],(function(t){var e,i,n,s,h;return{setters:[function(t){e=t.cclegacy,i=t.instantiate,n=t.Vec3,s=t.tween,h=t.Tween}],execute:function(){e._RF.push({},"c3af0c+BnZIALgCjN5PDrOf","ILoading",void 0);class o{constructor(){this.module=null,this.isResident=!0,this.node=null,this._timeOutCb=void 0,this._content=[],this._showContentIndex=0,this._timerId=-1,this.text=null}get zOrder(){return 99}get interval(){return 3}get timeout(){return 30}findText(){return null}get prefab(){return App.uiManager.getScenePrefab("Loading")}set timeOutCb(t){this._timeOutCb=t}get timeOutCb(){return this._timeOutCb}show(t,e,i){return this._timeOutCb=e,i||(i=this.timeout),Array.isArray(t)?this._content=t:(this._content=[],this._content.push(t)),this._show(i),this}_show(t){this.prefab&&(this.node||(this.node=i(this.prefab)),this.node.removeFromParent(),App.uiManager.addView(this.node,this.zOrder),this.node.position=n.ZERO,this.text=this.findText(),this._showContentIndex=0,this.startShowContent(),this.startTimeOutTimer(t),this.node.active=!0)}startShowContent(){1==this._content.length?this.text.string=this._content[0]:(this.stopShowContent(),s(this.text.node).call((()=>{this.text.string=this._content[this._showContentIndex]})).delay(this.interval).call((()=>{this._showContentIndex++,this._showContentIndex>=this._content.length&&(this._showContentIndex=0),this.startShowContent()})).start())}stopShowContent(){this.text&&h.stopAllByTarget(this.text.node)}startTimeOutTimer(t){t>0&&(this._timerId=setTimeout((()=>{this._timeOutCb&&this._timeOutCb(),this.hide()}),1e3*t))}stopTimeOutTimer(){this._timeOutCb=void 0,clearTimeout(this._timerId),this._timerId=-1}hide(){this.stopShowContent(),this.stopTimeOutTimer(),this.node&&(this.node.active=!1)}updateProgress(t){}onDestroy(t){this.clear()}clear(...t){this._content=[],this._showContentIndex=0,this.hide(),this.text=null}}t("ILoading",o),o.module="【ILoading】",e._RF.pop()}}}));

System.register("chunks:///_virtual/ITips.ts",["cc"],(function(s){var t;return{setters:[function(s){t=s.cclegacy}],execute:function(){t._RF.push({},"08418+Fj4xP67yzX6QXMw8F","ITips",void 0);class e{constructor(){this.module=null,this.isResident=!0}show(s){}finishShowItem(s){}clear(){}onDestroy(s){this.clear()}}s("ITips",e),e.module="【ITips】",t._RF.pop()}}}));

System.register("chunks:///_virtual/IUILoading.ts",["cc"],(function(t){var e,i,n,s,o,h,r,a;return{setters:[function(t){e=t.cclegacy,i=t.UIOpacity,n=t.find,s=t.Label,o=t.instantiate,h=t.Vec3,r=t.Tween,a=t.tween}],execute:function(){e._RF.push({},"c395ddS0+ZKfKuCR9xH0TZ1","IUILoading",void 0);class u{constructor(){this.module=null,this.isResident=!0,this.node=null,this.delay=0,this.content=null,this.text=null,this._uiName=null,this._contentOpacity=null,this._timerId=-1}get prefab(){return App.uiManager.getScenePrefab("UILoading")}get contentOpacity(){return this._contentOpacity?this._contentOpacity:this.content.getComponent(i)}get delayTime(){return.1}get timeout(){return 20}get zOrder(){return 99}findContent(){return n("content",this.node)}findText(){var t;return null==(t=n("text",this.content))?void 0:t.getComponent(s)}show(t,e){this.delay=null==t||null==t||t<0?this.delayTime:t,this._uiName=e||"",this._show()}_show(){this.node||(this.node=o(this.prefab)),this.node.removeFromParent(),App.uiManager.addView(this.node,this.zOrder),this.node.position=h.ZERO,this.content=this.findContent(),r.stopAllByTarget(this.contentOpacity),this.text=this.findText(),this.text.string="0%",this.contentOpacity.opacity=0,this.delay>0&&a(this.contentOpacity).delay(this.delay).set({opacity:255}).start(),this.startTimeOutTimer(this.timeout),this.node.active=!0}startTimeOutTimer(t){this.stopTimeOutTimer(),t&&(this._timerId=setTimeout((()=>{App.tips.show(`加载界面${this._uiName?this._uiName:""}超时，请重试`),this.hide()}),1e3*t))}stopTimeOutTimer(){clearTimeout(this._timerId),this._timerId=-1}hide(){this.stopTimeOutTimer(),this.node&&(r.stopAllByTarget(this.content),this.node.active=!1)}updateProgress(t){if(this.text){if(null==t||null==t||Number.isNaN(t))return void this.hide();t>=0&&t<=100&&(this.text.string=`${t}%`)}}clear(...t){this.node=null,this.content=null,this.text=null,this._contentOpacity=null,this._uiName=null}onDestroy(t){this.clear()}}t("IUILoading",u),u.module="【IUILoading】",e._RF.pop()}}}));

System.register("chunks:///_virtual/IWSMsgHandler.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"de8a7+b/KVI3YCiLmNQG4ym","IWSMsgHandler",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/JsonMessage.ts",["cc","./ByteArray.ts","./Net.ts","./Message.ts"],(function(e){var i,r,a,t;return{setters:[function(e){i=e.cclegacy},function(e){r=e.ByteArray},function(e){a=e.Net},function(e){t=e.Message}],execute:function(){e("serialize",(function(e,i,r,a){return function(t,s){if(void 0===Reflect.getOwnPropertyDescriptor(t,"__serialize__")){let e={};if(Reflect.getPrototypeOf(t).__serialize__&&void 0===Reflect.getOwnPropertyDescriptor(t,"__serialize__")){let i=Reflect.getPrototypeOf(t).__serialize__,r=Object.keys(i);for(let a=r.length,t=0;t<a;t++)e[r[t]]=i[r[t]].slice(0)}Reflect.defineProperty(t,"__serialize__",{value:e})}if(t.__serialize__[e])throw`SerializeKey has already been declared:${e}`;t.__serialize__[e]=[s,i,r,a]}})),i._RF.push({},"f031c/UZ19K6aoeSleqgoO4","JsonMessage",void 0);class s extends t{constructor(...e){super(...e),this.data=null,this.byteArray=null,this.buffer=null}encode(){this.data=this.serialize();let e=JSON.stringify(this.data);return this.byteArray=new r,this.byteArray.writeUTFBytes(e),this.buffer=this.byteArray.bytes,!0}serialize(){let e={},i=Reflect.getPrototypeOf(this).__serialize__;if(!i)return e;let r=Object.keys(i);for(let a=r.length,t=0;t<a;t++){let a=r[t],[s]=i[a],l=this.serializeMember(this[s]);null===l&&Log.w("Invalid serialize member : "+s),e[a]=l}return e}serializeMember(e){return"number"==typeof e?this.serializeNumber(e):"boolean"==typeof e?this.serializeBool(e):"string"==typeof e?this.serializeString(e):e instanceof Array?this.serializeArray(e):e instanceof Map?this.serializeMap(e):e instanceof s?e.serialize():(Log.w("Invalid serialize value : "+e),null)}serializeNumber(e){return null==e&&(e=0),"string"==typeof e&&(e=Number(e)),Number.isNaN(e)&&(e=0),e}serializeBool(e){return null==e&&(e=!1),"string"==typeof e&&(e="true"==e),Number.isNaN(e)&&(e=!1),e}serializeString(e){return null==e?"":e.toString()}serializeArray(e){let i=[];return e.forEach((e=>{i.push(this.serializeMember(e))})),i}serializeMap(e){let i=[],r=this;return e.forEach(((e,a)=>{let t={k:r.serializeMember(a),v:r.serializeMember(e)};null===t.k&&(Log.w("Invalid map key!"),t.k=""),null===t.v&&(Log.w("Invalid map value"),t.v=""),i.push(t)})),i}decode(e){if(e){this.buffer=e,this.byteArray=new r(e);let i=this.byteArray.readUTFBytes(this.byteArray.length);if(i.length>0)try{this.data=JSON.parse(i)}catch(e){return!1}return this.deserialize(this.data)}return!1}deserialize(e){let i=Reflect.getPrototypeOf(this).__serialize__;if(!i)return!0;let r=Object.keys(i);for(let a=r.length,t=0;t<a;t++){let a=r[t],[s,l,n,u]=i[a];if(!this.deserializeMember(s,l,n,u,e[a]))return Log.w("Invalid deserialize member :"+s),!1}return!0}deserializeMember(e,i,r,a,t){try{let l=this[e];if("number"==typeof l)this[e]=this.deserializeNumber(e,t);else if("boolean"==typeof l)this[e]=this.deserializeBool(e,t);else if("string"==typeof l)this[e]=this.deserializeString(e,t);else if(l instanceof Array)this.deserializeArray(e,r,t);else if(l instanceof Map)this.deserializeMap(e,r,a,t);else if(l instanceof s)l.deserialize(t);else{if(null!==l)return Log.w("Invalid deserialize member : "+e+" value:"+l),!1;switch(i){case Number:this[e]=this.deserializeNumber(e,t);break;case String:this[e]=this.deserializeString(e,t);break;case Array:this[e]=[];break;case Map:this[e]=new Map;break;default:if(this[e]=new i,!(this[e]instanceof s))return Log.w("Invalid deserialize member :"+e+" value:"+l),!1;this[e].deserialize(t)}}return!0}catch(i){return Log.w(i.message),this[e]=i.data||null,!1}}deserializeNumber(e,i){if(null==i||Number.isNaN(i))throw{message:`Invalid deserializeNumber member : ${e} value : ${i}`,data:0};return Number(i)}deserializeBool(e,i){if(null==i||Number.isNaN(i))throw{message:`Invalid deserializeNumber member : ${e} value : ${i}`,data:0};return Boolean(i)}deserializeString(e,i){if(null==i)throw{message:`Invalid deserializeString member : ${e} value : ${i}`,data:""};return i}deserializeArray(e,i,r){if(!(r instanceof Array))throw{message:`Invalid deserializeArray member : ${e} value : ${r}`,data:[]};this[e]=[],r.forEach(((r,a)=>{if(i===Number)this[e].push(this.deserializeNumber(e+"["+a+"]",r));else if(i===String)this[e].push(this.deserializeString(e+"["+a+"]",r));else{if(i===Array)throw{message:`Invalid deserializeArray member : ${e} array value type is Array`};if(i instanceof Map)throw{message:`Invalid deserializeArray member : ${e} array value type is Map`};if(this[e]instanceof s)this[e].deserialize(r);else{let a=new i;if(!(a instanceof s))throw{message:`Invalid deserializeArray member : ${e} array value type is `+i};a.deserialize(r),this[e].push(a)}}}))}deserializeMap(e,i,r,a){if(!(a instanceof Array))throw{message:`Invalid deserializeMap member : ${e} value : ${a}`,data:new Map};this[e].clear(),a.forEach(((a,t)=>{if(null===a||void 0===a.k||null===a.k||void 0===a.v||null===a.v)throw{message:`Invalid deserializeMap member : ${e} invalid element : ${a}`};let l,n;if(i===Number)l=this.deserializeNumber(e+"["+t+"]:key",a.k);else{if(i!==String)throw{message:`Invalid deserializeMap member : ${e} invalid key type : ${i}`};l=this.deserializeString(e+"["+t+"]:key",a.k)}if(r===Number)n=this.deserializeNumber(e+"["+t+"]:value",a.v);else if(r===String)n=this.deserializeString(e+"["+t+"]:value",a.v);else{if(r===Array)throw{message:`Invalid deserializeMap member : ${e} invalid value type : Array`};if(r instanceof Map)throw{message:`Invalid deserializeMap member : ${e} invalid value type : Map`};if(n=new r,!(n instanceof s))throw{message:`Invalid deserializeMap member : ${e} invalid value type : ${r}`};n.deserialize(a.v)}this[e].set(l,n)}))}}e("JsonMessage",s);class l extends s{}e("JsonMessageHeartbeat",l),l.type=a.ServiceType.Json,i._RF.pop()}}}));

System.register("chunks:///_virtual/Lang.ts",["cc","./LangEN.ts","./LangZH.ts","./LanguageDelegate.ts","./Macros.ts"],(function(n){var t,a,e,s,u;return{setters:[function(n){t=n.cclegacy},function(n){a=n.LangEN},function(n){e=n.LangZH},function(n){s=n.LanguageDelegate},function(n){u=n.Macro}],execute:function(){t._RF.push({},"842da4X/65Oi51KRx/zC3q6","Lang",void 0);n("Lang",class extends s{constructor(...n){super(...n),this.bundle=u.BUNDLE_RESOURCES}init(){App.stageData.entrys.forEach((n=>{a.data.bundles[n.bundle]=n.name.EN,e.data.bundles[n.bundle]=n.name.CN})),this.add(a),this.add(e)}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/LangEN.ts",["cc"],(function(e){var c,a;return{setters:[function(e){c=e.cclegacy,a=e.sys}],execute:function(){c._RF.push({},"ac934mUVH5BtLUeWmSarYTa","LangEN",void 0);const t={language:a.Language.ENGLISH,data:{bundles:{},capture_save_failed:"Failed to save picture",capture_success:"Successful screenshot",capture_failed:"Screenshot failed",capture_save_photo_album:"Successfully saved to device album",capture_save_local_success1:"Successfully saved in the device directory {0} and loaded successfully",capture_save_local_success2:"Successfully saved in the device directory {0}",warningReconnect:"{0} network has been disconnected. Do you want to reconnect?",tryReconnect:"{0}Trying to connect for the {1} time...",updateFaild:"Update {0} Faild",checkingUpdate:"Checking update...",alreadyRemoteVersion:"{0}已升级到最新",loadFailed:"{0}加载失败!!",restartApp:"{0}更新完成，需要重启游戏",downloadFailed:"下载文件失败，请重试!!!",loading:"正在加载...",alert_title:"Tips",alert_confirm:"Confirm",alert_cancel:"Cancel",quitGame:"您确定要退出游戏？",loading_game_resources:"正在加载游戏资源...",loadingProgress:"加载资源中({0}%)...",pic_background:"common/images/com_bg_start2",richtext:"<color=#00ff00>Rich</c><color=#0fffff>Text</color>",pic_atlas:["common/images/lobby_texture"],pic_key:"update_status_new",pic_remote:"https://www.baidu.com/img/flexible/logo/pc/index_gray.png"}};e("LangEN",t);c._RF.pop()}}}));

System.register("chunks:///_virtual/Language.ts",["cc","./Macros.ts"],(function(e){var t,a,s,g;return{setters:[function(e){t=e.cclegacy,a=e.sys,s=e.isValid},function(e){g=e.Macro}],execute:function(){t._RF.push({},"45ff7N6LYVJ7YlkpCoRmCEX","Language",void 0);const n="using_language";class i{constructor(){this.isResident=!0,this.module=null,this._components=[],this._data={language:g.UNKNOWN},this.delegates=new Map,this.defaultLanguage=a.Language.CHINESE}addDelegate(e){e&&(this.delegates.set(e.bundle,e),this.updateData(this.getLanguage()))}updateData(e){this._data.language=e,this.delegates.forEach(((t,a,s)=>{this._data=t.merge(e,this._data)}))}removeDelegate(e){if(!e)return;this.delegates.delete(e.bundle)&&e.bundle!=g.BUNDLE_RESOURCES&&delete this._data[e.bundle]}change(e){this.delegates.size<=0||this._data&&this._data.language==e||(this._data.language=e,g.ENABLE_CHANGE_LANGUAGE?(this.delegates.forEach(((t,a,s)=>{this._data=t.merge(e,this._data)})),this.onChangeLanguage()):this.delegates.forEach(((e,t,a)=>{this._data=e.merge(this.getLanguage(),this._data)})),Log.d(this.module,`当前语言:${this._data.language}`),App.storage.setItem(n,this._data.language))}get(e){if(!e||0===e.length)return Log.e("Language get: 参数不能为空"),"";const t=e[0];if("string"!=typeof t)return Log.e("Language get: key 必须是字符串"),"";if(t.includes(g.USING_LAN_KEY)){const s=t.split(".").slice(1);if(0===s.length)return Log.e(`Language get: 无效的语言 key: ${t}`),"";let g=this._data;for(const e of s){var a;if(g=null==(a=g)?void 0:a[e],void 0===g)return Log.e(`Language get: 语言包不存在 : ${e}`),""}return"string"==typeof g?String.format(g,...e.slice(1)):g}const s=e[0];return"string"==typeof s?String.format(s,...e.slice(1)):String(s)}getLanguage(){return App.storage.getItem(n,this.defaultLanguage)}add(e){-1==this._components.indexOf(e)&&this._components.push(e)}remove(e){let t=this._components.indexOf(e);t>=0&&this._components.splice(t,1)}onChangeLanguage(){this._components.forEach((e=>{s(e)&&e.forceDoLayout()}))}}e("Language",i),i.module="【语言包】",t._RF.pop()}}}));

System.register("chunks:///_virtual/LanguageDelegate.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){t("injectLanguageData",(function(t){})),e._RF.push({},"de77dZMRVZDYY4iKST+8vLn","LanguageDelegate",void 0);t("LanguageDelegate",class{constructor(){this.datas=new Map,this.init()}add(t){this.datas.set(t.language,t)}get(t){return this.datas.get(t)}merge(t,e){let a=this.datas.get(t);return a&&(e[this.bundle]=a.data),e}mergeData(t,e){let a=t;if(e&&t){let a=e.data,n=t.data;Object.keys(a).forEach((t=>{n[t]||(n[t]=a[t])}))}return a}}),e._RF.pop()}}}));

System.register("chunks:///_virtual/LangZH.ts",["cc"],(function(e){var a,c;return{setters:[function(e){a=e.cclegacy,c=e.sys}],execute:function(){a._RF.push({},"848e2yB12JGjZQ1djMaR5rT","LangZH",void 0);const t={language:c.Language.CHINESE,data:{bundles:{},capture_save_failed:"保存图片失败",capture_success:"截图成功",capture_failed:"截图失败",capture_save_photo_album:"成功保存到设备相册",capture_save_local_success1:"成功保存在设备目录并加载成功: {0}",capture_save_local_success2:"成功保存在设备目录: {0}",warningReconnect:"{0}网络已断开，是否重新连接？",tryReconnect:"{0}网络:正在尝试第{1}次连接...",updateFaild:"更新{0}失败",checkingUpdate:"检测更新中...",alreadyRemoteVersion:"{0}已升级到最新",loadFailed:"{0}加载失败!!",restartApp:"{0}更新完成，需要重启游戏",downloadFailed:"下载文件失败，请重试!!!",loading:"正在加载...",alert_title:"温馨提示",alert_confirm:"确 定",alert_cancel:"取 消",quitGame:"您确定要退出游戏？",loading_game_resources:"正在加载游戏资源...",loadingProgress:"加载资源中({0}%)...",pic_background:"common/images/background",richtext:"<color=#00ff00>富</c><color=#0fffff>文本</color>",pic_atlas:["common/images/lobby_texture"],pic_key:"update_status_hot",pic_remote:"https://fanyi-cdn.cdn.bcebos.com/static/translation/img/header/logo_e835568.png"}};e("LangZH",t);a._RF.pop()}}}));

System.register("chunks:///_virtual/Launch.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventComponent.ts","./Macros.ts","./DebugView.ts","./Config.ts"],(function(n){var e,t,o,r,s,i,u,c,a;return{setters:[function(n){e=n.applyDecoratedDescriptor,t=n.initializerDefineProperty},function(n){o=n.cclegacy,r=n.Asset,s=n._decorator,i=n.Game,u=n.find,c=n.isValid},function(n){a=n.default},null,null,null],execute:function(){var p,l,d,h,g,E;o._RF.push({},"ddbcdzv9zZFh7FVBShnQQhk","Launch",void 0);const{ccclass:y,property:L,menu:f}=s;n("Launch",(p=y("Launch"),l=f("Quick公共组件/Launch"),d=L(r),p(h=l((E=e((g=class extends a{constructor(...n){super(...n),t(this,"wssCacert",E,this)}async onLoad(){super.onLoad(),await App.onLoad(this.node),this.wssCacert&&(App.wssCacertUrl=this.wssCacert.nativeUrl),this.initDebug(),this.onG(i.EVENT_HIDE,this.onEnterBackground),this.onG(i.EVENT_SHOW,this.onEnterForgeground),this.onG(i.EVENT_LOW_MEMORY,this.onLowMemory)}onDestroy(){App.onDestroy(this.node),super.onDestroy()}onEnterBackground(){App.onEnterBackground()}onEnterForgeground(){App.onEnterForgeground()}onLowMemory(){App.onLowMemory()}initDebug(){let n=u("debug",this.node);n&&c(n)&&n.destroy()}}).prototype,"wssCacert",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=g))||h)||h));o._RF.pop()}}}));

System.register("chunks:///_virtual/LayerManager.ts",["cc"],(function(t){var o,e,s,r,i;return{setters:[function(t){o=t.isValid,e=t.find,s=t.instantiate,r=t.js,i=t.cclegacy}],execute:function(){i._RF.push({},"f1e37POlGRL3auKo6+e2v9V","LayerManager",void 0);class n{constructor(){this.isResident=!0,this.module=null,this._cfgs=[],this._layers=new Map,this.node=null,this._root=null}get root(){return o(this._root)||(this._root=e("viewRoot",this.node)),this._root}add(t,o){let e=this._layers.get(o);e?e.addChild(t):Log.e(`${this.module}未定义的层级`)}onLoad(t){this.node=t;let o=s(this.root);this._cfgs.forEach((t=>{let e=s(o);this.root.addChild(e),e.name=`Layer_${t.name}`,e.userData=t.name,this._layers.set(t.sort,e)}))}onDestroy(t){this.clear()}addComponent(t){if(this.root){let o=this.root.getComponent(t);return o||this.root.addComponent(t)}return null}removeComponent(t){if(this.root){let o=this.root.getComponent(t);o&&o.destroy()}}init(t){Object.keys(t).forEach((o=>{let e={name:o,sort:t[o]};this._cfgs.push(e)})),this._cfgs.sort(((t,o)=>t.sort-o.sort))}destory(...t){}clear(...t){this._layers.clear(),this._root=null,this.node=null}debug(t){if(t||((t={}).showChildren=!0,t.showComp=!0),this.root&&(t.showChildren&&(Log.d(`${this.module} 层级信息,注：该层级上无任何节点的不输出信息。`),this._layers.forEach((t=>{t.children.length>0&&(Log.d(`${t.userData} 层包含节点如下:`),t.children.forEach((t=>{Log.d(`${t.name} active : ${t.active}`)})))}))),t.showComp)){Log.d(`${this.module} 组件信息`);let t=this.root._components;for(let o=0;o<t.length;o++)Log.d(r.getClassName(t[o]))}}}t("default",n),n.module="【层级管理器】",i._RF.pop()}}}));

System.register("chunks:///_virtual/LayoutDefines.ts",["cc"],(function(t){var i,s,e,n;return{setters:[function(t){i=t.cclegacy,s=t.v2,e=t.size,n=t.UITransform}],execute:function(){i._RF.push({},"be45agyNEBBFIGZKYMKuTOs","LayoutDefines",void 0);let g=t("LayoutType",function(t){return t[t.TOP=1]="TOP",t[t.MID=2]="MID",t[t.BOT=4]="BOT",t[t.LEFT=8]="LEFT",t[t.CENTER=16]="CENTER",t[t.RIGHT=32]="RIGHT",t[t.HORIZONTAL=56]="HORIZONTAL",t[t.VERTICAL=7]="VERTICAL",t[t.TOP_BOT=5]="TOP_BOT",t[t.LEFT_RIGHT=6]="LEFT_RIGHT",t[t.CENTER_TOP=17]="CENTER_TOP",t[t.CENTER_BOT=20]="CENTER_BOT",t[t.MID_LETF=10]="MID_LETF",t[t.MID_RIGHT=34]="MID_RIGHT",t}({}));t("LayoutParam",class{constructor(){this._alignFlags=0,this.result={position:s(0,0),originSize:e(0,0)},this.target=null,this._node=null,this.top=0,this.bottom=0,this.left=0,this.right=0,this.horizontalCenter=0,this.verticalCenter=0,this.isAbsoluteHorizontalCenter=!0,this.isAbsoluteVerticalCenter=!0,this.isAbsoluteTop=!0,this.isAbsoluteBottom=!0,this.isAbsoluteLeft=!0,this.isAbsoluteRight=!0}get alignFlags(){return this._alignFlags}set alignFlags(t){this._alignFlags=t}_setAlign(t,i){if(i===(this._alignFlags&t)>0)return;let s=(t&g.LEFT_RIGHT)>0;const e=this.node.getComponent(n);i?(this._alignFlags|=t,s?(this.isAlignHorizontalCenter=!1,this.isStretchWidth&&(this.result.originSize.width=e.width)):(this.isAlignVerticalCenter=!1,this.isStretchHeight&&(this.result.originSize.height=e.height))):(s?this.isStretchWidth&&(e.width=this.result.originSize.width):this.isStretchHeight&&(e.height=this.result.originSize.height),this._alignFlags&=~t)}get node(){return this._node}set node(t){const i=t.getComponent(n);this.result.originSize.width=i.width,this.result.originSize.height=i.height,this._node=t}get isAlignTop(){return(this._alignFlags&g.TOP)>0}set isAlignTop(t){this._setAlign(g.TOP,t)}get isAlignVerticalCenter(){return(this._alignFlags&g.MID)>0}set isAlignVerticalCenter(t){t?(this.isAlignTop=!1,this.isAlignBottom=!1,this._alignFlags|=g.MID):this._alignFlags&=~g.MID}get isAlignBottom(){return(this._alignFlags&g.BOT)>0}set isAlignBottom(t){this._setAlign(g.BOT,t)}get isAlignLeft(){return(this._alignFlags&g.LEFT)>0}set isAlignLeft(t){this._setAlign(g.LEFT,t)}get isAlignHorizontalCenter(){return(this._alignFlags&g.CENTER)>0}set isAlignHorizontalCenter(t){t?(this.isAlignLeft=!1,this.isAlignRight=!1,this._alignFlags|=g.CENTER):this._alignFlags&=~g.CENTER}get isAlignRight(){return(this._alignFlags&g.RIGHT)>0}set isAlignRight(t){this._setAlign(g.RIGHT,t)}get isStretchWidth(){return(this._alignFlags&g.LEFT_RIGHT)===g.LEFT_RIGHT}get isStretchHeight(){return(this._alignFlags&g.TOP_BOT)===g.TOP_BOT}}),i._RF.pop()}}}));

System.register("chunks:///_virtual/LayoutManager.ts",["cc","./LayoutDefines.ts"],(function(t){var e,i,o,n,s,r,l;return{setters:[function(t){e=t.cclegacy,i=t.Vec3,o=t.Vec2,n=t.Scene,s=t.UITransform,r=t.Size},function(t){l=t.LayoutType}],execute:function(){e._RF.push({},"91f23IoCuxFko7p1sUVOjL7","LayoutManager",void 0);const c=new i,a=new o,g=new o;class h{constructor(){this.module=null}get visibleRect(){return window.cc.visibleRect}align(t){let e=t.node;const i=t.target;let r,g=t,h=new o,u=new o;i?(r=i,this.computeInverseTransForTarget(e,r,h,u)):r=e.parent;const y=this.getReadonlyNodeSize(r),x=r instanceof n||!r.getComponent(s),f=x?a:r.getComponent(s).anchorPoint,p=x;e.getPosition(c);const b=e._uiProps.uiTransformComp;let m=c.x,d=c.y;const v=b.anchorPoint,R=e.getScale();if(t.alignFlags&l.HORIZONTAL){let t=0,e=0;const o=y.width;p?(t=this.visibleRect.left.x,e=this.visibleRect.right.x):(t=-f.x*o,e=t+o),t+=g.isAbsoluteLeft?g.left:g.left*o,e-=g.isAbsoluteRight?g.right:g.right*o,i&&(t+=h.x,t*=u.x,e+=h.x,e*=u.x);let n=0,s=v.x,r=R.x;if(r<0&&(s=1-s,r=-r),g.isStretchWidth)n=e-t,0!==r&&(b.width=n/r),m=t+s*n;else if(n=b.width*r,g.isAlignHorizontalCenter){let t=g.isAbsoluteHorizontalCenter?g.horizontalCenter:g.horizontalCenter*o,e=(.5-f.x)*y.width;i&&(t*=u.x,e+=h.x,e*=u.x),m=e+(s-.5)*n+t}else m=g.isAlignLeft?t+s*n:e+(s-1)*n}if(g.alignFlags&l.VERTICAL){let t=0,e=0;const o=y.height;p?(e=this.visibleRect.bottom.y,t=this.visibleRect.top.y):(e=-f.y*o,t=e+o),e+=g.isAbsoluteBottom?g.bottom:g.bottom*o,t-=g.isAbsoluteTop?g.top:g.top*o,i&&(e+=h.y,e*=u.y,t+=h.y,t*=u.y);let n=0,s=v.y,r=R.y;if(r<0&&(s=1-s,r=-r),g.isStretchHeight)n=t-e,0!==r&&(b.height=n/r),d=e+s*n;else if(n=b.height*r,g.isAlignVerticalCenter){let t=g.isAbsoluteVerticalCenter?g.verticalCenter:g.verticalCenter*o,e=(.5-f.y)*y.height;i&&(t*=u.y,e+=h.y,e*=u.y),d=e+(s-.5)*n+t}else d=g.isAlignBottom?e+s*n:t+(s-1)*n}t.result.position.x=m,t.result.position.y=d}computeInverseTransForTarget(t,e,i,o){t.parent?g.set(t.parent.getScale().x,t.parent.getScale().y):g.set(0,0);let n=g.x,s=g.y,r=0,l=0;for(let c=t.parent;;){if(!c)return i.x=i.y=0,void(o.x=o.y=1);const t=c.getPosition();if(r+=t.x,l+=t.y,c=c.parent,c===e)break;{c?g.set(c.getScale().x,c.getScale().y):g.set(0,0);const t=g.x,e=g.y;r*=t,l*=e,n*=t,s*=e}}o.x=0!==n?1/n:1,o.y=0!==s?1/s:1,i.x=-r,i.y=-l}getReadonlyNodeSize(t){const e=t.getComponent(s);return t instanceof n?this.visibleRect:e?e.contentSize:r.ZERO}}t("LayoutManager",h),h.module="【布局管理器】",e._RF.pop()}}}));

System.register("chunks:///_virtual/Loading.ts",["cc","./Config.ts","./ILoading.ts"],(function(e){var n,t,r,i,o,u;return{setters:[function(e){n=e.find,t=e.Label,r=e.cclegacy},function(e){i=e.ViewZOrder,o=e.Config},function(e){u=e.ILoading}],execute:function(){r._RF.push({},"2db47kDx9lIeLy2MbGZbrmp","Loading",void 0);class a extends u{get zOrder(){return i.Loading}findText(){var e;return null==(e=n("content/text",this.node))?void 0:e.getComponent(t)}get interval(){return o.LOADING_CONTENT_CHANGE_INTERVAL}get timeout(){return o.LOADING_TIME_OUT}get prefab(){return App.uiManager.getScenePrefab("Loading")}}e("default",a),a.module="【Loading】",r._RF.pop()}}}));

System.register("chunks:///_virtual/LobbyService.ts",["cc","./Config.ts","./CommonService.ts"],(function(e){var o,t,s;return{setters:[function(e){o=e.cclegacy},function(e){t=e.NetPriority},function(e){s=e.CommonService}],execute:function(){o._RF.push({},"e28f7LLLVVJaYjQl5+dh0Ue","LobbyService",void 0);class c extends s{constructor(e){super(e),this.priority=t.Lobby,this.flows.openFlow.push((e=>(Log.d(`${e.module} 连接成功111`),e))),this.flows.closeFlow.push((e=>(Log.d(`${e.module} 连接关闭111`),e)))}}e("LobbyService",c),c.module="大厅",o._RF.pop()}}}));

System.register("chunks:///_virtual/LocalStorage.ts",["cc","./BitEncrypt.ts"],(function(t){var e,r;return{setters:[function(t){e=t.cclegacy},function(t){r=t.BitEncrypt}],execute:function(){e._RF.push({},"ecf54s/MtVLRIrjjIqrRIjp","LocalStorage",void 0);class o{constructor(){this.module=null,this.key="VuxiAKihQ0VR9WRe"}encrypt(t){return r.encode(JSON.stringify(t),this.key)}decryption(t){return r.decode(t,this.key)}getItem(t,e=null){let r=this.storage.getItem(t);if(!r)return e;try{let t=this.decryption(r),e=JSON.parse(t);return e.type?e.value:r}catch(t){return r}}setItem(t,e){let r=typeof e;if("number"==r||"string"==r||"boolean"==r||"object"==r){let o={type:r,value:e};try{let e=this.encrypt(o);this.storage.setItem(t,e)}catch(t){}}}removeItem(t){this.storage.removeItem(t)}get storage(){return window.localStorage}}t("LocalStorage",o),o.module="【本地仓库】",e._RF.pop()}}}));

System.register("chunks:///_virtual/Logger.ts",["cc","./Enums.ts"],(function(t){var e,n,i;return{setters:[function(t){e=t.cclegacy,n=t.sys},function(t){i=t.LogLevel}],execute:function(){e._RF.push({},"1373dsNcepOQKt3JH5pmlPC","Logger",void 0);class s{constructor(){this.logger=console,this._level=i.ALL,this._indentFormat="    ",this._halfIndentFormat="   ",this._typeHandlers=void 0,this._visited=void 0,this.module=null,this.isResident=!0,this._typeHandlers=new Map([["boolean",(t,e)=>`${this.convertName(t)}${e};`],["number",(t,e)=>`${this.convertName(t)}${e}`],["string",(t,e)=>`${this.convertName(t)}"${e}"`],["object",(t,e,n,i)=>this.handleObject(t,e,n,i)]]),this._visited=new Set,this.update()}get level(){return this._level}set level(t){this._level=t,this.update()}attach(t){this.level=this.level|t,this.update()}detach(t){this.isValid(t)&&(this.level=this.level^t,this.update())}isValid(t){return!!(this.level&t)}update(){const t=(t,e,n)=>{this.logger[e]=this.isValid(t)?n:()=>{}};n.isBrowser?t(i.DUMP,"dump",console.info):t(i.DUMP,"dump",this.dump.bind(this)),t(i.ERROR,"e",console.error),t(i.DEBUG,"d",console.log),t(i.WARN,"w",console.warn)}dump(...t){if(!this.isValid(i.DUMP))return;const[e,n="unknown",s=5]=t,r=Math.min(Math.max(1,s),10);try{if(null==e)return void this.logger.d("null");this._visited.clear();const t="object"==typeof e&&null!=e&&e.toJSON?e.toJSON():e,i=(new Date).toISOString(),s=this._dump(t,n,r,0);console.info(`[${i}] ${n}=`,s)}catch(t){console.error("Dump error:",t)}}handleObject(t,e,n=5,i=0){if(null==e)return"null";if(this._visited.has(e))return"[Circular Reference]";this._visited.add(e);const s=Array.isArray(e)?this.toArray(t,e,n,i):this.toObject(t,e,n,i);return this._visited.delete(e),s}_dump(t,e="unknown",n,i){if(i>=n)return"...";const s=typeof t,r=this._typeHandlers.get(s);return r?"object"===s?r(e,t,n,i):r(e,t):this.toUnknown(e)}convertName(t,e="="){return t.length>0?`${t} ${e} `:" "}toUnknown(t){return`${t.length>0?`${t} `:" "}is unknown type!`}toArray(t,e,n,i){let s="",r=0,l="";r=e.length;let o=this.convertName(t,"");for(let t=0;t<i;++t)l+=" ";s=o+"[";for(let t=0;t<r;++t)s+="\n"+(0===l.length?"":""+l)+`${this._indentFormat}[${t}]:`+this._dump(e[t],"",n,i+1);return s+="\n"+(0===l.length?"":""+l+this._halfIndentFormat)+"]",s}toObject(t,e,n,i){let s="";if(null==e)return s="null",s;let r="";if(e instanceof Object){for(let t=0;t<i;++t)r+=" ";s="{";for(let t in e)s+="\n"+(0===r.length?"":""+r)+`${this._indentFormat}${t}:`+this._dump(e[t],"",n,i+1);return s+="\n"+(0===r.length?"":""+r+this._halfIndentFormat)+"}",s}return s="Unknown Object Type!",s}}t("LoggerImpl",s),s.module="【日志管理器】",e._RF.pop()}}}));

System.register("chunks:///_virtual/Logic.ts",["cc","./EventProcessor.ts","./Macros.ts"],(function(e){var t,s,n,o;return{setters:[function(e){t=e.cclegacy,s=e.js},function(e){n=e.EventProcessor},function(e){o=e.Macro}],execute:function(){t._RF.push({},"4b9a0iaVZFD/KeijOJgJv2B","Logic",void 0);class r extends n{constructor(...e){super(...e),this.module=o.UNKNOWN,this._view=null}get view(){return this._view}reset(e){}onLoad(e){this._view=e,super.onLoad(e)}update(e){}destory(...e){this.onDestroy()}debug(){Log.d(`${this.module} : ${s.getClassName(this)}`)}enterBundle(e,t){App.entryManager.enterBundle(e,t)}backBundle(e){App.entryManager.backBundle(e)}}e("Logic",r),r.module=o.UNKNOWN,t._RF.pop()}}}));

System.register("chunks:///_virtual/LogicManager.ts",["cc","./SingletonT.ts","./UIView.ts"],(function(e){var t,n,i;return{setters:[function(e){t=e.cclegacy},function(e){n=e.SingletonT},function(e){i=e.default}],execute:function(){t._RF.push({},"ed32aE8EBlBeKkWhJ7/xI6h","LogicManager",void 0);class r extends n{constructor(...e){super(...e),this.module=null,this.isResident=!0}get(e,t){if(null==t&&(t=!1),"string"==typeof e)return super.get(e,t);if(e instanceof i){let n=e,i=App.uiManager.getViewType(n);if(i&&i.logicType){return i.logicType.module=n.bundle,super.get(i.logicType,t)}return null}return super.get(e,t)}onDestroy(e){this.clear()}}e("LogicManager",r),r.module="【逻辑管理器】",t._RF.pop()}}}));

System.register("chunks:///_virtual/LoginEntry.ts",["cc","./Entry.ts","./Decorators.ts","./Macros.ts","./Singleton.ts","./LoginLogic.ts","./LoginView.ts","./Config.ts","./ChangeView.ts"],(function(){var e,n,t,a,i,r,o,s,c;return{setters:[function(n){e=n.cclegacy},function(e){n=e.Entry},function(e){t=e.registerEntry},function(e){a=e.Macro},function(e){i=e.Singleton},function(e){r=e.default},function(e){o=e.default},function(e){s=e.ViewZOrder},function(e){c=e.default}],execute:function(){var u;e._RF.push({},"47c35I6YOhD07Qer7OZbFer","LoginEntry",void 0);t("LoginEntry",a.BUNDLE_RESOURCES,o)(u=class extends n{constructor(){super(),this.isMain=!0,this.isChangeOrientation=!1,App.dispatcher.add(a.CHANGE_ORIENTATION,this.onChangeOrientation,this)}onChangeOrientation(){App.uiManager.open({type:c,bundle:a.BUNDLE_RESOURCES,zIndex:s.Loading})}addNetHandler(){}removeNetHandler(){}loadResources(e){e()}openGameView(){super.openGameView(),App.entryManager.onCheckUpdate(),App.updateManager.isSkipUpdate&&App.entryManager.enterBundle(a.BUNDLE_HALL,{isPreload:!0})}onMainUpdateComplete(e){App.entryManager.enterBundle(a.BUNDLE_HALL,{isPreload:!0})}initData(){}pauseMessageQueue(){}resumeMessageQueue(){}onDestroyGameView(e){super.onDestroyGameView(e),this.isChangeOrientation&&(setTimeout((()=>{this.onStartGameView(),this.clearCache()}),200),this.isChangeOrientation=!1)}onStartGameView(e){e&&e.changeOrientation?(App.onLowMemory(),this.isChangeOrientation=!0):(super.onStartGameView(e),this.clearCache(),Log.d("--------------onStartGameView--------------"))}clearCache(){App.uiManager.closeExcept([o]),i.destory(),App.logicManager.destoryExclude([r])}});e._RF.pop()}}}));

System.register("chunks:///_virtual/LoginLogic.ts",["cc","./Logic.ts","./Macros.ts"],(function(t){var n,c,e;return{setters:[function(t){n=t.cclegacy},function(t){c=t.Logic},function(t){e=t.Macro}],execute:function(){n._RF.push({},"876f0yJIntBtZke1wJSQk0E","LoginLogic",void 0);t("default",class extends c{onLogin(){this.enterBundle(e.BUNDLE_HALL)}}),n._RF.pop()}}}));

System.register("chunks:///_virtual/LoginView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameView.ts","./Decorators.ts","./LoginLogic.ts"],(function(e){var i,t,n,o,r,l,a,s,u;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.initializerDefineProperty},function(e){n=e.cclegacy,o=e.Node,r=e.Label,l=e._decorator},function(e){a=e.default},function(e){s=e.inject},function(e){u=e.default}],execute:function(){var c,p,g,d,f,h,b,L,m,y,v,w;n._RF.push({},"9b6e4Gzd2hJRZ81MAza9m0u","LoginView",void 0);const{ccclass:z,property:M}=l;e("default",(c=z("LoginView"),p=s({type:u,name:"logic"}),g=s("login",o),d=s("version",r),f=s("md5",r),c(((w=class extends a{constructor(...e){super(...e),t(this,"logic",L,this),t(this,"login",m,this),t(this,"version",y,this),t(this,"md5",v,this)}static getPrefabUrl(){return"@LoginView"}onLoad(){super.onLoad(),this.version.string=`${App.updateManager.appVersion}(${App.updateManager.getVersion(this.bundle)})`,this.md5.string=`MD5:${App.updateManager.getMd5(this.bundle)}`,this.onN(this.login,o.EventType.TOUCH_END,this.onLogin)}onLogin(){this.logic.onLogin()}}).logicType=u,L=i((b=w).prototype,"logic",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=i(b.prototype,"login",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=i(b.prototype,"version",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=i(b.prototype,"md5",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=b))||h));n._RF.pop()}}}));

System.register("chunks:///_virtual/Macros.ts",["cc","./ByteArray.ts"],(function(E){var _,N;return{setters:[function(E){_=E.cclegacy},function(E){N=E.Endian}],execute:function(){let A;var O;E("Macro",void 0),_._RF.push({},"e9733sUI9xL5obHtAPUvMhj","Macros",void 0),(O=A||(A=E("Macro",{}))).USING_LITTLE_ENDIAN=N.BIG_ENDIAN,O.BUNDLE_RESOURCES="resources",O.BUNDLE_REMOTE="Remote",O.ENABLE_CHANGE_LANGUAGE=!0,O.USING_LAN_KEY="i18n.",O.UNKNOWN="UNKNOWN",O.ON_CUSTOM_CLOSE="ON_CUSTOM_CLOSE",O.MAIN_PACK_BUNDLE_NAME="main",O.BUNDLE_HALL="hall",O.SHOW_DEBUG_INFO_KEY="SHOW_DEBUG_INFO_KEY",O.RECONNECT_ALERT_TAG="RECONNECT_ALERT_TAG",O.DYNAMIC_LOAD_GARBAGE="DYNAMIC_LOAD_GARBAGE",O.DYNAMIC_LOAD_RETAIN_MEMORY="DYNAMIC_LOAD_RETAIN_MEMORY",O.ON_UPDATE_FAILED="ON_UPDATE_FAILED",O.ON_UPDATE_DOWNLOADING="ON_UPDATE_DOWNLOADING",O.ON_DELETE_BUNDLE_CACHE="ON_DELETE_BUNDLE_CACHE",O.DEFAULT_RPC_TIEMEOUT=5e3,O.CHANGE_ORIENTATION="CHANGE_ORIENTATION",_._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./Application.ts","./Alert.ts","./CmmAudioComp.ts","./Loading.ts","./SettingView.ts","./Tips.ts","./UILoading.ts","./UIReconnect.ts","./UpdateLoading.ts","./Config.ts","./CommonEvent.ts","./Lang.ts","./LangEN.ts","./LangZH.ts","./ChatService.ts","./CmmProto.ts","./CommonService.ts","./GameService.ts","./GetCmdKey.ts","./LobbyService.ts","./CmdDefines.ts","./HeartbetBinary.ts","./HeartbetJson.ts","./HeartbetProto.ts","./BundleMgrItem.ts","./BundleMgrView.ts","./ChangeView.ts","./BundleDebugView.ts","./DebugView.ts","./Launch.ts","./LoginEntry.ts","./LoginLogic.ts","./LoginView.ts","./Framework.ts","./AudioComponent.ts","./EventComponent.ts","./Snapshot.ts","./Adapter.ts","./AdapterSprite.ts","./AdapterView.ts","./AssetManager.ts","./BundleManager.ts","./CacheManager.ts","./ReleaseManager.ts","./Resource.ts","./ResourceLoader.ts","./ViewAsset.ts","./Entry.ts","./EntryDelegate.ts","./EntryManager.ts","./Dispatcher.ts","./EventProcessor.ts","./QuickEvent.ts","./Flow.ts","./Language.ts","./LanguageDelegate.ts","./LayoutDefines.ts","./LayoutManager.ts","./Logger.ts","./Logic.ts","./LogicManager.ts","./Net.ts","./HttpClient.ts","./BinaryStreamMessage.ts","./JsonMessage.ts","./Message.ts","./ProtoMessage.ts","./Handler.ts","./HandlerManager.ts","./ProtoManager.ts","./ServiceManager.ts","./IWSMsgHandler.ts","./WSMsgHandler.ts","./WSProxy.ts","./WSReconnect.ts","./WSServer.ts","./WSService.ts","./NodePoolManager.ts","./StateMachine.ts","./LocalStorage.ts","./GameView.ts","./LayerManager.ts","./TableView.ts","./TableViewCell.ts","./UIDropdownList.ts","./UILabel.ts","./UIManager.ts","./UIQRCode.ts","./UIRichText.ts","./UISprite.ts","./UIView.ts","./Update.ts","./UpdateItem.ts","./UpdateManager.ts","./DataCenter.ts","./GameData.ts","./StageData.ts","./Decorators.ts","./Enums.ts","./Macros.ts","./IAlert.ts","./ILoading.ts","./ITips.ts","./IUILoading.ts","./Platform.ts","./BitEncrypt.ts","./ByteArray.ts","./CocosExtention.ts","./CocosUtils.ts","./BundleUpdate.ts","./EntryImpl.ts","./HallUpdate.ts","./MainUpdate.ts","./CanvasHelper.ts","./Singleton.ts","./SingletonT.ts","./Utils.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MainUpdate.ts",["cc"],(function(e){var a;return{setters:[function(e){a=e.cclegacy}],execute:function(){a._RF.push({},"c5a6bRTlXFFXYIfAVayOeNW","MainUpdate",void 0);class o{constructor(){this.module=null,this.isResident=!0}onNewVersionFund(e){e.doUpdate()}onUpdateFailed(e){let a=App.getLanguage("downloadFailed");App.alert.show({text:a+JSON.stringify(e),confirmCb:a=>{App.updateManager.dowonLoad(e)}}),App.updateLoading.hide()}onPreVersionFailed(e){let a=App.getLanguage("downloadFailed");App.alert.show({text:a,confirmCb:a=>{App.updateManager.dowonLoad(e)}}),App.updateLoading.hide()}onShowUpdating(e){App.updateLoading.show(App.getLanguage("loading"))}onOther(e){}onDownloading(e,a){App.updateLoading.updateProgress(a.progress)}onAreadyUpToData(e){App.updateLoading.hide(),App.entryManager.onMainUpdateComplete(e)}onStarCheckUpdate(e){App.updateLoading.show(App.getLanguage("loading"))}onStartLoadBundle(e){}onLoadBundleError(e,a){App.updateLoading.hide(),App.tips.show(App.getLanguage("loadFailed",[e.name])),Log.dump(a,"onLoadBundleError")}onLoadBundleComplete(e){App.updateLoading.hide(),App.entryManager.onLoadBundleComplete(e)}onLoadBundle(e){App.updateLoading.hide()}onDownloadComplete(e){}onNeedRestartApp(e,a){a(!0)}}e("MainUpdate",o),o.module="【主包热更新】",a._RF.pop()}}}));

System.register("chunks:///_virtual/Message.ts",["cc"],(function(e){var s;return{setters:[function(e){s=e.cclegacy}],execute:function(){s._RF.push({},"9cc72ae641Axan45m+M6GpV","Message",void 0);class c{}e("IMessage",c);e("MessageHead",class extends c{});e("Message",class extends c{}),s._RF.pop()}}}));

System.register("chunks:///_virtual/Net.ts",["cc"],(function(t){var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){let e;t({Net:void 0,Proto:void 0}),i._RF.push({},"5d6ecXdPidA1pmDJolUfMzo","Net",void 0),function(t){let i=function(t){return t[t.Unknown=0]="Unknown",t[t.Json=1]="Json",t[t.Proto=2]="Proto",t[t.BinaryStream=3]="BinaryStream",t}({});t.ServiceType=i;t.RPCData=class{constructor(t,i,e,o,s){this.cmd=void 0,this.send=void 0,this.resolve=void 0,this.timeout=void 0,this.type=void 0,this._timeOutId=-1,this.onTimeout=null,this.cmd=t,this.send=i,this.resolve=o,this.timeout=s,this.type=e,this._timeOutId=setTimeout((()=>{var t;null==(t=this.onTimeout)||t.call(this);try{this.resolve(null)}catch(t){Log.e(t)}this.stop()}),s)}stop(){clearTimeout(this._timeOutId)}}}(e||(e=t("Net",{}))),i._RF.pop()}}}));

System.register("chunks:///_virtual/NodePoolManager.ts",["cc","./Macros.ts"],(function(o){var e,t,s,l;return{setters:[function(o){e=o.cclegacy,t=o.isValid,s=o.instantiate},function(o){l=o.Macro}],execute:function(){e._RF.push({},"98d8dJBeClOv4kRv+WtZ/mZ","NodePoolManager",void 0);class n{get cloneNode(){return this.node}set cloneNode(o){o&&t(o)&&(this.node=o,this.node.removeFromParent())}constructor(o){this.name=l.UNKNOWN,this.pool=[],this.node=null,this.name=o}get size(){return this.pool.length}clear(){let o=this.pool.length;for(let e=0;e<o;++e)this.pool[e].destroy();this.pool=[],this.node&&t(this.node)&&this.node.destroy(),this.node=null}put(o){o&&-1===this.pool.indexOf(o)&&(o.removeFromParent(),this.pool.push(o))}get(){if(this.pool.length<=0){if(this.node){return s(this.node)}return null}let o=this.pool.length-1,e=this.pool[o];return this.pool.length=o,e}}o("NodePool",n);class i{constructor(){this.module=null,this.pools=new Map}onDestroy(o){this.clear()}clear(...o){this.pools.clear()}createPool(o){return this.pools.has(o)||this.pools.set(o,new n(o)),this.pools.get(o)}deletePool(o){if("string"==typeof o){if(this.pools.has(o)){let e=this.pools.get(o);e&&e.clear(),this.pools.delete(o)}}else o&&o instanceof n&&this.deletePool(o.name)}getPool(o,e=!0){return this.pools.has(o)?this.pools.get(o):e?this.createPool(o):null}debug(){Log.d("-------对象池节点缓存信息-------"),this.pools.forEach(((o,e)=>{Log.d(e)}))}}o("NodePoolManager",i),i.module="【对象池】",e._RF.pop()}}}));

System.register("chunks:///_virtual/Platform.ts",["cc","./Snapshot.ts"],(function(t){var e,s,r,o,i;return{setters:[function(t){e=t.cclegacy,s=t.sys,r=t.native,o=t.isValid},function(t){i=t.Snapshot}],execute:function(){e._RF.push({},"98f4cJugxNCmLLz8qfpsjAJ","Platform",void 0);class n{constructor(){this.module=null,this._screenshotsPath=null}openURL(t){s.openURL(t)}copyText(t){r.copyTextToClipboard(t)}getNetworkType(){return s.getNetworkType()}getBatteryLevel(){return s.getBatteryLevel()}snapshot(t,e){if(o(t)){t.addComponent(i).onCaptureComplete=e}}get screenshotsPath(){return this._screenshotsPath||s.isNative&&(this._screenshotsPath=r.fileUtils.getWritablePath()+"Screenshots",r.fileUtils.isDirectoryExist(this._screenshotsPath)||r.fileUtils.createDirectory(this._screenshotsPath)),this._screenshotsPath}get uuid(){return Log.e("未实现获取uuid"),"1234567890"}}t("Platform",n),n.module="【平台管理器】",e._RF.pop()}}}));

System.register("chunks:///_virtual/ProtoManager.ts",["cc","./index.mjs_cjs=&original=.js","./ProtoMessage.ts","./index.js"],(function(t){var o,e,r,s,a;return{setters:[function(t){o=t.cclegacy,e=t.TextAsset,r=t.sys},null,function(t){s=t.ProtoMessage},function(t){a=t.default}],execute:function(){o._RF.push({},"647b9mLXKhEYLYv4tkuN2zn","ProtoManager",void 0);class i{constructor(){this._loadDir={},this._root=null,this.module=null,this._root=new a.Root}destory(){this.unload()}load(t,o="proto"){return new Promise(((r,s)=>{this._loadDir[`${t}/${o}`]?r(!0):(this._loadDir[`${t}/${o}`]=!1,App.asset.loadDir(t,o,e,((t,o,e)=>{}),(e=>{if(this._loadDir[`${t}/${o}`])r(!0);else if(e&&e.data&&Array.isArray(e.data)){for(let t=0;t<e.data.length;t++){let o=e.data[t];a.parse(o.text,this._root)}App.asset.releaseAsset(e),this._loadDir[`${t}/${o}`]=!0,r(!0)}else r(!1)})))}))}unload(){this._loadDir={},this._root=new a.Root}lookup(t){return this._root?this._root.lookup(t):null}getType(t){return this.lookup(t)}getEnum(t){return this.lookup(t).values}makeProtoMsg(t){let o=this.getType(t),e=new s(o);return o instanceof a.Type&&(e.data=o.create()),e}makeCustomProtoMsg(t,o){let e=this.getType(o),r=new t(e);return e instanceof a.Type&&(r.data=e.create()),r}decode(t){let o=this.lookup(t.className);return o?o.decode(t.buffer):null}debug(){Log.d("-------Proto文件加载信息,所有proto文件都加载在同一个root下,文件加载完成后，资源文件就会初释放-------"),r.isNative?Log.dump(this._loadDir):Log.d(this._loadDir)}onDestroy(t){this.clear()}clear(){this.unload()}}t("ProtoManager",i),i.module="【Protobuf协议管理器】",o._RF.pop()}}}));

System.register("chunks:///_virtual/ProtoMessage.ts",["cc","./Net.ts","./Message.ts"],(function(e){var t,s,r;return{setters:[function(e){t=e.cclegacy},function(e){s=e.Net},function(e){r=e.Message}],execute:function(){t._RF.push({},"2a060dCqolHUa5KS4cGgWCi","ProtoMessage",void 0);class o extends r{constructor(e){super(),this.buffer=null,this.type=null,this.data=null,this.type=e}encode(){return this.buffer=this.type.encode(this.data).finish(),!!this.buffer}decode(e){return!!e&&(this.buffer=e,this.data=this.type.decode(this.buffer),!0)}}e("IProtoMessage",o);e("ProtoMessage",class extends o{constructor(...e){super(...e),this.cmd=0}});class c extends r{}e("ProtoMessageHeartbeat",c),c.type=s.ServiceType.Proto,t._RF.pop()}}}));

System.register("chunks:///_virtual/QuickEvent.ts",["cc"],(function(n){var e,t,i,o;return{setters:[function(n){e=n.cclegacy,t=n.Node,i=n.js,o=n.EventHandler}],execute:function(){let d;n("QuickEvent",void 0),e._RF.push({},"78c63TlzW9N1a9pd8RgzI+l","QuickEvent",void 0),function(n){let e=function(n){return n.Click="clickEvents",n.EditingDidBegan="editingDidBegan",n.TextChanged="textChanged",n.EditingDidEnded="editingDidEnded",n.EditingReturn="editingReturn",n.Scroll="scrollEvents",n.Slider="slideEvents",n.Check="checkEvents",n.Page="pageEvents",n.Sync="syncEvents",n.Video="videoPlayerEvent",n.WebView="webviewEvents",n}({});function c(n){return n==d.Type.Click||n==d.Type.Check}function r(n){const e=n.target;n.originCb=n.cb,n.handlerOptions=n.handlerOptions||{},null==n.handlerOptions.playSound&&(n.handlerOptions.playSound=!0);let t=n.cb;if("function"==typeof n.cb){if(t=n.cb.name,!t){var o,d;let c=`on_${i.getClassName(e)}_${n.type}_${null==(o=n.comp)?void 0:o.uuid}`;e[c]=null==(d=n.originCb)?void 0:d.bind(e),t=c,Log.w(`无法找到函数，重新绑定: ${c}`)}n.cb=t}return n}n.Type=e,n.addHandler=function(n,e){if(n=r(n),e&&Array.isArray(e)){if(e.find((e=>e.originCb==n.originCb)))return void Log.w(`事件 ${n.type} 重复注册`);e.push(function(n){var e;let d=new o;const r=n.target;d.target=r.node,d.component=i.getClassName(r),d.handler=n.cb,d.originCb=n.originCb,d.customEventData=(null==(e=n.handlerOptions)?void 0:e.data)||"";const a=n.comp;return a&&a.node&&c(n.type)&&!a.node.addTouchStartFunc&&n.handlerOptions&&n.handlerOptions.playSound&&(a.node.addTouchStartFunc=()=>{var e;null!=(e=n.handlerOptions)&&e.playSoundFunc?n.handlerOptions.playSoundFunc():App.gAudio.playButton()},a.node.on(t.EventType.TOUCH_START,a.node.addTouchStartFunc)),d}(n))}},n.removeHandler=function(n,e){if(n=r(n),e&&Array.isArray(e)){const i=e.findIndex((e=>e.originCb==n.originCb));if(-1!=i){e.splice(i,1);const o=n.comp;o&&o.node&&c(n.type)&&o.node.addTouchStartFunc&&(o.node.off(t.EventType.TOUCH_START,o.node.addTouchStartFunc),delete o.node.addTouchStartFunc)}}}}(d||(d=n("QuickEvent",{}))),e._RF.pop()}}}));

System.register("chunks:///_virtual/ReleaseManager.ts",["cc","./Macros.ts","./Resource.ts"],(function(e){var s,t,a,l,n,o,i,r,u,h,d,c,g;return{setters:[function(e){s=e.cclegacy,t=e.assetManager,a=e.SpriteFrame,l=e.Texture2D,n=e.sp,o=e.JsonAsset,i=e.TextAsset,r=e.Asset,u=e.tween,h=e.Tween,d=e.Prefab},function(e){c=e.Macro},function(e){g=e.Resource}],execute:function(){s._RF.push({},"1d61cDX3/lKf7zhBed0DyS1","ReleaseManager",void 0);const m="【释放管理器】 : ";class f{constructor(e){this.name="",this._caches=new Map,this.name=e}add(e){e.addRef();e.stamp=Date.timeNow(),this._caches.set(e.key,e)}get(e){let s=this._caches.get(e);if(s){const t=s.decRef(!1);return s.isDir?(Log.d(`【释放管理器】 : 向${this.name}获取待释放目录:${s.key}`),this._caches.delete(e),s):t?(Log.d(`【释放管理器】 : 向${this.name}获取待释放资源:${s.key}`),this._caches.delete(e),s):(Log.w(`【释放管理器】 : 向${this.name}获取待释放资源时，资源${s.key}已经释放`),this._caches.delete(e),null)}return null}toRelease(e){if(this.name==c.BUNDLE_REMOTE)return e.data instanceof r&&(Log.d(`【释放管理器】 : bundle : ${this.name} 释放远程加载资源${e.url}`),t.releaseAsset(e.data)),void this._caches.delete(e.key);let s=App.bundleManager.getBundle(e.bundle);this.release(e,s),this._caches.delete(e.key)}toReleasePrefab(e){Array.isArray(e.data)?e.type==d&&this.toRelease(e):e.data instanceof d&&this.toRelease(e)}onLowMemory(){if(this._caches.size>0){if(Log.d(`【释放管理器】 : bundle : ${this.name} 释放加载的资源`),this.name==c.BUNDLE_REMOTE)return void this._caches.forEach(((e,s,t)=>{this.toRelease(e)}));let e=t.getBundle(this.name);e?(this._caches.forEach(((e,s)=>{this.toReleasePrefab(e)})),this._caches.forEach((s=>{this.release(s,e)})),this._caches.clear()):(Log.w(`【释放管理器】 : 释放bundle : ${this.name} 时，Bundle已经被释放，直接清空待释放数据`),this._caches.clear())}}tryRemove(e){this.name==e&&this.onLowMemory()}release(e,s){const t=e.decRef(!1);e.isDir?Log.d(`【释放管理器】 : bundle : ${this.name} 释放加载目录${e.fullUrl}`):t&&(e.refCount<=0?(null==s||s.release(e.url,e.type),Log.d(`【释放管理器】 : bundle : ${this.name} 释放加载资源${e.url}`)):e.originaRefCount==e.refCount?Log.d(`【释放管理器】 : bundle : ${this.name} 正常释放加载资源${e.url}`):Log.w(`【释放管理器】 : bundle : ${this.name} 资源${e.url}正使用中引用计数为:${e.refCount}`))}tryRemoveTimeoutResources(){App.isLazyRelease&&App.isAutoReleaseUnuseResources&&(this._caches.forEach(((e,s,t)=>{if(e.retain)return;if(null==e.stamp)return;Date.timeNow()-e.stamp>=App.autoReleaseUnuseResourcesTimeout&&this.toReleasePrefab(e)})),this._caches.forEach(((e,s,t)=>{if(e.retain)return;if(null==e.stamp)return;Date.timeNow()-e.stamp>=App.autoReleaseUnuseResourcesTimeout&&this.toRelease(e)})))}get assets(){return this._caches}clear(...e){this._caches.clear()}}class p{constructor(){this.isResident=!0,this.module=null,this._lazyInfos=new Map,this._bundles=new Map,this._remote=new f(c.BUNDLE_REMOTE),this._uiDatas=new Map,this._actionTag=999}getBundle(e){return App.bundleManager.getBundle(e)}getBundleName(e){return App.bundleManager.getBundleName(e)}release(e){let s=this.getBundle(e.bundle);if(s)if(App.isLazyRelease){let t,a=s.name;this._lazyInfos.has(a)?t=this._lazyInfos.get(a):(t=new f(a),this._lazyInfos.set(a,t)),App.cache.removeWithInfo(e,s,t)&&(t&&t.add(e),App.cache.remove(e))}else App.cache.removeWithInfo(e,s,null);else Log.e(`【释放管理器】 : ${e.bundle} no found`)}get(e,s){let t=this.getBundle(e);if(t){let e=this._lazyInfos.get(t.name);if(e)return e.get(s)}else{Log.w(`【释放管理器】 : ${e}不存在，删除释放管理器中的缓存`);let s=this.getBundleName(e);this.onLoadBundle(s),this._lazyInfos.delete(s)}return null}removeBundle(e){let s=this.getBundle(e);App.isLazyRelease?s&&(Log.d(`【释放管理器】 : 向释放管理器中添加待释放bundle : ${null==s?void 0:s.name}`),this._bundles.set(null==s?void 0:s.name,Date.timeNow())):(Log.d(`【释放管理器】 : 释放Bundle : ${null==s?void 0:s.name}`),null==s||s.releaseAll(),s&&t.removeBundle(s))}onLoadBundle(e){this._bundles.delete(e)}isExistBunble(e){if(App.isLazyRelease){let s=this.getBundleName(e);return!!this._bundles.has(s)}return!1}debugUselessBundleAssets(e){}releaseUselessBundles(e=!1){Log.d("【释放管理器】 : -------------释放无用bundle-------------");let s=[],a=Date.timeNow();return this._bundles.forEach(((l,n)=>{let o=t.getBundle(n);if(o){if(App.bundleManager.isEngineBundle(n))return void Log.d(`${n} : 引擎bundle，跳过处理`);if(e){a-l>=App.autoReleaseUnuseResourcesTimeout&&(Log.d(`释放长时间无用bundle : ${n}`),this.debugUselessBundleAssets(n),o.releaseAll(),t.removeBundle(o),s.push(n),this._bundles.delete(n),this._lazyInfos.delete(n))}else Log.d(`释放无用bundle : ${n}`),this.debugUselessBundleAssets(n),o.releaseAll(),t.removeBundle(o),this._bundles.delete(n),this._lazyInfos.delete(n)}})),s}destroyUI(e,s){if(e){if(!s)return e.destroy(),this._uiDatas.delete(e.name),!0;if(s-e.cache.stamp>=App.autoReleaseUnuseResourcesTimeout)return e.destroy(),this._uiDatas.delete(e.name),!0}return!1}releaseUselessUI(e=!1,s){let t=Date.timeNow();this._uiDatas.forEach(((a,l)=>{s?a.bundle==s&&this.destroyUI(a):e?this.destroyUI(a,t):this.destroyUI(a)}))}onLowMemory(){Log.d("【释放管理器】 : ------------收到内存警告，释放无用资源------------"),this.releaseUselessUI(),this.releaseUselessBundles(),this._lazyInfos.forEach(((e,s,t)=>{e.onLowMemory()})),Log.d("【释放管理器】 : -------------释放无用远程资源-------------"),this._remote.onLowMemory()}onAutoReleaseUnuseResources(){Log.d("【释放管理器】 : ------------释放长时间未使用资源开始------------");let e=App.stageData.where,s=this.releaseUselessBundles(!0);this.releaseUselessUI(!0);let t=Date.timeNow(),a=App.bundleManager;this._uiDatas.forEach(((e,l)=>{this.destroyUI(e,t)||-1!=s.indexOf(a.getBundleName(e.bundle))&&this.destroyUI(e)})),this._lazyInfos.forEach(((s,t,a)=>{t!=e&&s.tryRemoveTimeoutResources()})),Log.d("【释放管理器】 : -------------释放无用远程资源-------------"),this._remote.tryRemoveTimeoutResources(),Log.d("【释放管理器】 : ------------释放长时间未使用资源结束------------")}tryRemoveBundle(e){Log.d(`【释放管理器】 : --------------尝试释放${e}加载资源------------`),this.releaseUselessUI(!1,e),this._lazyInfos.forEach(((s,t,a)=>{s.tryRemove(e)}));let s=this.getBundleName(e),a=t.getBundle(s);a&&(Log.d(`释放无用bundle : ${s}`),a.releaseAll(),t.removeBundle(a),this._bundles.delete(s),this._lazyInfos.delete(s))}getRemote(e,s){let t=[];if(s==a){let a=this._remote.get(g.getKey(e,s)),n=this._remote.get(g.getKey(e,l));t.push(a),t.push(n)}else if(s==n.SkeletonData){let a=`${e}.atlas`,n=`${e}.png`,r=`${e}.json`,u=this._remote.get(g.getKey(e,s)),h=this._remote.get(g.getKey(n,l)),d=this._remote.get(g.getKey(r,o)),c=this._remote.get(g.getKey(a,i));t.push(u),t.push(h),t.push(d),t.push(c)}else{let a=this._remote.get(g.getKey(e,s));t.push(a)}return t}releaseRemote(e,s=!1){App.isLazyRelease&&!s?this._remote.add(e):e.data instanceof r&&t.releaseAsset(e.data)}getUI(e,s=!0){let t=this._uiDatas.get(e);return s?(t&&(t=t.resumeRelease(),this._uiDatas.delete(e)),t):t}releaseUI(e){e.toRelease()&&this._uiDatas.set(e.name,e)}onLoad(e){App.isAutoReleaseUnuseResources&&App.isLazyRelease&&u(e).repeatForever(u(e).delay(App.autoReleaseUnuseResourcesTimeout).call((()=>{this.onAutoReleaseUnuseResources()}))).tag(this._actionTag).start()}onDestroy(e){h.stopAllByTag(this._actionTag),this.clear()}debug(){let e=[];this._bundles.forEach(((s,t,a)=>{e.push(t)}));let s={lazyInfo:this._lazyInfos,bundles:e,remote:this._remote};Log.d(`--------------${this.module}调试信息如下--------------`),App.isLazyRelease?(this._uiDatas.forEach(((e,s)=>{Log.d(`待释放UI ${s}`)})),s.bundles.length>0&&Log.d(`待释放Bundle : ${s.bundles.toString()}`),s.lazyInfo.size>0&&s.lazyInfo.forEach(((e,s,t)=>{Log.d(`--------------${s}待释放资源--------------`),e.assets.forEach(((e,s,t)=>{Log.d(JSON.stringify(e.debug()))}))})),Log.d("远程待释放资源"),s.remote.assets.forEach(((e,s,t)=>{Log.d(JSON.stringify(e.debug()))}))):Log.w("未开户懒释放功能!!!!")}clear(...e){this._bundles.clear(),this._lazyInfos.clear(),this._uiDatas.clear(),this._remote.clear()}}e("ReleaseManager",p),p.module=m,s._RF.pop()}}}));

System.register("chunks:///_virtual/Resource.ts",["cc"],(function(t){var e,i,s;return{setters:[function(t){e=t.cclegacy,i=t.js,s=t.isValid}],execute:function(){let r;t("Resource",void 0),e._RF.push({},"86fa3hsHP1My5zJYrNKRvgr","Resource",void 0),function(t){let e=function(t){return t[t.LOADING=0]="LOADING",t[t.NO_FOUND_LOAD_RESOURCE=1]="NO_FOUND_LOAD_RESOURCE",t[t.SUCCESS=2]="SUCCESS",t}({});t.LoaderError=e;let u=function(t){return t[t.NONE=0]="NONE",t[t.WAITTING_FOR_RELEASE=1]="WAITTING_FOR_RELEASE",t}({});t.CacheStatus=u;let n=function(t){return t[t.Local=0]="Local",t[t.Remote=1]="Remote",t}({});t.Type=n;class a{constructor(t,e,i,s=!1){this.isDir=!1,this.url="",this.type=null,this.bundle=null,this._retain=!1,this._refCount=0,this.originaRefCount=0,this._data=null,this.deps=[],this.resourceType=n.Local,this.stamp=null,this.isLoaded=!1,this.status=u.NONE,this.finishCb=[],this.url=t,this.type=e,this.bundle=i,this.isDir=s}get key(){return h(this.url,this.type)}get description(){let t=i.getClassName(this.type);return this.resourceType==r.Type.Local?`本地 : ${Array.isArray(this.data)?"目录":""}[${t}]${this.fullUrl}`:`远程 : [${t}]${this.fullUrl}`}get fullUrl(){return this.resourceType==r.Type.Local?`${this.bundle}/${this.url}`:this.url}set retain(t){this._retain=t}get retain(){return this._retain}get refCount(){return this.isDir?this._refCount:s(this.data)?this.data.refCount:0}get data(){return this._data}set data(t){if(this._data=t,this.isDir&&t&&Array.isArray(t)){const e=App.bundleManager.getBundle(this.bundle);e&&t.forEach((t=>{const i=e.getAssetInfo(t.uuid||t._uuid);if(i){const e=new a(`${i.path}`,this.type,this.bundle);e.isLoaded=!0,e.data=t,App.cache.set(e),this.deps.push(e.key)}else Log.e(`${this.url}.${t.name} uuid:${t.uuid||t._uuid}不存在`)}))}}doFinish(t){null!=t&&null!=t||(t={cache:this,asset:this.data});for(let e=0;e<this.finishCb.length;e++)this.finishCb[e]&&this.finishCb[e](t);this.finishCb=[]}get isInvalid(){return this.isLoaded&&this.data&&!s(this.data)}addRef(){if(this.data){if(this.isDir)return this._refCount++,!0;{const t=this.data;if(s(t))return t.addRef(),!0}}return!1}decRef(t){if(this.data){if(this.isDir)return this._refCount--,!0;{const e=this.data;if(s(e))return e.decRef(t),!0}}return!1}debug(){let t=i.getClassName(this.type);return{isLoaded:this.isLoaded,info:(t=>{if(!t)return[{url:this.fullUrl,isValid:!1,refCount:-1}];if(Array.isArray(t)){let e=[];return t.forEach((t=>{let i=s(t);e.push({url:`${this.fullUrl}/${i?t.name:"unknown"}`,isValid:i,refCount:i?t.refCount:-1})})),e}{let e=s(t);return[{url:this.fullUrl,isValid:e,refCount:e?t.refCount:-1}]}})(this.data),status:this.status,type:t}}}function h(t,e){return t.indexOf(i.getClassName(e))>=0?t:`${t}(${i.getClassName(e)})`}t.Cache=a,t.getKey=h}(r||(r=t("Resource",{}))),e._RF.pop()}}}));

System.register("chunks:///_virtual/ResourceLoader.ts",["cc","./Resource.ts"],(function(e){var o,s,t;return{setters:[function(e){o=e.Asset,s=e.cclegacy},function(e){t=e.Resource}],execute:function(){s._RF.push({},"37b44dS6xRMXKLsf0jg21ne","ResourceLoader",void 0);e("default",class{constructor(){this._resources=[],this._loadedCount=0,this._loadedResource=new Map,this._isLoading=!1,this._tag=null,this._onLoadComplete=void 0,this._onLoadProgress=void 0,this._getLoadResource=void 0}get isLoading(){return this._isLoading}get tag(){return this._tag}set tag(e){this._tag=e}set onLoadComplete(e){this._onLoadComplete=e}get onLoadComplete(){return this._onLoadComplete}set onLoadProgress(e){this._onLoadProgress=e}get onLoadProgress(){return this._onLoadProgress}set getLoadResources(e){this._getLoadResource=e}get getLoadResources(){return this._getLoadResource}loadResources(){if(!this.getLoadResources)return void(this.onLoadComplete&&this.onLoadComplete(t.LoaderError.NO_FOUND_LOAD_RESOURCE));let e=this.getLoadResources();if(e)if(e.length<=0)this.onLoadComplete&&this.onLoadComplete(t.LoaderError.NO_FOUND_LOAD_RESOURCE);else if(this._isLoading)this.onLoadComplete&&this.onLoadComplete(t.LoaderError.LOADING);else{if(this._resources.length>0&&this.isLoadComplete())return this.onLoadComplete&&this.onLoadComplete(t.LoaderError.SUCCESS),void this.onLoadResourceComplete();this._isLoading=!0,this._resources=e,this._loadedCount=0,this._resources.forEach(((e,o,s)=>{e.preloadView?App.uiManager.preload(e.preloadView,e.bundle,e.isCache).then((o=>{let s=new t.Cache(e.url,e.type,e.bundle);s.isLoaded=!0,s.data=o,e.preloadView&&(s.url=e.preloadView.getPrefabUrl()),s.bundle=e.bundle,this._onLoadResourceComplete(s)})):e.dir?App.asset.loadDir(e.bundle,e.dir,e.type,null,this._onLoadResourceComplete.bind(this)):App.asset.load(e.bundle,e.url,e.type,null,this._onLoadResourceComplete.bind(this))}))}else this.onLoadComplete&&this.onLoadComplete(t.LoaderError.NO_FOUND_LOAD_RESOURCE)}unLoadResources(){this._unLoadResources()}_unLoadResources(){this._isLoading||this._resources.length<=0?this._isLoading&&Log.d("resources is loading , waiting for unload!!!"):(this._resources.forEach((e=>{if(e.url){let o=t.getKey(e.url,e.type);if(o=`${e.bundle}/${o}`,this._loadedResource.has(o)){let e=this._loadedResource.get(o);e&&App.asset.releaseAsset(e),this._loadedResource.delete(o)}}else if(e.dir){let o=t.getKey(e.dir,e.type);if(o=`${e.bundle}/${o}`,this._loadedResource.has(o)){let e=this._loadedResource.get(o);e&&App.asset.releaseAsset(e),this._loadedResource.delete(o)}}})),this._isLoading=!1,this._loadedCount=0,this._resources=[])}_onLoadResourceComplete(e){this._loadedCount++,this._onLoadProgress&&(this._loadedCount>this._resources.length&&(this._loadedCount=this._resources.length),this._onLoadProgress(this._loadedCount,this._resources.length,e)),e&&(Array.isArray(e.data)||e.data instanceof o)&&(App.asset.retainAsset(e),this._loadedResource.set(`${e.bundle}/${e.key}`,e)),this.checkLoadResourceComplete()}checkLoadResourceComplete(){this.isLoadComplete()&&(this._isLoading=!1,this.onLoadComplete&&this.onLoadComplete(t.LoaderError.SUCCESS),this.onLoadResourceComplete())}onLoadResourceComplete(){}isLoadComplete(){return this._loadedCount>=this._resources.length}}),s._RF.pop()}}}));

System.register("chunks:///_virtual/ServiceManager.ts",["cc","./Macros.ts"],(function(e){var t,c;return{setters:[function(e){t=e.cclegacy},function(e){c=e.Macro}],execute:function(){t._RF.push({},"de02fmAhktFqrVNko/wmjAM","ServiceManager",void 0);class n{constructor(){this.module=null,this.services=[],this.waitReconnect=[],this.curReconnect=void 0,this.reconnectTimer=-1}get(e,t=!1){let n=this.getModule(e);if(n==c.UNKNOWN)return null;let i=this.getService(n);return i||("string"!=typeof e&&t?(i=new e(n),this.services.push(i),i.flows.reconnectFlow.push((e=>(e.isDestory||this.reconnect(e),e))),i):null)}destory(e){if(e){let t=this.getModule(e),c=this.services.length;for(;c--;){const e=this.services[c];e.module==t&&(e.destory(),this.destoryFromReconnect(e),this.services.splice(c,1))}}else{let e=this.services.length;for(;e--;){const t=this.services[e];t.destory(),this.destoryFromReconnect(t),this.services.splice(e,1)}}}destoryFromReconnect(e){e==this.curReconnect&&(this.curReconnect=void 0);for(let t=0;t<this.waitReconnect.length;t++)if(this.waitReconnect[t]==e){this.waitReconnect.splice(t,1);break}}getModule(e){let t=c.UNKNOWN;return t="string"==typeof e?e:e.module,t}onDestroy(){this.destory()}onUpdate(e,t){this.services.forEach((e=>{e&&e.update(t)}))}stop(){this.services.forEach((e=>{e&&e.stop()}))}onLoad(){}onEnterBackground(){this.services.forEach((e=>{e.flows.enterBackgroundFlow.exec(e)}))}async onEnterForgeground(e){for(let t=0;t<this.services.length;t++){const c=this.services[t],n=await c.flows.enterForegroundFlow.exec({service:c,enterBackgroundTime:e,isNeedReconnect:!1});n&&n.isNeedReconnect&&c.stop().then((()=>{this.reconnect(c)}))}}reconnect(e){!this.isWaiReconnect(e)&&e.options.enableReconnect&&this.waitReconnect.push(e),this.sortWait(),clearTimeout(this.reconnectTimer),this.reconnectTimer=setTimeout((()=>{this.doReconnect()}),1e3)}onReconnected(e){for(let t=0;t<this.waitReconnect.length;t++)if(this.waitReconnect[t]==e){this.waitReconnect.splice(t,1),this.sortWait();break}this.curReconnect=void 0,this.doReconnect()}async doReconnect(){if(this.curReconnect){if(!(this.waitReconnect.length>1))return void this.curReconnect.reconnect.start((e=>this.onReconnected(e)));{const e=this.waitReconnect[0];if(e==this.curReconnect)return void this.curReconnect.reconnect.start((e=>this.onReconnected(e)));if(!(this.curReconnect.priority<e.priority))return void this.curReconnect.reconnect.start((e=>this.onReconnected(e)));await this.curReconnect.stop(),!this.isWaiReconnect(this.curReconnect)&&this.curReconnect.options.enableReconnect&&this.waitReconnect.push(this.curReconnect),this.sortWait()}}if(0!=this.waitReconnect.length&&(this.curReconnect=this.waitReconnect.shift(),this.curReconnect)){if(this.curReconnect.reconnect.isWaiting||this.curReconnect.reconnect.isReconnecting)return;await this.curReconnect.reconnect.start((e=>this.onReconnected(e))),this.curReconnect=void 0}}sortWait(){this.waitReconnect.length>=1&&this.waitReconnect.sort(((e,t)=>t.priority-e.priority))}getService(e){for(let t=0;t<this.services.length;t++)if(this.services[t].module==e)return this.services[t];return null}isWaiReconnect(e){for(let t=0;t<this.waitReconnect.length;t++)if(this.waitReconnect[t]==e)return!0;return!1}debug(){Log.d("-----------网络管理器中相关网络信息------------"),this.services.forEach((e=>{let t=`Module : ${e.module} , 进入后台的最大允许时间 : ${e.options.maxEnterBackgroundTime} , 优先级 : ${e.priority}`;Log.d(t),t=`是否允许重连 : ${e.options.enableReconnect}`,Log.d(t),t=`状态信息 是否连接 : ${e.isConnected} 网络数据类型 : ${e.serviceType}`,Log.d(t)}))}}e("ServiceManager",n),n.module="【Service管理器】",t._RF.pop()}}}));

System.register("chunks:///_virtual/SettingView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Config.ts","./UIView.ts","./Decorators.ts","./Macros.ts"],(function(t){var e,o,s,i,n,u,c,a,l,r,h,g,f,p,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.initializerDefineProperty},function(t){s=t.cclegacy,i=t.Node,n=t._decorator,u=t.find,c=t.Input,a=t.Slider,l=t.Toggle,r=t.game,h=t.ProgressBar},function(t){g=t.Config},function(t){f=t.default},function(t){p=t.inject},function(t){m=t.Macro}],execute:function(){var d,C,A,V,S;s._RF.push({},"c7b13vovM1LjpKzHWM97u42","SettingView",void 0);const{ccclass:E}=n;t("default",(d=E("SettingView"),C=p("content",i),d((S=e((V=class extends f{constructor(...t){super(...t),this.musicStatus=null,this.effectStatus=null,this.musicVolume=null,this.effectVolume=null,o(this,"content",S,this)}static getPrefabUrl(){return"common/prefabs/SettingView"}onLoad(){super.onLoad(),this.onN(u("close",this.content),c.EventType.TOUCH_END,this.onClickClose),this.onN(u("background/quit",this.content),c.EventType.TOUCH_END,this.onQuit),this.onN(u("background/restart",this.content),c.EventType.TOUCH_END,this.onRestart);let t=u("background/musicVolume",this.content);this.onN(t,"slide",this.onMusicVolumeChange);let e=u("background/effectVolume",this.content);this.onN(e,"slide",this.onEffectVolumeChange),this.musicVolume=t.getComponent(a),this.effectVolume=e.getComponent(a),this.musicVolume.progress=App.gAudio.musicVolume,this.effectVolume.progress=App.gAudio.effectVolume,this.onMusicVolumeChange(this.musicVolume),this.onEffectVolumeChange(this.effectVolume);let o=u("background/musicStatus",this.content);this.musicStatus=o.getComponent(l);let s=u("background/effectStatus",this.content);this.effectStatus=s.getComponent(l),this.onN(o,"toggle",this.onMusicStatusChange),this.onN(s,"toggle",this.onEffectStatusChange),this.musicStatus.isChecked=App.gAudio.isMusicOn,this.effectStatus.isChecked=App.gAudio.isEffectOn,this.onMusicStatusChange(this.musicStatus,!1),this.onEffectStatusChange(this.effectStatus,!1),this.show(this.args)}get showAction(){return App.utils.showView(this.content)}get closeAction(){return App.utils.hideView(this.content)}onClickClose(){this.close()}onQuit(){this.close(),App.alert.show({immediatelyCallback:!0,text:App.getLanguage("quitGame"),confirmCb:t=>{t&&App.entryManager.enterBundle(m.BUNDLE_RESOURCES)}})}onRestart(){r.restart()}onMusicVolumeChange(t){App.gAudio.musicVolume=t.progress,t.node.getComponent(h).progress=t.progress}onEffectVolumeChange(t){App.gAudio.effectVolume=t.progress,t.node.getComponent(h).progress=t.progress}onMusicStatusChange(t,e){null==e&&App.gAudio.playEffect(g.audioPath.button),t.node.getChildByName("off").active=!t.isChecked,App.gAudio.isMusicOn=t.isChecked}onEffectStatusChange(t,e){null==e&&App.gAudio.playEffect(g.audioPath.button),t.node.getChildByName("off").active=!t.isChecked,App.gAudio.isEffectOn=t.isChecked}}).prototype,"content",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=V))||A));s._RF.pop()}}}));

System.register("chunks:///_virtual/Singleton.ts",["cc","./SingletonT.ts"],(function(t){var e,n;return{setters:[function(t){e=t.cclegacy},function(t){n=t.SingletonT}],execute:function(){e._RF.push({},"6524eDwP+pOxIVce9Jvkz7a","Singleton",void 0);class s extends n{constructor(...t){super(...t),this.module="【单列管理器】"}static get instance(){return this._instance||(this._instance=new s)}static get(t,e=!0,...n){return this.instance.get(t,e,...n)}static destory(t){return this.instance.destory(t)}static destoryExclude(t){return this.instance.destoryExclude(t)}static clear(t){this.instance.clear(t)}static debug(){this.instance.debug()}static onDestroy(t){this.instance.onDestroy(t)}static onUpdate(t,e){this.instance.onUpdate(t,e)}}t("Singleton",s),s._instance=null,e._RF.pop()}}}));

System.register("chunks:///_virtual/SingletonT.ts",["cc","./Macros.ts"],(function(t){var e,s;return{setters:[function(t){e=t.cclegacy},function(t){s=t.Macro}],execute:function(){e._RF.push({},"cada6ZZEXlHUKK5Bplpb0ho","SingletonT",void 0);t("SingletonT",class{constructor(){this._datas=new Map,this.module=null}get(t,e=!0,...o){let d=this.getKey(t);if(d==s.UNKNOWN)return null;if(this._datas.has(d))return this._datas.get(d);if("string"!=typeof t&&e){let e=null;return e=t.instance?t.instance:new t(t.module),e.module=t.module,Log.d(`${e.module}初始化`),e.init&&e.init(...o),this._datas.set(t.module,e),e}return null}destory(t){if(t){let e=this.getKey(t);if(this._datas.has(e)){Log.d(`${e}销毁`);let t=this._datas.get(e);return t&&(null==t.onDestroy||t.onDestroy(null),null==t.destory||t.destory()),this._datas.delete(e),!0}return!1}return this._datas.forEach((t=>{t.isResident?Log.d(`${t.module}为常驻单列，不做销毁处理`):(Log.d(`${t.module}销毁`),null==t.onDestroy||t.onDestroy(null),null==t.destory||t.destory(),this._datas.delete(t.module))})),!0}destoryExclude(t){if(!t)return this._datas.forEach((t=>{t.isResident?Log.d(`${t.module}为常驻单列，不做销毁处理`):(Log.d(`${t.module}销毁`),t.destory&&t.destory(),this._datas.delete(t.module))})),!0;this._datas.forEach(((e,s)=>{this.isInExclude(e,t)||(e.isResident?Log.d(`${e.module}为常驻单列，不做销毁处理`):(Log.d(`${e.module}销毁`),e.destory&&e.destory(),this._datas.delete(e.module)))}))}clear(t){t?this._datas.forEach(((e,s)=>{this.isInExclude(e,t)||(Log.d(`${e.module}清理`),e.clear&&e.clear())})):this._datas.forEach(((t,e)=>{Log.d(`${t.module}清理`),t.clear&&t.clear()}))}onDestroy(t){this._datas.forEach((e=>{null==e.onDestroy||e.onDestroy(t)}))}onUpdate(t,e){this._datas.forEach((s=>{null==s.onUpdate||s.onUpdate(t,e)}))}debug(){Log.d(`************************** ${this.module} 开始 **************************`),this._datas.forEach(((t,e,s)=>{t.debug?t.debug():Log.d(`${t.module} : 未实现debug接口`)})),Log.d(`************************** ${this.module} 结束 **************************`)}isInExclude(t,e){if(!e)return!1;for(let s=0;s<e.length;s++){if(this.getKey(e[s])==t.module)return!0}return!1}getKey(t){let e=s.UNKNOWN;return e="string"==typeof t?t:t.module,e}}),e._RF.pop()}}}));

System.register("chunks:///_virtual/Snapshot.ts",["cc"],(function(e){var t,a,s,i,r,h,p,n,o,c,u,g,l;return{setters:[function(e){t=e.cclegacy,a=e.Component,s=e.RenderTexture,i=e.view,r=e.UITransform,h=e.ImageAsset,p=e.Texture2D,n=e.SpriteFrame,o=e.sys,c=e.Size,u=e.native,g=e.assetManager,l=e._decorator}],execute:function(){var _;t._RF.push({},"1ff00yaE7BLMZ9D4Mudhp/4","Snapshot",void 0);const{ccclass:m,property:d}=l;e("Snapshot",m("Snapshot")(_=class extends a{constructor(...e){super(...e),this._camera=null,this.onCaptureComplete=void 0,this._texture=null,this._canvas=null,this._buffer=null}start(){this._camera=App.uiManager.screenShotCamera,super.start&&super.start(),this._texture=new s,this._texture.reset({width:i.getVisibleSize().width,height:i.getVisibleSize().height}),this._camera.targetTexture=this._texture,this._camera.node.active=!0,this.scheduleOnce((()=>{this.capture()}),.2)}onDestroy(){this._camera.node.active=!1,super.onDestroy&&super.onDestroy()}capture(){let e=this.node.getComponent(r);if(!e)return;let t=e.width,a=e.height,s=e.getBoundingBoxToWorld(),i=s.x,h=s.y;this._buffer=this._texture.readPixels(Math.round(i),Math.round(h),t,a),this.saveImage()}genSpriteFrame(e,t){let a=new h;a.reset({_data:this._buffer,width:e,height:t,format:p.PixelFormat.RGBA8888,_compressed:!1});let s=new p;s.image=a;let i=new n;return i.texture=s,i.packable=!1,i.flipUVY=!0,i}createImageData(e,t,a){if(o.isBrowser||o.platform===o.Platform.WECHAT_GAME){this._canvas?this.clearCanvas():(this._canvas=document.createElement("canvas"),this._canvas.width=e,this._canvas.height=t);let s=this._canvas.getContext("2d"),i=4*e;for(let r=0;r<t;r++){let h=t-1-r,p=s.createImageData(e,1),n=h*e*4;for(let e=0;e<i;e++)p.data[e]=a[n+e];s.putImageData(p,0,r)}}}onCaptureFinish(e,t,a){this.onCaptureComplete&&(null==a&&(a=this.genSpriteFrame(e,t)),this.onCaptureComplete(a,new c(e,t))),this.destroy()}flipImageY(e,t,a){let s=new Uint8Array(t*a*4),i=4*t,r=a-1;for(let t=0;t<a;t++){let a=(r-t)*i,h=t*i;for(let t=0;t<i;t++)s[t+h]=e[a+t]}return s}savaAsImage(e,t,a){if(o.isBrowser)this.createImageData(e,t,a),App.canvasHelper.saveAsPNG(this._canvas,e,t),App.tips.show(App.getLanguage("capture_success")),this.onCaptureFinish(e,t);else if(o.isNative){let a=(new Date).format("yyyy_MM_dd_hh_mm_ss_SS")+".png",s=`${App.platform.screenshotsPath}/${a}`,i=this.flipImageY(this._buffer,e,t);u.saveImageData(i,e,t,s).then((()=>{this.onCaptureComplete&&g.loadRemote(s,((a,i)=>{if(a)Log.d("show image error");else{const a=new n,r=new p;r.image=i,a.texture=r,a.packable=!1,App.tips.show(App.getLanguage("capture_save_local_success1",[s])),this.onCaptureFinish(e,t,a)}})),Log.d("save image data success, file: "+s),App.tips.show(App.getLanguage("capture_save_local_success2",[s]))})).catch((()=>{Log.e("save image data failed!"),App.tips.show(App.getLanguage("capture_save_failed"))}))}else o.platform===o.Platform.WECHAT_GAME&&(this.createImageData(e,t,a),this._canvas.toTempFilePath({x:0,y:0,width:this._canvas.width,height:this._canvas.height,destWidth:this._canvas.width,destHeight:this._canvas.height,fileType:"png",success:e=>{wx.showToast({title:App.getLanguage("capture_success")}),App.tips.show(App.getLanguage("capture_success")),wx.saveImageToPhotosAlbum({filePath:e.tempFilePath,success:e=>{wx.showToast({title:App.getLanguage("capture_save_photo_album")}),App.tips.show(App.getLanguage("capture_save_local_success2",[e.tempFilePath]))},fail:()=>{App.tips.show(App.getLanguage("capture_save_failed"))}})},fail:()=>{wx.showToast({title:App.getLanguage("capture_failed")}),App.tips.show(App.getLanguage("capture_failed"))}}),this.onCaptureFinish(e,t))}clearCanvas(){let e=this._canvas.getContext("2d");e&&e.clearRect(0,0,this._canvas.width,this._canvas.height)}saveImage(){let e=this.node.getComponent(r);e&&this.savaAsImage(e.width,e.height,this._buffer)}})||_);t._RF.pop()}}}));

System.register("chunks:///_virtual/StageData.ts",["cc","./GameData.ts","./Macros.ts","./Entry.ts"],(function(t){var e,h,s,a,r;return{setters:[function(t){e=t.cclegacy,h=t.view},function(t){s=t.GameData},function(t){a=t.Macro},function(t){r=t.EntryData}],execute:function(){e._RF.push({},"c284cIfNW5DV5M9KCSAIfPf","StageData",void 0);class i extends s{constructor(...t){super(...t),this.isResident=!0,this.defaultData=[{sort:0,type:0,name:{CN:"主包",EN:"Main"},bundle:a.BUNDLE_RESOURCES},{sort:1,type:1,name:{CN:"大厅",EN:"Hall"},bundle:a.BUNDLE_HALL}],this._bundles={},this.isShowDebugButton=!0,this._sceneStack=[],this._where=a.UNKNOWN,this._attachStack={},this._attachWhere=a.UNKNOWN,this._entrys=[]}get bundles(){return this._bundles}get isLandscape(){const t=h.getDesignResolutionSize();return t.width>t.height}get where(){return this._where}set where(t){Log.d(`${this.module}${this._where} ==> ${t}`);let e=this._where;this._where=t,e!=t&&this.push(t)}get prevWhere(){let t;return this._sceneStack.length>=2&&(t=this._sceneStack[this._sceneStack.length-2]),Log.d(`${this.module}获取的上一场景 : ${t}`),t}get attachWhere(){return this._attachWhere}set attachWhere(t){Log.d(`${this.module}附加运行场景 ${String(this._attachWhere)} ==> ${t}`);let e=this._attachWhere;this._attachWhere=t,e!=t&&this.pushAttach(t)}get prevAttachWhere(){let t,e=this._attachStack[this.where];return e&&e.length>=2&&(t=e[e.length-2]),Log.d(`${this.module}获取的上一附加场景 : ${t}`),t}get excludeAttachWhere(){const t=this._attachStack[this.where];return t?t.filter((t=>t!=this.attachWhere)):[]}get attachs(){const t=this._attachStack[this.where];return t||[]}clearAttachStack(){this.where!=a.UNKNOWN&&(this._attachStack[this.where]=[]),this._attachWhere=a.UNKNOWN}get entrys(){return this._entrys}init(t){super.init(),t||(t=this.defaultData),t.sort(((t,e)=>t.sort-e.sort)),this._entrys=[],this._bundles={},t.forEach((t=>{this._bundles[t.bundle]=t.type,this._bundles[t.type]=t.bundle,this._entrys.push(new r(t))}))}isLoginStage(t){return t?t==a.BUNDLE_RESOURCES:this.where==a.BUNDLE_RESOURCES}isHallStage(t){return t?t==a.BUNDLE_HALL:this.where==a.BUNDLE_HALL}getEntry(t){let e=null;for(let h=0;h<this._entrys.length;h++)if(this._entrys[h].bundle==t){e=this._entrys[h].update;break}return e}get games(){let t=[];for(let e=0;e<this._entrys.length;e++){const h=this._entrys[e];h.bundle!=a.BUNDLE_HALL&&h.bundle!=a.BUNDLE_RESOURCES&&t.push(h)}return t}push(t){let e=0;for(let h=this._sceneStack.length-1;h>=0;h--){if(this._sceneStack[h]==t){e=this._sceneStack.length-h;break}}for(;e>0;)this._sceneStack.pop(),e--;this._sceneStack.push(t),Log.d(`${this.module}压入场景 : ${t}`),Log.d(`${this.module}当前场景堆栈 : ${this._sceneStack.toString()}`)}pushAttach(t){let e=0,h=this._attachStack[this.where];if(h)for(let s=h.length-1;s>=0;s--){if(h[s]==t){e=h.length-s;break}}else h=[],this._attachStack[this.where]=h;for(;e>0;)h.pop(),e--;h.push(t),Log.d(`${this.module}附加运行压入场景 : ${t}`),Log.d(`${this.module}附加运行当前场景堆栈 : ${h.toString()}`)}}t("StageData",i),i.module="【Stage数据】",e._RF.pop()}}}));

System.register("chunks:///_virtual/StateMachine.ts",["cc"],(function(t){var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){t("BuildTransition",(function(t,i,n){return{from:t,to:i,onTransition:n}})),i._RF.push({},"beec43oyY1GvrskHvSg8W05","StateMachine",void 0);var n=function(t){return t[t.NoFoundTransition=0]="NoFoundTransition",t[t.Transiting=1]="Transiting",t[t.ChangeStateFailure=2]="ChangeStateFailure",t}(n||{});const r={[n.NoFoundTransition]:"You can not {0} now. Current state is {1}",[n.Transiting]:"This is transiting now. You cannot transition more times at one time.",[n.ChangeStateFailure]:"From {0} to {1} state failure"};class o{constructor(t){this._transitions=null,this._curState=void 0,this._originTransitions=null,this._isTransiting=!1,this.onBefore=void 0,this.onAfter=void 0,this.onError=void 0;const{init:i,transitions:n}=t;this._curState=i,this.setupTransitions(n)}setupTransitions(t){this._originTransitions=t,this._transitions={},Object.keys(t).forEach((i=>{const o=i,s=t[o];let e=this;this._transitions[o]=function(){if(!e.exist(o))return void e.postError(n.NoFoundTransition,String.format(r[n.NoFoundTransition],o,e._curState));if(e._isTransiting)return void e.postError(n.Transiting,r[n.Transiting]);const t=e._curState,i=e._findDir(t,s);if(null==i)return void e.postError(n.NoFoundTransition,String.format(r[n.NoFoundTransition],o,e._curState));const{to:a,onTransition:u}=i,c="function"==typeof a?Reflect.apply(a,this,arguments):a;e._isTransiting=!0,e.onBefore&&e.onBefore(t,c);let f=!0;if(u&&(f=u(t,c)),!f)return e.postError(n.ChangeStateFailure,String.format(r[n.ChangeStateFailure],t,c)),e.onAfter&&e.onAfter(t,c),void(e._isTransiting=!1);e._curState=c,e.onAfter&&e.onAfter(t,c),e._isTransiting=!1}}))}postError(t,i){this.onError&&this.onError(t,i)}get transition(){return this._transitions}get state(){return this._curState}is(t){return this._curState==t}exist(t){const i=this._originTransitions[t];if(!i)return!1;return null!=this._findDir(this._curState,i)}_findDir(t,i){return Array.isArray(i)?this._findDirOfArray(t,i):this._isIncludeState(i.from,t)?i:null}_findDirOfArray(t,i){for(const n in i){const r=i[n];if(this._isIncludeState(r.from,t))return r}return null}_isIncludeState(t,i){return"*"===t||(i===t||!(!Array.isArray(t)||-1==t.indexOf(i)))}}t("default",o),o.Code=n,i._RF.pop()}}}));

System.register("chunks:///_virtual/TableView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LayoutDefines.ts","./TableViewCell.ts"],(function(e){var t,i,l,s,n,o,h,r,a,d,c,f,_,u,g,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){l=e.cclegacy,s=e.Enum,n=e._decorator,o=e.ScrollView,h=e.Vec2,r=e.UITransform,a=e.Size,d=e.instantiate,c=e.v2,f=e.Vec3,_=e.v3},function(e){u=e.LayoutParam,g=e.LayoutType},function(e){p=e.TableViewCell}],execute:function(){var O,I,C,T,y,S,b,m,v,x,w,D,A,L,R,z,U;l._RF.push({},"c1f55MBNyFBBpES2blsDr0B","TableView",void 0);const{ccclass:N,property:B,menu:P}=n;var E=function(e){return e[e.HORIZONTAL=0]="HORIZONTAL",e[e.VERTICAL=1]="VERTICAL",e}(E||{}),V=function(e){return e[e.TOP_DOWN=0]="TOP_DOWN",e[e.BOTTOM_UP=1]="BOTTOM_UP",e}(V||{});class H{constructor(e,t,i,l){this._view=null,this._templete=null,this._offset=null,this.index=0,this.left=0,this.right=0,this.top=0,this.bottom=0,this.position=_(0,0,0),this._templete=e,this._view=t,this.index=l,this.init(i)}get isHorizontal(){return this._view.direction==E.HORIZONTAL}get fillOrder(){return this._view.fillOrder}get node(){return this._templete.node}get offset(){return this.isHorizontal?this._offset.x:this._offset.y}init(e){const t=this.node.getComponent(r);this.left=t.width*t.anchorX,this.right=t.width*(1-t.anchorX),this.top=t.height*(1-t.anchorY),this.bottom=t.height*t.anchorY,this.isHorizontal?this._offset=c(e,0):this._offset=c(0,e)}calculatePosition(){let e=this._align(this.node,this._view.content,this._offset);return this.position.x=e.x,this.position.y=e.y,this.position}clone(){let e=new H(this._templete,this._view,this.offset,this.index);return e.position.x=this.position.x,e.position.y=this.position.y,e}_align(e,t,i){let l=new u;return l.node=e,l.target=t,this.isHorizontal?this.fillOrder==V.TOP_DOWN?(l.alignFlags=g.MID_LETF,l.left=i.x):(l.alignFlags=g.MID_RIGHT,l.right=i.x):this.fillOrder==V.TOP_DOWN?(l.alignFlags=g.CENTER_TOP,l.top=i.y):(l.alignFlags=g.CENTER_BOT,l.bottom=i.y),App.layout.align(l),l.result.position}debug(e,t){let i=`[${this.index}] 位置 : (${this.position.x},${this.position.y}) , 偏移 : ${this.offset} , 左 : ${this.left} , 右 : ${this.right} , 上 : ${this.top} , 下 : ${this.bottom} `;e&&(i=e+i),t&&(i+=t),Log.d(i)}calculateSight(e,t,i,l){let s={isInSight:!1,offset:0},n=this.node.getComponent(r);if(t)if(e==V.TOP_DOWN){let e=this.node.scale.x,t=this.position.x;e<0&&(t-=this.right);let o=i.x+t-this.left;if(o>=0)o<l.width&&(s.isInSight=!0);else{n.width+o>0&&(s.isInSight=!0)}s.offset=o}else{let e=this.node.scale.x,t=this.position.x;e<0&&(t+=this.left);let o=i.x+t-this.left;if(o>0)o<l.width&&(s.isInSight=!0);else{n.width+o>0&&(s.isInSight=!0)}s.offset=o}else if(e==V.TOP_DOWN){let e=this.node.scale.y,t=this.position.y;e<0&&(t+=this.bottom);let o=i.y+t+this.top;o>0?o>n.height||(s.isInSight=!0):l.height+o<0||(s.isInSight=!0),s.offset=o}else{let e=this.node.scale.y,t=this.position.y;e<0&&(t-=this.top);let o=-(i.y+t+this.top);if(o>=0)l.height-o<0||(s.isInSight=!0);else{-o>n.height||(s.isInSight=!0)}s.offset=o}return s}}e("default",(O=N("TableView"),I=P("QuickUI组件/TableView"),C=B({override:!0,displayOrder:20,visible:function(){return this.direction==E.HORIZONTAL}}),T=B({override:!0,displayOrder:21,visible:function(){return this.direction==E.VERTICAL}}),y=B({tooltip:"滚动方向 \nHORIZONTAL 水平方向 \nVERTICAL 垂直方向",displayName:"Direction",type:s(E),visible:!0,displayOrder:22}),S=B({visible:!1,override:!0}),b=B({visible:!1,override:!0}),m=B({tooltip:"Cell项模板",displayName:"Template",type:p,visible:!0,displayOrder:23}),v=B({displayOrder:24,tooltip:"填充方式 \nTOP_DOWN 水平方向时，从左到右填充，垂直方向时，从上到下填充 \nBOTTOM_UP 水平方向时，从右到左填充，垂直方向时，从下到上填充",type:s(V)}),O(x=I(((U=class extends o{constructor(...e){super(...e),i(this,"_direction",D,this),i(this,"horizontal",A,this),i(this,"vertical",L,this),i(this,"_template",R,this),this._templateSize=new Map,i(this,"fillOrder",z,this),this._delegate=null,this._cellsUsed=[],this._cellsFreed=[],this._cellsInfos=[],this._indices=new Set,this._isUsedCellsDirty=!1,this._oldDirection=null,this._isDoing=!1,this._isShowAllCell=!1}get horizontalScrollBar(){return this._horizontalScrollBar}set horizontalScrollBar(e){this._horizontalScrollBar!==e&&(this._horizontalScrollBar=e,this._horizontalScrollBar&&(this._horizontalScrollBar.setScrollView(this),this._updateScrollBar(h.ZERO)))}get verticalScrollBar(){return this._verticalScrollBar}set verticalScrollBar(e){this._verticalScrollBar!==e&&(this._verticalScrollBar=e,this._verticalScrollBar&&(this._verticalScrollBar.setScrollView(this),this._updateScrollBar(h.ZERO)))}get direction(){return this._direction}set direction(e){this._direction!=e&&(this._direction=e)}get template(){return this._template}set template(e){this._template=e}get delegate(){return this._delegate||Log.e(`【${this.name}】致命错误 : 未设置TableView代理`),this._delegate}set delegate(e){this._delegate!==e&&(this._delegate=e)}get viewSize(){var e;let t=null==(e=this.view)?void 0:e.getComponent(r);return t?t.contentSize:a.ZERO}get viewAnchor(){var e;let t=null==(e=this.view)?void 0:e.anchorPoint;return t||h.ZERO}get contentSize(){var e;let t=null==(e=this.content)?void 0:e.getComponent(r);return t?t.contentSize:a.ZERO}get contentAnchor(){var e;let t=null==(e=this.content)?void 0:e.getComponent(r);return t?t.anchorPoint:h.ZERO}scrollToIndex(e,t=0,i=!0){if(!this.content)return;if(!(e>=0&&e<this.delegate.numberOfCellsInTableView(this)))return void Log.e(`错误的index : ${e}`);let l=this.getScrollOffset(),s=this._cellsInfos[e];if(this.fillOrder==V.TOP_DOWN)this.direction==E.HORIZONTAL?l.x=s.offset:l.y=s.offset;else{let t=this._cellsInfos[e+1];this.direction==E.HORIZONTAL?l.x=this.contentSize.width-t.offset:l.y=this.contentSize.height-t.offset}this.scrollToOffset(l,t,i)}updateCellAtIndex(e){let t=this.delegate.numberOfCellsInTableView(this);if(!(t>0&&e<t&&e>=0))return;let i=this.cellAtIndex(e);i&&this._moveCellOutOfSight(i);let l=this.delegate.tableCellTypeAtIndex(this,e);if(i=this._dequeueCell(l),!i){let e=this._getTemplete(l);if(!e)return;i=d(e.node).getComponent(p)}i&&(this._setIndexForCell(e,i),this._addCellIfNecessary(i),i.init(),this._updateCellData(i))}insertCellAtIndex(e){let t=this.delegate.numberOfCellsInTableView(this);if(0==t)return;if(null!=e&&null!=e||(e=t-1),e>t-1)return;this._isDoing=!0;let i=this.getScrollOffset();this._updateCellOffsets(),this._updateContentSize();let l=this.cellAtIndex(e);if(l){Log.d(`插入的Cell[${e}]在显示区域内`);let t=this._getCellIndex(l);this._moveCellIndex(t)}else Log.d(`插入的Cell${e}不在显示区域内,更新显示区域内的索引`),this._moveCellIndex(e);let s=this.delegate.tableCellTypeAtIndex(this,e),n=this._dequeueCell(s);if(!n){let e=this._getTemplete(s);if(!e)return;n=d(e.node).getComponent(p)}n&&(this._setIndexForCell(e,n),this._addCellIfNecessary(n),n.init(),this._updateCellData(n),this._isDoing=!1,this._calculateSightArea(),this.scrollToOffset(i))}removeCellAtIndex(e,t){let i=this.delegate.numberOfCellsInTableView(this);if(!(i>0&&e>=0&&e<i))return;let l=this.getScrollOffset();t(e),this._isDoing=!0,this._updateCellOffsets(),this._updateContentSize(),this._moveCellIndex(e,!0),this._isDoing=!1,this._calculateSightArea(),this.scrollToOffset(l)}reloadData(e=!0){this._oldDirection=e?null:this.direction;for(let e=0;e<this._cellsUsed.length;e++){let i=this._cellsUsed[e];var t;if(this.delegate.tableCellWillRecycle&&this.delegate.tableCellWillRecycle(this,i),this._cellsFreed.push(i),i.reset(),i.node.parent==this.content)null==(t=this.content)||t.removeChild(i.node)}this._indices.clear(),this._cellsUsed=[],this._isDoing=!0,this._updateCellOffsets(),this._updateContentSize(),this._isDoing=!1,this._calculateSightArea(),this._oldDirection!=this.direction&&(this.delegate.numberOfCellsInTableView(this)>0&&(this.direction==E.HORIZONTAL?this.scrollToLeft():this.scrollToTop()),this._oldDirection=this.direction)}cellAtIndex(e){if(this._indices.has(e))for(let t=0;t<this._cellsUsed.length;t++)if(this._cellsUsed[t].index==e)return this._cellsUsed[t];return null}_updateCellIndices(e){let t=[];if(this._indices.forEach(((e,i,l)=>{t.push(e)})),!(t.length<=0)){this._indices.clear();for(let i=0;i<t.length;i++){let l=e.find((e=>e.from==t[i]));l&&(t[i]=l.to),this._indices.add(t[i])}}}_moveCellIndex(e,t=!1){let i=[],l=t?-1:1;if(t){let t=this._cellsUsed.findIndex(((t,i,l)=>t.index==e));-1!=t&&this._moveCellOutOfSight(this._cellsUsed[t])}for(let s=0;s<this._cellsUsed.length;s++){let n=this._cellsUsed[s];if(n.index>=e){if(t&&n.index==e)continue;let s=n.index,o=n.index+l;this._setIndexForCell(o,n),this._updateCellData(n),i.push({from:s,to:o})}else this._updateCellPosition(n)}this._updateCellIndices(i)}_sortCell(){this._cellsUsed=this._cellsUsed.sort(((e,t)=>e.index-t.index))}_debugCellInfos(e){Log.d(`--------------------- ${e} ---------------------`),this._cellsInfos.forEach((e=>{e.debug()}))}_debugCell(e){Log.d(`--------------------- ${e} ---------------------`),Log.d("当前显示节点 :",this._indices),this._cellsUsed.forEach(((e,t,i)=>{Log.d(`[${t}] , type : ${e.type} ,index : ${e.index} , ${e.string} , position : (${e.node.position.x},${e.node.position.y})`)}))}_getCellIndex(e){for(let t=0;t<this._cellsUsed.length;t++)if(this._cellsUsed[t]===e)return this._cellsUsed[t].index;return-1}_debugData(){this.delegate&&this.delegate.tableDebug&&this.delegate.tableDebug(this)}_updateCellData(e){this.delegate.updateCellData(this,e)}_updateCellPosition(e){let t=this._cellsInfos[e.index];e.node.setPosition(t.position)}_addCellIfNecessary(e){var t;e.node.parent!=this.content?null==(t=this.content)||t.addChild(e.node):Log.e("添加的Cell 已经有父节点");this._cellsUsed.push(e),this._indices.add(e.index),this._isUsedCellsDirty=!0}_setIndexForCell(e,t){t.view=this,t.index=e,t.node.active=!0;let i=this._cellsInfos[e];t.node.setPosition(i.position)}_dequeueCell(e){if(this._cellsFreed.length<=0)return null;for(let t=0;t<this._cellsFreed.length;t++){let i=this._cellsFreed[t];if(i.type==e)return this._cellsFreed.splice(t,1),i}return null}_updateCellOffsets(){let e=this.delegate.numberOfCellsInTableView(this);if(this._cellsInfos=[],e>0){let t,i=0,l={width:0,height:0},s=0,n=null;for(s=0;s<e;s++){t=this.delegate.tableCellTypeAtIndex(this,s),n=this._getTemplete(t);let e=new H(n,this,i,s);this._cellsInfos.push(e);let o=n.node.getComponent(r);l.width=o.width,l.height=o.height,this.direction==E.HORIZONTAL?i+=l.width:i+=l.height}let o=new H(n,this,i,s);this._cellsInfos.push(o)}}_updateCellPositions(){this._cellsInfos.forEach((e=>{e.calculatePosition()}))}_updateContentSize(){let e=new a(0,0),t=this.delegate.numberOfCellsInTableView(this);if(t>0){let i=this._cellsInfos[t].offset;e=this.direction==E.HORIZONTAL?new a(i,this.viewSize.height):new a(this.viewSize.width,i)}if(this.content){this.content.getComponent(r).setContentSize(e)}this._updateCellPositions()}_calculateSightArea(){if(!this.content)return;if(this._isDoing)return;let e=this.content.position,t=new h(e.x,e.y),i=this.contentSize,l=this.contentAnchor,s=this.viewSize,n=this.viewAnchor,o=-l.y*i.height,r=-n.y*s.height,a=n.x*s.width;o=t.y+o;let d=null;d=this.direction==E.HORIZONTAL?c(a,t.y).add(t):c(t.x,r).add(t),this._isUsedCellsDirty&&this._sortCell();let f=Math.max(this.delegate.numberOfCellsInTableView(this)-1,0),_=this._calculateInInSight(d);if(_){if(this._cellsUsed.length>0){let e=this._cellsUsed[0],t=e.index;for(;t<_.start&&(this._moveCellOutOfSight(e),this._cellsUsed.length>0);)e=this._cellsUsed[0],t=e.index}if(this._cellsUsed.length>0){let e=this._cellsUsed[this._cellsUsed.length-1],t=e.index;for(;t<=f&&t>_.end&&(this._moveCellOutOfSight(e),this._cellsUsed.length>0);)e=this._cellsUsed[this._cellsUsed.length-1],t=e.index}for(let e=_.start;e<=_.end;e++)this._indices.has(e)||this.updateCellAtIndex(e)}}_getTemplete(e){for(let t=0;t<this.template.length;t++){if(this.template[t].type==e)return this.template[t]}return null}_moveCellOutOfSight(e){this.delegate&&this.delegate.tableCellWillRecycle&&this.delegate.tableCellWillRecycle(this,e),this._cellsFreed.push(e);let t=this._cellsUsed.indexOf(e);var i;(-1!=t&&this._cellsUsed.splice(t,1),this._indices.delete(e.index),e.reset(),e.node.parent==this.content)&&(null==(i=this.content)||i.removeChild(e.node));this._isUsedCellsDirty=!0}_calculateInInSight(e){let t=null;if(this._cellsInfos.length<=0)return t;let i=this.delegate.numberOfCellsInTableView(this);if(i<=0)return t;if(t={start:0,end:0,count:i},this._isShowAllCell)return t.start=0,t.end=i-1,t;if(1==i)return t;let l=0,s=i,n=this.viewSize,o=-1,h=0;for(;s>=l;){if(h=Math.floor(l+(s-l)/2),h<0||h>=this._cellsInfos.length)return null;let t=this._cellsInfos[h].calculateSight(this.fillOrder,this.direction==E.HORIZONTAL,e,n);if(t.isInSight){o=h;break}if(h+1<0||h+1>=this._cellsInfos.length)return null;let i=this._cellsInfos[h+1].calculateSight(this.fillOrder,this.direction==E.HORIZONTAL,e,n);if(i.isInSight){o=h;break}Math.abs(t.offset)<Math.abs(i.offset)?s=h-1:l=h+1}if(o<0)return null;t.start=o,t.end=o;for(let i=o-1;i>=0;i--){if(!this._cellsInfos[i].calculateSight(this.fillOrder,this.direction==E.HORIZONTAL,e,n).isInSight)break;t.start=i}for(let l=o+1;l<i;l++){if(!this._cellsInfos[l].calculateSight(this.fillOrder,this.direction==E.HORIZONTAL,e,n).isInSight)break;t.end=l}return t}scrollToTopLeft(e,t){Log.w("不支持该方法")}scrollToTopRight(e,t){Log.w("不支持该方法")}scrollToBottomLeft(e,t){Log.w("不支持该方法")}scrollToBottomRight(e,t){Log.w("不支持该方法")}_onMouseWheel(e,t){if(!this.enabledInHierarchy)return;if(this._hasNestedViewGroup(e,t))return;const i=new f,l=e.getScrollY();this.direction==E.VERTICAL?i.set(0,-.1*l,0):i.set(-.1*l,0,0),this._mouseWheelEventElapsedTime=0,this._processDeltaMove(i),this._stopMouseWheel||(this._handlePressLogic(),this.schedule(this._checkMouseWheel,1/60,NaN,0),this._stopMouseWheel=!0),this._stopPropagationIfTargetIsMe(e)}_flattenVectorByDirection(e){const t=e;return t.x=this.direction==E.HORIZONTAL?t.x:0,t.y=this.direction==E.VERTICAL?t.y:0,t}_setContentPosition(e){var t;if(!this._content)return;const i=null==(t=this.content)?void 0:t.getPosition();Math.abs(e.x-i.x)<this.getScrollEndedEventTiming()&&Math.abs(e.y-i.y)<this.getScrollEndedEventTiming()||(this._content.setPosition(e),this._calculateSightArea(),this._outOfBoundaryAmountDirty=!0)}}).Direction=E,U.FillOrder=V,t((w=U).prototype,"horizontalScrollBar",[C],Object.getOwnPropertyDescriptor(w.prototype,"horizontalScrollBar"),w.prototype),t(w.prototype,"verticalScrollBar",[T],Object.getOwnPropertyDescriptor(w.prototype,"verticalScrollBar"),w.prototype),D=t(w.prototype,"_direction",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return E.HORIZONTAL}}),A=t(w.prototype,"horizontal",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),L=t(w.prototype,"vertical",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),R=t(w.prototype,"_template",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),z=t(w.prototype,"fillOrder",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return V.TOP_DOWN}}),x=w))||x)||x));l._RF.pop()}}}));

System.register("chunks:///_virtual/TableViewCell.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventComponent.ts"],(function(e){var t,i,l,n,r;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){l=e.cclegacy,n=e._decorator},function(e){r=e.default}],execute:function(){var s,c,o,a,u,p,y;l._RF.push({},"911aez3VC9D84ngrsmXq6sf","TableViewCell",void 0);const{ccclass:f,property:b,menu:d}=n;e("TableViewCell",(s=f("TableViewCell"),c=d("QuickUI组件/TableViewCell"),o=b({displayName:"Type",tooltip:"列表项类型"}),s(a=c(((y=class extends r{constructor(...e){super(...e),this.view=null,this.index=-1,i(this,"type",p,this)}reset(){this.index=-1}init(){}willRecycle(){}}).INVALID_INDEX=-1,p=t((u=y).prototype,"type",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),a=u))||a)||a));l._RF.pop()}}}));

System.register("chunks:///_virtual/Tips.ts",["cc","./ITips.ts","./Config.ts"],(function(t){var s,i,e,o,n,h,a,r,u,p,l,c,_;return{setters:[function(t){s=t.Vec3,i=t.instantiate,e=t.UITransform,o=t.log,n=t.cclegacy,h=t.Component,a=t.Tween,r=t.find,u=t.Label,p=t.UIOpacity,l=t.tween},function(t){c=t.ITips},function(t){_=t.ViewZOrder}],execute:function(){n._RF.push({},"cbe3apTgWJJCIVevDJz8JOj","Tips",void 0);class g extends h{constructor(...t){super(...t),this._content=null,this._curPositon=new s,this._curOpacity=null,this._transform=null}stopAllActions(){a.stopAllByTarget(this._content),a.stopAllByTarget(this._curPositon),this.opacity&&a.stopAllByTarget(this.opacity)}onDestroy(){this.stopAllActions()}init(t,s){this._content=r("content",this.node),this._content&&(this._content.getComponent(u).string=t),this.runTimeOut(s)}get opacity(){return this._curOpacity||(this._curOpacity=this.node.getComponent(p)),this._curOpacity}get transform(){return this._transform||(this._transform=this.node.getComponent(e)),this._transform}runTimeOut(t){let s=this;l(this._content).delay(t).call((()=>{App.tips.finishShowItem(s.node)})).start()}fadeOut(){this.opacity&&(a.stopAllByTarget(this.opacity),l(this.opacity).to(.5,{opacity:0}).call((()=>{var t;this.stopAllActions(),null==(t=this.node)||t.removeFromParent()})).start(),this.moveTo(0,this.node.position.y+this.transform.height))}fadeIn(){this.opacity&&(a.stopAllByTarget(this.opacity),this.opacity.opacity=0,l(this.opacity).to(.5,{opacity:255}).start(),this.moveTo(0,this.node.position.y+this.transform.height))}moveTo(t,s){a.stopAllByTarget(this._curPositon),this._curPositon.set(this.node.position),l(this._curPositon).to(.5,{x:t,y:s},{onUpdate:t=>{var s;null==(s=this.node)||s.setPosition(t)},easing:"expoOut"}).start()}}class m extends c{constructor(...t){super(...t),this._queue=[],this.MAX_NUM=3,this.FADE_TIME=2,this._id=0,this.startPosition=new s(0,100)}async _show(t){let s=i(App.uiManager.getScenePrefab("Tips"));if(s){let i=s.addComponent(g);i.init(t,this.FADE_TIME),s.setPosition(this.startPosition),i.fadeIn(),s.userData=this._id++,s.name=`Tips${s.userData}`,App.uiManager.addView(s,_.Tips);let n=this._queue.length;for(let t=0;t<n&&t<this.MAX_NUM;t++){let s=this._queue[t],i=s.getComponent(g),o=s.getComponent(e);i&&o&&i.moveTo(0,this.startPosition.y+o.height+(n-t)*(o.height+3))}if(this._queue.push(s),this._queue.length>this.MAX_NUM){var o;null==(o=this._queue.shift().getComponent(g))||o.fadeOut()}}}show(t){null!=t&&null!=t&&""!=t&&(o("Toast.show msg=%s",t),this._show(t))}finishShowItem(t){for(let i=0;i<this._queue.length;i++){if(this._queue[i].userData==t.userData){var s;this._queue.splice(i,1),null==(s=t.getComponent(g))||s.fadeOut();break}}}clear(){let t=null;for(;t=this._queue.pop();){let s=t.getComponent(g);s&&s.stopAllActions(),t.removeFromParent()}}}t("default",m),m.module="【Tips】",n._RF.pop()}}}));

System.register("chunks:///_virtual/UIDropdownList.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,o,n,s,r,l,a,h,u,p,c,d,m,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){o=t.cclegacy,n=t.Vec3,s=t.Node,r=t._decorator,l=t.Component,a=t.isValid,h=t.instantiate,u=t.ScrollView,p=t.ToggleContainer,c=t.EventHandler,d=t.tween,m=t.UITransform,g=t.easing}],execute:function(){var v,w,f,C,b,y,D,T,E,k,F,L,P;o._RF.push({},"047edVJ4FZJU5hLRe7pVINu","UIDropdownList",void 0);const{ccclass:I,property:_,menu:H}=r;var U=function(t){return t[t.SELECT_CHANGED=0]="SELECT_CHANGED",t}(U||{});let S=new n,N=new n;t("UIDropdownList",(v=I("UIDropdownList"),w=H("QuickUI组件/UIDropdownList"),f=_({tooltip:"",type:s}),C=_({tooltip:"",type:s}),b=_({tooltip:"",type:s}),y=_({tooltip:"",type:s}),v(D=w(((P=class extends l{constructor(...t){super(...t),i(this,"view",E,this),i(this,"block",k,this),i(this,"title",F,this),i(this,"itemTemplate",L,this),this.items=[],this._isFold=!0,this.toggleContainer=null,this.updateHandler=null}reload(t){var e;a(this.view)&&(a(this.itemTemplate),this.toggleContainer&&(this.reset(),t.forEach(((t,e)=>{var i;let o=h(this.itemTemplate);o.userData=t,this.items.push(o),null==(i=this.view.getComponent(u).content)||i.addChild(o),this.updateHandler&&this.updateHandler(!1,o,e)})),this.title.userData=null==(e=this.selected)?void 0:e.node.userData,this.updateHandler(!0,this.title,0)))}get selected(){if(this.toggleContainer)for(let t=0;t<this.toggleContainer.toggleItems.length;t++)if(this.toggleContainer.toggleItems[t].isChecked)return this.toggleContainer.toggleItems[t];return null}getList(){return this.items}onLoad(){if(super.onLoad&&super.onLoad(),a(this.block)&&this.block.on(s.EventType.TOUCH_END,this.fold,this),a(this.title)&&this.title.on(s.EventType.TOUCH_END,this.onTouchEnd,this),a(this.view)){var t;let e=this.view.getComponent(u);if(!e)return;if(this.toggleContainer=e.content.getComponent(p),!this.toggleContainer)return;let i=new c;i.component="UIDropdownList",i.handler="onSelected",i.target=this.node,null==(t=this.toggleContainer)||t.checkEvents.push(i)}this.reset()}onDestroy(){a(this.block)&&this.block.destroy(),a(this.itemTemplate)&&this.itemTemplate.destroy(),a(this.view)&&this.view.destroy(),super.onDestroy&&super.onDestroy()}onDisable(){this.fold(),super.onDisable&&super.onDisable()}fold(){this._isFold=!0;let t=this.block;a(t)&&t.removeFromParent(),a(this.view)&&this.view.parent&&d(this.view).delay(.05).to(.1,{scale:new n(1,0,1)}).call((()=>{this.view.removeFromParent()})).start()}unfold(){this._isFold=!0;let t=App.layerMgr.root,e=this.block;if(a(e)&&(e.removeFromParent(),e.setPosition(0,0),e.active=!0,null==t||t.addChild(e)),a(this.view)){var i;let e=this.view;e.removeFromParent();let o=this.title.getComponent(m);this.title.getWorldPosition(S),null==t||t.addChild(e),App.layerMgr.root.getComponent(m).convertToNodeSpaceAR(S,N),N.x+=(.5-o.anchorX)*o.width,N.y+=(0-o.anchorY)*o.height,this.view.getComponent(m).setAnchorPoint(.5,1),this.view.setPosition(N),e.active=!0,null==(i=e.getComponent(u))||i.scrollToTop(),d(this.view).to(.1,{scale:new n(1,1,1)},{easing:g.circOut}).call((()=>{})).start()}}onTouchEnd(){this._isFold?this.unfold():this.fold()}onSelected(t){this.fold(),this.title.userData=t.node.userData,this.updateHandler(!0,this.title,0)}reset(){a(this.block)&&this.block.removeFromParent(),a(this.itemTemplate)&&this.itemTemplate.removeFromParent(),a(this.view)&&(this.view.setScale(1,0,1),this.view.removeFromParent())}}).Event=U,E=e((T=P).prototype,"view",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(T.prototype,"block",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(T.prototype,"title",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(T.prototype,"itemTemplate",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=T))||D)||D));o._RF.pop()}}}));

System.register("chunks:///_virtual/UILabel.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,r,s,a,o,n;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){r=t.cclegacy,s=t.Enum,a=t.CCString,o=t._decorator,n=t.Label}],execute:function(){var l,u,p,y,c,g,h,b,d,_,m,D;r._RF.push({},"b340dLlFTJHb7Z4XQaDDRVw","UILabel",void 0);const{ccclass:f,property:L,menu:w}=o,U=s(App.Bundles);t("default",(l=f("UILabel"),u=w("Quick渲染组件/UILabel"),p=L({displayName:"语言包所在Bundle",type:U,tooltip:"语言包所在bundle"}),y=L({displayName:"语言包Key",tooltip:"所在Bundle中语言包的key,如果语言包在Bundle内，请先用injectLanguageData装饰语言包数据代理类"}),c=L({displayName:"语言包附加参数",tooltip:"附加参数，如果语言包中有 xx{0}{1},有两个占位的参数需要替换",type:a}),g=L({displayName:"是否启用多语言",tooltip:"是否启用多语言,默认为启用"}),l(h=u((d=e((b=class extends n{constructor(...t){super(...t),i(this,"_lan",d,this),i(this,"_bundle",_,this),i(this,"_params",m,this),this._isDirty=!0,i(this,"_mult",D,this)}get bundle(){return this._bundle}set bundle(t){this._bundle!=t&&(this._bundle=t,this._isDirty=!0)}get language(){return this._lan}set language(t){this.language!=t&&(this._lan=t,this._isDirty=!0)}get params(){return this._params}set params(t){this._params=t,this._isDirty=!0}get isUseMultilingual(){return this._mult}set isUseMultilingual(t){t!=this._mult&&(this._mult=t,this._isDirty=!0)}onLoad(){super.onLoad(),App.language.add(this),this.update(0)}onDestroy(){App.language.remove(this),super.onDestroy()}update(t){super.update&&super.update(t),this._isDirty&&(this.forceDoLayout(),this._isDirty=!1)}forceDoLayout(){if(this.isUseMultilingual){let t=this.bundle,e=U[t],i=App.getLanguage(this.language,this.params,e);this.string=i}super.forceDoLayout()}}).prototype,"_lan",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),_=e(b.prototype,"_bundle",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return U.resources}}),m=e(b.prototype,"_params",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),D=e(b.prototype,"_mult",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),e(b.prototype,"bundle",[p],Object.getOwnPropertyDescriptor(b.prototype,"bundle"),b.prototype),e(b.prototype,"language",[y],Object.getOwnPropertyDescriptor(b.prototype,"language"),b.prototype),e(b.prototype,"params",[c],Object.getOwnPropertyDescriptor(b.prototype,"params"),b.prototype),e(b.prototype,"isUseMultilingual",[g],Object.getOwnPropertyDescriptor(b.prototype,"isUseMultilingual"),b.prototype),h=b))||h)||h));r._RF.pop()}}}));

System.register("chunks:///_virtual/UILoading.ts",["cc","./Config.ts","./IUILoading.ts"],(function(e){var t,n,i,r,o,u;return{setters:[function(e){t=e.find,n=e.Label,i=e.cclegacy},function(e){r=e.Config,o=e.ViewZOrder},function(e){u=e.IUILoading}],execute:function(){i._RF.push({},"12c4eqKidlCLJ2tu1NcSFWA","UILoading",void 0);class d extends u{get prefab(){return App.uiManager.getScenePrefab("UILoading")}get delayTime(){return r.LOAD_VIEW_DELAY}get timeout(){return r.LOAD_VIEW_TIME_OUT}get zOrder(){return o.UILoading}findContent(){return t("content",this.node)}findText(){var e;return null==(e=t("text",this.content))?void 0:e.getComponent(n)}}e("default",d),d.module="【UILoading】",i._RF.pop()}}}));

System.register("chunks:///_virtual/UIManager.ts",["cc","./Enums.ts","./Macros.ts","./AdapterView.ts","./Resource.ts","./ViewAsset.ts"],(function(e){var t,a,s,i,n,l,r,o,d,u,h,p,c;return{setters:[function(e){t=e.cclegacy,a=e.isValid,s=e.js,i=e.Prefab,n=e.Widget,l=e.instantiate,r=e.find,o=e.Camera},function(e){d=e.ViewStatus},function(e){u=e.Macro},function(e){h=e.default},function(e){p=e.Resource},function(e){c=e.ViewAsset}],execute:function(){t._RF.push({},"63b76CYxi5BSLOyiSlM2dNn","UIManager",void 0);class g{constructor(){this.isResident=!0,this.module=null,this._viewDatas=new Map,this.garbage=new c.Dynamic(u.DYNAMIC_LOAD_GARBAGE),this.retainMemory=new c.Dynamic(u.DYNAMIC_LOAD_RETAIN_MEMORY),this._canvas=null,this._prefabs=null}getViewData(e){let t=this.getClassName(e);if(t)return this._viewDatas.has(t)?this._viewDatas.get(t):void 0}getViewType(e){if(!a(e))return null;let t=e.className;if(!t)return null;let s=this._viewDatas.get(t);return s?s.viewType:null}getClassName(e){if(!e)return;let t;return t="string"==typeof e?e:s.getClassName(e),t}defaultOpenOption(e){let t={bundle:u.BUNDLE_RESOURCES,delay:e.delay,name:e.name,zIndex:0,preload:!1,type:e.type,args:e.args,isCache:App.isCacheUI};return null!=e.bundle&&(t.bundle=e.bundle),null!=e.zIndex&&(t.zIndex=e.zIndex),null!=e.preload&&(t.preload=e.preload),null!=e.isCache&&(t.isCache=e.isCache),t}preload(e,t,a){return this.open({type:e,preload:!0,bundle:t,isCache:a})}parsePrefabUrl(e){return"@"==e[0]?{isPrefab:!1,url:e.substr(1)}:{isPrefab:!0,url:e}}open(e){console.log("open",4);let t=this.defaultOpenOption(e);return this._open(t)}_open(e){return new Promise(((t,n)=>{if(!e.type)return void t(null);let l=s.getClassName(e.type);if(!App.layerMgr.root)return void t(null);let r=App.releaseManger.getUI(l);if(r)return this._viewDatas.set(l,r),r.status=d.WAITTING_NONE,e.preload||(r.node.parent||this.addView(r.node,e.zIndex),r.view.show(e.args)),void t(r.view);if(r=this.getViewData(e.type),r)return r.isPreload=e.preload,r.isLoaded?(r.status=d.WAITTING_NONE,e.preload||r.view&&a(r.node)&&(r.node.parent||this.addView(r.node,e.zIndex),r.view.show(e.args)),void t(r.view)):(r.status=d.WAITTING_NONE,e.preload||App.uiLoading.show(e.delay,e.name),void r.finishCb.push(t));{r=new c.Data,r.loadData.name=l;let a=e.type.getPrefabUrl(),s=this.parsePrefabUrl(a);if(r.isPreload=e.preload,r.isPrefab=s.isPrefab,r.viewType=e.type,r.bundle=e.bundle,r.isCache=e.isCache,this._viewDatas.set(l,r),!s.isPrefab)return r.cache=new p.Cache(s.url,i,e.bundle),r.cache.data=this.getScenePrefab(s.url),void this.createNode(r,t,e);let n=null;e.preload||(App.uiLoading.show(e.delay,e.name),n=(e,t,a)=>{let s=Math.ceil(e/t*100);App.uiLoading.updateProgress(s)}),this.loadPrefab(e.bundle,a,n,(a=>{if(a)r.cache=a,App.asset.retainAsset(a),this.createNode(r,t,e),App.uiLoading.hide();else{r.isLoaded=!0,this._close(r),r.doFinish(null,l,"打开界面异常"),t(null);let a="";e.name&&(a=e.name),App.tips.show(`加载界面${a}失败，请重试`),App.uiLoading.hide()}}))}}))}_addComponent(e,t,a){if(e){let s=t.name,i=e.getComponent(t.viewType);if(!i&&(i=e.addComponent(t.viewType),!i))return null;i.className=s,i.bundle=a.bundle,t.view=i,i.args=a.args;let l=i.getComponent(n);return l&&l.destroy(),i.getComponent(h)||i.addComponent(h),t.isPreload||this.addView(e,a.zIndex),i}return null}createNode(e,t,a){e.isLoaded=!0;let s=e.name;if(e.status==d.WAITTING_CLOSE)return t(null),void e.doFinish(null,s,"获取界内已经关闭");let i=l(e.cache.data);e.node=i;let n=this._addComponent(i,e,a);n?e.status==d.WATITING_HIDE?(n.hide(),t(n),e.doFinish(n,s,"加载完成，但加载过程中被隐藏")):(e.isPreload||n.show(a.args),t(n),e.doFinish(n,s,"加载完成，回调之前加载中的界面")):t(null)}loadPrefab(e,t,a,s){App.asset.load(e,t,i,a,(e=>{e&&e.data&&e.data instanceof i?s(e):s(null)}))}get prefabs(){return this._prefabs||a(this._prefabs)||(this._prefabs=r("prefabs",this.canvas)),this._prefabs}get root3D(){return r("3d",this.canvas.parent)}get camera3d(){var e;return null==(e=r("Camera3D",this.canvas.parent))?void 0:e.getComponent(o)}get screenShotCamera(){var e;return null==(e=r("ScreenShotCamera",this.canvas))?void 0:e.getComponent(o)}get uiCamera(){var e;return null==(e=r("UICamera",this.canvas))?void 0:e.getComponent(o)}getScenePrefab(e){return r(e,this.prefabs)}onLoad(e){this._canvas=e}onDestroy(e){this.clear()}get canvas(){return this._canvas}addView(e,t){App.layerMgr.add(e,t)}addLocal(e,t){let a=this.getViewData(t);a&&a.loadData.addLocal(e,t)}addRemote(e,t){let a=this.getViewData(t);a&&a.loadData.addRemote(e,t)}close(e){let t=this.getViewData(e);t&&this._close(t)}_close(e){let t=e.name;App.releaseManger.releaseUI(e),this._viewDatas.delete(t),Log.d(`${this.module} close view : ${t}`)}closeExcept(e){let t=this;if(null==e||null==e||0==e.length)return void this._viewDatas.forEach(((e,a)=>{t.close(a)}));let a=new Set;for(let t=0;t<e.length;t++)a.add(this.getClassName(e[t]));this._viewDatas.forEach(((e,s)=>{a.has(s)||t.close(s)}))}closeBundleView(e){let t=this;this._viewDatas.forEach(((a,s)=>{a.bundle==e&&t.close(s)}))}hide(e){let t=this.getViewData(e);t&&(t.isLoaded?t.view&&a(t.view.node)&&t.view.hide():t.status=d.WATITING_HIDE)}getView(e,t){if(null==e||null==e||""==e)return t&&t(null),null;let a=this.getViewData(e);return a?a.isPreload?(t&&t(null),null):a.isLoaded?(t&&t(a.view),a.view):(a.finishCb.push(t),null):(t&&t(null),null)}getViewAsync(e){return new Promise(((t,a)=>{this.getView(e,(e=>{t(e)}))}))}checkView(e,t){}isShow(e){let t=this.getViewData(e);return!(!t||t.isPreload)&&(!(!t.isLoaded||t.status!=d.WAITTING_NONE||!t.view)&&t.view.node.active)}addComponent(e){return App.layerMgr.addComponent(e)}removeComponent(e){App.layerMgr.removeComponent(e)}debug(){Log.d("-----------当前所有视图------------"),this._viewDatas.forEach(((e,t)=>{Log.d(`[${t}] isLoaded : ${e.isLoaded} status : ${e.status} view : ${s.getClassName(e.view)} active : ${!(!e.view||!e.view.node)&&e.view.node.active}`)}))}clear(...e){this.garbage.clear(),this.retainMemory.clear(),this._viewDatas.clear(),this._canvas=null,this._prefabs=null}}e("UIManager",g),g.module="【UI管理器】",t._RF.pop()}}}));

System.register("chunks:///_virtual/UIQRCode.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,r,o,s,i,n,l,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.initializerDefineProperty},function(t){o=t.cclegacy,s=t._decorator,i=t.Component,n=t.Graphics,l=t.UITransform,h=t.Color}],execute:function(){var a,u,g,c,p,f,m,d,C,y,L,b,w,B;o._RF.push({},"cc402xbQoJJwK8INJVjmBtx","UIQRCode",void 0);const _=1,k=2,P=4,D=8;class A{constructor(){this.buffer=[],this.length=0}get(t){let e=Math.floor(t/8);return 1==(this.buffer[e]>>>7-t%8&1)}put(t,e){for(let r=0;r<e;r++)this.putBit(1==(t>>>e-r-1&1))}getLengthInBits(){return this.length}putBit(t){let e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}}class E{constructor(t){this.mode=P,this.bytes=[],this.bytes=T.toUTF8Array(t)}getLength(){return this.bytes.length}write(t){for(let e=0;e<this.bytes.length;e++)t.put(this.bytes[e],8)}}class T{constructor(t,e){this.typeNumber=0,this.errorCorrectLevel=0,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[],this.typeNumber=t,this.errorCorrectLevel=e}addData(t){let e=new E(t);this.dataList.push(e),this.dataCache=null}isDark(t,e){if(t<0||this.moduleCount<=t||e<0||this.moduleCount<=e)throw new Error(t+","+e);return this.modules[t][e]}getModuleCount(){return this.moduleCount}make(){if(this.typeNumber<1){let t=1;for(t=1;t<40;t++){let e=Q.getRSBlocks(t,this.errorCorrectLevel),r=new A,o=0;for(let t=0;t<e.length;t++)o+=e[t].dataCount;for(let e=0;e<this.dataList.length;e++){let o=this.dataList[e];r.put(o.mode,4),r.put(o.getLength(),j.getLengthInBits(o.mode,t)),o.write(r)}if(r.getLengthInBits()<=8*o)break}this.typeNumber=t}this.makeImpl(!1,this.getBestMaskPattern())}makeImpl(t,e){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(let t=0;t<this.moduleCount;t++){this.modules[t]=new Array(this.moduleCount);for(let e=0;e<this.moduleCount;e++)this.modules[t][e]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,e),this.typeNumber>=7&&this.setupTypeNumber(t),null==this.dataCache&&(this.dataCache=T.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,e)}setupPositionProbePattern(t,e){for(let r=-1;r<=7;r++)if(!(t+r<=-1||this.moduleCount<=t+r))for(let o=-1;o<=7;o++)e+o<=-1||this.moduleCount<=e+o||(this.modules[t+r][e+o]=0<=r&&r<=6&&(0==o||6==o)||0<=o&&o<=6&&(0==r||6==r)||2<=r&&r<=4&&2<=o&&o<=4)}getBestMaskPattern(){let t=0,e=0;for(let r=0;r<8;r++){this.makeImpl(!0,r);let o=j.getLostPoint(this);(0==r||t>o)&&(t=o,e=r)}return e}setupTimingPattern(){for(let t=8;t<this.moduleCount-8;t++)null==this.modules[t][6]&&(this.modules[t][6]=t%2==0);for(let t=8;t<this.moduleCount-8;t++)null==this.modules[6][t]&&(this.modules[6][t]=t%2==0)}setupPositionAdjustPattern(){let t=j.getPatternPosition(this.typeNumber);for(let e=0;e<t.length;e++)for(let r=0;r<t.length;r++){let o=t[e],s=t[r];if(null==this.modules[o][s])for(let t=-2;t<=2;t++)for(let e=-2;e<=2;e++)this.modules[o+t][s+e]=-2==t||2==t||-2==e||2==e||0==t&&0==e}}setupTypeNumber(t){let e=j.getBCHTypeNumber(this.typeNumber);for(let r=0;r<18;r++){let o=!t&&1==(e>>r&1);this.modules[Math.floor(r/3)][r%3+this.moduleCount-8-3]=o}for(let r=0;r<18;r++){let o=!t&&1==(e>>r&1);this.modules[r%3+this.moduleCount-8-3][Math.floor(r/3)]=o}}setupTypeInfo(t,e){let r=this.errorCorrectLevel<<3|e,o=j.getBCHTypeInfo(r);for(let e=0;e<15;e++){let r=!t&&1==(o>>e&1);e<6?this.modules[e][8]=r:e<8?this.modules[e+1][8]=r:this.modules[this.moduleCount-15+e][8]=r}for(let e=0;e<15;e++){let r=!t&&1==(o>>e&1);e<8?this.modules[8][this.moduleCount-e-1]=r:e<9?this.modules[8][15-e-1+1]=r:this.modules[8][15-e-1]=r}this.modules[this.moduleCount-8][8]=!t}mapData(t,e){let r=-1,o=this.moduleCount-1,s=7,i=0;for(let n=this.moduleCount-1;n>0;n-=2)for(6==n&&n--;;){for(let r=0;r<2;r++)if(null==this.modules[o][n-r]){let l=!1;i<t.length&&(l=1==(t[i]>>>s&1)),j.getMask(e,o,n-r)&&(l=!l),this.modules[o][n-r]=l,s--,-1==s&&(i++,s=7)}if(o+=r,o<0||this.moduleCount<=o){o-=r,r=-r;break}}}static createData(t,e,r){let o=Q.getRSBlocks(t,e),s=new A;for(let e=0;e<r.length;e++){let o=r[e];s.put(o.mode,4),s.put(o.getLength(),j.getLengthInBits(o.mode,t)),o.write(s)}let i=0;for(let t=0;t<o.length;t++)i+=o[t].dataCount;if(s.getLengthInBits()>8*i)throw new Error("code length overflow. ("+s.getLengthInBits()+">"+8*i+")");for(s.getLengthInBits()+4<=8*i&&s.put(0,4);s.getLengthInBits()%8!=0;)s.putBit(!1);for(;!(s.getLengthInBits()>=8*i||(s.put(T.PAD0,8),s.getLengthInBits()>=8*i));)s.put(T.PAD1,8);return T.createBytes(s,o)}static createBytes(t,e){let r=0,o=0,s=0,i=new Array(e.length),n=new Array(e.length);for(let l=0;l<e.length;l++){let h=e[l].dataCount,a=e[l].totalCount-h;o=Math.max(o,h),s=Math.max(s,a),i[l]=new Array(h);for(let e=0;e<i[l].length;e++)i[l][e]=255&t.buffer[e+r];r+=h;let u=j.getErrorCorrectPolynomial(a),g=new U(i[l],u.getLength()-1).mod(u);n[l]=new Array(u.getLength()-1);for(let t=0;t<n[l].length;t++){let e=t+g.getLength()-n[l].length;n[l][t]=e>=0?g.get(e):0}}let l=0;for(let t=0;t<e.length;t++)l+=e[t].totalCount;let h=new Array(l),a=0;for(let t=0;t<o;t++)for(let r=0;r<e.length;r++)t<i[r].length&&(h[a++]=i[r][t]);for(let t=0;t<s;t++)for(let r=0;r<e.length;r++)t<n[r].length&&(h[a++]=n[r][t]);return h}static toUTF8Array(t){for(var e=[],r=0;r<t.length;r++){var o=t.charCodeAt(r);o<128?e.push(o):o<2048?e.push(192|o>>6,128|63&o):o<55296||o>=57344?e.push(224|o>>12,128|o>>6&63,128|63&o):(r++,o=65536+((1023&o)<<10|1023&t.charCodeAt(r)),e.push(240|o>>18,128|o>>12&63,128|o>>6&63,128|63&o))}return e}}T.PAD0=236,T.PAD1=17;const I=1,N=0,z=3,M=2,O=0,R=1,v=2,H=3,S=4,G=5,x=6,X=7;class j{static getBCHTypeInfo(t){let e=t<<10;for(;j.getBCHDigit(e)-j.getBCHDigit(j.G15)>=0;)e^=j.G15<<j.getBCHDigit(e)-j.getBCHDigit(j.G15);return(t<<10|e)^j.G15_MASK}static getBCHTypeNumber(t){let e=t<<12;for(;j.getBCHDigit(e)-j.getBCHDigit(j.G18)>=0;)e^=j.G18<<j.getBCHDigit(e)-j.getBCHDigit(j.G18);return t<<12|e}static getBCHDigit(t){let e=0;for(;0!=t;)e++,t>>>=1;return e}static getPatternPosition(t){return j.PATTERN_POSITION_TABLE[t-1]}static getMask(t,e,r){switch(t){case O:return(e+r)%2==0;case R:return e%2==0;case v:return r%3==0;case H:return(e+r)%3==0;case S:return(Math.floor(e/2)+Math.floor(r/3))%2==0;case G:return e*r%2+e*r%3==0;case x:return(e*r%2+e*r%3)%2==0;case X:return(e*r%3+(e+r)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}}static getErrorCorrectPolynomial(t){let e=new U([1],0);for(let r=0;r<t;r++)e=e.multiply(new U([1,K.gexp(r)],0));return e}static getLengthInBits(t,e){if(1<=e&&e<10)switch(t){case _:return 10;case k:return 9;case P:case D:return 8;default:throw new Error("mode:"+t)}else if(e<27)switch(t){case _:return 12;case k:return 11;case P:return 16;case D:return 10;default:throw new Error("mode:"+t)}else{if(!(e<41))throw new Error("type:"+e);switch(t){case _:return 14;case k:return 13;case P:return 16;case D:return 12;default:throw new Error("mode:"+t)}}}static getLostPoint(t){let e=t.getModuleCount(),r=0;for(let o=0;o<e;o++)for(let s=0;s<e;s++){let i=0,n=t.isDark(o,s);for(let r=-1;r<=1;r++)if(!(o+r<0||e<=o+r))for(let l=-1;l<=1;l++)s+l<0||e<=s+l||0==r&&0==l||n==t.isDark(o+r,s+l)&&i++;i>5&&(r+=3+i-5)}for(let o=0;o<e-1;o++)for(let s=0;s<e-1;s++){let e=0;t.isDark(o,s)&&e++,t.isDark(o+1,s)&&e++,t.isDark(o,s+1)&&e++,t.isDark(o+1,s+1)&&e++,0!=e&&4!=e||(r+=3)}for(let o=0;o<e;o++)for(let s=0;s<e-6;s++)t.isDark(o,s)&&!t.isDark(o,s+1)&&t.isDark(o,s+2)&&t.isDark(o,s+3)&&t.isDark(o,s+4)&&!t.isDark(o,s+5)&&t.isDark(o,s+6)&&(r+=40);for(let o=0;o<e;o++)for(let s=0;s<e-6;s++)t.isDark(s,o)&&!t.isDark(s+1,o)&&t.isDark(s+2,o)&&t.isDark(s+3,o)&&t.isDark(s+4,o)&&!t.isDark(s+5,o)&&t.isDark(s+6,o)&&(r+=40);let o=0;for(let r=0;r<e;r++)for(let s=0;s<e;s++)t.isDark(s,r)&&o++;return r+=10*(Math.abs(100*o/e/e-50)/5),r}}j.PATTERN_POSITION_TABLE=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],j.G15=1335,j.G18=7973,j.G15_MASK=21522;class K{static glog(t){if(t<1)throw new Error("glog("+t+")");return K.LOG_TABLE[t]}static gexp(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return K.EXP_TABLE[t]}}K.EXP_TABLE=new Array(256),K.LOG_TABLE=new Array(256);for(let t=0;t<8;t++)K.EXP_TABLE[t]=1<<t;for(let t=8;t<256;t++)K.EXP_TABLE[t]=K.EXP_TABLE[t-4]^K.EXP_TABLE[t-5]^K.EXP_TABLE[t-6]^K.EXP_TABLE[t-8];for(let t=0;t<255;t++)K.LOG_TABLE[K.EXP_TABLE[t]]=t;class U{constructor(t,e){if(this.num=[],null==t.length)throw new Error(t.length+"/"+e);let r=0;for(;r<t.length&&0==t[r];)r++;this.num=new Array(t.length-r+e);for(let e=0;e<t.length-r;e++)this.num[e]=t[e+r]}get(t){return this.num[t]}getLength(){return this.num.length}multiply(t){let e=new Array(this.getLength()+t.getLength()-1);for(let r=0;r<this.getLength();r++)for(let o=0;o<t.getLength();o++)e[r+o]^=K.gexp(K.glog(this.get(r))+K.glog(t.get(o)));return new U(e,0)}mod(t){if(this.getLength()-t.getLength()<0)return this;let e=K.glog(this.get(0))-K.glog(t.get(0)),r=new Array(this.getLength());for(let t=0;t<this.getLength();t++)r[t]=this.get(t);for(let o=0;o<t.getLength();o++)r[o]^=K.gexp(K.glog(t.get(o))+e);return new U(r,0).mod(t)}}class Q{constructor(t,e){this.totalCount=0,this.dataCount=0,this.totalCount=t,this.dataCount=e}static getRSBlocks(t,e){let r=Q.getRsBlockTable(t,e);if(null==r)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+e);let o=r.length/3,s=new Array;for(let t=0;t<o;t++){let e=r[3*t+0],o=r[3*t+1],i=r[3*t+2];for(let t=0;t<e;t++)s.push(new Q(o,i))}return s}static getRsBlockTable(t,e){switch(e){case I:return Q.RS_BLOCK_TABLE[4*(t-1)+0];case N:return Q.RS_BLOCK_TABLE[4*(t-1)+1];case z:return Q.RS_BLOCK_TABLE[4*(t-1)+2];case M:return Q.RS_BLOCK_TABLE[4*(t-1)+3];default:return}}}Q.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];const{ccclass:F,property:J,menu:q}=s;t("default",(a=F("UIQRCode"),u=q("Quick渲染组件/UIQRCode"),g=J({displayName:"内容",tooltip:"内容"}),c=J({displayName:"背景颜色",tooltip:"设置背景颜色"}),p=J({displayName:"前景颜色",tooltip:"设置前景颜色"}),f=J({displayName:"边距",tooltip:"边距"}),m=J({displayName:"大小",tooltip:"大小"}),a(d=u((y=e((C=class extends i{constructor(...t){super(...t),r(this,"_str",y,this),r(this,"_backColor",L,this),r(this,"_foreColor",b,this),r(this,"_margin",w,this),r(this,"_size",B,this)}get graphics(){let t=this.getComponent(n);return t||this.addComponent(n)}get string(){return this._str}set string(t){this._str!=t&&(this._str=t,this.setContent())}get backColor(){return this._backColor}set backColor(t){this._backColor.equals(t)||(this._backColor=t,this.setContent())}get foreColor(){return this._foreColor}set foreColor(t){this._foreColor.equals(t)||(this._foreColor=t,this.setContent())}get margin(){return this._margin}set margin(t){this._margin!=t&&(this._margin=t,this.setContent())}get size(){return this._size}set size(t){var e;this._size!=t&&(this._size=t,null==(e=this.node.getComponent(l))||e.setContentSize(t,t),this.setContent())}onLoad(){var t;null==(t=this.node.getComponent(l))||t.setContentSize(this._size,this._size),this.setContent()}resetInEditor(){var t;null==(t=this.node.getComponent(l))||t.setContentSize(this._size,this._size),this.setContent()}setContent(){const t=this.graphics;t.clear();let e=this.node.getComponent(l);t.fillColor=this.backColor;let r=e.width,o=-r*e.anchorX,s=-r*e.anchorY;t.rect(o,s,r,r),t.fill(),t.close();let i=new T(-1,2);i.addData(this.string),i.make(),t.fillColor=this.foreColor;let n=r-2*this.margin,h=i.getModuleCount(),a=n/h,u=n/h,g=Math.ceil(a),c=Math.ceil(u);for(let e=0;e<h;e++)for(let r=0;r<h;r++)i.isDark(e,r)&&(t.rect(o+this.margin+r*a,o+n-u-Math.round(e*u)+this.margin,g,c),t.fill())}}).prototype,"_str",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Hello World!"}}),e(C.prototype,"string",[g],Object.getOwnPropertyDescriptor(C.prototype,"string"),C.prototype),L=e(C.prototype,"_backColor",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new h(h.WHITE)}}),e(C.prototype,"backColor",[c],Object.getOwnPropertyDescriptor(C.prototype,"backColor"),C.prototype),b=e(C.prototype,"_foreColor",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new h(h.BLACK)}}),e(C.prototype,"foreColor",[p],Object.getOwnPropertyDescriptor(C.prototype,"foreColor"),C.prototype),w=e(C.prototype,"_margin",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),e(C.prototype,"margin",[f],Object.getOwnPropertyDescriptor(C.prototype,"margin"),C.prototype),B=e(C.prototype,"_size",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 200}}),e(C.prototype,"size",[m],Object.getOwnPropertyDescriptor(C.prototype,"size"),C.prototype),d=C))||d)||d));o._RF.pop()}}}));

System.register("chunks:///_virtual/UIReconnect.ts",["cc","./Loading.ts"],(function(e){var t,n;return{setters:[function(e){t=e.cclegacy},function(e){n=e.default}],execute:function(){t._RF.push({},"eea64oh+bZBb7iXTe4r2WC1","UIReconnect",void 0);class c extends n{constructor(...e){super(...e),this.module=null,this.isResident=!0}startTimeOutTimer(e){}stopTimeOutTimer(){}}e("UIReconnect",c),c.module="【重连提示】",t._RF.pop()}}}));

System.register("chunks:///_virtual/UIRichText.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,r,s,a,n,o;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){r=t.cclegacy,s=t.Enum,a=t.CCString,n=t._decorator,o=t.RichText}],execute:function(){var p,u,l,c,y,g,h,d,b,_,m,D;r._RF.push({},"c60049vLz5LvZDBP64ObpCM","UIRichText",void 0);const{ccclass:f,property:x,menu:L}=n,O=s(App.Bundles);t("default",(p=f("UIRichText"),u=L("Quick渲染组件/UIRichText"),l=x({displayName:"语言包所在Bundle",type:O,tooltip:"语言包所在bundle"}),c=x({displayName:"语言包Key",tooltip:"所在Bundle中语言包的key,如果语言包在Bundle内，请先用injectLanguageData装饰语言包数据代理类"}),y=x({displayName:"语言包附加参数",tooltip:"附加参数，如果语言包中有 xx{0}{1},有两个占位的参数需要替换",type:a}),g=x({displayName:"是否启用多语言",tooltip:"是否启用多语言,默认为启用"}),p(h=u((b=e((d=class extends o{constructor(...t){super(...t),i(this,"_lan",b,this),i(this,"_bundle",_,this),i(this,"_params",m,this),this._isDirty=!0,i(this,"_mult",D,this)}get bundle(){return this._bundle}set bundle(t){this._bundle!=t&&(this._bundle=t,this._isDirty=!0)}get language(){return this._lan}set language(t){this.language!=t&&(this._lan=t,this._isDirty=!0)}get params(){return this._params}set params(t){this._params=t,this._isDirty=!0}get isUseMultilingual(){return this._mult}set isUseMultilingual(t){t!=this._mult&&(this._mult=t,this._isDirty=!0)}onLoad(){super.onLoad(),App.language.add(this),this.update(0)}onDestroy(){App.language.remove(this),super.onDestroy()}update(t){super.update&&super.update(t),this._isDirty&&(this.forceDoLayout(),this._isDirty=!1)}forceDoLayout(){if(this.isUseMultilingual){let t=this.bundle,e=O[t],i=App.getLanguage(this.language,this.params,e);this.string=i}}}).prototype,"_lan",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),_=e(d.prototype,"_bundle",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return O.resources}}),m=e(d.prototype,"_params",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),D=e(d.prototype,"_mult",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),e(d.prototype,"bundle",[l],Object.getOwnPropertyDescriptor(d.prototype,"bundle"),d.prototype),e(d.prototype,"language",[c],Object.getOwnPropertyDescriptor(d.prototype,"language"),d.prototype),e(d.prototype,"params",[y],Object.getOwnPropertyDescriptor(d.prototype,"params"),d.prototype),e(d.prototype,"isUseMultilingual",[g],Object.getOwnPropertyDescriptor(d.prototype,"isUseMultilingual"),d.prototype),h=d))||h)||h));r._RF.pop()}}}));

System.register("chunks:///_virtual/UISprite.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Macros.ts"],(function(t){var e,i,r,s,a,o,l,n;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){r=t.cclegacy,s=t.Enum,a=t.CCString,o=t._decorator,l=t.Sprite},function(t){n=t.Macro}],execute:function(){var p,u,g,y,h,c,d,m,_,b,f,D,w,A,O,v,U,M;r._RF.push({},"51a47oGgppB6ZnHntSq3PUI","UISprite",void 0);const{ccclass:N,property:P,menu:j}=o,I=s(App.Bundles);t("default",(p=N("UISprite"),u=j("Quick渲染组件/UISprite"),g=P({displayName:"语言包所在Bundle",type:I,tooltip:"语言包所在bundle"}),y=P({displayName:"语言包Key",tooltip:"所在Bundle中语言包的key,如果语言包在Bundle内，请先用injectLanguageData装饰语言包数据代理类"}),h=P({displayName:"图集资源",tooltip:"图集资源"}),c=P({displayName:"远程地址",tooltip:"远程地址"}),d=P({displayName:"语言包附加参数",tooltip:"附加参数，如果语言包中有 xx{0}{1},有两个占位的参数需要替换",type:a}),m=P({displayName:"是否启用多语言",tooltip:"是否启用多语言,默认为启用"}),_=P({displayName:"资源持有人",tooltip:"资源持有人"}),p(b=u((D=e((f=class extends l{constructor(...t){super(...t),i(this,"_lan",D,this),i(this,"_bundle",w,this),i(this,"_params",A,this),this._isDirty=!0,i(this,"_mult",O,this),this.onLoadComplete=void 0,i(this,"_user",v,this),i(this,"_lanAtlas",U,this),i(this,"_remote",M,this)}get bundle(){return this._bundle}set bundle(t){this._bundle!=t&&(this._bundle=t,this._isDirty=!0)}get language(){return this._lan}set language(t){this.language!=t&&(this._lan=t,this._isDirty=!0)}get languageAtlas(){return this._lanAtlas}set languageAtlas(t){this._lanAtlas!=t&&(this._lanAtlas=t,this._isDirty=!0)}get isRemote(){return this._remote}set isRemote(t){this._remote!=t&&(this._remote=t,this._isDirty=!0)}get params(){return this._params}set params(t){this._params=t,this._isDirty=!0}get isUseMultilingual(){return this._mult}set isUseMultilingual(t){t!=this._mult&&(this._mult=t,this._isDirty=!0)}get user(){return this._user}set user(t){this._user=t}onLoad(){super.onLoad(),App.language.add(this),this.update(0)}onDestroy(){App.language.remove(this),super.onDestroy()}update(t){super.update&&super.update(t),this._isDirty&&(this.forceDoLayout(),this._isDirty=!1)}async forceDoLayout(){if(this.isUseMultilingual){let e=this.bundle,i=I[e];if(!App.bundleManager.getBundle(i))return;let r=App.getLanguage(this.language,this.params,i);if(!r)return;let s=await App.uiManager.getViewAsync(this.user);var t;if(!s)s=null==(t=App.releaseManger.getUI(this.user,!1))?void 0:t.view;if(this.isRemote)this.loadRemoteImage({url:r,view:s,isNeedCache:!0});else if(this.languageAtlas.length>0){let t=App.getLanguage(this.languageAtlas,[],i);this.loadImage({url:{urls:t,key:r},view:s,bundle:i})}else this.loadImage({url:r,view:s,bundle:i})}}}).prototype,"_lan",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),w=e(f.prototype,"_bundle",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return I.resources}}),A=e(f.prototype,"_params",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),O=e(f.prototype,"_mult",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),v=e(f.prototype,"_user",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return n.UNKNOWN}}),U=e(f.prototype,"_lanAtlas",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),M=e(f.prototype,"_remote",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),e(f.prototype,"bundle",[g],Object.getOwnPropertyDescriptor(f.prototype,"bundle"),f.prototype),e(f.prototype,"language",[y],Object.getOwnPropertyDescriptor(f.prototype,"language"),f.prototype),e(f.prototype,"languageAtlas",[h],Object.getOwnPropertyDescriptor(f.prototype,"languageAtlas"),f.prototype),e(f.prototype,"isRemote",[c],Object.getOwnPropertyDescriptor(f.prototype,"isRemote"),f.prototype),e(f.prototype,"params",[d],Object.getOwnPropertyDescriptor(f.prototype,"params"),f.prototype),e(f.prototype,"isUseMultilingual",[m],Object.getOwnPropertyDescriptor(f.prototype,"isUseMultilingual"),f.prototype),e(f.prototype,"user",[_],Object.getOwnPropertyDescriptor(f.prototype,"user"),f.prototype),b=f))||b)||b));r._RF.pop()}}}));

System.register("chunks:///_virtual/UIView.ts",["cc","./EventComponent.ts","./AudioComponent.ts","./Macros.ts"],(function(e){var t,n,o,s,i,r,a,h;return{setters:[function(e){t=e.cclegacy,n=e._decorator,o=e.Input,s=e.KeyCode,i=e.Game},function(e){r=e.default},function(e){a=e.default},function(e){h=e.Macro}],execute:function(){var c,l;t._RF.push({},"88e0cFi4dhOUr9sdD/3nRz4","UIView",void 0);const{ccclass:d,property:u,menu:g}=n;e("default",d("UIView")(c=g("Quick公共组件/UIView")(((l=class extends r{constructor(...e){super(...e),this._logic=null,this._args=void 0,this._className="unknow",this._bundle=null,this._enabledKeyUp=!1,this._enabledKeyDown=!1,this.audioHelper=null,this._enterBackgroundTime=0,this._enableFrontAndBackgroundSwitch=!1}static getPrefabUrl(){return Log.e("请求实现public static getPrefabUrl"),h.UNKNOWN}get args(){return this._args}set args(e){this._args=e}set className(e){this._className=e}get className(){return this._className}set bundle(e){this._bundle=e}get bundle(){return this._bundle}get closeAction(){return null}close(){const e=this.closeAction;e?e.then((()=>{App.uiManager.close(this.className)})):App.uiManager.close(this.className)}get showAction(){return null}show(e){this._args=e,this.node&&(this.node.active=!0),this.onShow(),this.showAction}get hideAction(){return null}hide(){const e=this.hideAction;e?e.then((()=>{this.node&&this.node.removeFromParent()})):this.node&&this.node.removeFromParent()}get enabledKeyUp(){return this._enabledKeyUp}set enabledKeyUp(e){this._enabledKeyUp=e,e?this.onI(o.EventType.KEY_UP,this.onKeyUp):this.offI(o.EventType.KEY_UP,this.onKeyUp)}get enabledKeyDown(){return this._enabledKeyUp}set enabledKeyDown(e){this._enabledKeyUp=e,e?this.onI(o.EventType.KEY_DOWN,this.onKeyDown):this.offI(o.EventType.KEY_DOWN,this.onKeyDown)}onKeyUp(e){e.keyCode==s.ESCAPE?this.onKeyBackUp(e):e.propagationStopped=!0}onKeyDown(e){e.keyCode==s.ESCAPE?this.onKeyBackDown(e):e.propagationStopped=!0}onKeyBackUp(e){e.propagationStopped=!0}onKeyBackDown(e){e.propagationStopped=!0}onLoad(){this.audioHelper=this.addComponent(a),this.audioHelper.owner=this;let e=App.logicManager.get(this,!0);e&&e.onLoad(this),this._logic=e,super.onLoad()}set enableFrontAndBackgroundSwitch(e){this._enableFrontAndBackgroundSwitch=e,e?(this.onG(i.EVENT_SHOW,this._onEnterForgeGround),this.onG(i.EVENT_HIDE,this._onEnterBackground)):(this.offG(i.EVENT_SHOW,this._onEnterForgeGround),this.offG(i.EVENT_HIDE,this._onEnterBackground))}get enableFrontAndBackgroundSwitch(){return this._enableFrontAndBackgroundSwitch}_onEnterBackground(){this._enterBackgroundTime=Date.timeNow(),this.onEnterBackground()}_onEnterForgeGround(){let e=Date.timeNow()-this._enterBackgroundTime;this.onEnterForgeground(e)}onEnterForgeground(e){}onEnterBackground(){}onClose(){}onShow(){let e=App.logicManager.get(this,!1);var t;e||(e=App.logicManager.get(this,!0),null==(t=e)||t.onLoad(this));this._logic=e}onDestroy(){this._logic&&App.logicManager.destory(this._logic.module),super.onDestroy()}update(e){this._logic&&this._logic.update(e)}reset(){this._logic&&this._logic.reset(this)}}).logicType=null,c=l))||c)||c);t._RF.pop()}}}));

System.register("chunks:///_virtual/Update.ts",["cc","./Macros.ts"],(function(E){var t,D,_;return{setters:[function(E){t=E.cclegacy,D=E.native},function(E){_=E.Macro}],execute:function(){let e;E("Update",void 0),t._RF.push({},"3d08aMS7tVOUJAnh86aBZlX","Update",void 0),function(E){E.MAIN_PACK=_.MAIN_PACK_BUNDLE_NAME,E.MANIFEST_ROOT="manifest/";let t=function(E){return E[E.ERROR_NO_LOCAL_MANIFEST=0]="ERROR_NO_LOCAL_MANIFEST",E[E.ERROR_DOWNLOAD_MANIFEST=1]="ERROR_DOWNLOAD_MANIFEST",E[E.ERROR_PARSE_MANIFEST=2]="ERROR_PARSE_MANIFEST",E[E.NEW_VERSION_FOUND=3]="NEW_VERSION_FOUND",E[E.ALREADY_UP_TO_DATE=4]="ALREADY_UP_TO_DATE",E[E.UPDATE_PROGRESSION=5]="UPDATE_PROGRESSION",E[E.ASSET_UPDATED=6]="ASSET_UPDATED",E[E.ERROR_UPDATING=7]="ERROR_UPDATING",E[E.UPDATE_FINISHED=8]="UPDATE_FINISHED",E[E.UPDATE_FAILED=9]="UPDATE_FAILED",E[E.ERROR_DECOMPRESS=10]="ERROR_DECOMPRESS",E[E.PRE_VERSIONS_NOT_FOUND=11]="PRE_VERSIONS_NOT_FOUND",E[E.UNINITED=12]="UNINITED",E}({});E.Code=t;let e=function(E){return E[E.UNINITED=0]="UNINITED",E[E.UNCHECKED=1]="UNCHECKED",E[E.PREDOWNLOAD_VERSION=2]="PREDOWNLOAD_VERSION",E[E.DOWNLOADING_VERSION=3]="DOWNLOADING_VERSION",E[E.VERSION_LOADED=4]="VERSION_LOADED",E[E.PREDOWNLOAD_MANIFEST=5]="PREDOWNLOAD_MANIFEST",E[E.DOWNLOADING_MANIFEST=6]="DOWNLOADING_MANIFEST",E[E.MANIFEST_LOADED=7]="MANIFEST_LOADED",E[E.NEED_UPDATE=8]="NEED_UPDATE",E[E.PREDOWNLOAD_UPDATE=9]="PREDOWNLOAD_UPDATE",E[E.READY_TO_UPDATE=10]="READY_TO_UPDATE",E[E.UPDATING=11]="UPDATING",E[E.UNZIPPING=12]="UNZIPPING",E[E.UP_TO_DATE=13]="UP_TO_DATE",E[E.FAIL_TO_UPDATE=14]="FAIL_TO_UPDATE",E}({});E.State=e;let A=function(E){return E[E.NEED_DOWNLOAD=0]="NEED_DOWNLOAD",E[E.UP_TO_DATE=1]="UP_TO_DATE",E[E.NEED_UPDATE=2]="NEED_UPDATE",E}({});E.Status=A;class N{constructor(E,t){this.bundle="",this.name="",this.name=E,this.bundle=t}clone(){return new N(this.name,this.bundle)}}E.Config=N;E.AssetsManager=class{constructor(E,t){this.name="",this._manager=null,this.type="",this.storagePath="",this.name=E,this.type=`type.${E}`,this.storagePath=t,this.create()}get manager(){return this._manager||this.create(),this._manager}set manager(E){this._manager=E}reset(){this.manager.reset()}removeCache(){this.manager.removeBundle(this.storagePath),this.manager.removeBundle(this.storagePath.substring(0,this.storagePath.length-1)+"_temp/"),dispatch(_.ON_DELETE_BUNDLE_CACHE,this.name)}create(){Log.d(`创建 ${this.name} AssetsManager`),this.manager=new D.AssetsManager(this.type,this.storagePath)}}}(e||(e=E("Update",{}))),t._RF.pop()}}}));

System.register("chunks:///_virtual/UpdateItem.ts",["cc","./Macros.ts","./Update.ts"],(function(e){var t,s,a,d,n;return{setters:[function(e){t=e.cclegacy,s=e.native,a=e.game},function(e){d=e.Macro},function(e){n=e.Update}],execute:function(){t._RF.push({},"7c9a6PDI79IarK+jVWGiFP0","UpdateItem",void 0);e("UpdateItem",class{get name(){return App.getLanguage(this._name)}get assetsManager(){return App.updateManager.getAssetsManager(this)}get code(){return this.isBrowser?n.Code.ALREADY_UP_TO_DATE:this._code}set code(e){this._code=e}get state(){return this.isBrowser?n.State.UP_TO_DATE:this._state}set state(e){this._state=e}constructor(e){this._name="",this.bundle="",this.handler=null,this.userData=null,this.isLoaded=!1,this._code=n.Code.UNINITED,this._state=n.State.UNINITED,this._name=e.name,this.bundle=e.bundle}get updateName(){return this.assetsManager.name}get isBrowser(){return App.updateManager.isBrowser}reset(){this.state=n.State.UNINITED,this.code=n.Code.UNINITED,Log.d(`${this.bundle} AssetsManager 重置`),this.assetsManager.manager.reset()}convertBundle(e){return App.updateManager.convertBundle(e)}getProjectString(){return App.updateManager.getProjectString(this.bundle)}checkUpdate(){this.handler.onStarCheckUpdate(this),this.checkBundleUpdate()}get isMain(){return this.assetsManager.name==n.MAIN_PACK}get remoteMd5(){return this.assetsManager.manager.getRemoteManifest().getMd5()}get storagePath(){return App.updateManager.storagePath}get hotUpdateUrl(){return App.updateManager.realHotUpdateUrl}get isUpdating(){let e=e=>e==n.State.PREDOWNLOAD_VERSION?(Log.d(`${this.bundle} 准备下载版本文件`),!0):e==n.State.DOWNLOADING_VERSION?(Log.d(`${this.bundle} 下载版本文件中`),!0):e==n.State.PREDOWNLOAD_MANIFEST?(Log.d(`${this.bundle} 准备下载project文件`),!0):e==n.State.DOWNLOADING_MANIFEST?(Log.d(`${this.bundle} 下载project文件中`),!0):e==n.State.VERSION_LOADED?(Log.d(`${this.bundle} 下载版本文件完成，下一步骤会解析版本文件，也算在更新过程中`),!0):e==n.State.MANIFEST_LOADED?(Log.d(`${this.bundle} 下载project文件完成,下载步骤会解析project文件，也算在更新过程中`),!0):e==n.State.UPDATING?(Log.d(`${this.bundle} 正在更新中`),!0):void 0;return e(this.assetsManager.manager.getState())?(Log.d(`${this.bundle} C++层更新中`),!0):!!e(this.state)&&(Log.d(`${this.bundle} TS层更新中`),!0)}checkBundleUpdate(){if(this.assetsManager.manager.getLocalManifest()&&(Log.d(`${this.bundle} 本地文件已经加载完成,直接进入更新流程`),this.isUpdating))return Log.d(`${this.bundle} 正在检测更新中...`),void this.handler.onShowUpdating(this);let e=this.getProjectString();if(e){let t=new s.Manifest(e,this.storagePath,this.hotUpdateUrl);Log.d(`${this.bundle} --存在本地版本控制文件checkUpdate--`),this.assetsManager.manager.loadLocalManifest(t,""),this._checkUpdate()}else{let e={version:"0",bundle:this.convertBundle(this.bundle),md5:d.UNKNOWN},t=JSON.stringify(e),a=new s.Manifest(t,this.storagePath,this.hotUpdateUrl);Log.d(`${this.bundle} 检测更新`),Log.d(`${this.bundle} 版本信息 : ${t}`),this.assetsManager.manager.loadLocalManifest(a,""),this._checkUpdate()}}_checkUpdate(){Log.d(`${this.bundle} 进入检测更新`),this.state=n.State.UPDATING,this.assetsManager.manager.setEventCallback(this.checkCb.bind(this)),this.assetsManager.manager.checkUpdate()}checkCb(e){let t=e.getEventCode(),s=this.assetsManager.manager.getState();switch(Log.d(`${this.bundle} checkCb event code : ${t} state : ${s}`),t){case n.Code.ERROR_NO_LOCAL_MANIFEST:Log.d(`${this.bundle} No local manifest file found, hot update skipped.`);break;case n.Code.ERROR_DOWNLOAD_MANIFEST:case n.Code.ERROR_PARSE_MANIFEST:Log.d(`${this.bundle} Fail to download manifest file, hot update skipped.`);break;case n.Code.ALREADY_UP_TO_DATE:Log.d(`${this.bundle} Already up to date with the latest remote version.`);break;case n.Code.NEW_VERSION_FOUND:Log.d(`${this.bundle} New version found, please try to update.`);break;default:return}this.state=s,this.code=t,t==n.Code.NEW_VERSION_FOUND?this.handler.onNewVersionFund(this):t==n.Code.ALREADY_UP_TO_DATE?this.handler.onAreadyUpToData(this):t==n.Code.ERROR_DOWNLOAD_MANIFEST||t==n.Code.ERROR_NO_LOCAL_MANIFEST||t==n.Code.ERROR_PARSE_MANIFEST||t==n.Code.PRE_VERSIONS_NOT_FOUND?this.handler.onUpdateFailed(this):this.handler.onOther(this)}doUpdate(){Log.d(`${this.bundle} 即将热更新, updating : ${this.isUpdating}`),this.isUpdating||(Log.d(`${this.bundle} 执行更新 `),this.assetsManager.manager.setEventCallback(this.updateCb.bind(this)),this.assetsManager.manager.update())}updateCb(e){let t=!1,d=!1,i=e.getEventCode(),o=this.assetsManager.manager.getState();switch(Log.d(`${this.bundle} --update cb code : ${i} state : ${o}`),i){case n.Code.ERROR_NO_LOCAL_MANIFEST:Log.d(`${this.bundle} No local manifest file found, hot update skipped.`),d=!0;break;case n.Code.UPDATE_PROGRESSION:Log.d(`${this.bundle} ${e.getDownloadedBytes()} / ${e.getTotalBytes()}`),Log.d(`${this.bundle} ${e.getDownloadedFiles()} / ${e.getTotalFiles()}`),Log.d(`${this.bundle} percent : ${e.getPercent()}`),Log.d(`${this.bundle} percent by file : ${e.getPercentByFile()}`),Log.d(`${this.bundle} assetId : ${e.getAssetId()}`);var r=e.getMessage();r&&Log.d(`${this.bundle} Updated file: ${r}`);break;case n.Code.ERROR_DOWNLOAD_MANIFEST:case n.Code.ERROR_PARSE_MANIFEST:Log.d(`${this.bundle} Fail to download manifest file, hot update skipped.`),d=!0;break;case n.Code.ALREADY_UP_TO_DATE:Log.d(`${this.bundle} Already up to date with the latest remote version`),d=!0;break;case n.Code.UPDATE_FINISHED:Log.d(`${this.bundle} Update finished. ${e.getMessage()}`),t=!0;break;case n.Code.UPDATE_FAILED:Log.d(`${this.bundle} Update failed. ${e.getMessage()}`);break;case n.Code.ERROR_UPDATING:Log.d(`${this.bundle} Asset update error: ${e.getAssetId()} , ${e.getMessage()}`);break;case n.Code.ERROR_DECOMPRESS:Log.d(`${this.bundle} ${e.getMessage()}`)}d&&this.assetsManager.manager.setEventCallback(null);let h=!1;this.isMain?t&&(this.assetsManager.manager.setEventCallback(null),e.getDownloadedFiles()>0&&(h=!0)):t&&(Log.d(`${this.bundle} 更新前是否加载过 : ${this.isLoaded}`),this.isLoaded&&e.getDownloadedFiles()>0&&(Log.d(`${this.bundle} 已经加载过，需要重启`),h=!0)),this.state=o,this.code=i;let l={downloadedBytes:e.getDownloadedBytes(),totalBytes:e.getTotalBytes(),downloadedFiles:e.getDownloadedFiles(),totalFiles:e.getTotalFiles(),percent:e.getPercent(),percentByFile:e.getPercentByFile(),code:e.getEventCode(),state:o,needRestart:h,bundle:this.bundle,assetId:e.getAssetId(),progress:0};l.code==n.Code.UPDATE_FINISHED?(l.progress=1.1,this.handler.onDownloading(this,l)):l.code==n.Code.UPDATE_PROGRESSION?(l.totalBytes<=0?l.progress=0:l.progress=l.percent==Number.NaN?0:l.percent,this.handler.onDownloading(this,l)):l.code==n.Code.ALREADY_UP_TO_DATE?(l.progress=1,this.handler.onDownloading(this,l)):l.code!=n.Code.UPDATE_FAILED&&l.code!=n.Code.ERROR_NO_LOCAL_MANIFEST&&l.code!=n.Code.ERROR_DOWNLOAD_MANIFEST&&l.code!=n.Code.ERROR_PARSE_MANIFEST&&l.code!=n.Code.ERROR_DECOMPRESS||(l.progress=-1,Log.e(`更新${this.name}失败`),this.handler.onUpdateFailed(this)),t&&(Log.d(`${this.bundle} 更新完成,下载资源数 : ${e.getDownloadedFiles()}`),h?(Log.d(`${this.bundle} 更新完成，需要重启游戏`),this.handler.onNeedRestartApp(this,(e=>{s.fileUtils.purgeCachedEntries();let t=.5;e&&(t=1),setTimeout((()=>{Log.d(`${this.bundle} 重启游戏`),a.restart()}),1e3*t)}))):(s.fileUtils.purgeCachedEntries(),this.reset(),this.handler.onDownloadComplete(this))),Log.d(`${this.bundle}update cb  failed : ${d}  , isRestartApp : ${h} isUpdateFinished : ${t} , updating : ${this.isUpdating}`)}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/UpdateLoading.ts",["cc","./Loading.ts"],(function(t){var e,s;return{setters:[function(t){e=t.cclegacy},function(t){s=t.default}],execute:function(){e._RF.push({},"634b97zYMlAP5z8Buea/nWN","UpdateLoading",void 0);class n extends s{constructor(...t){super(...t),this.module=null}show(t,e,s){return this.timeOutCb=void 0,this._show(999),this._content=[],"string"==typeof t&&this._content.push(t),this}startShowContent(){this.text.string=this._content[0]}updateProgress(t){if(this.text){if(null==t||null==t||Number.isNaN(t)||t<0)return void this.hide();(t*=100)>=0&&t<=100&&(this.text.string=App.getLanguage("loadingProgress",[t.toFixed(2)]))}}}t("default",n),n.module="【UpdateLoading】",e._RF.pop()}}}));

System.register("chunks:///_virtual/UpdateManager.ts",["cc","./Update.ts","./env","./Macros.ts","./UpdateItem.ts"],(function(t){var e,s,i,n,r,a,o;return{setters:[function(t){e=t.cclegacy,s=t.native,i=t.sys},function(t){n=t.Update},function(t){r=t.PREVIEW},function(t){a=t.Macro},function(t){o=t.UpdateItem}],execute:function(){e._RF.push({},"a8a370bCy5IT6wexJ6WyBkT","UpdateManager",void 0);class h{constructor(){this.isResident=!0,this.module=null,this.items=[],this.current=null,this._hotUpdateUrl="",this._isSkipUpdate=!1,this.assetsManagers={},this.remoteVersions=null,this.defaultVersion="1.0",this.defaultMD5=a.UNKNOWN,this.mainBundles=["src","jsb-adapter","assets/resources","assets/main","assets/internal","main.js"],this.isAutoVersion=!0,this.navigationData=null}get storagePath(){return s.fileUtils.getWritablePath()+"caches/"}get hotUpdateUrl(){return Log.d(`当前热更新地址为:${this._hotUpdateUrl}`),this._hotUpdateUrl}set hotUpdateUrl(t){this._hotUpdateUrl=t}get isSkipUpdate(){return!!this.isBrowser||this._isSkipUpdate}set isSkipUpdate(t){this._isSkipUpdate=t}get isBrowser(){return i.platform==i.Platform.WECHAT_GAME||r||i.isBrowser}getAssetsManager(t){let e=t.convertBundle(t.bundle);return this._getAssetsManager(e)}_getAssetsManager(t){return this.assetsManagers[t]||(this.assetsManagers[t]=new n.AssetsManager(t,this.storagePath),this.assetsManagers[t].manager.setMainBundles(this.mainBundles),this.assetsManagers[t].manager.setDownloadAgainZip(.8)),Log.d(`${this.module} 设置热更新地址为:${this.realHotUpdateUrl}`),this.assetsManagers[t].manager.setPackageUrl(this.realHotUpdateUrl),this.assetsManagers[t]}get realHotUpdateUrl(){return`${this.hotUpdateUrl}/${this.navigationVersion}`}removeBunbleCache(t){{let e=this._getAssetsManager(t);e&&e.removeCache()}}dowonLoad(t){this.isSkipUpdate?t.handler.onLoadBundle(t):(this.current=this.getItem(t),this.current?this.current.isUpdating?(Log.d(`${t.bundle} 正在更新中...`),this.current.handler.onShowUpdating(this.current)):(Log.d(`${t.bundle} 不在更新状态，进入更新...`),this._dowonLoad(t)):(Log.d(`${t.bundle} 放入下载队列中...`),this.items.push(t),this._dowonLoad(t)))}async _dowonLoad(t){if(this.current=t,await this.loadVersions(this.current)){this.getStatus(t.bundle)==n.Status.UP_TO_DATE?(t.state=n.State.UP_TO_DATE,Log.d(`${t.bundle} 已经是最新，直接进入...`),t.handler.onLoadBundle(t)):(Log.d(`${t.bundle} 进入检测更新...`),t.state=n.State.READY_TO_UPDATE,t.checkUpdate())}}getItem(t){if(t instanceof o)return this._getItem(t.bundle);{let e=this._getItem(t.bundle);return null==e&&(e=new o(t)),e}}_getItem(t){for(let e=0;e<this.items.length;e++)if(t==this.items[e].bundle)return this.items[e];return null}getStatus(t){if(this.isSkipUpdate)return n.Status.UP_TO_DATE;t=this.convertBundle(t);let e=this.getVersionInfo(t);return e?e.md5==this.remoteVersions[t].md5?n.Status.UP_TO_DATE:n.Status.NEED_UPDATE:n.Status.NEED_DOWNLOAD}get appVersion(){if(this.isBrowser)return this.defaultVersion;{let t=`${n.MANIFEST_ROOT}apk.json`,e=this.getString(t);if(e){return`v${JSON.parse(e).version}`}return Log.e(`${this.module}无法读取到${t}`),this.defaultVersion}}getMd5(t){if(this.isBrowser)return this.defaultMD5;{t=this.convertBundle(t);let e=this.getVersionInfo(t);return e?`${e.md5}`:this.remoteVersions[t]?(Log.w(`${this.module}本地无版本信息,返回远程版本${this.remoteVersions[t].md5}`),`${this.remoteVersions[t].md5}`):(Log.e(`${this.module}远程无版本信息，返回默认版本${this.defaultMD5}`),this.defaultMD5)}}getVersion(t){if(this.isBrowser)return this.defaultVersion;{t=this.convertBundle(t),this.isAutoVersion&&(t=a.MAIN_PACK_BUNDLE_NAME);let e=this.getVersionInfo(t);return e?`${e.version}`:this.remoteVersions[t]?(Log.w(`${this.module}本地无版本信息,返回远程版本${this.remoteVersions[t].version}`),`${this.remoteVersions[t].version}`):(Log.e(`${this.module}远程无版本信息，返回默认版本${this.defaultVersion}`),this.defaultVersion)}}getString(t){let e=`${this.storagePath}${t}`;return s.fileUtils.isFileExist(e)?s.fileUtils.getStringFromFile(e):s.fileUtils.isFileExist(t)?s.fileUtils.getStringFromFile(t):void 0}getVersionString(t){t=this.convertBundle(t);let e=`${n.MANIFEST_ROOT}${t}_version.json`;return this.getString(e)}getProjectString(t){t=this.convertBundle(t);let e=`${n.MANIFEST_ROOT}${t}_project.json`;return this.getString(e)}getVersionInfo(t){let e=this.getVersionString(t);if(e){return JSON.parse(e)}}loadVersions(t){return new Promise((async(e,i)=>{if(this.isBrowser)return void e(!0);t.state=n.State.PREDOWNLOAD_VERSION,t.handler.onShowUpdating(t);const r=()=>{this.remoteVersions={},t.state=n.State.FAIL_TO_UPDATE,t.code=n.Code.PRE_VERSIONS_NOT_FOUND,t.handler.onPreVersionFailed(t),Log.e(`${this.module} 加载${t.bundle}时，加载远程版本信息失败...`),e(!1)};if(await this.readNavigationVersion()){if(await this.readRemoteVersions()){let i=t.convertBundle(t.bundle);i==n.MAIN_PACK&&this.getStatus(i)==n.Status.UP_TO_DATE&&(Log.d(`${this.module} 主包已经是最新，写入远程的版本信息`),s.fileUtils.purgeCachedEntries()),Log.d(`${this.module} 加载${t.bundle}时，加载远程版本信息成功...`),t.state=n.State.VERSION_LOADED,e(!0)}else r()}else Log.e(`${this.module} 读取导航文件版本失败`),r()}))}convertBundle(t){return t==a.BUNDLE_RESOURCES?n.MAIN_PACK:t}readRemoteVersions(){return new Promise((t=>{App.http.fetch(`${this.realHotUpdateUrl}/${n.MANIFEST_ROOT}versions.json`,{timestamp:!0}).then((t=>t.json())).then((e=>{this.remoteVersions=e,t(e)})).catch((e=>{Log.e(`${this.module} 读取远程版本信息失败:${e.message}`),t(null)}))}))}get navigationVersion(){return this.navigationData?this.navigationData.whiteList?this.navigationData.whiteList.length>0&&this.navigationData.whiteList.indexOf(App.platform.uuid)>-1?this.navigationData.version:this.navigationData.onlineVersion:this.navigationData.version:null}readNavigationVersion(){return new Promise((t=>{this.navigationData?t(this.navigationData.version):App.http.fetch(`${this.hotUpdateUrl}/navigation.json`,{timestamp:!0}).then((t=>t.json())).then((e=>{this.navigationData=e,Log.d(`${this.module} 获取导航文件版本成功,热更新版本:${this.navigationData.version}`),t(this.navigationData.version)})).catch((e=>{t(null)}))}))}debug(){Log.d("-----------热更新管理器中相关信息------------"),Log.dump({name:"远程版本信息",data:this.remoteVersions})}}t("UpdateManager",h),h.module="【更新管理器】",e._RF.pop()}}}));

System.register("chunks:///_virtual/Utils.ts",["cc"],(function(e){var t,r,s,a,l,o;return{setters:[function(e){t=e.cclegacy,r=e.Tween,s=e.tween,a=e.Vec3,l=e.UITransform,o=e.safeMeasureText}],execute:function(){t._RF.push({},"834c7+oOQpO/pw/9yqGEA/H","Utils",void 0);class n{constructor(){this.module=null}showView(e){return new Promise(((t,l)=>{e?(r.stopAllByTarget(e),s(e).set({scale:new a(.2,.2,.2)}).to(.2,{scale:new a(1.15,1.15,1.15)}).delay(.05).to(.1,{scale:new a(1,1,1)}).call((()=>{t()})).start()):t()}))}hideView(e){return new Promise(((t,l)=>{e?(r.stopAllByTarget(e),s(e).to(.2,{scale:new a(1.15,1.15,1.15)}).to(.1,{scale:new a(.3,.3,.3)}).call((()=>{t()})).start()):t()}))}isMail(e){return/^([0-9A-Za-z\-_\.]+)@([0-9a-z]+\.[a-z]{2,3}(\.[a-z]{2})?)$/g.test(e)}isTEL(e){return/^1([358][0-9]|4[579]|66|7[0135678]|9[89])[0-9]{8}$/g.test(e)}limitString(e,t,r=100,s=".."){if(e){e.string=t,e.forceDoLayout();let a=e.getComponent(l).width;if(a<=r)return;let n=(a-r)/(a/t.length);n=Math.floor(n);let i=t.substring(0,t.length-n)+s;if(e.assemblerData&&e.assemblerData.context){let t=o(e.assemblerData.context,i);for(;t>r;)i=i.substring(0,i.length-s.length-1)+s,t=o(e.assemblerData.context,i)}e.string=i}}toThousandths(e,t={}){let r,s,a="";e<0&&(e*=-1,a="-");let l=t.point||2,o=t.locale||"en",n=t.floor||!1;switch(o.toLowerCase()){case"de":case"es":case"it":r=".",s=",";break;case"fr":case"ru":r=" ",s=",";break;case"en":default:r=",",s="."}if(n){let t=Math.pow(10,l);e=Math.floor(e*t)/t}else e=Number(e.toFixed(l));let[i,c]=e.toString().split("."),u=a+i.replace(/\B(?=(\d{3})+(?!\d))/g,r);return l>0&&(void 0===c?c="0".repeat(l):c.length<l&&(c=c.padEnd(l,"0")),u+=s+c),u}toFormat(e,t={}){let r=t.point||2,s=t.locale||"en",a=t.floor||!1;if(isNaN(e)||!isFinite(e))return"0";s.toLowerCase();const l=1e3,o={K:l,M:Math.pow(l,2),B:Math.pow(l,3),T:Math.pow(l,4)};let n=["K","M","B","T"],i="",c=0,u=1;if(e<0&&(u=-1),(e=Math.abs(e))<l)c=e;else for(let t=n.length-1;t>=0;t--){if(c=e/o[n[t]],c>=1){i=n[t];break}}let h=c*u;if(a){let e=Math.pow(10,r);h=Math.floor(h*e)/e}else h=Number(h.toFixed(r));return`${h.toFixed(r)}${i}`}isIDNumber(e){return!!/^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$/g.test(e)}uniqueArray(e,t){if(!t)return[...new Set(e)];const r=new Set;return e.filter((e=>{const s=e[t];return!r.has(s)&&(r.add(s),!0)}))}shuffleArray(e){const t=[...e];for(let e=t.length-1;e>0;e--){const r=Math.floor(Math.random()*(e+1));[t[e],t[r]]=[t[r],t[e]]}return t}delayMs(e){return new Promise((t=>{setTimeout(t,e)}))}async delay(e){await this.delayMs(1e3*e)}}e("Utils",n),n.module="【Utils】",t._RF.pop()}}}));

System.register("chunks:///_virtual/ViewAsset.ts",["cc","./Enums.ts","./Macros.ts"],(function(e){var s,t,i,a;return{setters:[function(e){s=e.cclegacy,t=e.isValid},function(e){i=e.ViewStatus},function(e){a=e.Macro}],execute:function(){let h;e("ViewAsset",void 0),s._RF.push({},"495c8uZF4FHy4BM1OaVadzK","ViewAsset",void 0),function(e){class s{constructor(e=null){this.local=new Map,this.remote=new Map,this.name=void 0,this.name=e}addLocal(e,s=null){this.name==a.DYNAMIC_LOAD_GARBAGE&&Log.e(`找不到资源持有者: ${e.key}`),this.local.has(e.key)||(App.asset.retainAsset(e),this.local.set(e.key,e))}addRemote(e,s=null){this.remote.has(e.key)||(this.name==a.DYNAMIC_LOAD_GARBAGE&&Log.e(`找不到资源持有者 : ${e.key}`),App.cache.remoteCaches.retainAsset(e),this.remote.set(e.key,e))}clear(e=!1){if(this.name==a.DYNAMIC_LOAD_GARBAGE){(this.local.size>0||this.remote.size>0)&&Log.e("当前未能释放资源如下:"),this.local&&this.local.size>0&&(Log.e("-----------local-----------"),this.local&&this.local.forEach(((e,s)=>{Log.e(s)}))),this.remote&&this.remote.size>0&&(Log.e("-----------remote-----------"),this.remote&&this.remote.forEach(((e,s)=>{Log.e(s)})))}else this.local&&(this.local.forEach(((e,s)=>{App.asset.releaseAsset(e)})),e||this.local.clear()),this.remote&&(this.remote.forEach(((e,s)=>{App.cache.remoteCaches.releaseAsset(e)})),e||this.remote.clear())}resume(e){let s=App.releaseManger.get(e.bundle,e.key);s&&(App.cache.set(s),App.asset.retainAsset(s))}resumeRelease(){this.local&&this.local.forEach(((e,s)=>{this.resume(e)})),this.remote&&this.remote.forEach(((e,s)=>{this.resume(e)}))}}e.Dynamic=s;e.Data=class{constructor(){this.isLoaded=!1,this.status=i.WAITTING_NONE,this.view=null,this.finishCb=[],this.isPreload=!1,this.isPrefab=!0,this.cache=null,this.viewType=null,this.bundle=null,this.loadData=new s,this.node=null,this.isCache=!1}get name(){return this.loadData.name}doFinish(e,s,t){for(let s=0;s<this.finishCb.length;s++){let t=this.finishCb[s];t&&t(e)}this.finishCb=[]}resumeRelease(){let e=this;return App.isLazyRelease&&this.isCache&&(t(this.view)&&t(this.node)?(this.isPrefab&&this.loadData.resume(this.cache),this.loadData.resumeRelease()):e=void 0),e}toRelease(){this.status=i.WAITTING_CLOSE;let e=App.isLazyRelease&&this.isCache,s=!1;return t(this.view)&&t(this.node)&&(this.node.removeFromParent(),this.view.onClose(),e?s=!0:this.node.destroy()),this.isPrefab&&this.cache&&App.asset.releaseAsset(this.cache),this.loadData.clear(e),s}destroy(){t(this.view)&&t(this.node)&&this.node.destroy()}}}(h||(h=e("ViewAsset",{}))),s._RF.pop()}}}));

System.register("chunks:///_virtual/WSMsgHandler.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"8b77e4fK5NCpZkIfZ6l+j5l","WSMsgHandler",void 0);e("WSMsgHandler",class{constructor(e){this.service=void 0,this._listeners={},this._masseageQueue=new Array,this._isDoingMessage=!1,this.isPause=!1,this._RPCQueue=[],this.service=e}addRPC(e){e.onTimeout=()=>{this.removeRPC(e)},this._RPCQueue.push(e)}removeRPC(e){for(let t=0;t<this._RPCQueue.length;t++)if(this._RPCQueue[t]==e){this._RPCQueue.splice(t,1);break}}async update(e){if(this.isPause)return;if(this._isDoingMessage)return;if(0==this._masseageQueue.length)return;let t=this._masseageQueue.shift();if(null==t)return;if(0==t.length)return;this._isDoingMessage=!0;let s=null;for(let e=0;e<t.length;e++){let i=t[e];s=await this.doSafeCall(i.func,i.data,i.target,s)}this._isDoingMessage=!1}onMessage(e,t){this.addQueue(e)}destroy(){this.stop(),this._listeners={}}stop(){this._masseageQueue=[];for(let e=0;e<this._RPCQueue.length;e++){const t=this._RPCQueue[e];try{t.resolve(null)}catch(e){Log.e(e)}t.stop()}this._RPCQueue=[],this._isDoingMessage=!1}onS(e,t,s,i,l){let u=e;if(this._listeners[u]){let r=!1;for(let e=0;e<this._listeners[u].length;e++)if(this._listeners[u][e].target===l){r=!0;break}if(r)return;this._listeners[u].push({cmd:e,func:s,type:t,isQueue:i,target:l})}else this._listeners[u]=[],this._listeners[u].push({cmd:e,func:s,type:t,isQueue:i,target:l})}offS(e,t){if(t){let s=this;Object.keys(this._listeners).forEach((i=>{let l=s._listeners[i],u=l.length;for(;u--;)l[u].target==e&&l[u].cmd==t&&l.splice(u,1);0==l.length&&delete s._listeners[i]}));let i=this._masseageQueue.length;for(;i--;){let s=this._masseageQueue[i],l=s.length;for(;l--;)s[l].target==e&&s[i].cmd==t&&s.splice(l,1);0==s.length&&this._masseageQueue.splice(i,1)}}else{let t=this;Object.keys(this._listeners).forEach(((s,i,l)=>{let u=t._listeners[s],r=u.length;for(;r--;)u[r].target==e&&u.splice(r,1);0==u.length&&delete t._listeners[s]}));let s=this._masseageQueue.length;for(;s--;){let t=this._masseageQueue[s],i=t.length;for(;i--;)t[i].target==e&&t.splice(i,1);0==t.length&&this._masseageQueue.splice(s,1)}}}async decode(e,t,s=null){if(this.service.flows.decodeMessageFlow.nodes.length>0){let i=s;i||(i=e);const l=await this.service.flows.decodeMessageFlow.exec({service:this.service,message:t,decodeData:i,result:null});return l?l.result:null}return null}async addQueue(e){const t=e.cmd;let s=[],i=[];for(let s=this._RPCQueue.length-1;s>=0;s--){const l=this._RPCQueue[s];let u=e;if(t==l.cmd&&(u=await this.decode(null,e,l),u)){i[t]=u;try{l.resolve(u)}catch(e){Log.e(e)}l.stop(),this._RPCQueue.splice(s,1)}}if(!(this._listeners[t]&&this._listeners[t].length>0))return i[t],void(i={});const l=this._listeners[t];l.length;let u=null;for(let t=0;t<l.length;t++){const r=l[t];let n=e;n=i[r.cmd]?i[r.cmd]:await this.decode(r,e),r.isQueue?s.push(this.copy(r,n)):u=await this.doSafeCall(r.func,n,r.target,u)}i={},s.length>0&&this._masseageQueue.push(s)}copy(e,t){return{type:e.type,func:e.func,isQueue:e.isQueue,data:t,target:e.target,cmd:e.cmd}}async doCall(e,t,s,i){try{let l=e.call(s,t,i);return l instanceof Promise?await l:l}catch(e){return Log.e(e),null}}async doSafeCall(e,t,s,i){try{return await Promise.race([this.doCall(e,t,s,i),new Promise(((e,t)=>setTimeout((()=>t(new Error("Call timeout"))),this.service.options.maxHandleTimeout)))])}catch(e){return Log.e(`Safe call failed: ${e}`),null}}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/WSProxy.ts",["cc","./env"],(function(s){var t,e;return{setters:[function(s){t=s.cclegacy},function(s){e=s.DEBUG}],execute:function(){t._RF.push({},"bb95eXFwlNGJK2xK+3ZQM2D","WSProxy",void 0);const i=s("NORMAL_CLOSE_CODE",1e3);s("WSProxy",class{constructor(){this.options=null,this.waitSend=[],this.rsClose=null,this.rsCloseTimeOut=-1,this.rsOpen=null,this.rsOpenTimeOut=-1,this.onOpenCb=[],this._ws=null}get ws(){return this._ws}connect(s,t=1e4,i){return new Promise(((o,n)=>{"wss"==(s.startsWith("wss")?"wss":"ws")?(App.wssCacertUrl||Log.e(`${this.options.tag}请先设置wss的证书url,Launch脚本中直接挂载证书`),this._ws=new WebSocket(s,[],App.wssCacertUrl)):this._ws=new WebSocket(s,i),this._ws.binaryType="arraybuffer",this._ws.onopen=this.onOpen.bind(this),this._ws.onclose=this.onClose.bind(this),this._ws.onerror=this.onError.bind(this),this._ws.onmessage=this.onMessage.bind(this),this.rsOpen=o,this.rsOpenTimeOut=setTimeout((()=>{try{this.status!=WebSocket.OPEN&&e&&Log.w(`${this.options.tag}连接超时`)}catch(s){this.doOpen(!1)}}),t)}))}doOpen(s){this.rsOpen&&this.rsOpen(s),this.rsOpen=null;for(let t=0;t<this.onOpenCb.length;t++)this.onOpenCb[t](s);this.onOpenCb=[],clearTimeout(this.rsOpenTimeOut)}doClose(){this.rsClose&&this.rsClose(),this.rsClose=null,this._ws=null,this.waitSend=[],clearTimeout(this.rsCloseTimeOut)}onClose(s){var t,e;null==(t=(e=this.options).onClose)||t.call(e,s),this.doClose()}onOpen(s){var t,e;null==(t=(e=this.options).onOpen)||t.call(e,s),this.doOpen(!0),this.waitSend.forEach((s=>{this.ws.send(s)})),this.waitSend=[]}onError(s){var t,e;this.doOpen(!1),this.doClose(),null==(t=(e=this.options).onError)||t.call(e,s)}onMessage(s){var t,e;null==(t=(e=this.options).onMessage)||t.call(e,s)}get status(){var s;return null==(s=this.ws)?void 0:s.readyState}close(s,t=i,o=3e3){return new Promise(((i,n)=>this.ws?this.status==WebSocket.CLOSED?(i(),void this.doClose()):(this.status!=WebSocket.CLOSING&&this.ws.close(t,s),this.rsClose=i,void(this.rsCloseTimeOut=setTimeout((()=>{try{this.status!=WebSocket.CLOSED&&e&&Log.w(`${this.options.tag}关闭超时`)}catch(s){}finally{this.doClose()}}),o))):(i(),void this.doClose())))}send(s){if(!this.ws||!s)return!1;switch(this.status){case WebSocket.OPEN:return this.ws.send(s),!0;case WebSocket.CONNECTING:return this.waitSend.push(s),!0;case WebSocket.CLOSING:case WebSocket.CLOSED:default:return!1}}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/WSReconnect.ts",["cc"],(function(e){var t,i,s;return{setters:[function(e){t=e.cclegacy,i=e.Tween,s=e.tween}],execute:function(){t._RF.push({},"d39c4ihAV1HHbYxaI2xHDjK","WSReconnect",void 0);e("WSReconnect",class{constructor(e){this.service=null,this.connectID=100,this.isWaiting=!1,this.isReconnecting=!1,this.service=e}get maxCount(){return this.service.options.reconnectTimes}async start(e){if(this.isWaiting||this.isReconnecting)return;this.isReconnecting=!0;for(let t=0;t<this.maxCount;t++){await this.service.flows.reconnectStartFlow.exec({service:this.service,reconnectTimes:t+1});let i=1.5*t;if(i>3&&(i=3),await this.reconnect(i))return await this.service.flows.reconnectSuccessFlow.exec(this.service),e(this.service),void(this.isReconnecting=!1)}this.isReconnecting=!1,this.isWaiting=!0;const t=await this.service.flows.reconnectFailedFlow.exec({service:this.service,isNeedReconnect:!1});t&&t.isNeedReconnect?(this.isWaiting=!1,this.service.flows.reconnectFlow.exec(this.service)):this.isWaiting=!1}async reconnect(e){return!!this.service.isConnected||new Promise(((t,i)=>{this.delayCall(this.connectID,e,(async()=>{try{t(await this.service.start())}catch(e){t(!1)}}))}))}stopAction(e){i.stopAllByTag(e)}delayCall(e,t,i){this.stopAction(e),s(this).tag(e).delay(t).call(i).start()}stopActions(){this.stopAction(this.connectID)}stop(){this.stopActions()}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/WSServer.ts",["cc","./WSProxy.ts"],(function(t){var s,o;return{setters:[function(t){s=t.cclegacy},function(t){o=t.WSProxy}],execute:function(){s._RF.push({},"77098MvPR9DaKBfUodrtaXM","WSServer",void 0);t("WSServer",class{constructor(){this._options=null,this.proxy=null}get options(){return this._options}set options(t){this._options=t,this.options.timeOut=this.options.timeOut||1e4,this.proxy&&(this.proxy.options=this.options)}get isConnected(){return!!this.proxy&&this.proxy.status==WebSocket.OPEN}async start(){return new Promise((async(t,s)=>{if(this.proxy){if(this.proxy.ws){if(this.proxy.status==WebSocket.OPEN)return void t(!0);if(this.proxy.status==WebSocket.CONNECTING)return void this.proxy.onOpenCb.push(t);if(this.proxy.status==WebSocket.CLOSING)return void t(!1)}}else this.proxy=new o;this.proxy.options=this.options;const i=await this.proxy.connect(this.options.url,this.options.timeOut);i||await this.stop(),t(i)}))}async stop(){this.proxy&&await this.proxy.close(),this.proxy=null}send(t){return!!this.proxy&&this.proxy.send(t)}}),s._RF.pop()}}}));

System.register("chunks:///_virtual/WSService.ts",["cc","./Macros.ts","./Net.ts","./WSMsgHandler.ts","./WSProxy.ts","./WSReconnect.ts","./WSServer.ts","./Flow.ts"],(function(e){var t,s,n,o,i,r,a,h;return{setters:[function(e){t=e.cclegacy},function(e){s=e.Macro},function(e){n=e.Net},function(e){o=e.WSMsgHandler},function(e){i=e.NORMAL_CLOSE_CODE},function(e){r=e.WSReconnect},function(e){a=e.WSServer},function(e){h=e.Flow}],execute:function(){t._RF.push({},"fc532YHkMFABaICm3PJRhjJ","WSService",void 0);class l{constructor(e){this.module=s.UNKNOWN,this._heartbeatTimer=-1,this._lostHeartbeat=0,this.isDestory=!1,this._options=null,this.serviceType=n.ServiceType.Unknown,this.server=null,this._reconnect=null,this._handler=null,this.priority=0,this.flows={openFlow:new h,closeFlow:new h,reconnectFlow:new h(!0),reconnectFailedFlow:new h,reconnectStartFlow:new h,reconnectSuccessFlow:new h,sendHeartbeatFlow:new h(!0),isHeartBeatFlow:new h(!0),decodeHeaderFlow:new h(!0),encodeHeaderFlow:new h(!0),decodeMessageFlow:new h(!0),enterBackgroundFlow:new h(!0),enterForegroundFlow:new h(!0),preSendFlow:new h},this.module=e,this._reconnect=new r(this),this._handler=new o(this)}get options(){return this._options}set options(e){this._options=e,this.options.tag=this.module,this.options.enableHeartbeat=null==this.options.enableHeartbeat||this.options.enableHeartbeat,this.options.heartbeatInterval=this.options.heartbeatInterval||2e3,this.options.lostHeartbeat=this.options.lostHeartbeat||5,this.options.maxEnterBackgroundTime=this.options.maxEnterBackgroundTime||6e4,this.options.enableReconnect=null==this.options.enableReconnect||this.options.enableReconnect,this.options.reconnectTimes=this.options.reconnectTimes||3,this.options.printHeartbeatLog=null!=this.options.printHeartbeatLog&&this.options.printHeartbeatLog,this.options.maxHandleTimeout=this.options.maxHandleTimeout||5e3,this.options.isScheduleHeartbeat=null!=this.options.isScheduleHeartbeat&&this.options.isScheduleHeartbeat;const t=this.options;t.onOpen=async e=>{this.flows.openFlow.exec(this),this.options.enableHeartbeat&&(this._lostHeartbeat=0,this.doSendHeartbeat(),this.startHeartbeat())},t.onClose=e=>{this.flows.closeFlow.exec(this),e.code!=i&&this.flows.reconnectFlow.exec(this),this.options.enableHeartbeat&&this.stopHeartbeat()},t.onMessage=async e=>{let t=!1;this.options.enableHeartbeat&&this.options.isScheduleHeartbeat&&(this._lostHeartbeat=0,this.startHeartbeat(),t=!0);let s=await this.doDecodeHeader(e);s&&(await this.doIsHeartBeat(s)?!t&&this.options.enableHeartbeat&&(this._lostHeartbeat=0,this.startHeartbeat()):this.handler.onMessage(s,this.options.tag))},t.onError=e=>{this.options.enableHeartbeat&&this.stopHeartbeat()},this.server||(this.server=new a),this.server.options=t}get isConnected(){return this.server.isConnected}get reconnect(){return this._reconnect}get handler(){return this._handler}startHeartbeat(){this.stopHeartbeat(),this._heartbeatTimer=setInterval((()=>{if(this._lostHeartbeat++,this._lostHeartbeat>this.options.lostHeartbeat)return this.stopHeartbeat(),void this.server.stop().then((()=>{this.flows.reconnectFlow.exec(this)}));this.doSendHeartbeat()}),this.options.heartbeatInterval)}stopHeartbeat(){clearInterval(this._heartbeatTimer)}doSendHeartbeat(){this.flows.sendHeartbeatFlow.nodes.length>0&&this.flows.sendHeartbeatFlow.exec(this)}async doIsHeartBeat(e){if(this.flows.isHeartBeatFlow.nodes.length>0){const t=await this.flows.isHeartBeatFlow.exec({service:this,message:e,result:!1});return!!t&&t.result}return!1}async doDecodeHeader(e){if(this.flows.decodeHeaderFlow.nodes.length>0){const t=await this.flows.decodeHeaderFlow.exec({service:this,message:e,result:null});return t?t.result:null}return null}async doEncodeHeader(e){if(this.flows.encodeHeaderFlow.nodes.length>0){const t=await this.flows.encodeHeaderFlow.exec({service:this,message:e,result:null});return t?t.result:null}return null}start(){return this.server.start()}stop(){return this.handler.stop(),this.reconnect.stop(),this.server.stop()}async send(e){if(e.encode()){let t=await this.doEncodeHeader(e);return!!t&&(!!t.isSuccess&&(e=t.message,this.server.send(e.buffer)))}return!1}async sendAsync(e,t,o,i=s.DEFAULT_RPC_TIEMEOUT){return new Promise((async(s,r)=>{const a=new n.RPCData(o,e,t,s,i);this.handler.addRPC(a),await this.flows.preSendFlow.exec({service:this,message:e});await this.send(e)||(this.handler.removeRPC(a),s(null))}))}onS(e,t,s,n,o){this.handler.onS(e,t,s,n,o)}offS(e,t){this.handler.offS(e,t)}pause(){this.handler.isPause=!0}resume(){this.handler.isPause=!1}update(e){this.handler.update(e)}destory(){this.isDestory=!0,this.stop(),this.handler.destroy()}}e("WSService",l),l.module=s.UNKNOWN,t._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});