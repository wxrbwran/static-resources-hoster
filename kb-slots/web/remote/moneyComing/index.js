System.register("chunks:///_virtual/AnimationUtils.ts",["cc"],(function(t){var e,o,i,n,a,r,s,l,d,c,y;return{setters:[function(t){e=t.cclegacy,o=t.instantiate,i=t.Layers,n=t.v3,a=t.tween,r=t.Node,s=t.UIOpacity,l=t.Sprite,d=t.assetManager,c=t.SpriteFrame,y=t.Vec3}],execute:function(){e._RF.push({},"a1b2cPU5fZ4kBI0VniQq83v","AnimationUtils",void 0);t("AnimationUtils",function(){function t(){}return t.playParticle=function(t,e,r,s,l){var d=o(t);d.active=!0,s.addChild(d),d.layer=i.Enum.UI_2D;var c=e.getWorldPosition(),y=r.getWorldPosition(),p=n(c.x,c.y+200,c.z);d.setWorldPosition(c),a(d).to(.5,{worldPosition:y},{onUpdate:function(t,e){var o=n(),i=(n(),e),a=c,r=p,s=y;o.x=(1-i)*(1-i)*a.x+2*i*(1-i)*r.x+i*i*s.x,o.y=(1-i)*(1-i)*a.y+2*i*(1-i)*r.y+i*i*s.y,d.setWorldPosition(o)}}).call((function(){d.destroy(),l&&l()})).start()},t.playImage=function(t,e,o,p,m,f){var g;void 0===f&&(f="up"),Log.d("[AnimationUtils] playImage called with: fromNode="+e.name+", toNode="+o.name+", parentNode="+p.name+", curveType="+f);var u=new r("FlyEffectNode");u.layer=i.Enum.UI_2D;var v=u.addComponent(s),_=u.addComponent(l),x=null==(g=d.getBundle(t))?void 0:g.get("cocos_lizi/fly/sybres_eft_str_02/spriteFrame",c);if(x){_.spriteFrame=x,u.active=!0,p.addChild(u),Log.d('[AnimationUtils] Image node "'+u.name+'" added to parent "'+p.name+'"');var P,U=e.getWorldPosition(),F=o.getWorldPosition();if("down"===f){var w=.3*(F.x-U.x);P=n(U.x+w,U.y+-200,U.z)}else P=n(U.x,U.y+500,U.z);u.setWorldPosition(U),u.setScale(2,2,1),Log.d("[AnimationUtils] Node properties: name="+u.name+", active="+u.active+", position="+u.position.toString()+", worldPosition="+u.getWorldPosition().toString()+", scale="+u.scale.toString()+", opacity="+v.opacity+", layer="+u.layer+", controlPosition="+P.toString()),a(u).to(1,{worldPosition:F},{onUpdate:function(t,e){var o=n(),i=e,a=U,r=P,s=F;o.x=(1-i)*(1-i)*a.x+2*i*(1-i)*r.x+i*i*s.x,o.y=(1-i)*(1-i)*a.y+2*i*(1-i)*r.y+i*i*s.y,u.setWorldPosition(o)}}).call((function(){var e;Log.d('[AnimationUtils] Tween completed for node "'+u.name+'". Starting explosion effect.');var o=null==(e=d.getBundle(t))?void 0:e.get("cocos_lizi/fly/sybres_eft_exp_04/spriteFrame",c);o?(_.spriteFrame=o,a(u).to(.3,{scale:new y(8,8,1)}).start(),a(v).to(.1,{opacity:0}).call((function(){u.destroy()})).start(),m&&m()):(Log.e("[AnimationUtils] Failed to get explosion spriteFrame: cocos_lizi/fly/sybres_eft_exp_04/spriteFrame"),u.destroy(),m&&m())})).start()}else Log.e("[AnimationUtils] Failed to get spriteFrame: cocos_lizi/fly/sybres_eft_str_02/spriteFrame")},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/AutoSpinManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MoneyComingConfig.ts"],(function(t){var i,n,o;return{setters:[function(t){i=t.createClass},function(t){n=t.cclegacy},function(t){o=t.MoneyComingConfig}],execute:function(){n._RF.push({},"8ce07uPsxlJb7xsHPD9+61r","AutoSpinManager",void 0);t("AutoSpinManager",function(){function t(t,i,n){this.view=void 0,this.uiManager=void 0,this._isAutoSpin=!1,this._autoSpinRemaining=0,this._onSpinCallback=void 0,this.view=t,this.uiManager=i,this._onSpinCallback=n}var n=t.prototype;return n.start=function(){this._isAutoSpin||(this._isAutoSpin=!0,this._autoSpinRemaining=o.autoSpin.totalSpins,this.updateButtonLabel(),this.setControlsInteractive(!1),this._onSpinCallback())},n.stop=function(){this._isAutoSpin&&(this._isAutoSpin=!1,this._autoSpinRemaining=0,this.view.unschedule(this._onSpinCallback),this.updateButtonLabel(),this.setControlsInteractive(!0))},n.onSpinCycleComplete=function(){return this._isAutoSpin&&this._autoSpinRemaining>0?(this._autoSpinRemaining--,this.updateButtonLabel(),this._autoSpinRemaining>0||(this.stop(),!1)):(this._isAutoSpin&&this.stop(),!1)},n.scheduleNextSpin=function(t){var i=this;if(this._isAutoSpin){var n=o.autoSpin.intervals.normal;1===t?n=o.autoSpin.intervals.turbo:2===t&&(n=o.autoSpin.intervals.superTurbo),this.view.scheduleOnce((function(){i._isAutoSpin&&i._onSpinCallback()}),n)}},n.updateButtonLabel=function(){this._isAutoSpin&&this._autoSpinRemaining>0?this.uiManager.updateAutoButtonLabel(""+this._autoSpinRemaining):this.uiManager.updateAutoButtonLabel("AUTO")},n.setControlsInteractive=function(t){this.uiManager.setSpinButtonState(t),this.uiManager.setBetButtonState(t)},i(t,[{key:"isAutoSpin",get:function(){return this._isAutoSpin}}]),t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/BetManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MoneyComingConfig.ts"],(function(t){var e,n,s;return{setters:[function(t){e=t.createClass},function(t){n=t.cclegacy},function(t){s=t.MoneyComingConfig}],execute:function(){n._RF.push({},"08f637T7F1JRbcWjnOG2i9+","BetManager",void 0);t("BetManager",function(){function t(t){this._betAmount=10,this.wheels=void 0,this.wheels=t}var n=t.prototype;return n.generateSpinResults=function(){for(var t=[s.constants.elementPrefix+"0",s.constants.elementPrefix+"00",s.constants.elementPrefix+"1",s.constants.elementPrefix+"5",s.constants.elementPrefix+"10"],e=[],n=1===this._betAmount?2:3,a=0;a<n;a++)e.push(Math.random()<s.gameplay.symbolProbability?t[Math.floor(Math.random()*t.length)]:"");1===this._betAmount&&e.push("");var o=this.getAvailableFeatureElements();return e.push(Math.random()<s.gameplay.symbolProbability?o[Math.floor(Math.random()*o.length)]:""),e},n.getAvailableFeatureElements=function(){var t=[s.constants.featureMultiplierPrefix+"2",s.constants.featureMultiplierPrefix+"5",s.constants.featureAllRespinKeyword];return 1===this._betAmount?t:5===this._betAmount?t.concat([s.constants.featureScatterKeyword]):10===this._betAmount?t.concat([s.constants.featureMultiplierPrefix+"10",s.constants.featureScatterKeyword]):50===this._betAmount||100===this._betAmount?t.concat([s.constants.featureScatterKeyword+"_50_100"]):t},n.updateFeatureWheelVisibility=function(){if(this.wheels.length>=4){var t=this.wheels[3],e=this.getAvailableFeatureElements();t.setVisibleElements(e)}},e(t,[{key:"betAmount",get:function(){return this._betAmount},set:function(t){this._betAmount=t}}]),t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/BetSelectionView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameView.ts"],(function(t){var n,e,o,r,i,l,c;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,r=t.Button,i=t.Color,l=t.Node},function(t){c=t.default}],execute:function(){var u;e._RF.push({},"367428IvKVKupn8TZwbZ72S","BetSelectionView",void 0);var a=o.ccclass;o.property,t("default",a("BetSelectionView")(u=function(t){function e(){for(var n,e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];return(n=t.call.apply(t,[this].concat(o))||this).controller=null,n}n(e,t);var o=e.prototype;return o.onLoad=function(){for(var t=this,n=function(){var n=o[e],i=t.node.getChildByPath("hLayout/betOptionLayout/betOption"+n);if(i){var c=i.getComponentInChildren(r);c&&t.onN(c.node,l.EventType.TOUCH_END,(function(){return t.onBetAmountClick(n)}))}},e=0,o=[100,50,10,5,1];e<o.length;e++)n()},o.setController=function(t){this.controller=t},o.highlightBet=function(t){for(var n=0,e=[100,50,10,5,1];n<e.length;n++){var o=e[n],l=this.node.getChildByPath("hLayout/betOptionLayout/betOption"+o);if(l){var c=l.getComponentInChildren(r);c&&(c.normalColor=o===t?new i(150,150,150,255):new i(50,50,50,255))}}},o.onBetAmountClick=function(t){this.controller&&this.controller.onBetAmountSelected(t)},e}(c))||u);e._RF.pop()}}}));

System.register("chunks:///_virtual/LuckyWheelManager.ts",["cc","./MoneyComingConfig.ts","./LuckyWheelRotator.ts"],(function(e){var n,t,o,i,a,r,l;return{setters:[function(e){n=e.cclegacy,t=e.tween,o=e.Vec3,i=e.Tween,a=e.sp},function(e){r=e.MoneyComingConfig},function(e){l=e.LuckyWheelRotator}],execute:function(){n._RF.push({},"a9b8cfW5fQyEP7cuph2VDIR","LuckyWheelManager",void 0);e("LuckyWheelManager",function(){function e(e,n){this.view=void 0,this.luckyWheels=void 0,this._isSpinning=!1,this._onCompleteCallback=null,this._currentMoneyNode=null,this._currentMoneyBgNode=null,this._currentWheelNode=null,this.view=e,this.luckyWheels=n}var n=e.prototype;return n.spin=function(e,n){if(this._isSpinning)Log.w("[LuckyWheelManager] 幸运轮盘正在转动中");else{this._isSpinning=!0,this._onCompleteCallback=n;var t=this.getPrizesForBet(e);if(!t||0===t.length)return Log.e("[LuckyWheelManager] 找不到 bet"+e+" 对应的奖金列表"),void(this._isSpinning=!1);var o=Math.floor(Math.random()*t.length),i=t[o];Log.d("[LuckyWheelManager] Bet"+e+", 奖金数组: ["+t.join(", ")+"]"),Log.d("[LuckyWheelManager] 选中奖金索引: "+o+", 金额: "+i);var a=this.getWheelNodeForBet(e);if(!a)return Log.e("[LuckyWheelManager] 找不到 bet"+e+" 对应的轮盘节点"),void(this._isSpinning=!1);var r=this.getMoneyNodeForBet(e,a),l=this.getMoneyBgNodeForBet(e,a);if(!r||!l)return Log.e("[LuckyWheelManager] 找不到 money 或 money_bg 节点, betAmount="+e+", moneyNode="+!!r+", moneyBgNode="+!!l),void(this._isSpinning=!1);this._currentMoneyNode=r,this._currentMoneyBgNode=l,this._currentWheelNode=a,this.stopAutoRotation(r),this.stopAutoRotation(l);var u=r.eulerAngles.z;l.setRotationFromEuler(0,0,u),Log.d("[LuckyWheelManager] 同步角度：moneyNode="+u.toFixed(2)+"°, moneyBgNode已同步"),this.playChildAnimation(a,"wheel","common_run_start",!1),this.spinToTarget(r,l,o,i)}},n.getPrizesForBet=function(e){return r.luckyWheelPrizes[e]},n.getWheelNodeForBet=function(e){return 1===e||5===e||10===e?this.luckyWheels.getChildByPath("wheel1_5_10"):50===e||100===e?this.luckyWheels.getChildByPath("wheel50_100"):null},n.getMoneyNodeForBet=function(e,n){return 1===e||5===e||50===e?n.getChildByName("money"):10===e||100===e?n.getChildByName("money_upgrade"):null},n.getMoneyBgNodeForBet=function(e,n){return n.getChildByName("money_bg")},n.stopAutoRotation=function(e){var n=e.getComponent(l);n&&n.stopRotation()},n.resumeAutoRotation=function(e){var n=e.getComponent(l);n&&n.startRotation()},n.spinToTarget=function(e,n,t,o){var i=this,a=r.luckyWheel,l=(8-t)%8,u=-l*a.anglePerPrize,h=e.eulerAngles.z,s=u-h;s>0&&(s-=360);var g=h-9e3+s;Log.d("[LuckyWheelManager] prizeIndex: "+t+", prize: "+o+", reversedIndex: "+l),Log.d("[LuckyWheelManager] 当前角度: "+h.toFixed(2)+", 目标角度: "+u+", angleDiff: "+s.toFixed(2)+", 最终角度: "+g.toFixed(2));var c=!1,y=!1,d=function(){if(c&&y){i._isSpinning=!1,i._currentWheelNode&&(i.playChildAnimation(i._currentWheelNode,"wheel","common_run_cycle",!0),i._currentMoneyNode&&i.playChildAnimation(i._currentWheelNode,"target_coin","common_run_cycle",!0));var n=e.eulerAngles.z,a=(n%360+360)%360;Log.d("[LuckyWheelManager] 转动完成！目标索引: "+t+", 目标金额: "+o+", 最终角度: "+n.toFixed(2)+"°, 归一化角度: "+a.toFixed(2)+"°"),i._onCompleteCallback&&i._onCompleteCallback(o),i.reset()}};this.animateRotation(e,g,a.spinDuration,(function(){c=!0,d()})),this.animateRotation(n,g,a.spinDuration,(function(){y=!0,d()}))},n.animateRotation=function(e,n,i,a){var l=r.luckyWheel;t(e).to(i,{eulerAngles:new o(0,0,n)},{easing:l.easing}).call((function(){a&&a()})).start()},n.stop=function(){var e=this;Log.d("[LuckyWheelManager] 停止幸运轮盘转动"),[this.luckyWheels.getChildByPath("wheel1_5_10"),this.luckyWheels.getChildByPath("wheel50_100")].forEach((function(n){if(n){e.stopChildAnimation(n,"wheel"),e.stopChildAnimation(n,"target_coin");var t=n.getChildByName("money"),o=n.getChildByName("money_upgrade"),a=n.getChildByName("money_bg");if([t,o,a].forEach((function(e){e&&i.stopAllByTarget(e)})),t){var r=t.eulerAngles.z;a&&a.setRotationFromEuler(0,0,r),e.resumeAutoRotation(t)}o&&e.resumeAutoRotation(o),a&&e.resumeAutoRotation(a)}})),this.reset()},n.reset=function(){this._isSpinning=!1,this._onCompleteCallback=null,this._currentMoneyNode=null,this._currentMoneyBgNode=null,this._currentWheelNode=null},n.stopChildAnimation=function(e,n){var t=e.getChildByName(n);if(t){var o=t.getComponent(a.Skeleton);o&&(o.clearTracks(),Log.d("[LuckyWheelManager] 停止子节点动画: "+t.name))}},n.playChildAnimation=function(e,n,t,o){var i=e.getChildByName(n);if(i){var r=i.getComponent(a.Skeleton);r?(r.setAnimation(0,t,o),Log.d("[LuckyWheelManager] 播放子节点动画: "+i.name+", 动画名: "+t)):Log.d("[LuckyWheelManager] 子节点 "+n+" 上没有 Spine 组件")}else Log.d("[LuckyWheelManager] 找不到子节点 "+n)},n.stopWheelAnimation=function(e){var n=e.getComponent(a.Skeleton);n&&(n.clearTracks(),Log.d("[LuckyWheelManager] 停止轮盘动画: "+e.name))},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/LuckyWheelRotator.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MoneyComingConfig.ts"],(function(t){var e,o,i,n,r,a,s,u,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,s=t.Node,u=t.Component},function(t){c=t.MoneyComingConfig}],execute:function(){var l,h,p,g,f,R,d,_,y;r._RF.push({},"9a9154b6oJHUq5m4p0dFXLV","LuckyWheelRotator",void 0);var m=a.ccclass,b=a.property;t("LuckyWheelRotator",(l=m("LuckyWheelRotator"),h=b({tooltip:"旋转速度（度/秒）"}),p=b({tooltip:"是否自动开始旋转"}),g=b({type:s,tooltip:"旋转的目标节点，默认为当前节点"}),l((d=e((R=function(t){function e(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,i(e,"rotationSpeed",d,n(e)),i(e,"autoStart",_,n(e)),i(e,"targetNode",y,n(e)),e._isRotating=!1,e._currentRotation=0,e._logTimer=0,e}o(e,t);var r=e.prototype;return r.onLoad=function(){this.targetNode||(this.targetNode=this.node),this._currentRotation=this.targetNode.eulerAngles.z,this.autoStart&&this.startRotation()},r.update=function(t){if(this._isRotating&&this.targetNode){var e=this.rotationSpeed*t;this._currentRotation+=e,this._currentRotation>=360?this._currentRotation-=360:this._currentRotation<0&&(this._currentRotation+=360),this.targetNode.setRotationFromEuler(0,0,this._currentRotation)}},r.logCurrentPrizePosition=function(){for(var t=this._currentRotation,e=10,o=[],i=this.node.parent;i;){if("wheel1_5_10"===i.name){e=10,o=c.luckyWheelPrizes[10]||[];break}if("wheel_50_100"===i.name){e=50,o=c.luckyWheelPrizes[50]||[];break}i=i.parent}if(0!==o.length){var n=t-c.luckyWheel.startAngleOffset,r=(Math.floor(-n/45)%8+8)%8,a=(8-r)%8,s=o[a];Log.d("[LuckyWheelRotator] 节点: "+this.node.name+", betAmount: "+e+", 当前角度: "+t.toFixed(2)+"°, reversedIndex: "+r+", 12点位置索引: "+a+", 12点位置金额: "+s)}},r.startRotation=function(){this._isRotating=!0},r.stopRotation=function(){this._isRotating=!1},r.setRotationSpeed=function(t){this.rotationSpeed=t},r.toggleRotation=function(){this._isRotating=!this._isRotating},r.resetRotation=function(){this._currentRotation=0,this.targetNode&&this.targetNode.setRotationFromEuler(0,0,0)},e}(u)).prototype,"rotationSpeed",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),_=e(R.prototype,"autoStart",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),y=e(R.prototype,"targetNode",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=R))||f));r._RF.pop()}}}));

System.register("chunks:///_virtual/moneyComing",["./MoneyComingEntry.ts","./MoneyComingAudio.ts","./MoneyComingConfig.ts","./MoneyComingLanguage.ts","./LuckyWheelRotator.ts","./MoneyComingAnimationController.ts","./MoneyComingController.ts","./Wheel.ts","./AutoSpinManager.ts","./BetManager.ts","./LuckyWheelManager.ts","./RespinManager.ts","./SpinManager.ts","./WinManager.ts","./MoneyComingHandler.ts","./AnimationUtils.ts","./SymbolAnimator.ts","./nodeUtils.ts","./BetSelectionView.ts","./MoneyComingUIManager.ts","./MoneyComingView.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MoneyComingAnimationController.ts",["cc","./MoneyComingConfig.ts"],(function(e){var n,t,i,a,o,l,h,s,r,d;return{setters:[function(e){n=e.cclegacy,t=e._decorator,i=e.Node,a=e.UITransform,o=e.sp,l=e.assetManager,h=e.Graphics,s=e.Color,r=e.tween},function(e){d=e.MoneyComingConfig}],execute:function(){var c;n._RF.push({},"af99dToBmdPkbOKbVM9Tpmx","MoneyComingAnimationController",void 0);var m=t.ccclass;e("MoneyComingAnimationController",m("MoneyComingAnimationController")(c=function(){function e(e,n,t,i){this.view=void 0,this.wheels=void 0,this.audioManager=void 0,this.luckyWheels=void 0,this._wheel3LockSpine=null,this._wheel3ShadowMask=null,this._wheel1510LockSpine=null,this.view=e,this.wheels=n,this.audioManager=t,this.luckyWheels=i}var n=e.prototype;return n.playExpectAnimation=function(e){var n=d.constants.expectAnimNodeName,t=e.parent;if(t){var h=t.parent;if(h){var s=n+"_"+t.children.indexOf(e);if(!h.getChildByName(s)){var r=new i(s);h.addChild(r);var c=e.getWorldPosition();r.setWorldPosition(c),r.setScale(1,.95);var m=h.getChildByName("mask");if(m){var w=m.getSiblingIndex();r.setSiblingIndex(w+1)}else r.setSiblingIndex(h.children.length-1);r.layer=e.layer;var p=r.addComponent(a),g=e.getComponent(a);g&&p.setContentSize(g.contentSize);var u=r.addComponent(o.Skeleton);u.premultipliedAlpha=!0;var k=l.getBundle(d.constants.bundleName);if(!k)return Log.e("[MoneyComingAnimationController] 无法获取 bundle: "+d.constants.bundleName),void r.destroy();k.load(d.animations.expect.path,o.SkeletonData,(function(e,n){if(e||!u.isValid)return Log.e("[MoneyComingAnimationController] 加载 expect spine 资源失败",e),void r.destroy();u.skeletonData=n,u.setAnimation(0,d.animations.expect.name,!0)}))}}else Log.e("[MoneyComingAnimationController] wheels 容器没有父节点")}else Log.e("[MoneyComingAnimationController] wheelNode 没有父节点")},n.stopExpectAnimation=function(e){var n=e.parent;if(n){var t=n.parent;if(t){var i=n.children.indexOf(e),a=d.constants.expectAnimNodeName+"_"+i,o=t.getChildByName(a);o&&o.destroy()}}},n.initializeWheel3LockState=function(){var e=this;Log.d("[MoneyComingAnimationController] 初始化第三个轮子锁定状态");var n=l.getBundle(d.constants.bundleName);n?n.load(d.animations.wheelLock.path,o.SkeletonData,(function(n,t){if(n)Log.e("[MoneyComingAnimationController] 加载 wheel_lock spine 资源失败",n);else{var i=e.getOrCreateWheel3LockSpine();i&&(i.skeletonData=t,i.node.active=!0,i.setAnimation(0,d.animations.wheelLock.stand,!0),e.showWheel3ShadowMask())}})):Log.e("[MoneyComingAnimationController] 无法获取 bundle: "+d.constants.bundleName)},n.playWheel3LockAnimation=function(){var e=this;Log.d("[MoneyComingAnimationController] 播放第三个轮子锁定动画");var n=l.getBundle(d.constants.bundleName);n&&n.load(d.animations.wheelLock.path,o.SkeletonData,(function(n,t){if(!n){var i=e.getOrCreateWheel3LockSpine();if(i){i.skeletonData=t,i.node.active=!0;var a=i.setAnimation(0,d.animations.wheelLock.lock,!1);a&&(e.audioManager.playEffect(d.audio.wheelLock),e.showWheel3ShadowMask(),a.listener={complete:function(){i.setAnimation(0,d.animations.wheelLock.stand,!0),a.listener=null}})}}}))},n.playWheel3UnlockAnimation=function(){var e=this;Log.d("[MoneyComingAnimationController] 播放第三个轮子解锁动画");var n=this._wheel3LockSpine;if(n&&n.isValid){var t=n.setAnimation(0,d.animations.wheelLock.unlock,!1);t?(this.hideWheel3ShadowMask(),t.listener={complete:function(){var i=n.node;i&&i.isValid&&i.destroy(),e._wheel3LockSpine=null,t.listener=null}}):n.node.active=!1}},n.initializeWheel1510LockState=function(){var e=this,n=this.luckyWheels.getChildByPath("wheel1_5_10");if(n){var t=l.getBundle(d.constants.bundleName);t&&t.load(d.animations.wheel1510Lock.path,o.SkeletonData,(function(t,i){if(!t){var a=e.getOrCreateWheel1510LockSpine(n);a&&(a.skeletonData=i,a.node.active=!0,a.setAnimation(0,d.animations.wheel1510Lock.stand,!0))}}))}},n.playWheel1510LockAnimation=function(){var e=this,n=this.luckyWheels.getChildByPath("wheel1_5_10");if(n){var t=l.getBundle(d.constants.bundleName);t&&t.load(d.animations.wheel1510Lock.path,o.SkeletonData,(function(t,i){if(!t){var a=e.getOrCreateWheel1510LockSpine(n);if(a){a.skeletonData=i,a.node.active=!0;var o=a.setAnimation(0,d.animations.wheel1510Lock.lock,!1);o&&(e.audioManager.playEffect(d.audio.wheelLock),o.listener={complete:function(){a.setAnimation(0,d.animations.wheel1510Lock.stand,!0),o.listener=null}})}}}))}},n.playWheel1510UnlockAnimation=function(){var e=this,n=this._wheel1510LockSpine;if(n&&n.isValid){var t=n.setAnimation(0,d.animations.wheel1510Lock.unlock,!1);t?t.listener={complete:function(){var i=n.node;i&&i.isValid&&i.destroy(),e._wheel1510LockSpine=null,t.listener=null}}:n.node.active=!1}},n.getOrCreateWheel3LockSpine=function(){if(this._wheel3LockSpine&&this._wheel3LockSpine.isValid)return this._wheel3LockSpine;if(this.wheels.length<3)return null;var e=this.wheels[2].node,n=e.getChildByName(d.constants.wheelLockNodeName);n||(n=new i(d.constants.wheelLockNodeName),e.addChild(n),n.setPosition(0,0,0),n.setSiblingIndex(e.children.length-1)),n.layer=e.layer,n.active=!0;var t=n.getComponent(a)||n.addComponent(a),l=e.getComponent(a);return l&&t.setContentSize(l.width,l.height),this._wheel3LockSpine=n.getComponent(o.Skeleton)||n.addComponent(o.Skeleton),this._wheel3LockSpine},n.getOrCreateWheel3ShadowMask=function(){var e;if(this._wheel3ShadowMask&&this._wheel3ShadowMask.isValid)return this._wheel3ShadowMask;if(this.wheels.length<3)return null;var n=this.wheels[2],t=n.node,o=t.getChildByName(d.constants.wheelShadowMaskNodeName);o||(o=new i(d.constants.wheelShadowMaskNodeName),t.addChild(o)),o.setPosition(-7,0,0),o.layer=t.layer;var l=o.getComponent(a)||o.addComponent(a),r=null==(e=n.symbolContainer)?void 0:e.getComponent(a),c=r?r.width:200,m=n.containerHeight>0?n.containerHeight:400;l.setAnchorPoint(.5,.5),l.setContentSize(c,m);var w=o.getComponent(h)||o.addComponent(h);w.clear();var p=d.gameplay.wheel3Shadow.targetOpacity;return w.fillColor=new s(0,0,0,p),w.rect(.5*-c,.5*-m,c,m),w.fill(),o.active=!1,this._wheel3ShadowMask=o,this.updateShadowMaskSiblingIndex(),o},n.updateShadowMaskSiblingIndex=function(){if(this._wheel3ShadowMask&&this._wheel3ShadowMask.isValid){var e=this.wheels[2].node,n=this.wheels[2].symbolContainer,t=e.getChildByName(d.constants.wheelLockNodeName),i=e.children.length-1;t&&(i=Math.max(0,t.getSiblingIndex()-1)),n&&(i=Math.max(n.getSiblingIndex()+1,i)),this._wheel3ShadowMask.setSiblingIndex(i)}},n.showWheel3ShadowMask=function(){var e=this.getOrCreateWheel3ShadowMask();if(e){e.active=!0,this.updateShadowMaskSiblingIndex();var n=e.getComponent(h);if(n){var t,i=d.gameplay.wheel3Shadow.targetOpacity,o=null==(t=this.wheels[2].symbolContainer)?void 0:t.getComponent(a),l=o?o.width:200,c=this.wheels[2].containerHeight>0?this.wheels[2].containerHeight:400,m={alpha:0};r(m).to(d.gameplay.wheel3Shadow.fadeInDuration,{alpha:i},{onUpdate:function(){n.clear(),n.fillColor=new s(0,0,0,m.alpha),n.rect(.5*-l,.5*-c,l,c),n.fill()}}).start()}}},n.hideWheel3ShadowMask=function(){var e=this;if(this._wheel3ShadowMask&&this._wheel3ShadowMask.isValid){var n=this._wheel3ShadowMask.getComponent(h);if(n){var t,i=null==(t=this.wheels[2].symbolContainer)?void 0:t.getComponent(a),o=i?i.width:200,l=this.wheels[2].containerHeight>0?this.wheels[2].containerHeight:400,c={alpha:d.gameplay.wheel3Shadow.targetOpacity};r(c).to(d.gameplay.wheel3Shadow.fadeOutDuration,{alpha:0},{onUpdate:function(){n.clear(),n.fillColor=new s(0,0,0,c.alpha),n.rect(.5*-o,.5*-l,o,l),n.fill()}}).call((function(){e._wheel3ShadowMask&&(e._wheel3ShadowMask.active=!1)})).start()}else this._wheel3ShadowMask.active=!1}},n.stopScatterWinAnimationImmediately=function(e){var n=this.getWheelNodeForBet(e);if(n){var t=n.getChildByName("scatter_win_anim_1");t&&t.destroy();var i=n.getChildByName("scatter_win_anim_2");i&&i.destroy()}},n.getWheelNodeForBet=function(e){return 5===e||10===e?this.luckyWheels.getChildByPath("wheel1_5_10"):50===e||100===e?this.luckyWheels.getChildByPath("wheel_50_100"):null},n.playScatterWinAnimation=function(e){var n=this.getWheelNodeForBet(e);if(n){var t=d.animations.scatterWinStart;this._playSpineAnimation(n,"scatter_win_anim_1",t.path,t.name,!1)}},n.stopScatterWinAnimation=function(e){var n=this.getWheelNodeForBet(e);if(n){var t=d.animations.scatterWinStop;this._playSpineAnimation(n,"scatter_win_anim_1",t.path1,t.cycle1,!0),this._playSpineAnimation(n,"scatter_win_anim_2",t.path2,t.cycle2,!0)}},n._playSpineAnimation=function(e,n,t,a,h){var s=l.getBundle(d.constants.bundleName);s?s.load(t,o.SkeletonData,(function(l,s){if(l)Log.e("[MoneyComingAnimationController] 加载 spine 资源失败: "+t,l);else{var r=e.getChildByName(n);r||(r=new i(n),e.addChild(r),r.layer=e.layer);var d=r.getComponent(o.Skeleton);d||(d=r.addComponent(o.Skeleton)),d.skeletonData=s,d.premultipliedAlpha=!0,d.setAnimation(0,a,h)}})):Log.e("[MoneyComingAnimationController] 无法获取 bundle: "+d.constants.bundleName)},n.getOrCreateWheel1510LockSpine=function(e){if(this._wheel1510LockSpine&&this._wheel1510LockSpine.isValid)return this._wheel1510LockSpine;var n=e.getChildByName(d.constants.wheel1510LockNodeName);n||(n=new i(d.constants.wheel1510LockNodeName),e.addChild(n),n.setPosition(0,0,0)),n.layer=e.layer,n.active=!0,n.setSiblingIndex(e.children.length-1);var t=n.getComponent(a)||n.addComponent(a),l=e.getComponent(a);return l&&t.setContentSize(l.width,l.height),this._wheel1510LockSpine=n.getComponent(o.Skeleton)||n.addComponent(o.Skeleton),this._wheel1510LockSpine.premultipliedAlpha=!0,this._wheel1510LockSpine},e}())||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/MoneyComingAudio.ts",["cc","./MoneyComingConfig.ts"],(function(i){var n,o,u;return{setters:[function(i){n=i.cclegacy,o=i._decorator},function(i){u=i.MoneyComingConfig}],execute:function(){var t;n._RF.push({},"713c3njqOxKq4G7Hm/764M3","MoneyComingAudio",void 0);var e=o.ccclass;o.property,i("MoneyComingAudio",e("MoneyComingAudio")(t=function(){function i(i,n){this.audioHelper=void 0,this.bundle=void 0,this.audioHelper=i,this.bundle=n}var n=i.prototype;return n.playBgMusic=function(){this.audioHelper.playMusic("audio/music/bg",!0,this.bundle)},n.stopBgMusic=function(){this.audioHelper.stopMusic()},n.playSpinSound=function(){},n.playWinSound=function(){},n.playBigWinSound=function(){this.audioHelper.playEffect(u.audio.bigWin,!1,this.bundle)},n.playEffect=function(i){this.audioHelper.playEffect(i,!1,this.bundle)},i}())||t);n._RF.pop()}}}));

System.register("chunks:///_virtual/MoneyComingConfig.ts",["cc"],(function(e){var o;return{setters:[function(e){o=e.cclegacy}],execute:function(){o._RF.push({},"5338exe84pD9q1pENATp8vT","MoneyComingConfig",void 0);e("MoneyComingConfig",{autoSpin:{totalSpins:50,intervals:{normal:1,turbo:.5,superTurbo:.2}},sequentialStop:{initialStopDelay:4.5,wheelStopInterval:.2},simultaneousStop:{normal:{scrollDuration:5,stopDuration:.1},turbo:{scrollDuration:3,stopDuration:.1},superTurbo:{scrollDuration:1,stopDuration:.1}},luckyWheelPrizes:{5:[1e3,250,50,150,75,500,25,100],10:[2e3,500,100,300,150,1e3,50,200],50:[5e4,1e4,1e3,5e3,1500,25e3,500,2500],100:[1e5,2e4,2e3,1e4,3e3,5e4,1e3,5e3]},luckyWheel:{spinDuration:6,accelerationDuration:.5,decelerationDuration:1,maxRotationSpeed:720,easing:"cubicOut",anglePerPrize:45,startAngleOffset:0},animations:{wheelLock:{lock:"lock",unlock:"unlock",stand:"stand",path:"spine/lock/wheel_lock"},wheel1510Lock:{lock:"start",unlock:"end",stand:"stand",path:"spine/lock/unlock"},expect:{name:"light01",path:"spine/expect/expect"}},audio:{luckyWheel:"audio/sound/lucky_wheel",activeFeature:"audio/sound/active_feature",wheelLock:"audio/sound/wheel_lock",spinOver:"audio/sound/spin_over",feature:"audio/sound/feature",allRespin:"audio/sound/all_respin",number:"audio/sound/number",bigWin:"audio/sound/big_win",scatterOver:"audio/sound/scatter_over",allRespinScatter:"audio/sound/all_respin_scatter"},gameplay:{winDisplayDuration:.1,symbolProbability:.8,wheel3Shadow:{fadeInDuration:.3,fadeOutDuration:.3,targetOpacity:128},bigWin:{big:1500,mega:3e3,super:5e3}},constants:{elementPrefix:"element_",featureMultiplierPrefix:"feature_x",featureScatterKeyword:"feature_scatter",featureAllRespinKeyword:"feature_all_respin",bundleName:"moneyComing",wheelLockNodeName:"wheel_lock_anim",wheelShadowMaskNodeName:"wheel_shadow_mask",wheel1510LockNodeName:"wheel1510_lock_anim",expectAnimNodeName:"expect_anim"}});o._RF.pop()}}}));

System.register("chunks:///_virtual/MoneyComingController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MoneyComingConfig.ts","./MoneyComingAnimationController.ts","./BetManager.ts","./WinManager.ts","./AutoSpinManager.ts","./SpinManager.ts","./RespinManager.ts","./LuckyWheelManager.ts","./AnimationUtils.ts"],(function(n){var t,e,i,a,o,s,r,l,u,h,g,p,M;return{setters:[function(n){t=n.createClass},function(n){e=n.cclegacy,i=n._decorator,a=n.find},function(n){o=n.MoneyComingConfig},function(n){s=n.MoneyComingAnimationController},function(n){r=n.BetManager},function(n){l=n.WinManager},function(n){u=n.AutoSpinManager},function(n){h=n.SpinManager},function(n){g=n.RespinManager},function(n){p=n.LuckyWheelManager},function(n){M=n.AnimationUtils}],execute:function(){var c;e._RF.push({},"bd15f7DbPZEdIaeEHs6av5O","MoneyComingController",void 0);var S=i.ccclass;i.property,n("MoneyComingController",S("MoneyComingController")(c=function(){function n(n,t,e,i,a){var o=this;this.view=void 0,this.wheels=void 0,this.uiManager=void 0,this.audioManager=void 0,this.luckyWheels=void 0,this._balance=2e3,this._winAmount=0,this._animationController=void 0,this.betManager=void 0,this.winManager=void 0,this.autoSpinManager=void 0,this.spinManager=void 0,this.respinManager=void 0,this.luckyWheelManager=void 0,this.view=n,this.wheels=t,this.uiManager=e,this.audioManager=i,this.luckyWheels=a,this._animationController=new s(this.view,this.wheels,this.audioManager,this.luckyWheels),this.betManager=new r(this.wheels),this.winManager=new l(this.wheels,this.audioManager),this.autoSpinManager=new u(this.view,this.uiManager,(function(){return o.onSpinClick()})),this.spinManager=new h(this.view,this.wheels,this.audioManager,this.betManager),this.respinManager=new g(this.view,this.wheels,this.audioManager,this.uiManager,this._animationController,this.betManager),this.luckyWheelManager=new p(this.view,this.luckyWheels),this.spinManager.setOnAllWheelsStoppedCallback((function(n){return o.onAllWheelsStopped(n)})),this.respinManager.setOnRespinCompleteCallback((function(n,t){return o.onRespinComplete(n,t)})),this.respinManager.setTurboModeStateGetter((function(){return o.spinManager.turboModeState}))}var e=n.prototype;return e.initialize=function(){this.betManager.updateFeatureWheelVisibility(),1===this.betAmount&&(this._animationController.initializeWheel3LockState(),this._animationController.initializeWheel1510LockState())},e.onBetBtnClick=function(){this.spinManager.isSpinning||this.uiManager.toggleBetSelection(this.betAmount)},e.onBetAmountSelected=function(n){this.winManager.stopWinningAnimations();var t=this.betAmount,e=n;e>t&&this.audioManager.playEffect(o.audio.activeFeature),1!==t&&1===e?(Log.d("[MoneyComingController] 从 bet"+t+" 切换到 bet1，播放锁定动画"),this._animationController.playWheel3LockAnimation(),this._animationController.playWheel1510LockAnimation()):1===t&&1!==e&&(Log.d("[MoneyComingController] 从 bet1 切换到 bet"+e+"，播放解锁动画"),this._animationController.playWheel3UnlockAnimation(),this._animationController.playWheel1510UnlockAnimation()),this.betAmount=n,this.uiManager.highlightSelectedBet(n),this.uiManager.hideBetSelection(),this.uiManager.updateUnlockLevels(n),this.betManager.updateFeatureWheelVisibility()},e.onSpinClick=function(){this.spinManager.isSpinning?Log.w("[MoneyComingController] onSpinClick: isSpinning 为 true，忽略本次点击"):(Log.d("[MoneyComingController] onSpinClick: 开始旋转, isSpinning 将被设为 true"),this.winManager.stopWinningAnimations(),this.luckyWheelManager.stop(),this.uiManager.hideFeaturePanel(),this.uiManager.hideBetSelection(),this.audioManager.playSpinSound(),this.balance<this.betAmount?App.tips.show("余额不足"):this.spinManager.turboModeState>0?this.doTurboSpin():(this.uiManager.setSpinButtonState(!1),this.uiManager.setBetButtonState(!1),this.autoSpinManager.isAutoSpin||this.uiManager.setAutoButtonState(!1),this.balance-=this.betAmount,this.spinManager.startSpin()))},e.doTurboSpin=function(){this.uiManager.setSpinButtonState(!1),this.uiManager.setBetButtonState(!1),this.autoSpinManager.isAutoSpin||this.uiManager.setAutoButtonState(!1),this.balance-=this.betAmount,this.spinManager.startTurboSpin()},e.onAllWheelsStopped=function(n){var t,e=this;if(Log.d("[MoneyComingController] onAllWheelsStopped: 轮盘全部停止，结果: ["+n.join(", ")+"]"),!this.respinManager.isRespin)if(n[3]===o.constants.featureAllRespinKeyword)this.respinManager.handleAllRespin(n);else if(null!=(t=n[3])&&t.includes(o.constants.featureScatterKeyword)){Log.d("[MoneyComingController] onAllWheelsStopped: 触发 Scatter"),this.uiManager.setSpinButtonState(!1),this.uiManager.setBetButtonState(!1),this.autoSpinManager.isAutoSpin||this.uiManager.setAutoButtonState(!1);var i=this.winManager.calculateWinAmount(n,this.betAmount);i>0?this.winManager.playWinningAnimations(n,this.betAmount,this.spinManager.turboModeState):this.winManager.playFeatureAnimation(n[3]),this.uiManager.showFeaturePanel(i,"scatter",this.betAmount),this.playScatterFlyAnimation(this.betAmount,(function(){e.audioManager.playEffect(o.audio.luckyWheel),e.luckyWheelManager.spin(e.betAmount,(function(n){Log.d("[MoneyComingController] onAllWheelsStopped: 幸运轮盘回调"),e.audioManager.playEffect(o.audio.scatterOver),e.uiManager.updateFeatureBonus(n),e.spinManager.resetSpinState();var t=i+n;t>0?e.onWin(t,void 0,!0):e.onSpinCycleComplete()}))}))}else{var a=this.winManager.calculateWinAmount(n,this.betAmount);a>0?this.onWin(a):this.onSpinCycleComplete()}},e.onRespinComplete=function(n,t){this.autoSpinManager.isAutoSpin&&this.autoSpinManager.stop(),this.spinManager.resetSpinState(),n>0?this.onWin(n,t):this.onSpinCycleComplete()},e.onAutoClick=function(){this.spinManager.isSpinning?Log.w("[MoneyComingController] onAutoClick: 正在旋转中，忽略 Auto 按钮点击"):this.autoSpinManager.isAutoSpin?this.autoSpinManager.stop():this.autoSpinManager.start()},e.onTurboClick=function(){var n=(this.spinManager.turboModeState+1)%3;this.spinManager.turboModeState=n;var t="OFF";1===n?t="ON":2===n&&(t="SUPER"),App.tips.show("Turbo Mode: "+t),this.uiManager.updateTurboButtonState(n)},e.onSpinCycleComplete=function(){Log.d("[MoneyComingController] onSpinCycleComplete: 周期完成, isSpinning 将被设为 false"),this.spinManager.resetSpinState(),this.autoSpinManager.onSpinCycleComplete()?this.autoSpinManager.scheduleNextSpin(this.spinManager.turboModeState):(this.uiManager.setSpinButtonState(!0),this.uiManager.setBetButtonState(!0),this.uiManager.setAutoButtonState(!0))},e.onBalanceUpdate=function(n){void 0!==n.balance&&(this.balance=n.balance)},e.onWin=function(n,t,e){var i=this;void 0===e&&(e=!1),Log.d("[MoneyComingController] onWin: 进入 onWin，金额: "+n+", skipAnimation: "+e),this.balance+=n,this.winAmount=n;var a=t||this.spinManager.spinResults;e||this.winManager.playWinningAnimations(a,this.betAmount,this.spinManager.turboModeState);var s=n/this.betAmount,r=o.gameplay.bigWin,l=null;s>=r.super?l="super":s>=r.mega?l="mega":s>=r.big&&(l="big"),l?(Log.d("[MoneyComingController] onWin: 判断为大奖: "+l),this.audioManager.playBigWinSound(),this.uiManager.setSpinButtonState(!1),this.uiManager.setBetButtonState(!1),this.autoSpinManager.isAutoSpin||this.uiManager.setAutoButtonState(!1),this.view.playWinEffect(l,n,(function(){Log.d("[MoneyComingController] onWin: 大奖动画回调触发"),i.onSpinCycleComplete()}))):(Log.d("[MoneyComingController] onWin: 判断为普通奖"),this.view.scheduleOnce((function(){Log.d("[MoneyComingController] onWin: 普通奖展示时间结束"),i.onSpinCycleComplete()}),o.gameplay.winDisplayDuration))},e.playScatterFlyAnimation=function(n,t){Log.d("[MoneyComingController] playScatterFlyAnimation: betAmount="+n);var e=this.wheels[3].node,i="";1===n||5===n||10===n?i="wheel1_5_10/center":50!==n&&100!==n||(i="wheel50_100/center");var s=this.luckyWheels.getChildByPath(i);if(!s)return Log.e("[MoneyComingController] 找不到目标节点: "+i),void(t&&t());var r=this.view.node,l=a("Canvas");l&&(r=l),Log.d("[MoneyComingController] Scatter fly animation: startNode="+e.name+", endNode="+s.name+", parentNode="+r.name),this.audioManager.playEffect(o.audio.allRespinScatter),M.playImage(o.constants.bundleName,e,s,r,(function(){Log.d("[MoneyComingController] Scatter fly animation completed"),t&&t()}),"down")},t(n,[{key:"balance",get:function(){return this._balance},set:function(n){this._balance=n,this.uiManager.updateBalance(this._balance)}},{key:"betAmount",get:function(){return this.betManager.betAmount},set:function(n){this.betManager.betAmount=n,this.uiManager.updateBetAmount(n)}},{key:"winAmount",get:function(){return this._winAmount},set:function(n){this._winAmount=n,this.uiManager.updateWinAmount(this._winAmount)}}]),n}())||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/MoneyComingEntry.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MoneyComingView.ts","./MoneyComingLanguage.ts","./Entry.ts","./MoneyComingHandler.ts","./Decorators.ts","./LobbyService.ts","./Resource.ts"],(function(){var e,n,t,o,r,i,u,s,a,c;return{setters:[function(n){e=n.inheritsLoose},function(e){n=e.cclegacy,t=e.SpriteFrame},function(e){o=e.default},function(e){r=e.MoneyComingLanguage},function(e){i=e.Entry},function(e){u=e.default},function(e){s=e.registerEntry},function(e){a=e.LobbyService},function(e){c=e.Resource}],execute:function(){var l;n._RF.push({},"23073LxbfZFU6V6j9dCrqdZ","MoneyComingEntry",void 0);s("MoneyComingEntry","moneyComing",o)(l=function(n){function o(){for(var e,t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];return(e=n.call.apply(n,[this].concat(o))||this).language=new r,e}e(o,n);var i=o.prototype;return i.addNetHandler=function(){App.handlerManager.get(u)},i.removeNetHandler=function(){},i.loadResources=function(e){var n=this;this.loader.getLoadResources=function(){return[{dir:"texture/symbol",bundle:n.bundle,type:t},{url:"cocos_lizi/fly/sybres_eft_str_02/spriteFrame",bundle:n.bundle,type:t},{url:"cocos_lizi/fly/sybres_eft_exp_04/spriteFrame",bundle:n.bundle,type:t}]},this.loader.onLoadComplete=function(n){n!=c.LoaderError.LOADING&&(n!=c.LoaderError.NO_FOUND_LOAD_RESOURCE?e():App.tips.show("资源加载失败，请重试"))},this.loader.loadResources()},i.initData=function(){App.serviceManager.get(a,!0)},i.pauseMessageQueue=function(){},i.resumeMessageQueue=function(){},o}(i));n._RF.pop()}}}));

System.register("chunks:///_virtual/MoneyComingHandler.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Handler.ts","./LobbyService.ts","./Decorators.ts"],(function(e){var n,t,o,i,r,c,a,l;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy},function(e){c=e.Handler},function(e){a=e.LobbyService},function(e){l=e.inject}],execute:function(){var u,s,p,d;r._RF.push({},"2095b1rGSNN2YTS+NBrTsdI","MoneyComingHandler",void 0);e("default",(u=l({type:a,name:"service"}),(d=function(e){function n(){for(var n,t=arguments.length,r=new Array(t),c=0;c<t;c++)r[c]=arguments[c];return n=e.call.apply(e,[this].concat(r))||this,o(n,"service",p,i(n)),n}t(n,e);var r=n.prototype;return r.onLoad=function(){e.prototype.onLoad.call(this)},r.onSpinResult=function(e){Log.d("收到转动结果:",e),App.dispatcher.emit("moneyComing:spin_result",e)},r.onBalanceUpdate=function(e){Log.d("余额更新:",e),App.dispatcher.emit("moneyComing:balance_update",e)},r.onJackpot=function(e){Log.d("中大奖了！",e)},n}(c)).module="MoneyComing",p=n((s=d).prototype,"service",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s));r._RF.pop()}}}));

System.register("chunks:///_virtual/MoneyComingLanguage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageDelegate.ts"],(function(n){var a,e,t,g,i;return{setters:[function(n){a=n.inheritsLoose},function(n){e=n.cclegacy,t=n.sys},function(n){g=n.injectLanguageData,i=n.LanguageDelegate}],execute:function(){var u,o;e._RF.push({},"ceb21FdALBP27ArgA4rnpyJ","MoneyComingLanguage",void 0);var c={language:t.Language.ENGLISH,data:{spin:"SPIN",balance:"Balance",bet:"Bet",win:"WIN"}},l={language:t.Language.SPANISH,data:{spin:"GIRAR",balance:"Saldo",bet:"Apuesta",win:"GANAR"}},r={language:t.Language.CHINESE,data:{spin:"旋转",balance:"余额",bet:"下注",win:"获胜"}};n("MoneyComingLanguage",g(((o=function(n){function e(){for(var a,e=arguments.length,t=new Array(e),g=0;g<e;g++)t[g]=arguments[g];return(a=n.call.apply(n,[this].concat(t))||this).bundle="moneyComing",a}return a(e,n),e.prototype.init=function(){this.add(c),this.add(l),this.add(r)},e}(i)).module="MoneyComing",u=o))||u);e._RF.pop()}}}));

System.register("chunks:///_virtual/MoneyComingUIManager.ts",["cc","./BetSelectionView.ts","./nodeUtils.ts"],(function(e){var t,o,i,n,a,s,d,l,c,h,r,u;return{setters:[function(e){t=e.cclegacy,o=e._decorator,i=e.Label,n=e.Node,a=e.UITransform,s=e.sp,d=e.assetManager,l=e.Color,c=e.SpriteFrame,h=e.Sprite},function(e){r=e.default},function(e){u=e.NodeUtils}],execute:function(){var b;t._RF.push({},"f88dfHUJjhAA49cK35GzwaK","MoneyComingUIManager",void 0);var g=o.ccclass;o.property,e("MoneyComingUIManager",g("MoneyComingUIManager")(b=function(){function e(e,t,o,i,n,a,s,d,l,c,h,r,u,b,g){this.balanceLabel=void 0,this.betAmountLabel=void 0,this.winAmountLabel=void 0,this.spinBtn=void 0,this.autoBtn=void 0,this.fastBtn=void 0,this.betBtn=void 0,this.betSelectionNode=void 0,this.bet1UnlockNode=void 0,this.bet5UnlockNode=void 0,this.bet10UnlockNode=void 0,this.bet50UnlockNode=void 0,this.luckyWheels=void 0,this.brandTextAnimNode=void 0,this.featureNode=void 0,this.balanceLabel=e,this.betAmountLabel=t,this.winAmountLabel=o,this.spinBtn=i,this.autoBtn=n,this.fastBtn=a,this.betBtn=s,this.betSelectionNode=d,this.bet1UnlockNode=l,this.bet5UnlockNode=c,this.bet10UnlockNode=h,this.bet50UnlockNode=r,this.luckyWheels=u,this.brandTextAnimNode=b,this.featureNode=g}var t=e.prototype;return t.updateUnlockLevels=function(e){this.hideFeaturePanel(),[1,5,10].includes(e)?this.playBrandTextAnimation("down_start","down_cycle"):this.playBrandTextAnimation("up_start","up_cycle"),this.bet1UnlockNode.active=!1,this.bet5UnlockNode.active=!1,this.bet10UnlockNode.active=!1,this.bet50UnlockNode.active=!1;var t=this.luckyWheels.getChildByPath("wheel1_5_10"),o=this.luckyWheels.getChildByPath("wheel50_100"),i=null==t?void 0:t.getChildByName("money"),n=null==t?void 0:t.getChildByName("money_upgrade"),a=null==o?void 0:o.getChildByName("money"),s=null==o?void 0:o.getChildByName("money_upgrade");switch(e){case 1:this.bet1UnlockNode.active=!0,t.active=!0,o.active=!1,u.setNodeOpacity(i,255),u.setNodeOpacity(n,0),this.bet1UnlockNode.setPosition(this.bet1UnlockNode.position.x,-30,this.bet1UnlockNode.position.z),this.bet5UnlockNode.active=!0,this.bet5UnlockNode.setPosition(this.bet5UnlockNode.position.x,30,this.bet5UnlockNode.position.z),Log.d("[MoneyComingUIManager] Bet1: bet1UnlockNode.active="+this.bet1UnlockNode.active+", bet5UnlockNode.active="+this.bet5UnlockNode.active);break;case 5:this.bet5UnlockNode.active=!0,t.active=!0,o.active=!1,u.setNodeOpacity(i,255),u.setNodeOpacity(n,0),this.bet5UnlockNode.setPosition(this.bet5UnlockNode.position.x,-30,this.bet5UnlockNode.position.z),this.bet10UnlockNode.active=!0,this.bet10UnlockNode.setPosition(this.bet10UnlockNode.position.x,30,this.bet10UnlockNode.position.z);break;case 10:this.bet10UnlockNode.active=!0,t.active=!0,o.active=!1,u.setNodeOpacity(i,0),u.setNodeOpacity(n,255),this.bet10UnlockNode.setPosition(this.bet10UnlockNode.position.x,-30,this.bet10UnlockNode.position.z),this.bet50UnlockNode.active=!0,this.bet50UnlockNode.setPosition(this.bet50UnlockNode.position.x,30,this.bet50UnlockNode.position.z);break;case 50:t.active=!1,o.active=!0,u.setNodeOpacity(a,255),u.setNodeOpacity(s,0),this.bet10UnlockNode.active=!0,this.bet10UnlockNode.setPosition(this.bet10UnlockNode.position.x,-30,this.bet10UnlockNode.position.z),this.bet50UnlockNode.active=!0,this.bet50UnlockNode.setPosition(this.bet50UnlockNode.position.x,30,this.bet50UnlockNode.position.z);break;case 100:t.active=!1,o.active=!0,u.setNodeOpacity(a,0),u.setNodeOpacity(s,255),this.bet10UnlockNode.active=!0,this.bet10UnlockNode.setPosition(this.bet10UnlockNode.position.x,-30,this.bet10UnlockNode.position.z),this.bet50UnlockNode.active=!0,this.bet50UnlockNode.setPosition(this.bet50UnlockNode.position.x,30,this.bet50UnlockNode.position.z)}},t.showFeaturePanel=function(e,t,o){var n,a;if(void 0===t&&(t="all_respin"),void 0===o&&(o=1),this.brandTextAnimNode&&this.featureNode){Log.d("[MoneyComingUIManager] showFeaturePanel called. featureType: "+t+", betAmount: "+o),Log.d("[MoneyComingUIManager] Before: text.active="+this.brandTextAnimNode.active+", feature.active="+this.featureNode.active),this.brandTextAnimNode.active=!1,this.featureNode.active=!0;var s=this.featureNode.getChildByPath("right");if(s){var d=s.getChildByName("all_respin"),l=s.getChildByName("scatter"),c=s.getChildByName("scatter_50_100");d&&(d.active=!1),l&&(l.active=!1),c&&(c.active=!1),"all_respin"===t&&d?(d.active=!0,Log.d("[MoneyComingUIManager] 激活 all_respin 节点")):"scatter"===t&&([50,100].includes(o)&&c?(c.active=!0,Log.d("[MoneyComingUIManager] 激活 scatter_50_100 节点")):l&&(l.active=!0,Log.d("[MoneyComingUIManager] 激活 scatter 节点")))}var h=null==(n=this.featureNode.getChildByPath("base_value"))?void 0:n.getComponent(i);h&&(h.string=e.toString());var r=null==(a=this.featureNode.getChildByPath("bonus_value"))?void 0:a.getComponent(i);r&&(r.string="0"),Log.d("[MoneyComingUIManager] After: text.active="+this.brandTextAnimNode.active+", feature.active="+this.featureNode.active)}},t.updateFeatureBonus=function(e){var t;if(this.featureNode&&this.featureNode.active){var o=null==(t=this.featureNode.getChildByPath("bonus_value"))?void 0:t.getComponent(i);o?(Log.d('[MoneyComingUIManager] bonusValueLabel found. Current string: "'+o.string+'", updating to: "'+e+'"'),o.string=e.toString()):Log.e("[MoneyComingUIManager] Label component not found on node with path 'bonus_value'!")}else Log.w("[MoneyComingUIManager] updateFeatureBonus called but featureNode is not active.")},t.hideFeaturePanel=function(){this.brandTextAnimNode&&this.featureNode&&this.featureNode.active&&(Log.d("[MoneyComingUIManager] hideFeaturePanel called."),Log.d("[MoneyComingUIManager] Before: text.active="+this.brandTextAnimNode.active+", feature.active="+this.featureNode.active),this.brandTextAnimNode.active=!0,this.featureNode.active=!1,Log.d("[MoneyComingUIManager] After: text.active="+this.brandTextAnimNode.active+", feature.active="+this.featureNode.active))},t.playBrandTextAnimation=function(e,t){if(this.brandTextAnimNode){var o=this.brandTextAnimNode.getChildByName("payboard_light_anim");o||(o=new n("payboard_light_anim"),this.brandTextAnimNode.addChild(o));o.setSiblingIndex(2),o.layer=this.brandTextAnimNode.layer;var i=o.getComponent(a);i||(i=o.addComponent(a));var l=this.brandTextAnimNode.getComponent(a);l&&i.setContentSize(l.contentSize);var c=o.getComponent(s.Skeleton);c||(c=o.addComponent(s.Skeleton)),c.premultipliedAlpha=!0;var h="spine/payboard_Light/payboard_Light",r=d.getBundle("moneyComing");r?r.load(h,s.SkeletonData,(function(o,i){!o&&c&&c.isValid?(c.skeletonData=i,c.setAnimation(0,e,!1)?c.setCompleteListener((function(){c.setAnimation(0,t,!0),c.setCompleteListener(null)})):(Log.w("[MoneyComingUIManager] Failed to play start animation: "+e),c.setAnimation(0,t,!0))):Log.e("[MoneyComingUIManager] Failed to load skeleton data for "+h,o)})):Log.e("[MoneyComingUIManager] Cannot find bundle: moneyComing")}else Log.w("[MoneyComingUIManager] brandTextAnimNode is not available.")},t.toggleBetSelection=function(e){if(this.betSelectionNode&&(this.betSelectionNode.active=!this.betSelectionNode.active,this.betSelectionNode.active)){var t=this.betSelectionNode.getComponent(r);t&&t.highlightBet(e)}},t.hideBetSelection=function(){this.betSelectionNode&&(this.betSelectionNode.active=!1)},t.updateBalance=function(e){this.balanceLabel&&(this.balanceLabel.string=""+e.toFixed(2))},t.updateBetAmount=function(e){this.betAmountLabel&&(this.betAmountLabel.string=""+e)},t.updateWinAmount=function(e){this.winAmountLabel&&(this.winAmountLabel.string=""+e.toFixed(2))},t.setSpinButtonState=function(e){this.spinBtn&&(Log.d("[MoneyComingUIManager] setSpinButtonState: 设置Spin按钮interactable -> "+e),this.spinBtn.interactable=e)},t.setBetButtonState=function(e){this.betBtn&&(this.betBtn.interactable=e)},t.setAutoButtonState=function(e){this.autoBtn&&(this.autoBtn.interactable=e)},t.updateAutoButtonLabel=function(e){if(this.autoBtn){var t=this.autoBtn.node.getChildByName("Label");if(t){var o=t.getComponent(i);if(o)if(/^\d+$/.test(e)){o.string=e,o.fontSize=40,o.lineHeight=40,o.color=new l(0,0,0,255);var n=this.autoBtn.node.getChildByName("icon")||this.autoBtn.node.getChildByName("Sprite");n&&(n.active=!1),t.setPosition(0,0,0)}else{o.string=e,o.fontSize=20,o.lineHeight=20,o.color=new l(255,255,255,255);var a=this.autoBtn.node.getChildByName("icon")||this.autoBtn.node.getChildByName("Sprite");a&&(a.active=!0),t.setPosition(0,-35,0)}}}},t.updateTurboButtonState=function(e){var t=this;if(this.fastBtn){var o="";if(0===e?o="texture/ui/controls/normal":1===e?o="texture/ui/controls/turbo":2===e&&(o="texture/ui/controls/super_turbo"),o){var i=d.getBundle("moneyComing");i?i.load(o+"/spriteFrame",c,(function(e,i){if(!e&&i){var n=t.fastBtn.node.getComponent(h);n?n.spriteFrame=i:Log.w("[MoneyComingUIManager] Sprite component not found on turbo button")}else Log.e("[MoneyComingUIManager] Failed to load turbo button image: "+o,e)})):Log.e("[MoneyComingUIManager] Cannot find moneyComing bundle")}}},t.highlightSelectedBet=function(e){if(this.betSelectionNode){var t=this.betSelectionNode.getComponent(r);t&&t.highlightBet(e)}},e}())||b);t._RF.pop()}}}));

System.register("chunks:///_virtual/MoneyComingView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MoneyComingController.ts","./MoneyComingUIManager.ts","./MoneyComingAudio.ts","./GameView.ts","./Decorators.ts","./Macros.ts","./Wheel.ts","./LuckyWheelRotator.ts","./BetSelectionView.ts"],(function(e){var n,t,i,o,l,a,r,u,c,s,h,w,b,p,f,g,d,y,m,C,_,k,B;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){l=e.cclegacy,a=e._decorator,r=e.Label,u=e.Button,c=e.Node,s=e.Sprite,h=e.sp,w=e.tween,b=e.UITransform,p=e.Widget},function(e){f=e.MoneyComingController},function(e){g=e.MoneyComingUIManager},function(e){d=e.MoneyComingAudio},function(e){y=e.default},function(e){m=e.inject},function(e){C=e.Macro},function(e){_=e.Wheel},function(e){k=e.LuckyWheelRotator},function(e){B=e.default}],execute:function(){var N,v,M,L,S,A,z,V,E,U,T,W,D,x,F,H,O,P,R,I,G,j,Q,X,Y,q,J,K,Z,$,ee,ne,te,ie,oe,le,ae,re,ue,ce,se,he,we,be,pe,fe,ge,de,ye,me,Ce,_e,ke,Be,Ne,ve,Me;l._RF.push({},"df59bbXLYdNfL78MrQS21r3","MoneyComingView",void 0);var Le=a.ccclass;e("default",(N=Le("MoneyComingView"),v=m("control_panel/controls/layout/balance/value",r),M=m("control_panel/controls/layout/bet/value",r),L=m("control_panel/controls/layout/win/value",r),S=m("control_panel/controls/layout/spin",u),A=m("control_panel/controls/layout/auto",u),z=m("control_panel/controls/layout/turbo",u),V=m("control_panel/controls/layout/bet/btn",u),E=m("control_panel/controls/layout/setting",u),U=m("back",c),T=m("wheelsContainer",c),W=m("wheels_container/wheels_layout/wheel_frame/wheels/wheel1",c),D=m("wheels_container/wheels_layout/wheel_frame/wheels/wheel2",c),x=m("wheels_container/wheels_layout/wheel_frame/wheels/wheel3",c),F=m("wheels_container/wheels_layout/wheel_frame/wheels/wheel_feature",c),H=m("control_panel/controls/betSelection",c),O=m("lucky_wheel/wheels",c),P=m("lucky_wheel/brand/board/text/bet1unlock",c),R=m("lucky_wheel/brand/board/text/bet5unlock",c),I=m("lucky_wheel/brand/board/text/bet10unlock",c),G=m("lucky_wheel/brand/board/text/bet50unlock",c),j=m("lucky_wheel/brand/board/text",c),Q=m("lucky_wheel/brand/board/feature",c),X=m("bg_sprite",s),Y=m("win_effect",c),q=m("win_effect/win_back",h.Skeleton),J=m("win_effect/point",h.Skeleton),K=m("win_effect/win_front",h.Skeleton),N((ee=n(($=function(e){function n(){for(var n,t=arguments.length,l=new Array(t),a=0;a<t;a++)l[a]=arguments[a];return n=e.call.apply(e,[this].concat(l))||this,i(n,"balanceLabel",ee,o(n)),i(n,"betAmountLabel",ne,o(n)),i(n,"winAmountLabel",te,o(n)),i(n,"spinBtn",ie,o(n)),i(n,"autoBtn",oe,o(n)),i(n,"fastBtn",le,o(n)),i(n,"betBtn",ae,o(n)),i(n,"settingBtn",re,o(n)),i(n,"goBackBtn",ue,o(n)),i(n,"wheelsContainer",ce,o(n)),i(n,"wheel1Node",se,o(n)),i(n,"wheel2Node",he,o(n)),i(n,"wheel3Node",we,o(n)),i(n,"wheelFeatureNode",be,o(n)),i(n,"betSelectionNode",pe,o(n)),i(n,"luckyWheels",fe,o(n)),i(n,"bet1UnlockNode",ge,o(n)),i(n,"bet5UnlockNode",de,o(n)),i(n,"bet10UnlockNode",ye,o(n)),i(n,"bet50UnlockNode",me,o(n)),i(n,"brandTextAnimNode",Ce,o(n)),i(n,"featureNode",_e,o(n)),i(n,"bgSprite",ke,o(n)),i(n,"winEffect",Be,o(n)),i(n,"winBack",Ne,o(n)),i(n,"point",ve,o(n)),i(n,"winFront",Me,o(n)),n.wheels=[],n.controller=null,n.uiManager=null,n.audioManager=null,n}t(n,e),n.getPrefabUrl=function(){return"prefabs/MoneyComingView"};var l=n.prototype;return l.onLoad=function(){e.prototype.onLoad.call(this),this.initWheels(),this.uiManager=new g(this.balanceLabel,this.betAmountLabel,this.winAmountLabel,this.spinBtn,this.autoBtn,this.fastBtn,this.betBtn,this.betSelectionNode,this.bet1UnlockNode,this.bet5UnlockNode,this.bet10UnlockNode,this.bet50UnlockNode,this.luckyWheels,this.brandTextAnimNode,this.featureNode),this.audioManager=new d(this.audioHelper,this.bundle),this.controller=new f(this,this.wheels,this.uiManager,this.audioManager,this.luckyWheels),this.controller.initialize(),this.uiManager.updateUnlockLevels(this.controller.betAmount);var n=this.betSelectionNode.getComponent(B);n&&n.setController(this.controller),this.betSelectionNode.active=!1,this.audioManager.playBgMusic(),this.setupBackground(),this.bindEvents(),this.initLuckyWheelRotation(),this.uiManager.updateBalance(this.controller.balance),this.uiManager.updateBetAmount(this.controller.betAmount),this.uiManager.updateWinAmount(this.controller.winAmount)},l.onDestroy=function(){e.prototype.onDestroy.call(this)},l.playWinEffect=function(e,n,t){var i=this;if(!this.winEffect)return console.error("MoneyComingView: winEffect node is not assigned or not found."),void(t&&t());this.winEffect.active=!0;var o=this.point.getComponentInChildren(r);if(o){var l={value:1};w(l).to(5.5,{value:n},{easing:"cubicOut",onUpdate:function(){o&&o.isValid&&(o.string=l.value.toFixed(2))}}).start()}else console.warn("MoneyComingView: winAmountLabelInPoint (Label) is not assigned. Cannot display win amount in big win effect.");if(!this.winBack||!this.point||!this.winFront)return console.error("MoneyComingView: One or more spine animations (winBack, point, winFront) are not assigned."),void(t&&t());var a=e+"win_start",u=e+"win_cycle";"mega"!==e&&"super"!==e||this.playChildAnimation(this.winEffect,"win_back",a,!1),this.playChildAnimation(this.winEffect,"point","win_start",!1),this.playChildAnimation(this.winEffect,"win_front",a,!1),this.winBack.setCompleteListener((function(){i.winBack.setCompleteListener(null),i.playChildAnimation(i.winEffect,"win_back",u,!0),i.playChildAnimation(i.winEffect,"point","win_cycle",!0),i.scheduleOnce((function(){i.winEffect.active=!1,t&&t()}),5)}))},l.playChildAnimation=function(e,n,t,i){var o=e.getChildByName(n);if(o){var l=o.getComponent(h.Skeleton);l&&l.skeletonData?(l.setAnimation(0,t,i),Log.d("[MoneyComingView] 正在播放动画: 节点='"+n+"', 动画='"+t+"'")):Log.e("[MoneyComingView] playChildAnimation: 子节点 "+n+" 上没有 Spine 组件或 skeletonData")}else Log.e("[MoneyComingView] playChildAnimation: 找不到子节点 "+n)},l.bindEvents=function(){this.spinBtn&&this.onN(this.spinBtn.node,c.EventType.TOUCH_END,this.onSpinClick),this.autoBtn&&this.onN(this.autoBtn.node,c.EventType.TOUCH_END,this.onAutoClick),this.fastBtn&&this.onN(this.fastBtn.node,c.EventType.TOUCH_END,this.onTurboClick),this.betBtn&&this.onN(this.betBtn.node,c.EventType.TOUCH_END,this.onBetBtnClick),this.settingBtn&&this.onN(this.settingBtn.node,c.EventType.TOUCH_END,this.onSettingClick),this.goBackBtn&&this.onN(this.goBackBtn,c.EventType.TOUCH_END,this.onGoBack),this.onD("moneyComing:balance_update",this.onBalanceUpdate)},l.initWheels=function(){var e=this;this.wheels=[],[this.wheel1Node||this.findNode("wheels_layout/wheels/wheel1"),this.wheel2Node||this.findNode("wheels_layout/wheels/wheel2"),this.wheel3Node||this.findNode("wheels_layout/wheels/wheel3"),this.wheelFeatureNode||this.findNode("wheels_layout/wheels/wheel_feature")].forEach((function(n,t){if(n){var i=n.getComponent(_);i||(i=n.addComponent(_));var o=n.getChildByName("symbol_container");if(o&&(i.symbolContainer=o,o.children.length>0)){var l=o.children[0].getComponent(b);l&&l.height>0&&(i.symbolHeight=l.height)}i.wheelType=t<3?"coin":"feature",i.bundle=e.bundle,e.wheels.push(i)}else Log.w("[MoneyComingView] 未找到滚轮 "+(t+1)+" 节点")})),4!==this.wheels.length&&Log.e("[MoneyComingView] 滚轮初始化失败，期望4个，实际"+this.wheels.length+"个")},l.findNode=function(e){return this.wheelsContainer&&this.wheelsContainer.getChildByPath(e)||null},l.onSpinClick=function(){this.controller.onSpinClick()},l.onAutoClick=function(){this.controller.onAutoClick()},l.onTurboClick=function(){this.controller.onTurboClick()},l.onBetBtnClick=function(){this.controller.onBetBtnClick()},l.onSettingClick=function(){App.tips.show("设置功能待实现")},l.onGoBack=function(){this.enterBundle(C.BUNDLE_HALL)},l.onBalanceUpdate=function(e){this.controller.onBalanceUpdate(e)},l.setupBackground=function(){if(this.bgSprite&&this.bgSprite.node){var e=this.bgSprite.node.getComponent(p);e||((e=this.bgSprite.node.addComponent(p)).isAlignTop=!0,e.isAlignBottom=!0,e.isAlignLeft=!0,e.isAlignRight=!0,e.top=0,e.bottom=0,e.left=0,e.right=0,e.updateAlignment())}},l.initLuckyWheelRotation=function(){if(this.luckyWheels){var e=this.luckyWheels.getChildByPath("wheel1_5_10"),n=this.luckyWheels.getChildByPath("wheel50_100");if(e){var t=e.getChildByName("money");if(t){t.active=!0;var i=t.getComponent(k);i||((i=t.addComponent(k)).rotationSpeed=-10,i.autoStart=!0),Log.d("[MoneyComingView] wheel1_5_10 的 money 节点已添加旋转组件")}else Log.w("[MoneyComingView] wheel1_5_10 下未找到 money 节点");var o=e.getChildByName("money_upgrade");if(o){o.active=!0;var l=o.getComponent(k);l||((l=o.addComponent(k)).rotationSpeed=-10,l.autoStart=!0),Log.d("[MoneyComingView] wheel1_5_10 的 money_upgrade 节点已添加旋转组件")}else Log.w("[MoneyComingView] wheel1_5_10 下未找到 money_upgrade 节点");var a=e.getChildByName("money_bg");if(a){a.active=!0;var r=a.getComponent(k);r||((r=a.addComponent(k)).rotationSpeed=-10,r.autoStart=!0),Log.d("[MoneyComingView] wheel1_5_10 的 money_bg 节点已添加旋转组件")}else Log.w("[MoneyComingView] wheel1_5_10 下未找到 money_bg 节点")}else Log.w("[MoneyComingView] wheel1_5_10 节点未找到");if(n){var u=n.getChildByName("money");if(u){u.active=!0;var c=u.getComponent(k);c||((c=u.addComponent(k)).rotationSpeed=-10,c.autoStart=!0),Log.d("[MoneyComingView] wheel50_100 的 money 节点已添加旋转组件")}else Log.w("[MoneyComingView] wheel50_100 下未找到 money 节点");var s=n.getChildByName("money_upgrade");if(s){s.active=!0;var h=s.getComponent(k);h||((h=s.addComponent(k)).rotationSpeed=-10,h.autoStart=!0),Log.d("[MoneyComingView] wheel50_100 的 money_upgrade 节点已添加旋转组件")}else Log.w("[MoneyComingView] wheel50_100 下未找到 money_upgrade 节点");var w=n.getChildByName("money_bg");if(w){w.active=!0;var b=w.getComponent(k);b||((b=w.addComponent(k)).rotationSpeed=-10,b.autoStart=!0),Log.d("[MoneyComingView] wheel50_100 的 money_bg 节点已添加旋转组件")}else Log.w("[MoneyComingView] wheel50_100 下未找到 money_bg 节点")}else Log.w("[MoneyComingView] wheel50_100 节点未找到")}else Log.w("[MoneyComingView] luckyWheels 节点未找到")},n}(y)).prototype,"balanceLabel",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=n($.prototype,"betAmountLabel",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=n($.prototype,"winAmountLabel",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=n($.prototype,"spinBtn",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=n($.prototype,"autoBtn",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),le=n($.prototype,"fastBtn",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=n($.prototype,"betBtn",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),re=n($.prototype,"settingBtn",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ue=n($.prototype,"goBackBtn",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ce=n($.prototype,"wheelsContainer",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),se=n($.prototype,"wheel1Node",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),he=n($.prototype,"wheel2Node",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),we=n($.prototype,"wheel3Node",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),be=n($.prototype,"wheelFeatureNode",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pe=n($.prototype,"betSelectionNode",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),fe=n($.prototype,"luckyWheels",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ge=n($.prototype,"bet1UnlockNode",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),de=n($.prototype,"bet5UnlockNode",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ye=n($.prototype,"bet10UnlockNode",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),me=n($.prototype,"bet50UnlockNode",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ce=n($.prototype,"brandTextAnimNode",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_e=n($.prototype,"featureNode",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ke=n($.prototype,"bgSprite",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Be=n($.prototype,"winEffect",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ne=n($.prototype,"winBack",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ve=n($.prototype,"point",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Me=n($.prototype,"winFront",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=$))||Z));l._RF.pop()}}}));

System.register("chunks:///_virtual/nodeUtils.ts",["cc"],(function(t){var n,e;return{setters:[function(t){n=t.cclegacy,e=t.UIOpacity}],execute:function(){n._RF.push({},"f1e2dPEtaaXgP7cuph2VDIQ","nodeUtils",void 0);t("NodeUtils",function(){function t(){}return t.setNodeOpacity=function(t,n){if(t){var c=t.getComponent(e);c||(c=t.addComponent(e)),c.opacity=n}},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/RespinManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MoneyComingConfig.ts","./SymbolAnimator.ts","./AnimationUtils.ts"],(function(e){var t,n,i,s,a,o;return{setters:[function(e){t=e.createClass},function(e){n=e.cclegacy,i=e.find},function(e){s=e.MoneyComingConfig},function(e){a=e.SymbolAnimator},function(e){o=e.AnimationUtils}],execute:function(){n._RF.push({},"bc611ZD+pVNIb9Xv4FcAUTv","RespinManager",void 0);e("RespinManager",function(){function e(e,t,n,i,s,a){this.view=void 0,this.wheels=void 0,this.audioManager=void 0,this.uiManager=void 0,this.animationController=void 0,this.betManager=void 0,this._isRespin=!1,this._initialBaseWin=0,this._completedWheels=0,this._respinResults=[],this._onRespinCompleteCallback=null,this.view=e,this.wheels=t,this.audioManager=n,this.uiManager=i,this.animationController=s,this.betManager=a}var n=e.prototype;return n.setOnRespinCompleteCallback=function(e){this._onRespinCompleteCallback=e},n.handleAllRespin=function(e){var t=this;Log.d("[RespinManager] handleAllRespin called with results: ["+e.join(", ")+"]"),this._isRespin=!0;for(var n="",a=1===this.betManager.betAmount?2:3,l=0;l<a;l++){var r=e[l];r&&r.startsWith(s.constants.elementPrefix)&&(n+=r.replace(s.constants.elementPrefix,""))}this._initialBaseWin=""===n||isNaN(parseInt(n,10))?0:parseInt(n,10),Log.d("[RespinManager] All Respin 触发，初始基础奖励: "+this._initialBaseWin),this.uiManager.showFeaturePanel(this._initialBaseWin),this.prepareRespin();for(var p=this.wheels[3].node,u=1===this.betManager.betAmount?2:3,h=[],c=0;c<u;c++)h.push(this.wheels[c].node);var m=this.view.node,d=i("Canvas");d&&(m=d),Log.d("[RespinManager] Animation setup: startNode="+p.name+", parentNode="+m.name+", activeWheelCount="+u),this.audioManager.playEffect(s.audio.allRespin),this.audioManager.playEffect(s.audio.allRespinScatter);for(var f=0,g=h.length,R=function(e){Log.d("[RespinManager] Playing animation from "+p.name+" to "+h[e].name),o.playImage(s.constants.bundleName,p,h[e],m,(function(){t.wheels[e].startSpin(),t.animationController.playExpectAnimation(t.wheels[e].node),++f===g&&t.scheduleStopRespin()}))},b=0;b<h.length;b++)R(b)},n.startWheelSpin=function(e){this.wheels[e].startSpin(),this.animationController.playExpectAnimation(this.wheels[e].node)},n.prepareRespin=function(){for(var e=[s.constants.elementPrefix+"0",s.constants.elementPrefix+"00",s.constants.elementPrefix+"1",s.constants.elementPrefix+"5",s.constants.elementPrefix+"10"],t=[],n=1===this.betManager.betAmount?2:3,i=0;i<n;i++)t.push(Math.random()<s.gameplay.symbolProbability?e[Math.floor(Math.random()*e.length)]:"");1===this.betManager.betAmount&&t.push(""),this._respinResults=[].concat(t,[s.constants.featureAllRespinKeyword]),Log.d("[RespinManager] All Respin 重转结果: ["+t.join(", ")+"]")},n.startWheelSpin=function(e){this.wheels[e].startSpin(),this.animationController.playExpectAnimation(this.wheels[e].node)},n.scheduleStopRespin=function(){var e=this;this._completedWheels=0;var t,n,i=this.wheels[3],o=i.getDisplayedElement();if(o){var l=o.getWorldPosition();a.playAnimationAt(i.node,l,s.constants.featureAllRespinKeyword,s.constants.bundleName,!0,1)}switch(this.getTurboModeState()){case 1:t=s.simultaneousStop.turbo.scrollDuration,n=s.simultaneousStop.turbo.stopDuration;break;case 2:t=s.simultaneousStop.superTurbo.scrollDuration,n=s.simultaneousStop.superTurbo.stopDuration;break;default:t=s.simultaneousStop.normal.scrollDuration,n=s.simultaneousStop.normal.stopDuration}this.view.scheduleOnce((function(){for(var t=1===e.betManager.betAmount?2:3,i=function(){e.audioManager.playEffect(s.audio.spinOver);var i=e.wheels[a];i.stop(e._respinResults[a],(function(){e.animationController.stopExpectAnimation(i.node),e._completedWheels++,e._completedWheels>=t&&e.onRespinWheelsStopped()}),n)},a=0;a<t;a++)i()}),t)},n.onRespinWheelsStopped=function(){this._isRespin=!1;for(var e="",t=1===this.betManager.betAmount?2:3,n=0;n<t;n++){var i=this._respinResults[n];i&&i.startsWith(s.constants.elementPrefix)&&(e+=i.replace(s.constants.elementPrefix,""))}var a=""===e||isNaN(parseInt(e,10))?0:parseInt(e,10);Log.d("[RespinManager] All Respin 重转基础奖励: "+a),this.uiManager.updateFeatureBonus(a);var o=this._initialBaseWin+a;Log.d("[RespinManager] All Respin 总奖励: "+o),this._initialBaseWin=0,this._onRespinCompleteCallback&&this._onRespinCompleteCallback(o,this._respinResults)},n.getTurboModeState=function(){return 0},n.setTurboModeStateGetter=function(e){this.getTurboModeState=e},t(e,[{key:"isRespin",get:function(){return this._isRespin}}]),e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/SpinManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MoneyComingConfig.ts"],(function(e){var t,i,n;return{setters:[function(e){t=e.createClass},function(e){i=e.cclegacy},function(e){n=e.MoneyComingConfig}],execute:function(){i._RF.push({},"45316zlt5RJe6mfQ7Raa7FV","SpinManager",void 0);e("SpinManager",function(){function e(e,t,i,n){this.view=void 0,this.wheels=void 0,this.audioManager=void 0,this.betManager=void 0,this._isSpinning=!1,this._completedWheels=0,this._spinResults=[],this._turboModeState=0,this._onAllWheelsStoppedCallback=null,this.view=e,this.wheels=t,this.audioManager=i,this.betManager=n}var i=e.prototype;return i.setOnAllWheelsStoppedCallback=function(e){this._onAllWheelsStoppedCallback=e},i.startSpin=function(){var e=this;if(4!==this.wheels.length)return Log.e("[SpinManager] 滚轮数量不正确，无法开始滚动"),Log.d("[SpinManager] isSpinning 状态改变: "+this._isSpinning+" -> false"),void(this._isSpinning=!1);Log.d("[SpinManager] isSpinning 状态改变: "+this._isSpinning+" -> true"),this._isSpinning=!0,this._completedWheels=0,this._spinResults=this.betManager.generateSpinResults(),Log.d("[SpinManager] 生成随机结果: ["+this._spinResults.join(", ")+"]"),Log.d("[SpinManager] 普通模式，开始滚动动画"),this.wheels.forEach((function(t,i){1===e.betManager.betAmount&&2===i||t.startSpin()}));var t=n.sequentialStop.initialStopDelay;this.view.scheduleOnce((function(){e.stopWheel(3)}),t)},i.startTurboSpin=function(){var e=this;Log.d("[SpinManager] Turbo 模式，快速共同停止"),Log.d("[SpinManager] isSpinning 状态改变: "+this._isSpinning+" -> true"),this._isSpinning=!0,this._completedWheels=0,this._spinResults=this.betManager.generateSpinResults(),Log.d("[SpinManager] 生成随机结果: ["+this._spinResults.join(", ")+"]"),this.wheels.forEach((function(t,i){1===e.betManager.betAmount&&2===i||t.startSpin()}));var t=0,i=0;1===this._turboModeState?(t=n.simultaneousStop.turbo.scrollDuration,i=n.simultaneousStop.turbo.stopDuration):2===this._turboModeState&&(t=n.simultaneousStop.superTurbo.scrollDuration,i=n.simultaneousStop.superTurbo.stopDuration),this.view.scheduleOnce((function(){e.wheels.forEach((function(t,n){if(1!==e.betManager.betAmount||2!==n){var s=e._spinResults[n];t.stop(s,(function(){e._completedWheels++,e._completedWheels>=e.wheels.length&&e.onAllWheelsStopped()}),i)}else e._completedWheels++}))}),t)},i.stopWheel=function(e){var t=this;if(e<0)this.onAllWheelsStopped();else if(1!==this.betManager.betAmount||2!==e){var i=this.wheels[e],s=this._spinResults[e];0===this._turboModeState&&(3===e&&s?this.audioManager.playEffect(n.audio.feature):this.audioManager.playEffect(n.audio.spinOver));var o=n.sequentialStop.wheelStopInterval;i.stop(s,(function(){t._completedWheels++,t.view.scheduleOnce((function(){t.stopWheel(e-1)}),o)}))}else{this._completedWheels++;var a=n.sequentialStop.wheelStopInterval;this.view.scheduleOnce((function(){t.stopWheel(e-1)}),a)}},i.onAllWheelsStopped=function(){Log.d("[SpinManager] 所有转轮停止，最终结果: ["+this._spinResults.join(", ")+"]"),this._onAllWheelsStoppedCallback&&this._onAllWheelsStoppedCallback(this._spinResults)},i.resetSpinState=function(){Log.d("[SpinManager] isSpinning 状态改变: "+this._isSpinning+" -> false"),this._isSpinning=!1},t(e,[{key:"isSpinning",get:function(){return this._isSpinning}},{key:"turboModeState",get:function(){return this._turboModeState},set:function(e){this._turboModeState=e}},{key:"spinResults",get:function(){return this._spinResults}}]),e}());i._RF.pop()}}}));

System.register("chunks:///_virtual/SymbolAnimator.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var o,n,t,i,s,a,l,r,m;return{setters:[function(e){o=e.inheritsLoose,n=e.createForOfIteratorHelperLoose},function(e){t=e.cclegacy,i=e._decorator,s=e.assetManager,a=e.sp,l=e.Node,r=e.UITransform,m=e.Component}],execute:function(){var y,_;t._RF.push({},"eb878R4x4ZG0qZof5+H1zFH","SymbolAnimator",void 0);var p=i.ccclass;e("SymbolAnimator",p("SymbolAnimator")(((_=function(e){function t(){return e.apply(this,arguments)||this}return o(t,e),t.playAnimationAt=function(e,o,n,t,i,m){void 0===i&&(i=!1),void 0===m&&(m=1),Log.d("[SymbolAnimator] playAnimationAt for "+n);var y=this.SPINE_PATH_MAP.get(n);if(y){var _=s.getBundle(t);_?_.load(y,a.SkeletonData,(function(t,s){if(!t&&e&&e.isValid){var _=new l("spine_anim_"+n+"_"+Date.now());e.addChild(_);var p=e.getComponent(r).convertToNodeSpaceAR(o);_.setPosition(p),_.layer=e.layer;var b=_.addComponent(a.Skeleton);b.skeletonData=s,b.premultipliedAlpha=!0,b.timeScale=m;var c="animation";b.findAnimation(c)?(b.setAnimation(0,c,i),i||b.setCompleteListener((function(){_&&_.isValid&&_.destroy()}))):(Log.w("[SymbolAnimator] spine 资源 "+y+" 中未找到名为 'animation' 的动画"),_.destroy())}else Log.e("[SymbolAnimator] 加载 spine 资源失败或父节点已销毁: "+y,t)})):Log.e("[SymbolAnimator] 无法获取 bundle: "+t)}else Log.w("[SymbolAnimator] 元素 "+n+" 没有对应的 spine 动画")},t.stopAllAnimations=function(e){if(e&&e.isValid){for(var o,t=[].concat(e.children),i=n(t);!(o=i()).done;){var s=o.value;s.name.startsWith("spine_anim_")&&s.destroy()}Log.d("[SymbolAnimator] 停止并销毁了 "+e.name+" 下的所有符号动画节点")}},t}(m)).SPINE_PATH_MAP=new Map([["element_0","spine/symbol/symbol_0"],["element_00","spine/symbol/symbol_00"],["element_1","spine/symbol/symbol_1"],["element_5","spine/symbol/symbol_5"],["element_10","spine/symbol/symbol_10"],["feature_x2","spine/symbol/symbol_2x"],["feature_x5","spine/symbol/symbol_5x"],["feature_x10","spine/symbol/symbol_10x"],["feature_all_respin","spine/symbol/symbol_all"],["feature_scatter","spine/symbol/symbol_scatter"],["feature_scatter_50_100","spine/symbol/symbol_scatter_red"]]),y=_))||y);t._RF.pop()}}}));

System.register("chunks:///_virtual/Wheel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SymbolAnimator.ts"],(function(t){var e,i,n,o,s,l,r,a,h,m,p,u,y,b,g,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,s=t.createForOfIteratorHelperLoose,l=t.createClass},function(t){r=t.cclegacy,a=t._decorator,h=t.Node,m=t.instantiate,p=t.Layout,u=t.UITransform,y=t.Vec3,b=t.tween,g=t.Component},function(t){c=t.SymbolAnimator}],execute:function(){var d,C,_,f,S,v,E,L,W,w,N,I,Y,D,P,H,x,z,T,M,V;r._RF.push({},"f9671e21kFBg73VXVIiaDhO","Wheel",void 0);var F=a.ccclass,A=a.property,k=function(t){return t[t.IDLE=0]="IDLE",t[t.SPINNING=1]="SPINNING",t[t.DECELERATING=2]="DECELERATING",t[t.BOUNCING=3]="BOUNCING",t}(k||{});t("Wheel",(d=F("Wheel"),C=A(h),_=A({group:"Physics",tooltip:"最大速度（像素/秒）"}),f=A({group:"Physics",tooltip:"加速度（像素/秒²）"}),S=A({group:"Physics",tooltip:"减速时使用的缓动函数"}),v=A({group:"Physics",tooltip:"减速到停止的总时长"}),E=A({group:"Physics",tooltip:"回弹效果的缓动函数"}),L=A({group:"Physics",tooltip:"回弹效果的时长"}),d((N=e((w=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),l=0;l<i;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,n(e,"symbolContainer",N,o(e)),n(e,"symbolHeight",I,o(e)),n(e,"wheelType",Y,o(e)),n(e,"containerHeight",D,o(e)),n(e,"elementSpacing",P,o(e)),e.bundle=null,n(e,"maxSpeed",H,o(e)),n(e,"acceleration",x,o(e)),n(e,"decelerationEasing",z,o(e)),n(e,"decelerationDuration",T,o(e)),n(e,"bounceEasing",M,o(e)),n(e,"bounceDuration",V,o(e)),e._isSpinning=!1,e._onSpinComplete=null,e._targetElementName="",e._symbolCount=0,e._elementMap=new Map,e._originalSymbolCount=0,e._currentVisibleElements=[],e._spinState=k.IDLE,e._currentSpeed=0,e._targetY=0,e._stopCallback=null,e._loopHeight=0,e._startY=0,e}i(e,t);var r=e.prototype;return r.onLoad=function(){var t=this;if(this.symbolContainer||(this.symbolContainer=this.node.getChildByName("symbol_container")||this.node),this.symbolContainer){var e=[].concat(this.symbolContainer.children);if(this._originalSymbolCount=e.length,this._elementMap.clear(),e.forEach((function(e){t._elementMap.set(e.name,m(e))})),this._originalSymbolCount>1){for(var i=Math.min(3,this._originalSymbolCount),n=0;n<i;n++){var o=e[this._originalSymbolCount-1-n],s=m(o);this.symbolContainer.insertChild(s,0)}for(var l=0;l<i;l++){var r=e[l],a=m(r);this.symbolContainer.addChild(a)}}var h=this.symbolContainer.getComponent(p);h&&(h.updateLayout(),h.enabled=!1),this._symbolCount=this.symbolContainer.children.length,this._originalSymbolCount>0&&(this._loopHeight=this.elementSpacing*(this._originalSymbolCount-1)+this.symbolHeight),Log.d("[Wheel] 初始化完成，元素数量: "+this._symbolCount+", 原始元素数量: "+this._originalSymbolCount+", 模板数量: "+this._elementMap.size)}if(this.symbolHeight<=0&&this.symbolContainer&&this.symbolContainer.children.length>0){var y=this.symbolContainer.children[0].getComponent(u);y&&(this.symbolHeight=y.height)}this.resetToInitialPosition()},r.resetToInitialPosition=function(){if(this.symbolContainer&&0!==this.symbolContainer.children.length){var t=(this._symbolCount-this._originalSymbolCount)/2,e=this.symbolContainer.children[t];if(!e){var i=this.symbolContainer.children[0].position.y;return this.symbolContainer.position=new y(this.symbolContainer.position.x,-i,0),void Log.w("[Wheel] 无法找到第一个原始元素，已重置到第一个可用元素。")}var n=e.position.y;this._startY=-n,this.symbolContainer.position=new y(this.symbolContainer.position.x,this._startY,0)}},r.startSpin=function(t,e,i){if(void 0===t&&(t=""),b(this.symbolContainer).stop(),!this._isSpinning){if(0===this._originalSymbolCount)return Log.w("[Wheel] 滚轮中没有元素，无法启动"),void(i&&i(""));this._isSpinning=!0,this._spinState=k.SPINNING,this._currentSpeed=this.maxSpeed,this._onSpinComplete=i||null,this._targetElementName=t}},r.stop=function(t,e,i){if(Log.d('[Wheel] stop called: targetElementName="'+t+'", wheelType='+this.wheelType),!this._isSpinning||this._spinState!==k.SPINNING)return Log.d("[Wheel] stop: 滚轮未在滚动状态，直接回调"),void(e&&e());this._targetElementName=t,this._stopCallback=e||null;for(var n,o=null,l=[],r=this.symbolContainer.position.y,a=.2*this.maxSpeed,h=this._startY-this._loopHeight+a,m=this._startY-a,p=s(this.symbolContainer.children);!(n=p()).done;){var u=n.value;if(u.name.replace(/-clone.*$/,"")===t){var b=-u.position.y,g=b-r;g<0&&(g+=this._loopHeight),l.push({node:u,distance:g,targetY:b})}}if(l.length>0){var c=l.filter((function(t){return t.targetY>h&&t.targetY<m}));c.length>0?(c.sort((function(t,e){return t.distance-e.distance})),o=c[0].node,Log.d("[Wheel] 选择安全范围内的目标: targetY="+c[0].targetY.toFixed(2)+", 安全范围: ("+h.toFixed(2)+", "+m.toFixed(2)+")")):(l.sort((function(t,e){return t.distance-e.distance})),o=l[0].node,Log.w("[Wheel] 警告：没有安全范围内的目标，选择最近的: targetY="+l[0].targetY.toFixed(2)))}if(Log.d('[Wheel] stop: 从 symbolContainer.children 查找 "'+t+'": '+!!o),o)this._targetY=-o.position.y,Log.d('[Wheel] stop: 找到最佳目标元素 "'+t+'" at y='+o.position.y);else{var d=this.getClosestElement();if(d){var C=d.position.y;this._targetY=-C+this.symbolHeight/2+this.elementSpacing/2,Log.d("[Wheel] stop: 目标元素 '"+t+"' 未找到，将停在元素之间, targetY="+this._targetY)}else this._targetY=this.symbolContainer.position.y,Log.w("[Wheel] stop: 无法找到任何元素，使用当前位置")}this._spinState=k.IDLE,this.symbolContainer.position=new y(this.symbolContainer.position.x,this._targetY,0),this._onSpinFinished()},r.update=function(t){if(this._spinState===k.SPINNING){this._currentSpeed<this.maxSpeed&&(this._currentSpeed+=this.acceleration*t,this._currentSpeed>this.maxSpeed&&(this._currentSpeed=this.maxSpeed));var e=this.symbolContainer.position.y-this._currentSpeed*t;if(this._originalSymbolCount>1&&this._loopHeight>0)e<this._startY-this._loopHeight&&(e+=this._loopHeight);this.symbolContainer.position=new y(this.symbolContainer.position.x,e,0)}},r._onSpinFinished=function(){this._isSpinning=!1,this._spinState=k.IDLE,this.symbolContainer.position=new y(this.symbolContainer.position.x,this._targetY,0),Log.d("[Wheel] _onSpinFinished: targetElementName="+this._targetElementName+", finalY="+this._targetY);var t=this.getDisplayedElement();t?Log.d("[Wheel] _onSpinFinished: 实际显示的元素="+t.name+", elementY="+t.position.y+", containerY="+this.symbolContainer.position.y):Log.w("[Wheel] _onSpinFinished: 未找到显示的元素"),this._stopCallback&&(this._stopCallback(),this._stopCallback=null),this._onSpinComplete&&(this._onSpinComplete(this._targetElementName),this._onSpinComplete=null)},r.getDisplayedElement=function(){return this._targetElementName&&""!==this._targetElementName?this.findDisplayedElement(this._targetElementName):null},r.findDisplayedElement=function(t){if(!this.symbolContainer)return Log.w("[Wheel] symbolContainer 为空"),null;Log.d('[Wheel] findDisplayedElement: 查找元素 "'+t+'", symbolContainer 子节点数: '+this.symbolContainer.children.length);for(var e,i=[],n=s(this.symbolContainer.children);!(e=n()).done;){var o=e.value;i.push(o.name)}Log.d("[Wheel] symbolContainer 所有子节点: ["+i.join(", ")+"]");for(var l,r=null,a=1/0,h=s(this.symbolContainer.children);!(l=h()).done;){var m=l.value;if(m.name.replace(/-clone.*$/,"")===t){var p=m.position.y,u=this.symbolContainer.position.y,y=Math.abs(u+p);Log.d("[Wheel] 找到匹配元素: "+m.name+", elementY="+p+", containerY="+u+", distance="+y),y<a&&(a=y,r=m)}}return r?(Log.d("[Wheel] 选择最近的元素: "+r.name+", distance="+a),r):(Log.w('[Wheel] 未找到名称为 "'+t+'" 的元素节点'),null)},r.showResult=function(t){b(this.symbolContainer).stop(),this._isSpinning=!1,this._spinState=k.IDLE,this._currentSpeed=0;var e=0,i=this._elementMap.get(t);if(i)e=-i.position.y;else{var n=this.getClosestElement();if(n)e=-n.position.y+this.symbolHeight/2+this.elementSpacing/2;else e=this.symbolContainer.position.y}if(this.symbolContainer.position=new y(this.symbolContainer.position.x,e,0),this._targetElementName=t,this._targetY=e,t&&""!==t&&this.bundle){var o=this.findDisplayedElement(t);if(o){Log.d("[Wheel] Turbo 模式播放动画 for "+t);var s=o.getWorldPosition();c.playAnimationAt(this.node,s,t,this.bundle)}}},r.reset=function(){b(this.symbolContainer).stop(),this._isSpinning=!1,this._spinState=k.IDLE,this.resetToInitialPosition()},r.getCurrentElementName=function(){return this.getClosestElement().name},r.getClosestElement=function(){for(var t,e=this.symbolContainer.position.y,i=null,n=1/0,o=s(this.symbolContainer.children);!(t=o()).done;){var l=t.value,r=l.position.y,a=Math.abs(e+r);a<n&&(n=a,i=l)}return i},r.setVisibleElements=function(t){var e=this;if(Log.d("[Wheel setVisibleElements] 被调用. Wheel Type: "+this.wheelType),Log.d("[Wheel setVisibleElements] 当前可见元素 (_currentVisibleElements): ["+this._currentVisibleElements.join(", ")+"]"),Log.d("[Wheel setVisibleElements] 新的可见元素 (visibleElements): ["+t.join(", ")+"]"),this.symbolContainer)if(0!==this._elementMap.size){0===t.length&&(t=Array.from(this._elementMap.keys()));var i=this._currentVisibleElements.length===t.length&&this._currentVisibleElements.every((function(e,i){return e===t[i]}));if(Log.d("[Wheel setVisibleElements] 列表是否相同 (isSameElements): "+i),i)Log.d("[Wheel] 可见元素列表未变化，跳过重建");else{this._spinState,k.IDLE;var n=this.symbolContainer.position.clone();b(this.symbolContainer).stop(),this._isSpinning=!1,this._spinState=k.IDLE;var o=this.symbolContainer.active;if(this.symbolContainer.active=!1,this.symbolContainer.removeAllChildren(),t.forEach((function(t){var i=e._elementMap.get(t);if(i){var n=m(i);e.symbolContainer.addChild(n)}else Log.w("[Wheel] 未找到元素: "+t)})),this._originalSymbolCount=this.symbolContainer.children.length,0!==this._originalSymbolCount){if(this._originalSymbolCount>1){for(var s=[].concat(this.symbolContainer.children),l=Math.min(3,this._originalSymbolCount),r=0;r<l;r++){var a=s[this._originalSymbolCount-1-r],h=m(a);this.symbolContainer.insertChild(h,0)}for(var u=0;u<l;u++){var y=s[u],g=m(y);this.symbolContainer.addChild(g)}}this._symbolCount=this.symbolContainer.children.length;var c=this.symbolContainer.getComponent(p);c&&(c.enabled=!1),this._manuallyLayoutChildren(),this._finalizePositionAfterRebuild(n,o),this._originalSymbolCount>0&&(this._loopHeight=this.elementSpacing*(this._originalSymbolCount-1)+this.symbolHeight),this._currentVisibleElements=[].concat(t),Log.d("[Wheel] 设置可见元素: ["+t.join(", ")+"]，总计 "+this._symbolCount+" 个节点")}else Log.w("[Wheel] 设置可见元素后没有任何元素，visibleElements: ["+t.join(", ")+"]")}}else Log.w("[Wheel] _elementMap 为空，等待 onLoad 完成后再调用");else Log.w("[Wheel] symbolContainer 未初始化")},r._manuallyLayoutChildren=function(){if(this.symbolContainer&&0!==this.symbolContainer.children.length){for(var t=0,e=0;e<this.symbolContainer.children.length;e++){var i=this.symbolContainer.children[e];0===e?t=0:t-=this.symbolHeight+this.elementSpacing,i.setPosition(0,t,0)}Log.d("[Wheel] 手动布局完成，共 "+this.symbolContainer.children.length+" 个子节点")}},r._finalizePositionAfterRebuild=function(t,e){if(void 0===e&&(e=!0),t&&this._currentVisibleElements.length>0){var i=(this._symbolCount-this._originalSymbolCount)/2,n=this.symbolContainer.children[i];if(n){var o=n.position.y;this._startY=-o,Log.d("[Wheel] 重建后重新计算 _startY = "+this._startY),this.resetToInitialPosition(),Log.d("[Wheel] 切换投注金额后重置到初始位置，确保不抖动")}else this.resetToInitialPosition()}else this.resetToInitialPosition();this.symbolContainer.active=e},l(e,[{key:"isSpinning",get:function(){return this._isSpinning}}]),e}(g)).prototype,"symbolContainer",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(w.prototype,"symbolHeight",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 166}}),Y=e(w.prototype,"wheelType",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"coin"}}),D=e(w.prototype,"containerHeight",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 316}}),P=e(w.prototype,"elementSpacing",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),H=e(w.prototype,"maxSpeed",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 4e3}}),x=e(w.prototype,"acceleration",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3e3}}),z=e(w.prototype,"decelerationEasing",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"quadOut"}}),T=e(w.prototype,"decelerationDuration",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.15}}),M=e(w.prototype,"bounceEasing",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"backOut"}}),V=e(w.prototype,"bounceDuration",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),W=w))||W));r._RF.pop()}}}));

System.register("chunks:///_virtual/WinManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MoneyComingConfig.ts","./SymbolAnimator.ts"],(function(e){var t,n,i,a;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){n=e.cclegacy},function(e){i=e.MoneyComingConfig},function(e){a=e.SymbolAnimator}],execute:function(){n._RF.push({},"f36baZcfhVPHJqnM3ca7vWf","WinManager",void 0);e("WinManager",function(){function e(e,t){this.wheels=void 0,this.audioManager=void 0,this.wheels=e,this.audioManager=t}var n=e.prototype;return n.calculateWinAmount=function(e,n){if(e.length<4)return 0;for(var a,r=1===n?2:3,o=e.slice(0,r),s=e[3],l="",f=t(o);!(a=f()).done;){var u=a.value;u&&u.startsWith(i.constants.elementPrefix)&&(l+=u.replace(i.constants.elementPrefix,""))}if(""===l)return 0;var c=parseInt(l,10);if(isNaN(c)||0===c)return 0;var g=1;return s===i.constants.featureMultiplierPrefix+"2"?g=2:s===i.constants.featureMultiplierPrefix+"5"?g=5:s===i.constants.featureMultiplierPrefix+"10"&&(g=10),c*g},n.playWinningAnimations=function(e,t,n){this.stopWinningAnimations();for(var r=1===t?2:3,o=e[3],s=!1,l="",f=0;f<r;f++)e[f]&&e[f].startsWith(i.constants.elementPrefix)&&(l+=e[f].replace(i.constants.elementPrefix,""));var u=l?parseInt(l,10):0;if(u>0){s=!0;for(var c=-1,g=0;g<r;g++){var m=e[g];if(m&&m.startsWith(i.constants.elementPrefix)){var p=m.replace(i.constants.elementPrefix,"");if("0"!==p&&"00"!==p){c=g;break}}}if(-1!==c)for(var h=c;h<r;h++)if(e[h]&&e[h].startsWith(i.constants.elementPrefix)){var v=this.wheels[h],d=v.getDisplayedElement();if(d){var W=d.getWorldPosition();a.playAnimationAt(v.node,W,e[h],i.constants.bundleName,!0)}}}if(o){var y=u>0&&o.startsWith(i.constants.featureMultiplierPrefix),M=o.includes(i.constants.featureScatterKeyword);if(y||M){s=!0;var P=this.wheels[3],A=P.getDisplayedElement();if(A){var x=A.getWorldPosition();a.playAnimationAt(P.node,x,o,i.constants.bundleName,!0)}}}s&&0===n&&this.audioManager.playWinSound()},n.playFeatureAnimation=function(e){if(e&&!(this.wheels.length<4)){var t=this.wheels[3],n=t.getDisplayedElement();if(n){var r=n.getWorldPosition();a.playAnimationAt(t.node,r,e,i.constants.bundleName,!0),Log.d("[WinManager] 播放 feature 动画: "+e)}else Log.w("[WinManager] 无法找到 feature 元素节点: "+e)}},n.stopWinningAnimations=function(){Log.d("[WinManager] 停止所有中奖动画");for(var e,n=t(this.wheels);!(e=n()).done;){var i=e.value;a.stopAllAnimations(i.node)}},e}());n._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/moneyComing', 'chunks:///_virtual/moneyComing'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});